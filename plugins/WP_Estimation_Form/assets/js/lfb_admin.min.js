
var lfb_isLinking=false;var lfb_links=new Array();var lfb_linkCurrentIndex=-1;var lfb_canvasTimer;var lfb_mouseX,lfb_mouseY;var lfb_linkGradientIndex=1;var lfb_itemWinTimer;var lfb_currentDomElement=false;var lfb_currentStep=false;var lfb_currentStepID=0;var lfb_lock=false;var lfb_defaultStep=false;var lfb_steps=false;var lfb_params;var lfb_currentLinkIndex=0;var lfb_settings;var lfb_formfield;var lfb_currentFormID=0;var lfb_actTimer;var lfb_currentForm=false;var lfb_currentItemID=0;var lfb_canSaveLink=true;var lfb_canDuplicate=true;var lfb_openChartsAuto=false;var lfb_currentCharts=false,lfb_currentChartsOptions,lfb_currentChartsData;var lfb_currentRedirEdit=0;var lfb_distanceModeQt=false;var lfb_editorCustomJS;var lfb_editorCustomCSS;lfb_data=lfb_data[0];jQuery(document).ready(function(){jQuery("#lfb_loader").remove();jQuery("#wpcontent").append('<div id="lfb_loader"><div class="lfb_spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>');jQuery("#lfb_loader .lfb_spinner").css({top:jQuery(window).height()/2-jQuery("#wpadminbar").height()/2});jQuery(window).resize(function(){jQuery("#lfb_loader .lfb_spinner").css({top:jQuery(window).height()/2-jQuery("#wpadminbar").height()/2});jQuery("#lfb_bootstraped,#estimation_popup").css({minHeight:jQuery("#wpcontent").height()})});jQuery("#lfb_bootstraped,#estimation_popup").css({minHeight:jQuery("#wpcontent").height()});jQuery("#lfb_stepsContainer").droppable({drop:function(c,d){var b=jQuery(d.draggable[0]);jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStepPosition",stepID:b.attr("data-stepid"),posX:parseInt(b.css("left")),posY:parseInt(b.css("top"))}});var a=lfb_getStepByID(parseInt(b.attr("data-stepid")));if(a!=null&&a.content!=null){a.content.previewPosX=parseInt(b.css("left"));a.content.previewPosY=parseInt(b.css("top"))}}});jQuery("body").css({overflow:"auto"});jQuery(".imageBtn").click(function(){lfb_formfield=jQuery(this).prev("input");tb_show("","media-upload.php?TB_iframe=true");return false});window.old_tb_remove=window.tb_remove;window.tb_remove=function(){window.old_tb_remove();lfb_formfield=null};window.original_send_to_editor=window.send_to_editor;window.send_to_editor=function(a){if(lfb_formfield){var b=jQuery("img",a).attr("alt");fileurl=jQuery("img",a).attr("src");if(jQuery("img",a).length==0){fileurl=jQuery(a).attr("src");b=jQuery(a).attr("alt")}lfb_formfield.val(fileurl);lfb_formfield.trigger("keyup");jQuery('#lfb_itemTabGeneral [name="imageDes"]').val(b);tb_remove()}else{window.original_send_to_editor(a)}};jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48});if(jQuery('textarea[name="customJS"]').length>0){lfb_editorCustomJS=CodeMirror.fromTextArea(jQuery('textarea[name="customJS"]').get(0),{mode:"javascript",lineNumbers:true});lfb_editorCustomCSS=CodeMirror.fromTextArea(jQuery('textarea[name="customCss"]').get(0),{mode:"css",lineNumbers:true})}setInterval(function(){if(jQuery("#lfb_winStep").css("display")=="block"){jQuery("#wpwrap").css({height:jQuery("#lfb_winStep").height()+48})}else{jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})}},1000);lfb_canvasTimer=setInterval(lfb_updateStepCanvas,30);jQuery(document).mousemove(function(a){if(lfb_isLinking){lfb_mouseX=a.pageX-jQuery("#lfb_stepsContainer").offset().left;lfb_mouseY=a.pageY-jQuery("#lfb_stepsContainer").offset().top}});jQuery(window).resize(lfb_updateStepsDesign);lfb_itemWinTimer=setInterval(lfb_updateWinItemPosition,30);jQuery("#lfb_actionSelect").change(function(){lfb_changeActionBubble(jQuery("#lfb_actionSelect").val())});jQuery("#lfb_interactionSelect").change(function(){lfb_changeInteractionBubble(jQuery("#lfb_interactionSelect").val())});jQuery("#lfb_interactionBubble,#lfb_actionBubble,#lfb_linkBubble,#lfb_fieldBubble,#lfb_calculationValueBubble,#lfb_emailValueBubble,#lfb_distanceValueBubble,#lfb_calculationDatesDiffBubble").hover(function(a){jQuery(this).addClass("lfb_hover")},function(a){jQuery(this).removeClass("lfb_hover")});jQuery("#lfb_interactionBubble,#lfb_actionBubble,#lfb_linkBubble,#lfb_fieldBubble,#lfb_calculationValueBubble,#lfb_emailValueBubble,#lfb_distanceValueBubble,#lfb_calculationDatesDiffBubble").find("select").focus(function(){jQuery(this).addClass("lfb_hover")}).blur(function(){jQuery(this).removeClass("lfb_hover")});jQuery("body").click(function(){if(!jQuery("#lfb_interactionBubble").is(".lfb_hover")){jQuery("#lfb_interactionBubble").fadeOut()}if(!jQuery("#lfb_actionBubble").is(".lfb_hover")&&!jQuery("#lfb_websiteFrame").is(".lfb_hover")&&!jQuery(".lfb_selectElementPanel").is(".lfb_hover")){jQuery("#lfb_actionBubble").fadeOut()}if(!jQuery("#lfb_linkBubble").is(".lfb_hover")){jQuery("#lfb_linkBubble").fadeOut()}if(!jQuery("#lfb_calculationValueBubble").is(".lfb_hover")&&jQuery("#lfb_calculationValueBubble").find(".lfb_hover").length==0){jQuery("#lfb_calculationValueBubble").fadeOut()}if(!jQuery("#lfb_emailValueBubble").is(".lfb_hover")&&jQuery("#lfb_emailValueBubble").find(".lfb_hover").length==0){jQuery("#lfb_emailValueBubble").fadeOut()}if(!jQuery("#lfb_fieldBubble").is(".lfb_hover")&&jQuery("#lfb_fieldBubble").find(".lfb_hover").length==0){jQuery("#lfb_fieldBubble").fadeOut()}if(!jQuery("#lfb_distanceValueBubble").is(".lfb_hover")&&jQuery("#lfb_distanceValueBubble").find(".lfb_hover").length==0){jQuery("#lfb_distanceValueBubble").fadeOut()}if(!jQuery("#lfb_calculationDatesDiffBubble").is(".lfb_hover")&&jQuery("#lfb_calculationDatesDiffBubble").find(".lfb_hover").length==0){jQuery("#lfb_calculationDatesDiffBubble").fadeOut()}});jQuery("#lfb_bootstraped .modal-dialog").hover(function(){jQuery(this).addClass("lfb_hover")},function(){jQuery(this).removeClass("lfb_hover")});jQuery("#lfb_bootstraped .modal").on("hide.bs.modal",function(a){if(!jQuery(this).find(".modal-dialog").is(".lfb_hover")){a.preventDefault()}});jQuery("#lfb_closeWinActivationBtn").click(function(){if(!lfb_lock){jQuery("#lfb_winActivation").modal("hide");jQuery("#lfb_winActivation").delay(200).fadeOut()}});if(jQuery("#lfb_winActivation").is('[data-show="true"]')&&document.referrer.indexOf("admin.php?page=lfb_menu")<0){lfb_lock=true;jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num",10).html("Wait 10 seconds");lfb_actTimer=setInterval(function(){var a=jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num");a--;if(a>0){jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num",a).html("Wait "+a+" seconds")}else{jQuery("#lfb_closeWinActivationBtn").removeClass("disabled");lfb_lock=false;jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num","").html("Close")}},1000)}else{jQuery("#lfb_winActivation").attr("data-show","false")}jQuery("#lfb_winActivation").on("hide.bs.modal",function(a){if(lfb_lock&&!jQuery("#lfb_winActivation .modal-dialog").is(".lfb_hover")){a.preventDefault()}});jQuery(document).mousedown(function(a){if(a.button==2&&lfb_isLinking){lfb_isLinking=false}});jQuery(".form-group").each(function(){var a=this;if(jQuery(a).find("small").length>0&&jQuery(a).find(".form-control").length>0){jQuery(this).find(".form-control").tooltip({title:jQuery(a).find("small").html()})}});jQuery("#lfb_bootstraped.lfb_bootstraped [data-toggle='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No});jQuery("#lfb_tabLastStep table tbody").sortable({helper:function(c,a){var b=a.children();var d=a.clone();d.children().each(function(e){jQuery(this).width(b.eq(e).width())});return d},stop:function(b,c){var a="";jQuery("#lfb_tabLastStep table tbody tr[data-fieldid]").each(function(d){a+=jQuery(this).attr("data-fieldid")+","});if(a.length>0){a=a.substr(0,a.length-1)}jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeLastFieldsOrders",fields:a}})}});jQuery(".lfb_iconslist li a").click(function(){jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html(jQuery(this).attr("data-icon"));jQuery(this).closest(".form-group").find("input.lfb_iconField").val(jQuery(this).attr("data-icon"));jQuery(this).closest("ul").find("li.lfb_active").removeClass("lfb_active");jQuery(this).closest("li").addClass("lfb_active")});jQuery("input.lfb_iconField").on("change",function(){if(jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html()!=jQuery(this).val()){jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html(jQuery(this).val())}});lfb_initCharts();jQuery("#lfb_winActivation").modal();jQuery('[data-toggle="tooltip"]').tooltip();lfb_loadSettings();lfb_initFormsBackend();if(lfb_data.designForm!=0){lfb_loadForm(lfb_data.designForm)}});function lfb_openWinLicense(){if(lfb_data.lscV==1){jQuery("#lfb_lscUnverified").hide();jQuery("#lfb_winActivation .alert").hide()}else{jQuery("#lfb_lscUnverified").show()}lfb_lock=false;jQuery("#lfb_winActivation").modal("show");jQuery("#lfb_winActivation").fadeIn();jQuery("#lfb_closeWinActivationBtn").removeAttr("disabled");jQuery("#lfb_closeWinActivationBtn").removeClass("disabled")}function lfb_initFormsBackend(){jQuery('#lfb_formFields [name="use_paypal"]').on("change",lfb_formPaypalChange);jQuery('#lfb_formFields [name="use_stripe"]').on("change",lfb_formStripeChange);jQuery('#lfb_formFields [name="isSubscription"]').on("change",lfb_formIsSubscriptionChange);jQuery('#lfb_formFields [name="gravityFormID"]').on("change",lfb_formGravityChange);jQuery('#lfb_formFields [name="save_to_cart"]').on("change",lfb_formWooChange);jQuery('#lfb_formFields [name="email_toUser"]').on("change",lfb_formEmailUserChange);jQuery('#lfb_formFields [name="legalNoticeEnable"]').on("change",lfb_formLegalNoticeChange);jQuery('#lfb_formFields [name="useSummary"]').on("change",lfb_formUseSummaryChange);jQuery('#lfb_formFields [name="intro_enabled"]').on("change",lfb_formUseIntroChange);jQuery('#lfb_formFields [name="paypal_useIpn"]').on("change",lfb_formIpnChange);jQuery('#lfb_formFields [name="useCoupons"]').on("change",lfb_formUseCouponsChange);jQuery('#lfb_formFields [name="useRedirectionConditions"]').on("change",lfb_changeUseRedirs);jQuery('#lfb_formFields [name="useMailchimp"]').on("change",lfb_changeMailchimp);jQuery('#lfb_formFields [name="useMailpoet"]').on("change",lfb_changeMailpoet);jQuery('#lfb_formFields [name="useGetResponse"]').on("change",lfb_changeGetResponse);jQuery('#lfb_formFields [name="useGoogleFont"]').on("change",lfb_useGoogleFontChange);jQuery('#lfb_formFields [name="scrollTopPage"]').on("change",lfb_scrollTopPageChange);jQuery('#lfb_formFields [name="previousStepBtn"]').on("change",lfb_previousStepBtnChange);jQuery('#lfb_formFields [name="totalIsRange"]').on("change",lfb_totalIsRangeChange);jQuery('#lfb_formFields [name="getResponseKey"]').focusout(lfb_changeGetResponseList);jQuery('#lfb_formFields [name="mailchimpKey"]').focusout(lfb_changeMailchimpList);jQuery("#lfb_chartsTypeSelect").on("change",lfb_chartsTypeChange);jQuery("#lfb_chartsMonth").on("change",lfb_chartsMonthChange);jQuery("#lfb_chartsYear").on("change",lfb_chartsYearChange);lfb_formGravityChange();lfb_formWooChange();lfb_formLegalNoticeChange();lfb_formEmailUserChange();lfb_formUseSummaryChange();lfb_formPaypalChange();lfb_formStripeChange();lfb_formUseIntroChange();lfb_formUseCouponsChange();lfb_changeUseRedirs();lfb_changeMailchimp();lfb_changeMailpoet();lfb_changeGetResponse();lfb_changeGetResponseList();lfb_changeMailchimpList();lfb_useGoogleFontChange();lfb_chartsTypeChange();lfb_totalIsRangeChange();lfb_scrollTopPageChange();lfb_previousStepBtnChange();jQuery('#lfb_calculationValueBubble select[name="itemID"]').on("change",lfb_updateCalculationsValueElements);jQuery('#lfb_emailValueBubble select[name="itemID"]').on("change",lfb_updateEmailValueElements)}function lfb_previousStepBtnChange(){if(jQuery('#lfb_formFields [name="previousStepBtn"]').is(":checked")){jQuery('#lfb_formFields [name="previousStepButtonIcon"]').closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="previousStepButtonIcon"]').closest(".form-group").slideUp()}}function lfb_formDistanceAsQtChange(){if(jQuery('#lfb_winItem [name="useDistanceAsQt"]').is(":checked")){jQuery("#lfb_winItem #lfb_distanceQtContainer").slideDown()}else{jQuery("#lfb_winItem #lfb_distanceQtContainer").slideUp()}}function lfb_changeUseRedirs(){if(jQuery('#lfb_formFields [name="useRedirectionConditions"]').is(":checked")){jQuery("#lfb_formFields #lfb_redirConditionsContainer").slideDown()}else{jQuery("#lfb_formFields #lfb_redirConditionsContainer").slideUp()}}function lfb_scrollTopPageChange(){if(jQuery('#lfb_formFields [name="scrollTopPage"]').is(":checked")){jQuery('#lfb_formFields [name="scrollTopMargin"]').closest(".form-group").slideUp()}else{jQuery('#lfb_formFields [name="scrollTopMargin"]').closest(".form-group").slideDown()}}function lfb_useGoogleFontChange(){if(jQuery('#lfb_formFields [name="useGoogleFont"]').is(":checked")){jQuery('#lfb_formFields [name="googleFontName"]').closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="googleFontName"]').closest(".form-group").slideUp()}}function lfb_changeMailchimp(){if(jQuery('#lfb_formFields [name="useMailchimp"]').is(":checked")){jQuery('#lfb_formFields [name="mailchimpKey"]').closest(".form-group").slideDown();jQuery('#lfb_formFields [name="mailchimpList"]').closest(".form-group").slideDown();jQuery('#lfb_formFields [name="mailchimpOptin"]').closest(".form-group").slideDown();lfb_changeMailchimpList()}else{jQuery('#lfb_formFields [name="mailchimpKey"]').closest(".form-group").slideUp();jQuery('#lfb_formFields [name="mailchimpList"]').closest(".form-group").slideUp();jQuery('#lfb_formFields [name="mailchimpOptin"]').closest(".form-group").slideUp()}}function lfb_changeMailpoet(){if(jQuery('#lfb_formFields [name="useMailpoet"]').is(":checked")){jQuery('#lfb_formFields [name="mailPoetList"]').closest(".form-group").slideDown();lfb_changeMailpoetList()}else{jQuery('#lfb_formFields [name="mailPoetList"]').closest(".form-group").slideUp()}}function lfb_changeGetResponse(){if(jQuery('#lfb_formFields [name="useGetResponse"]').is(":checked")){jQuery('#lfb_formFields [name="getResponseKey"]').closest(".form-group").slideDown();jQuery('#lfb_formFields [name="getResponseList"]').closest(".form-group").slideDown();lfb_changeGetResponseList()}else{jQuery('#lfb_formFields [name="getResponseKey"]').closest(".form-group").slideUp();jQuery('#lfb_formFields [name="getResponseList"]').closest(".form-group").slideUp()}}function lfb_changeMailchimpList(){jQuery('#lfb_formFields [name="mailchimpList"] option').remove();var a=jQuery('#lfb_formFields [name="mailchimpKey"]').val();if(a!=""){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getMailchimpLists",apiKey:a},success:function(b){jQuery('#lfb_formFields [name="mailchimpList"]').html(b);if(jQuery('#lfb_formFields [name="mailchimpList"] option[value="'+jQuery('#lfb_tabSettings [name="mailchimpList"]').attr("data-initial")+'"]').length>0){jQuery('#lfb_formFields [name="mailchimpList"]').val(jQuery('#lfb_tabSettings [name="mailchimpList"]').attr("data-initial"))}if(lfb_currentForm!=false){jQuery('#lfb_formFields [name="mailchimpList"]').val(lfb_currentForm.form.mailchimpList)}}})}}function lfb_changeMailpoetList(){jQuery('#lfb_formFields [name="mailPoetList"] option').remove();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getMailpoetLists"},success:function(a){jQuery('#lfb_formFields [name="mailPoetList"]').html(a);if(jQuery('#lfb_formFields [name="mailPoetList"] option[value="'+jQuery('#lfb_tabSettings [name="mailPoetList"]').attr("data-initial")+'"]').length>0){jQuery('#lfb_formFields [name="mailPoetList"]').val(jQuery('#lfb_tabSettings [name="mailPoetList"]').attr("data-initial"))}if(lfb_currentForm!=false){jQuery('#lfb_formFields [name="mailPoetList"]').val(lfb_currentForm.form.mailPoetList)}}})}function lfb_changeGetResponseList(){var a=jQuery('#lfb_formFields [name="getResponseKey"]').val();jQuery('#lfb_tabSettings [name="getResponseList"] option').remove();if(a!=""){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getGetResponseLists",apiKey:a},success:function(b){jQuery('#lfb_formFields [name="getResponseList"]').html(b);if(jQuery('#lfb_formFields [name="getResponseList"] option[value="'+jQuery('#lfb_tabSettings [name="getResponseList"]').attr("data-initial")+'"]').length>0){jQuery('#lfb_formFields [name="getResponseList"]').val(jQuery('#lfb_tabSettings [name="getResponseList"]').attr("data-initial"))}if(lfb_currentForm!=false){jQuery('#lfb_formFields [name="getResponseList"]').val(lfb_currentForm.form.getResponseList)}}})}}function lfb_formUseCouponsChange(){if(jQuery('#lfb_formFields [name="useCoupons"]').is(":checked")){jQuery("#lfb_formFields .lfb_couponsContainer").slideDown()}else{jQuery("#lfb_formFields .lfb_couponsContainer").slideUp()}}function lfb_formUseIntroChange(){if(jQuery('#lfb_formFields [name="intro_enabled"]').is(":checked")){jQuery('#lfb_formFields [name="intro_title"]').closest(".form-group").slideDown();jQuery('#lfb_formFields [name="intro_text"]').closest(".form-group").slideDown();jQuery('#lfb_formFields [name="intro_btn"]').closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="intro_title"]').closest(".form-group").slideUp();jQuery('#lfb_formFields [name="intro_text"]').closest(".form-group").slideUp();jQuery('#lfb_formFields [name="intro_btn"]').closest(".form-group").slideUp()}}function lfb_formIsSubscriptionChange(){if(jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")){jQuery('#lfb_formFields [name="subscription_text"]').parent().slideDown();jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",false);if(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")){jQuery('#lfb_formFields [name="paypal_subsFrequency"]').parent().slideDown();jQuery('#lfb_formFields [name="paypal_subsMaxPayments"]').parent().slideDown();jQuery('#lfb_formFields [name="percentToPay"]').parent().slideUp()}if(jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")){jQuery('#lfb_formFields [name="stripe_subsFrequencyType"]').parent().slideDown();jQuery('#lfb_formFields [name="stripe_percentToPay"]').parent().slideUp()}jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="subscription_text"]').parent().slideUp();jQuery('#lfb_formFields [name="paypal_subsFrequency"]').parent().slideUp();jQuery('#lfb_formFields [name="paypal_subsMaxPayments"]').parent().slideUp();jQuery('#lfb_formFields [name="stripe_subsFrequencyType"]').parent().slideUp();if(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")){jQuery('#lfb_formFields [name="percentToPay"]').parent().slideDown()}if(jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")){jQuery('#lfb_formFields [name="stripe_percentToPay"]').parent().slideDown()}jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp()}}function lfb_formUseSummaryChange(){if(jQuery('#lfb_formFields [name="useSummary"]').is(":checked")){jQuery('#lfb_formFields [name="summary_title"]').parent().slideDown()}else{jQuery('#lfb_formFields [name="summary_title"]').parent().slideUp()}}function lfb_formLegalNoticeChange(){if(jQuery('#lfb_formFields [name="legalNoticeEnable"]').is(":checked")){jQuery('#lfb_formFields [name="legalNoticeTitle"]').parent().slideDown();jQuery("#lfb_formFields #lfb_legalNoticeContent").closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="legalNoticeTitle"]').parent().slideUp();jQuery("#lfb_formFields #lfb_legalNoticeContent").closest(".form-group").slideUp()}}function lfb_totalIsRangeChange(){if(jQuery('#lfb_formFields [name="totalIsRange"]').is(":checked")){jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="use_stripe"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",false);if(jQuery('#lfb_formFields select[name="gravityFormID"]').val()>0){jQuery('#lfb_formFields select[name="gravityFormID"]').val("0")}jQuery("#lfb_formFields .lfb_wooOption").slideUp();jQuery('#lfb_formFields [name="totalRange"]').closest(".form-group").slideDown()}else{jQuery('#lfb_formFields [name="totalRange"]').closest(".form-group").slideUp()}}function lfb_formPaypalChange(){if(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")){jQuery("#lfb_formPaypal").slideDown();jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="use_stripe"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",false);if(jQuery('#lfb_formFields select[name="gravityFormID"]').val()>0){jQuery('#lfb_formFields select[name="gravityFormID"]').val("0")}jQuery("#lfb_formFields .lfb_wooOption").slideUp();lfb_formIpnChange()}else{jQuery("#lfb_formPaypal").slideUp();if(!jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")){jQuery("#lfb_formFields .lfb_wooOption").slideDown()}}lfb_formIsSubscriptionChange()}function lfb_formStripeChange(){if(jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")){jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",false);jQuery(".lfb_stripeField").slideDown();jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",false);if(jQuery('#lfb_formFields select[name="gravityFormID"]').val()>0){jQuery('#lfb_formFields select[name="gravityFormID"]').val("0")}jQuery("#lfb_formFields .lfb_wooOption").slideUp()}else{jQuery(".lfb_stripeField").slideUp();if(!jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")){jQuery("#lfb_formFields .lfb_wooOption").slideDown()}}lfb_formIsSubscriptionChange()}function lfb_chartsTypeChange(){if(jQuery("#lfb_chartsTypeSelect").val()=="month"){jQuery("#lfb_panelCharts #lfb_chartsMonth").slideDown();jQuery("#lfb_panelCharts #lfb_chartsYear").slideUp()}else{if(jQuery("#lfb_chartsTypeSelect").val()=="year"){jQuery("#lfb_panelCharts #lfb_chartsMonth").slideUp();jQuery("#lfb_panelCharts #lfb_chartsYear").slideDown()}else{jQuery("#lfb_panelCharts #lfb_chartsMonth").slideUp();jQuery("#lfb_panelCharts #lfb_chartsYear").slideUp()}}if(jQuery("#lfb_panelCharts").css("display")=="block"){lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}}function lfb_chartsYearChange(){lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_chartsMonthChange(){lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_showShortcodeWin(a){if(!a){a=lfb_currentFormID}jQuery("#lfb_shortcode_1").val('[estimation_form form_id="'+a+'"]');jQuery("#lfb_shortcode_2").val('[estimation_form form_id="'+a+'" fullscreen="true"]');jQuery("#lfb_shortcode_3").val('[estimation_form form_id="'+a+'" popup="true"]');jQuery("#lfb_shortcode_4").val('<a href="#" class="open-estimation-form form-'+a+'">Open Form</a>');jQuery("#lfb_winShortcode").find("span[data-displayid]").html(a);jQuery("#lfb_winShortcode").modal("show")}function lfb_formGravityChange(){if(jQuery('#lfb_formFields select[name="gravityFormID"]').val()>0){jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_formFields .nav-tabs > li:eq(2)").slideUp();jQuery("#lfb_finalStepFields").slideUp();jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="use_stripe"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",false)}else{jQuery("#lfb_finalStepFields").slideDown();jQuery("#lfb_formFields .nav-tabs > li:eq(2)").slideDown()}}function lfb_formEmailUserChange(){if(jQuery('#lfb_formFields [name="email_toUser"]').is(":checked")){jQuery("#lfb_formEmailUser").slideDown()}else{jQuery("#lfb_formEmailUser").slideUp()}}function lfb_formWooChange(){if(jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")){jQuery("#lfb_formFields .lfb_paymentOption").slideUp();jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",false);if(jQuery('#lfb_formFields select[name="gravityFormID"]').val()>0){jQuery('#lfb_formFields select[name="gravityFormID"]').val("0")}}else{jQuery("#lfb_formFields .lfb_paymentOption").slideDown()}}function lfb_formIpnChange(){if(jQuery('#lfb_formFields [name="paypal_useIpn"]').is(":checked")){jQuery("#lfb_infoIpn").slideDown()}else{jQuery("#lfb_infoIpn").slideUp()}}function lfb_getStepByID(b){var a=false;jQuery.each(lfb_steps,function(c){if(this.id==b){a=this}});return a}function lfb_showLoader(){jQuery("body").animate({scrollTop:0},250);jQuery("#lfb_loader").fadeIn()}function lfb_addStep(c){var e="";var a=0;if(!c.content){e=c}else{e=c.title}if(c.id){var b=jQuery('<div class="lfb_stepBloc palette palette-clouds"><div class="lfb_stepBlocWrapper"><h4>'+e+'</h4></div><a href="javascript:" class="lfb_btnEdit" title="'+lfb_data.texts.tip_editStep+'"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" class="lfb_btnSup" title="'+lfb_data.texts.tip_delStep+'"><span class="glyphicon glyphicon-trash"></span></a><a href="javascript:" class="lfb_btnDup" title="'+lfb_data.texts.tip_duplicateStep+'"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:" class="lfb_btnLink" title="'+lfb_data.texts.tip_linkStep+'"><span class="glyphicon glyphicon-link"></span></a><a href="javascript:" class="lfb_btnStart" title="'+lfb_data.texts.tip_flagStep+'"><span class="glyphicon glyphicon-flag"></span></a></div>');if(c.content&&c.content.start==1){b.find(".lfb_btnStart").addClass("lfb_selected");b.addClass("lfb_selected")}if(c.elementID){b.attr("id",c.elementID)}else{b.uniqueId()}b.children("a.lfb_btnEdit").click(function(){lfb_openWinStep(jQuery(this).parent().attr("data-stepid"))});b.children("a.lfb_btnLink").click(function(){lfb_startLink(jQuery(this).parent().attr("id"))});b.children("a.lfb_btnSup").click(function(){lfb_removeStep(jQuery(this).parent().attr("data-stepid"))});b.children("a.lfb_btnDup").click(function(){lfb_duplicateStep(jQuery(this).parent().attr("data-stepid"))});b.children("a.lfb_btnStart").click(function(){lfb_showLoader();jQuery(".lfb_stepBloc[data-stepid]").find(".lfb_btnStart").removeClass("lfb_selected");jQuery(".lfb_stepBloc[data-stepid]").find(".lfb_btnStart").closest(".lfb_stepBloc").removeClass("lfb_selected");jQuery.each(lfb_steps,function(){var h=this;if(h.id!=jQuery(this).parent().attr("data-stepid")&&h.content.start==1){h.content.start=0;jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStep",id:h.id,start:0,formID:lfb_currentFormID,content:JSON.stringify(h.content)}})}});jQuery(this).addClass("lfb_selected");jQuery(this).closest(".lfb_stepBloc").addClass("lfb_selected");var g=lfb_getStepByID(parseInt(jQuery(this).parent().attr("data-stepid")));g.content.start=1;jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStep",id:c.id,start:1,formID:lfb_currentFormID,content:JSON.stringify(g.content)},success:function(){lfb_loadForm(lfb_currentFormID)}})});b.draggable({containment:"parent",handle:".lfb_stepBlocWrapper"});b.children(".lfb_stepBlocWrapper").click(function(){if(lfb_isLinking){lfb_stopLink(b)}});var f=10,d=10;if(c.content&&c.content.previewPosX){f=c.content.previewPosX;d=c.content.previewPosY}else{f=jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()/2-64;d=jQuery("#lfb_stepsOverflow").scrollTop()+jQuery("#lfb_stepsOverflow").height()/2-64}b.hide();jQuery("#lfb_stepsContainer").append(b);b.css({left:(f)+"px",top:d+"px"});b.fadeIn();setTimeout(lfb_updateStepsDesign,250);jQuery(".lfb_btnWinClose").parent().click(function(){lfb_closeWin(jQuery(this).parents(".lfb_window"))});if(jQuery("#lfb_stepsContainer .lfb_stepBloc").length==0){a=1}b.attr("data-stepid",c.id)}else{var b=jQuery("<div></div>");b.uniqueId();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addStep",elementID:b.attr("id"),formID:lfb_currentFormID,start:a},success:function(g){g=jQuery.parseJSON(g);if(jQuery.inArray(g.id,lfb_steps)==-1){lfb_showLoader();lfb_loadForm(lfb_currentFormID)}}})}}function lfb_removeStep(b){var a=0;jQuery('.lfb_stepBloc[data-stepid="'+b+'"]').remove();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeStep",stepID:b},success:function(){}})}function lfb_updateStepsDesign(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48});jQuery("#lfb_stepsCanvas").attr("width",jQuery("#lfb_stepsContainer").outerWidth());jQuery("#lfb_stepsCanvas").attr("height",jQuery("#lfb_stepsContainer").outerHeight());jQuery("#lfb_stepsCanvas").css({width:jQuery("#lfb_stepsContainer").outerWidth(),height:jQuery("#lfb_stepsContainer").outerHeight()});jQuery(".lfb_stepBloc > .lfb_stepBlocWrapper > h4").each(function(){jQuery(this).css("margin-top",0-jQuery(this).height()/2)})}function lfb_repositionLinkPoint(c){var e=lfb_links[c];var a=(jQuery("#"+e.originID).offset().left-jQuery("#lfb_stepsContainer").offset().left)+jQuery("#"+e.originID).width()/2;var d=(jQuery("#"+e.originID).offset().top-jQuery("#lfb_stepsContainer").offset().top)+jQuery("#"+e.originID).height()/2;var b=(jQuery("#"+e.destinationID).offset().left-jQuery("#lfb_stepsContainer").offset().left)+jQuery("#"+e.destinationID).width()/2;var f=(jQuery("#"+e.destinationID).offset().top-jQuery("#lfb_stepsContainer").offset().top)+jQuery("#"+e.destinationID).height()/2;var h=a+(b-a)/2;var g=d+(f-d)/2;jQuery.each(lfb_links,function(j){if(this.originID==e.destinationID&&this.destinationID==e.originID&&j<c){h+=15;g+=15}});jQuery('.lfb_linkPoint[data-linkindex="'+c+'"]').css({left:h+"px",top:g+"px"})}function lfb_loadSettings(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadSettings"},success:function(a){a=jQuery.parseJSON(a);lfb_settings=a;if(lfb_data.designForm==0){jQuery("#lfb_loader").fadeOut()}}})}function lfb_closeSettings(){lfb_showLoader();document.location.href=document.location.href}function lfb_duplicateStep(a){if(lfb_canDuplicate){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateStep",stepID:a},success:function(b){lfb_canDuplicate=true;lfb_loadForm(lfb_currentFormID)}})}}function lfb_updateStepCanvas(){if(jQuery("#lfb_stepsCanvas").length>0){lfb_linkGradientIndex++;if(lfb_linkGradientIndex>=30){lfb_linkGradientIndex=1}var a=jQuery("#lfb_stepsCanvas").get(0).getContext("2d");a.clearRect(0,0,jQuery("#lfb_stepsCanvas").attr("width"),jQuery("#lfb_stepsCanvas").attr("height"));jQuery.each(lfb_links,function(m){var p=this;if(p.destinationID&&jQuery("#"+p.originID).length>0&&jQuery("#"+p.destinationID).length>0){var f=parseInt(jQuery("#"+p.originID).css("left"))+jQuery("#"+p.originID).outerWidth()/2+22;var e=parseInt(jQuery("#"+p.originID).css("top"))+jQuery("#"+p.originID).outerHeight()/2+22;var k=parseInt(jQuery("#"+p.destinationID).css("left"))+jQuery("#"+p.destinationID).outerWidth()/2+22;var h=parseInt(jQuery("#"+p.destinationID).css("top"))+jQuery("#"+p.destinationID).outerHeight()/2+22;var j=a.createLinearGradient(f,e,k,h);var g=false;var i=lfb_linkGradientIndex/30;var o=i;var n=i+0.1;var l=i+0.2;a.lineWidth=4;if(n>1){n=0;l=0.2}if(l>1){l=0}j.addColorStop(o,"#bdc3c7");j.addColorStop(n,"#1ABC9C");j.addColorStop(l,"#bdc3c7");a.strokeStyle=j;a.beginPath();a.moveTo(f,e);a.lineTo(k,h);a.stroke();if(jQuery('.lfb_linkPoint[data-linkindex="'+m+'"]').length==0){var q=jQuery('<a href="javascript:" data-linkindex="'+m+'" class="lfb_linkPoint"><span class="glyphicon glyphicon-pencil"></span></a>');jQuery("#lfb_stepsContainer").append(q);q.click(function(){lfb_openWinLink(jQuery(this))})}lfb_repositionLinkPoint(m)}else{jQuery('.lfb_linkPoint[data-linkindex="'+m+'"]').remove()}});if(lfb_isLinking){var b=jQuery("#"+lfb_links[lfb_linkCurrentIndex].originID);var d=b.position().left+jQuery("#lfb_stepsOverflow").scrollLeft()+b.outerWidth()/2;var c=b.position().top+jQuery("#lfb_stepsOverflow").scrollTop()+b.outerHeight()/2;a.strokeStyle="#bdc3c7";a.lineWidth=4;a.beginPath();a.moveTo(d,c);a.lineTo(lfb_mouseX,lfb_mouseY);a.stroke()}}}function lfb_removeItem(a){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeItem",itemID:a,stepID:lfb_currentStepID,formID:lfb_currentFormID},success:function(){lfb_loadForm(lfb_currentFormID);lfb_openWinStep(lfb_currentStepID)}})}function lfb_editItem(itemID){lfb_currentItemID=itemID;jQuery("#lfb_winItem").find("input,textarea").val("");jQuery("#lfb_winItem").find("select option").removeAttr("selected");jQuery("#lfb_winItem").find("select option:eq(0)").attr("selected","selected");jQuery("#lfb_winItem").find('.switch [data-switch="switch"]').bootstrapSwitch("destroy");jQuery("#lfb_winItem").find('.switch > div > :not([data-switch="switch"])').remove();jQuery("#lfb_winItem").find('.switch [data-switch="switch"]').unwrap().unwrap();jQuery("#lfb_winItem").find("#lfb_itemPricesGrid tbody tr").not(".static").remove();jQuery("#lfb_winItem").find("#lfb_itemOptionsValues tbody tr").not(".static").remove();if(itemID>0){jQuery.each(lfb_currentStep.items,function(){var item=this;if(item.id==itemID){jQuery("#lfb_winItem").find("input,select,textarea").each(function(){if(jQuery(this).is('[data-switch="switch"]')){var value=false;eval("if(item."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}");jQuery(this).wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch()}else{eval("jQuery(this).val(item."+jQuery(this).attr("name")+");")}});jQuery("#lfb_winItem #lfb_itemRichText").code(this.richtext);var reducs=item.reducsQt.split("*");jQuery.each(reducs,function(){var reduc=this.split("|");if(reduc[0]&&reduc[0]>0){jQuery("#lfb_itemPricesGrid tbody").prepend("<tr><td>"+reduc[0]+"</td><td>"+parseFloat(reduc[1]).toFixed(2)+'</td><td><a href="javascript:" onclick="lfb_del_reduc(this);" class="btn btn-danger  btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>')}});var optionsV=item.optionsValues.split("|");jQuery.each(optionsV,function(){var value=this;var price=0;if(this.indexOf(";;")>0){value=this.substr(0,this.indexOf(";;"));price=this.substr(this.indexOf(";;")+2,this.length)}if(this!=""){jQuery("#lfb_itemOptionsValues #option_new_value").closest("tr").before("<tr><td>"+value+"</td><td>"+price+'</td><td><a href="javascript:" onclick="lfb_edit_option(this);" class="btn btn-default  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_del_option(this);" class="btn btn-danger  btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>')}});jQuery("#lfb_itemOptionsValues tbody").sortable({items:"tr:not(.static)",helper:function(e,tr){var $originals=tr.children();var $helper=tr.clone();$helper.children().each(function(index){jQuery(this).width($originals.eq(index).width())});return $helper}});jQuery("#lfb_winItem").find('[name="wooProductID"]').val(item.wooProductID);if(item.wooProductID>0&&item.wooVariation>0){jQuery("#lfb_winItem").find('[name="wooProductID"]').find('option[value="'+item.wooProductID+'"]').each(function(){if(jQuery(this).attr("data-woovariation")==item.wooVariation){jQuery(this).attr("selected","selected")}})}}})}else{jQuery("#lfb_winItem").find('input[name="operation"]').val("+");jQuery("#lfb_winItem").find('input[name="ordersort"]').val(0);jQuery("#lfb_winItem").find('input[name="quantity_max"]').val(5);jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",false);jQuery("#lfb_winItem").find('[name="quantity_enabled"]').prop("checked",false);jQuery("#lfb_winItem").find('[name="ischecked"]').prop("checked",false);jQuery("#lfb_winItem").find('select[name="type"]').val("picture");jQuery("#lfb_winItem").find('[name="showInSummary"]').prop("checked",true);jQuery("#lfb_winItem").find('[name="allowedFiles"]').val(".png,.jpg,.jpeg,.gif,.zip,.rar");jQuery("#lfb_winItem").find('[name="maxFiles"]').val("4");jQuery("#lfb_winItem").find('[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No})}jQuery("#lfb_winItem").find('input[type="checkbox"]').each(function(){if(jQuery(this).is('[data-switch="switch"]')){if(jQuery(this).closest(".form-group").find("small").length>0){jQuery(this).closest(".has-switch").tooltip({title:jQuery(this).closest(".form-group").find("small").html()})}}});if(jQuery('#lfb_formFields [name="gmap_key"]').val().length<3){jQuery("#lfb_winItem #lfb_addDistanceBtn").attr("disabled","disabled");jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",false);jQuery('#lfb_winItem [name="useDistanceAsQt"]').closest(".switch.has-switch").addClass("deactivate")}else{jQuery("#lfb_winItem #lfb_addDistanceBtn").removeAttr("disabled");jQuery('#lfb_winItem [name="useDistanceAsQt"]').closest(".switch.has-switch").removeClass("deactivate")}jQuery("#lfb_winItem").find('[name="quantity_enabled"]').on("change",lfb_changeQuantityEnabled);lfb_changeQuantityEnabled();jQuery("#lfb_winItem").find('[name="reduc_enabled"]').on("change",lfb_changeReducEnabled);lfb_changeReducEnabled();jQuery("#lfb_winItem").find('[name="quantityUpdated"]').change(lfb_changeQuantity);lfb_changeQuantity();jQuery("#lfb_winItem").find('[name="wooProductID"]').change(lfb_changeWoo);lfb_changeWoo();jQuery("#lfb_winItem").find('[name="operation"]').change(lpf_changeOperation);lpf_changeOperation();jQuery("#lfb_winItem").find('[name="useCalculation"]').change(lfb_changeUseCalculation);lfb_changeUseCalculation();jQuery("#lfb_winItem").find('[name="type"]').change(lfb_changeItemType);lfb_changeItemType();jQuery("#lfb_winItem").find('[name="useShowConditions"]').change(lfb_changeUseShowConditions);lfb_changeUseShowConditions();jQuery("#lfb_winItem").find('[name="showInSummary"]').on("change",lfb_showSummaryItemChange);lfb_showSummaryItemChange();jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').on("change",lfb_formDistanceAsQtChange);lfb_formDistanceAsQtChange();jQuery("#lfb_winItem").find('[name="isRequired"]').on("change",lfb_changeItemIsRequired);lfb_changeItemIsRequired();jQuery("#lfb_winItem").fadeIn();jQuery("html,body").scrollTop(0)}function lfb_showSummaryItemChange(){if(jQuery("#lfb_winItem").find('[name="showInSummary"]').is(":checked")){jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp()}}var lfb_isWoo=false;function lfb_changeWoo(){if(jQuery("#lfb_winItem").find('[name="wooProductID"]').val()!="0"){if(!lfb_isWoo){jQuery("#lfb_winItem").find('[name="quantity_enabled"]').prop("checked",true);jQuery(".quantity_max_tr").show()}lfb_isWoo=true;jQuery(".wooMasked").fadeOut(250);if(jQuery("#lfb_winItem").find('[name="title"]').val()==""){jQuery("#lfb_winItem").find('[name="title"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("title"))}if(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("max")){jQuery("#lfb_winItem").find('[name="quantity_max"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("max"))}if(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("img")&&jQuery("#lfb_winItem").find('[name="image"]').val()==""){jQuery("#lfb_winItem").find('[name="image"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("img"))}jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp()}else{lfb_isWoo=false;jQuery(".wooMasked").fadeIn(250);lfb_changeUseCalculation()}}function lpf_changeOperation(){if(jQuery("#lfb_winItem").find('[name="operation"]').val()=="x"||jQuery("#lfb_winItem").find('[name="operation"]').val()=="/"){jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(1)").slideDown();jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(0)").slideUp()}else{jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(1)").slideUp();jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(0)").slideDown()}if(jQuery("#lfb_winItem").find('[name="operation"]').val()!="+"){jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",false);jQuery("#lfb_itemPricesGrid").slideUp();jQuery("#lfb_winItem").find("#lfb_itemPricesGrid tbody tr").not(".static").remove()}else{if(jQuery("#lfb_winItem").find('[name="quantity_enabled"]').is(":checked")){jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown()}}}function lfb_changeUseShowConditions(){if(jQuery("#lfb_winItem").find('[name="useShowConditions"]').is(":checked")){jQuery("#lfb_winItem").find('[name="showConditions"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="showConditions"]').closest(".form-group").slideUp()}}function lfb_changeUseCalculation(){if(jQuery("#lfb_winItem").find('[name="type"]').val()=="picture"||jQuery("#lfb_winItem").find('[name="type"]').val()=="checkbox"||jQuery("#lfb_winItem").find('[name="type"]').val()=="slider"){if(jQuery("#lfb_winItem").find('[name="wooProductID"]').val()=="0"){jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown();if(jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")){jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp()}}}}function lfb_changeItemIsRequired(){if(jQuery("#lfb_winItem").find('[name="type"]').val()=="select"&&jQuery('#lfb_winItem [name="isRequired"]').is(":checked")){jQuery("#lfb_winItem").find('[name="firstValueDisabled"]').closest(".form-group").slideDown()}else{jQuery('#lfb_winItem [name="firstValueDisabled"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="firstValueDisabled"]').closest(".form-group").slideUp()}}function lfb_changeItemType(){if(jQuery("#lfb_winItem").find('[name="type"]').val()=="picture"||jQuery("#lfb_winItem").find('[name="type"]').val()=="qtfield"){jQuery(".picOnly").slideDown();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_min"]').closest(".form-group").slideDown();jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();if(!jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")){jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown()}jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="groupitems"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown();if(jQuery("#lfb_winItem").find('[name="type"]').val()=="qtfield"){jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="isSelected"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="imageTint"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').prop("checked",true);jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="image"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp()}else{jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown();lfb_changeReducEnabled();lfb_changeUseCalculation()}jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}else{jQuery(".picOnly").slideUp();jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_min"]').closest(".form-group").slideUp();if(jQuery("#lfb_winItem").find('[name="type"]').val()!="slider"){jQuery('#lfb_winItem [name="quantity_enabled"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_itemPricesGrid").slideUp();jQuery('#lfb_winItem [name="reduc_enabled"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp()}jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown();if(jQuery("#lfb_winItem").find('[name="type"]').val()=="textfield"){jQuery("#lfb_winItem").find(".lfb_textOnly").slideDown()}else{jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp()}if(jQuery("#lfb_winItem").find('[name="type"]').val()=="textfield"||jQuery("#lfb_winItem").find('[name="type"]').val()=="numberfield"||jQuery("#lfb_winItem").find('[name="type"]').val()=="datepicker"||jQuery("#lfb_winItem").find('[name="type"]').val()=="textarea"){jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp();jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();if(jQuery("#lfb_winItem").find('[name="type"]').val()=="numberfield"){jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp()}jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();if(jQuery("#lfb_winItem").find('[name="type"]').val()!="datepicker"){jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp()}else{jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideDown()}jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0);jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp()}else{if(jQuery("#lfb_winItem").find('[name="type"]').val()=="slider"){jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="operation"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();if(!jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")){jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown()}jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').parent().bootstrapSwitch("setState",true);jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideUp();if(!jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")){jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown()}jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0);jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();if(jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")){jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp()}jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp()}else{if(jQuery("#lfb_winItem").find('[name="type"]').val()=="select"){jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0);jQuery("#lfb_winItem").find('[name="operation"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideDown();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp();jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp();if(jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")){jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp()}jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}else{if(jQuery("#lfb_winItem").find('[name="type"]').val()=="filefield"){jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}else{if(jQuery("#lfb_winItem").find('[name="type"]').val()=="richtext"){jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="urlTarget"]').val("");jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').val("row");jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp();jQuery("#lfb_itemRichText").next(".note-editor").slideDown();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}else{if(jQuery("#lfb_winItem").find('[name="type"]').val()=="colorpicker"){jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp();jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp();jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}else{jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp();if(!jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")){jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown()}jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="operation"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideDown();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp();jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp();if(jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")){jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="isSinglePrice"]').parent().bootstrapSwitch("setState",false);jQuery("#lfb_winItem").find('[name="isSinglePrice"]').closest(".form-group").slideUp()}if(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")){jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp()}jQuery("#lfb_itemRichText").next(".note-editor").slideUp();jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown()}}}}}}}lfb_changeItemIsRequired()}function lfb_changeQuantityEnabled(){if(jQuery("#lfb_winItem").find('[name="quantity_enabled"]').is(":checked")){jQuery("#efp_itemQuantity").slideDown();if((jQuery("#lfb_winItem").find('[name="type"]').val()=="picture"&&jQuery('#lfb_formFields [name="qtType"]').val()==2)||jQuery("#lfb_winItem").find('[name="type"]').val()=="slider"){jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideDown()}else{jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').val(1)}}else{jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",false);jQuery("#efp_itemQuantity").slideUp();jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideDown();jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp();jQuery("#lfb_winItem").find('[name="sliderStep"]').val(1)}}function lfb_changeReducEnabled(){if(jQuery("#lfb_winItem").find('[name="reduc_enabled"]').is(":checked")){jQuery("#lfb_itemPricesGrid").slideDown(250)}else{jQuery("#lfb_itemPricesGrid").slideUp(250)}}function lfb_changeQuantity(){if(jQuery("#lfb_winItem").find('input[name="quantityUpdated"]').val()<1){jQuery("#lfb_winItem").find('input[name="quantityUpdated"]').val("3")}}function lfb_getReducs(){var a=new Array();jQuery("#lfb_itemPricesGrid tbody tr").not(".static").each(function(){var c=jQuery(this).find("td:eq(0)").html();var b=jQuery(this).find("td:eq(1)").html();a.push(new Array(c,b))});a.sort(function(d,c){return d[0]-c[0]});return a}function lfb_getOptions(){var a=new Array();jQuery("#lfb_itemOptionsValues tbody tr").not(".static").each(function(){if(jQuery(this).find("td:eq(0) input").length>0){a.push(jQuery(this).find("td:eq(0) input").val()+";;"+jQuery(this).find("td:eq(1) input").val())}else{a.push(jQuery(this).find("td:eq(0)").html()+";;"+jQuery(this).find("td:eq(1)").html())}});return a}function lfb_add_option(){var b=jQuery("#lfb_itemOptionsValues #option_new_value").val();var a=parseFloat(jQuery("#lfb_itemOptionsValues #option_new_price").val());if(isNaN(a)){a=0}if(b!=""){jQuery("#lfb_itemOptionsValues #option_new_value").closest("tr").before("<tr><td>"+b+"</td><td>"+a+'</td><td><a href="javascript:" onclick="lfb_edit_option(this);" class="btn btn-default  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_del_option(this);" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>');jQuery("#lfb_itemOptionsValues #option_new_value").val("")}jQuery("#lfb_itemOptionsValues #option_new_price").val("");jQuery("#lfb_itemOptionsValues tbody").sortable({helper:function(f,c){var d=c.children();var g=c.clone();g.children().each(function(e){jQuery(this).width(d.eq(e).width())});return g}})}function lfb_del_option(a){jQuery(a).parent().parent().remove()}function lfb_add_reduc(){var c=parseInt(jQuery("#reduc_new_qt").val());var b=parseFloat(jQuery("#reduc_new_price").val());if(!isNaN(c)&&c>0&&!isNaN(b)){var a=lfb_getReducs();a.push(new Array(c,b));a.sort(function(e,d){return d[0]-e[0]});jQuery("#lfb_itemPricesGrid tbody tr").not(".static").remove();jQuery.each(a,function(){jQuery("#lfb_itemPricesGrid tbody").prepend("<tr><td>"+this[0]+"</td><td>"+parseFloat(this[1]).toFixed(2)+'</td><td><a href="javascript:" onclick="lfb_del_reduc(this);" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>')});jQuery("#reduc_new_qt").val("");jQuery("#reduc_new_price").val("")}}function lfb_del_reduc(a){jQuery(a).parent().parent().remove()}function lfb_saveItem(){var reducs="";var optionsValues="";var wooVariation=0;var error=false;jQuery("#lfb_winItem").find('input[name="title"]').parent().removeClass("has-error");jQuery("#lfb_winItem").find('input[name="image"]').parent().removeClass("has-error");jQuery("#lfb_winItem").find('input[name="quantity_max"]').parent().removeClass("has-error");if(jQuery("#lfb_winItem").find('input[name="title"]').val()<1){error=true;jQuery("#lfb_winItem").find('input[name="title"]').parent().addClass("has-error")}if(jQuery("#lfb_winItem").find('select[name="type"]').val()=="picture"&&jQuery("#lfb_winItem").find('input[name="image"]').val().length<4){error=true;jQuery("#lfb_winItem").find('input[name="image"]').parent().addClass("has-error")}if(jQuery("#lfb_winItem").find('[name="quantity_enabled"]').val()=="1"&&jQuery("#lfb_winItem").find('input[name="quantity_max"]').val()==""){error=true;jQuery("#lfb_winItem").find('input[name="quantity_max"]').parent().addClass("has-error")}var optionStab=lfb_getOptions();jQuery.each(optionStab,function(){optionsValues+=this+"|"});if(jQuery("#lfb_winItem").find('[name="reduc_enabled"]').is(":checked")){var reducsTab=lfb_getReducs();jQuery.each(reducsTab,function(){reducs+=this[0]+"|"+parseFloat(this[1]).toFixed(2)+"*"});reducs=reducs.substr(0,reducs.length-1)}if(jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("woovariation")&&jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("woovariation")>0){wooVariation=jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("woovariation")}var itemData={};jQuery("#lfb_winItem").find("input,select,textarea").each(function(){if(jQuery(this).closest("#lfb_itemPricesGrid").length==0&&jQuery(this).closest("#lfb_itemOptionsValues").length==0&&jQuery(this).closest("#lfb_calculationValueBubble").length==0){if(!jQuery(this).is('[data-switch="switch"]')){eval("itemData."+jQuery(this).attr("name")+" = jQuery(this).val();")}else{var value=0;if(jQuery(this).is(":checked")){value=1}eval("itemData."+jQuery(this).attr("name")+" = value;")}}});itemData.action="lfb_saveItem";itemData.formID=lfb_currentFormID;itemData.stepID=lfb_currentStepID;itemData.id=lfb_currentItemID;itemData.wooVariation=wooVariation;itemData.reducsQt=reducs;itemData.optionsValues=optionsValues;if(jQuery("#lfb_itemRichText").next(".note-editor").find('.note-toolbar .note-view [data-name="codeview"]').is(".active")){jQuery("#lfb_itemRichText").next(".note-editor").find('.note-toolbar .note-view [data-name="codeview"]').trigger("click")}itemData.richtext=jQuery("#lfb_itemRichText").code();if(!error){lfb_showLoader();jQuery("#lfb_winItem").fadeOut();jQuery.ajax({url:ajaxurl,type:"post",data:itemData,success:function(itemID){lfb_loadForm(lfb_currentFormID);lfb_openWinStep(lfb_currentStepID)}})}else{jQuery("body,html").animate({scrollTop:0},200)}}function lfb_checkLicense(){var a=false;var b=jQuery('#lfb_winActivation input[name="purchaseCode"]');if(b.val().length<9){b.parent().addClass("has-error")}else{lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_checkLicense",code:b.val()},success:function(c){jQuery("#lfb_loader").fadeOut();if(c=="1"){b.parent().addClass("has-error")}else{lfb_lock=false;lfb_data.lscV=1;jQuery("#lfb_winActivation").modal("hide");jQuery("#lfb_winActivation").fadeOut();jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').val(b.val())}}})}}function lfb_duplicateForm(a){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateForm",formID:a},success:function(b){document.location.href=document.location.href}})}function lfb_duplicateItem(a){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateItem",itemID:a},success:function(b){lfb_openWinStep(lfb_currentStepID)}})}function lfb_startPreview(){}function lfb_openWinStep(stepID){lfb_currentStepID=stepID;lfb_showLoader();jQuery("#lfb_winStep").find('.switch [data-switch="switch"]').bootstrapSwitch("destroy");jQuery("#lfb_winStep").find('.switch > div > :not([data-switch="switch"])').remove();jQuery("#lfb_winStep").find('.switch [data-switch="switch"]').unwrap().unwrap();jQuery("#lfb_itemsTable tbody").html("");if(lfb_currentStepID==0){jQuery("#lfb_itemsList").hide()}else{jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadStep",stepID:stepID},success:function(rep){rep=jQuery.parseJSON(rep);step=rep.step;lfb_currentStep=rep;jQuery("#lfb_stepTabGeneral").find("input,select,textarea").each(function(){if(jQuery(this).is('[data-switch="switch"]')){var value=false;eval("if(step."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}");jQuery(this).wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch()}else{eval("jQuery(this).val(step."+jQuery(this).attr("name")+");")}});jQuery.each(rep.items,function(){var item=this;var $tr=jQuery('<tr data-itemid="'+item.id+'"></tr>');$tr.append('<td><a href="javascript:"  onclick="lfb_editItem('+item.id+');">'+item.title+"</a></td>");$tr.append("<td>"+item.groupitems+"</td>");$tr.append('<td><a href="javascript:" onclick="lfb_editItem('+item.id+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_duplicateItem('+item.id+');" class="btn btn-default btn-circle"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:" onclick="lfb_removeItem('+item.id+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>');jQuery("#lfb_itemsTable tbody").append($tr)});jQuery("#lfb_itemsTable tbody").sortable({helper:function(e,tr){var $originals=tr.children();var $helper=tr.clone();$helper.children().each(function(index){jQuery(this).width($originals.eq(index).width())});return $helper},scroll:true,scrollSensitivity:80,scrollSpeed:3,stop:function(event,ui){var items="";jQuery("#lfb_itemsTable tbody tr[data-itemid]").each(function(i){items+=jQuery(this).attr("data-itemid")+","});if(items.length>0){items=items.substr(0,items.length-1)}jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeItemsOrders",items:items}})}});jQuery("#lfb_itemsList").show();jQuery("#lfb_btns").html("");jQuery("#lfb_winStep").show();jQuery("#lfb_stepsContainer").slideUp();jQuery("#lfb_loader").fadeOut();jQuery("#lfb_winStep").find('[name="useShowConditions"]').change(lfb_changeUseShowStepConditions);lfb_changeUseShowStepConditions();jQuery("#wpwrap").css({height:jQuery("#lfb_winStep").height()+48});jQuery("#lfb_winStep").find('input[type="checkbox"]').each(function(){if(jQuery(this).is('[data-switch="switch"]')){if(jQuery(this).closest(".form-group").find("small").length>0){jQuery(this).closest(".has-switch").tooltip({title:jQuery(this).closest(".form-group").find("small").html()})}}})}})}}function lfb_changeUseShowStepConditions(){if(jQuery("#lfb_winStep").find('[name="useShowConditions"]').is(":checked")){jQuery("#showConditionsStepBtn").slideDown()}else{jQuery("#showConditionsStepBtn").slideUp()}}function lfb_saveStep(){lfb_showLoader();var stepData={};jQuery("#lfb_stepTabGeneral").find("input,select,textarea").each(function(){if(!jQuery(this).is('[data-switch="switch"]')){eval("stepData."+jQuery(this).attr("name")+" = jQuery(this).val();")}else{var value=0;if(jQuery(this).is(":checked")){value=1}eval("stepData."+jQuery(this).attr("name")+" = value;")}});stepData.action="lfb_saveStep";stepData.formID=lfb_currentFormID;stepData.id=lfb_currentStepID;jQuery('.lfb_stepBloc[data-stepid="'+lfb_currentStepID+'"] h4').html(stepData.title);lfb_updateStepsDesign();jQuery.ajax({url:ajaxurl,type:"post",data:stepData,success:function(stepID){lfb_openWinStep(stepID)}})}function lfb_closeWin(a){a.fadeOut();jQuery("#lfb_stepsContainer").slideDown();setTimeout(function(){lfb_updateStepsDesign()},250)}function lfb_startLink(a){lfb_isLinking=true;lfb_linkCurrentIndex=lfb_links.length;lfb_links.push({originID:a,destinationID:null})}function lfb_stopLink(a){lfb_isLinking=false;var b=false;jQuery.each(lfb_links,function(){if(this.originID==lfb_links[lfb_linkCurrentIndex].originID&&this.destinationID==a.attr("id")){b=this}});if(!b){lfb_showLoader();lfb_links[lfb_linkCurrentIndex].destinationID=a.attr("id");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_newLink",formID:lfb_currentFormID,originStepID:jQuery("#"+lfb_links[lfb_linkCurrentIndex].originID).attr("data-stepid"),destinationStepID:jQuery("#"+lfb_links[lfb_linkCurrentIndex].destinationID).attr("data-stepid")},success:function(c){lfb_links[lfb_linkCurrentIndex].id=c;lfb_loadForm(lfb_currentFormID)}})}else{jQuery.grep(lfb_links,function(c){return c!=b})}}function lfb_itemsCheckRows(b){var a=jQuery(b).parent().children(".clearfix");a.detach();jQuery(b).parent().append(a)}function lfb_getUniqueTime(){var a=new Date().getTime();while(a==new Date().getTime()){}return new Date().getTime()}function lfb_changeInteractionBubble(b){jQuery("#lfb_interactionBubble").data("type",b);jQuery("#lfb_interactionBubble #lfb_interactionContent > div").slideUp();if(b!=""){jQuery('#lfb_interactionBubble #lfb_interactionContent > [data-type="'+b+'"]').slideDown()}if(b=="select"){var a=jQuery('#lfb_interactionContent > [data-type="'+b+'"]').find(".form-group:not(.default)").length;if(a==0||jQuery('#lfb_interactionContent > [data-type="'+b+'"]').find(".form-group:not(.default):last-child").find("input").val()==""){lfb_interactionAddSelect(b)}}}function lfb_interactionAddSelect(c){var b=jQuery('#lfb_interactionContent > [data-type="'+c+'"]').find(".form-group").length;var a=jQuery('<div class="form-group"><label>'+lfb_data.txt_option+'</label><input type="text" placeholder="'+lfb_data.txt_option+'" class="form-control" name="s_'+b+'_value"></div>');a.find("input").keyup(function(){if(jQuery(this).val()==""){if(jQuery(this).closest(".form-group:not(.default)").index()>0){jQuery(this).closest(".form-group:not(.default)").remove()}}else{if(jQuery(this).closest(".form-group:not(.default)").next(".form-group:not(.default)").length==0){lfb_interactionAddSelect(c)}}});jQuery('#lfb_interactionContent > [data-type="'+c+'"]').append(a);return a}function lfb_openWinLink(b){lfb_currentLinkIndex=b.attr("data-linkindex");jQuery("#lfb_winLink").attr("data-linkindex",b.attr("data-linkindex"));jQuery(".lfb_conditionItem").remove();var e=jQuery("#"+lfb_links[b.attr("data-linkindex")].originID).attr("data-stepid");var c=lfb_getStepByID(e);var d=jQuery("#"+lfb_links[b.attr("data-linkindex")].destinationID).attr("data-stepid");var a=lfb_getStepByID(d);jQuery("#lfb_linkInteractions").show();jQuery("#lfb_linkOriginTitle").html(c.title);jQuery("#lfb_linkDestinationTitle").html(a.title);jQuery.each(lfb_links[lfb_currentLinkIndex].conditions,function(){lfb_addLinkInteraction(this)});jQuery("#lfb_linkOperator").val(lfb_links[lfb_currentLinkIndex].operator);jQuery("#lfb_winLink").fadeIn(250);setTimeout(lfb_updateStepsDesign,255);setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300)}function lfb_addShowStepInteraction(d){var g=jQuery('<tr class="lfb_conditionItem"></tr>');var b=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var k=this;jQuery.each(k.items,function(){var l=this;if(l.type!="richtext"&&l.type!="colorpicker"){var m=k.id+"_"+l.id;b.append('<option value="'+m+'" data-type="'+l.type+'">'+k.title+' : " '+l.title+' "</option>')}})});b.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>");b.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var h=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');b.change(function(){var o=b.val().substr(0,b.val().indexOf("_"));var n=b.val().substr(b.val().indexOf("_")+1,b.val().length);var m=false;jQuery.each(lfb_steps,function(){var p=this;if(p.id==o){jQuery.each(p.items,function(){if(this.id==n){m=this}})}});var k=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");k.find("option").remove();if(b.find("option:selected").is("[data-static]")){var l=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var l=lfb_conditionGetOperators(m,b)}jQuery.each(l,function(){k.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change();setTimeout(function(){h.change()},300)});if(d){b.val(d.interaction)}if(b.find("option:selected").is("[data-static]")){var j=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var f=b.val().substr(0,b.val().indexOf("_"));var a=b.val().substr(b.val().indexOf("_")+1,b.val().length);var i=false;jQuery.each(lfb_steps,function(){var k=this;if(k.id==f){jQuery.each(k.items,function(){if(this.id==a){i=this}})}});var j=lfb_conditionGetOperators(i,b)}jQuery.each(j,function(){h.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change(function(){lfb_linksUpdateFields(jQuery(this))});setTimeout(function(){b.change()},250);var e=jQuery("<td></td>");e.append(b);g.append(e);var c=jQuery("<td></td>");c.append(h);g.append(c);g.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" onclick="lfb_conditionRemove(this);"><span class="glyphicon glyphicon-remove"></span></a> </td>');if(d){h.val(d.action);h.change();if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}setTimeout(function(){h.val(d.action);h.change();lfb_linksUpdateFields(h,d);if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}},500)}jQuery("#lfb_showStepConditionsTable tbody").append(g)}function lfb_addRedirInteraction(d){var g=jQuery('<tr class="lfb_conditionItem"></tr>');var b=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var k=this;jQuery.each(k.items,function(){var l=this;if(l.type!="richtext"&&l.type!="colorpicker"){var m=k.id+"_"+l.id;b.append('<option value="'+m+'" data-type="'+l.type+'">'+k.title+' : " '+l.title+' "</option>')}})});b.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>");b.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var h=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');b.change(function(){var o=b.val().substr(0,b.val().indexOf("_"));var n=b.val().substr(b.val().indexOf("_")+1,b.val().length);var m=false;jQuery.each(lfb_steps,function(){var p=this;if(p.id==o){jQuery.each(p.items,function(){if(this.id==n){m=this}})}});var k=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");k.find("option").remove();if(b.find("option:selected").is("[data-static]")){var l=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var l=lfb_conditionGetOperators(m,b)}jQuery.each(l,function(){k.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change()});if(d){b.val(d.interaction)}if(b.find("option:selected").is("[data-static]")){var j=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var f=b.val().substr(0,b.val().indexOf("_"));var a=b.val().substr(b.val().indexOf("_")+1,b.val().length);var i=false;jQuery.each(lfb_steps,function(){var k=this;if(k.id==f){jQuery.each(k.items,function(){if(this.id==a){i=this}})}});var j=lfb_conditionGetOperators(i,b)}jQuery.each(j,function(){h.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change(function(){lfb_linksUpdateFields(jQuery(this))});setTimeout(function(){b.change()},250);var e=jQuery("<td></td>");e.append(b);g.append(e);var c=jQuery("<td></td>");c.append(h);g.append(c);g.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" onclick="lfb_conditionRemove(this);"><span class="glyphicon glyphicon-remove"></span></a> </td>');if(d){h.val(d.action);h.change();if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}setTimeout(function(){lfb_linksUpdateFields(h,d);if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}},500)}jQuery("#lfb_redirConditionsTable tbody").append(g)}function lfb_addShowInteraction(d){var g=jQuery('<tr class="lfb_conditionItem"></tr>');var b=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var k=this;jQuery.each(k.items,function(){var l=this;if(l.type!="richtext"&&l.type!="colorpicker"){var m=k.id+"_"+l.id;b.append('<option value="'+m+'" data-type="'+l.type+'">'+k.title+' : " '+l.title+' "</option>')}})});b.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>");b.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var h=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');b.change(function(){var o=b.val().substr(0,b.val().indexOf("_"));var n=b.val().substr(b.val().indexOf("_")+1,b.val().length);var m=false;jQuery.each(lfb_steps,function(){var p=this;if(p.id==o){jQuery.each(p.items,function(){if(this.id==n){m=this}})}});var k=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");k.find("option").remove();if(b.find("option:selected").is("[data-static]")){var l=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var l=lfb_conditionGetOperators(m,b)}jQuery.each(l,function(){k.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change()});if(d){b.val(d.interaction)}if(b.find("option:selected").is("[data-static]")){var j=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var f=b.val().substr(0,b.val().indexOf("_"));var a=b.val().substr(b.val().indexOf("_")+1,b.val().length);var i=false;jQuery.each(lfb_steps,function(){var k=this;if(k.id==f){jQuery.each(k.items,function(){if(this.id==a){i=this}})}});var j=lfb_conditionGetOperators(i,b)}jQuery.each(j,function(){h.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change(function(){lfb_linksUpdateFields(jQuery(this))});setTimeout(function(){},250);var e=jQuery("<td></td>");e.append(b);g.append(e);var c=jQuery("<td></td>");c.append(h);g.append(c);g.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" onclick="lfb_conditionRemove(this);"><span class="glyphicon glyphicon-remove"></span></a> </td>');if(d){h.val(d.action);h.change();if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}setTimeout(function(){lfb_linksUpdateFields(h,d);if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}},500)}jQuery("#lfb_showConditionsTable tbody").append(g)}function lfb_addCalcInteraction(d){var g=jQuery('<tr class="lfb_conditionItem"></tr>');var b=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var k=this;jQuery.each(k.items,function(){var l=this;if(l.type!="richtext"&&l.type!="colorpicker"){var m=k.id+"_"+l.id;b.append('<option value="'+m+'" data-type="'+l.type+'">'+k.title+' : " '+l.title+' "</option>')}})});b.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>");b.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var h=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');b.change(function(){var o=b.val().substr(0,b.val().indexOf("_"));var n=b.val().substr(b.val().indexOf("_")+1,b.val().length);var m=false;jQuery.each(lfb_steps,function(){var p=this;if(p.id==o){jQuery.each(p.items,function(){if(this.id==n){m=this}})}});var k=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");k.find("option").remove();if(b.find("option:selected").is("[data-static]")){var l=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var l=lfb_conditionGetOperators(m,b)}jQuery.each(l,function(){k.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change()});if(d){b.val(d.interaction)}setTimeout(function(){},250);if(b.find("option:selected").is("[data-static]")){var j=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var f=b.val().substr(0,b.val().indexOf("_"));var a=b.val().substr(b.val().indexOf("_")+1,b.val().length);var i=false;jQuery.each(lfb_steps,function(){var k=this;if(k.id==f){jQuery.each(k.items,function(){if(this.id==a){i=this}})}});var j=lfb_conditionGetOperators(i,b)}jQuery.each(j,function(){h.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change(function(){lfb_linksUpdateFields(jQuery(this))});var e=jQuery("<td></td>");e.append(b);g.append(e);var c=jQuery("<td></td>");c.append(h);g.append(c);g.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" onclick="lfb_conditionRemove(this);"><span class="glyphicon glyphicon-remove"></span></a> </td>');if(d){h.val(d.action);h.change();if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}setTimeout(function(){lfb_linksUpdateFields(h,d);if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}},500)}jQuery("#lfb_calcConditionsTable tbody").append(g)}function lfb_addLinkInteraction(d){var g=jQuery('<tr class="lfb_conditionItem"></tr>');var b=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var k=this;jQuery.each(k.items,function(){var l=this;if(l.type!="richtext"&&l.type!="colorpicker"){var m=k.id+"_"+l.id;b.append('<option value="'+m+'" data-type="'+l.type+'">'+k.title+' : " '+l.title+' "</option>')}})});b.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>");b.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var h=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');b.change(function(){var o=b.val().substr(0,b.val().indexOf("_"));var n=b.val().substr(b.val().indexOf("_")+1,b.val().length);var m=false;jQuery.each(lfb_steps,function(){var p=this;if(p.id==o){jQuery.each(p.items,function(){if(this.id==n){m=this}})}});var k=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");k.find("option").remove();if(b.find("option:selected").is("[data-static]")){var l=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var l=lfb_conditionGetOperators(m,b)}jQuery.each(l,function(){k.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change()});if(d){b.val(d.interaction)}if(b.find("option:selected").is("[data-static]")){var j=lfb_conditionGetOperators({type:b.find("option:selected").attr("data-type")},b)}else{var f=b.val().substr(0,b.val().indexOf("_"));var a=b.val().substr(b.val().indexOf("_")+1,b.val().length);var i=false;jQuery.each(lfb_steps,function(){var k=this;if(k.id==f){jQuery.each(k.items,function(){if(this.id==a){i=this}})}});var j=lfb_conditionGetOperators(i,b)}jQuery.each(j,function(){h.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")});h.change(function(){lfb_linksUpdateFields(jQuery(this))});var e=jQuery("<td></td>");e.append(b);g.append(e);var c=jQuery("<td></td>");c.append(h);g.append(c);g.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" onclick="lfb_conditionRemove(this);"><span class="glyphicon glyphicon-remove"></span></a> </td>');if(d){h.val(d.action);h.change();if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}setTimeout(function(){lfb_linksUpdateFields(h,d);if(d.value){h.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}},500)}jQuery("#lfb_conditionsTable tbody").append(g)}function lfb_linksUpdateFields(e,d){e.closest(".lfb_conditionItem").find(".lfb_conditionValue").parent().remove();if(e.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")=="textfield"){if(e.closest(".lfb_conditionItem").find(".lfb_conditionValue").length==0){e.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text" placeholder="http://..." class="lfb_conditionValue form-control" /> </div>')}}if(e.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")=="numberfield"){if(e.closest(".lfb_conditionItem").find(".lfb_conditionValue").length==0){e.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="number" class="lfb_conditionValue form-control" /> </div>')}}if(e.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")=="pricefield"){if(e.closest(".lfb_conditionItem").find(".lfb_conditionValue").length==0){e.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="number" step="any" class="lfb_conditionValue form-control" /> </div>')}}if(e.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")=="datefield"){if(e.closest(".lfb_conditionItem").find(".lfb_conditionValue").length==0){e.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text" step="any" class="lfb_conditionValue form-control"/> </div>');e.closest(".lfb_conditionItem").find(".lfb_conditionValue").datepicker({dateFormat:"yy-mm-dd"})}}if(e.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")=="select"){var c="";var b=e.closest(".lfb_conditionItem").find(".lfb_conditionSelect");var h=b.val().substr(0,b.val().indexOf("_"));var g=b.val().substr(b.val().indexOf("_")+1,b.val().length);var f="";jQuery.each(lfb_currentForm.steps,function(){if(this.id==h){jQuery.each(this.items,function(){if(this.id==g){f=this.optionsValues}})}});var a=f.split("|");jQuery.each(a,function(){var j=this;if(j.indexOf(";;")>0){var i=j.split(";;");j=i[0]}if(j.length>0){f+='<option value="'+j+'">'+j+"</option>"}});if(e.closest(".lfb_conditionItem").find(".lfb_conditionValue").length==0){e.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><select class="lfb_conditionValue form-control">'+f+"</select> </div>")}}if(d&&d.value){e.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(d.value)}}function lfb_conditionRemove(a){var b=jQuery(a);b.closest(".lfb_conditionItem").remove()}function lfb_linkSave(){if(lfb_canSaveLink){lfb_canSaveLink=false;lfb_showLoader();lfb_links[lfb_currentLinkIndex].conditions=new Array();jQuery(".lfb_conditionItem").each(function(){lfb_links[lfb_currentLinkIndex].conditions.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:jQuery(this).find(".lfb_conditionValue").val()})});lfb_links[lfb_currentLinkIndex].operator=jQuery("#lfb_linkOperator").val();var a=lfb_links.slice();jQuery.each(a,function(){this.originID=jQuery("#"+this.originID).attr("data-stepid");this.destinationID=jQuery("#"+this.destinationID).attr("data-stepid")});jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveLinks",formID:lfb_currentFormID,links:JSON.stringify(a)},success:function(){lfb_closeWin(jQuery("#lfb_winLink"));lfb_loadForm(lfb_currentFormID);lfb_canSaveLink=true}})}}function lfb_linkDel(){if(lfb_canSaveLink){lfb_canSaveLink=false;setTimeout(function(){lfb_canSaveLink=true},1500);lfb_links.splice(jQuery.inArray(lfb_links[lfb_currentLinkIndex],lfb_links),1);var a=lfb_links.slice();jQuery.each(a,function(){this.originID=jQuery("#"+this.originID).attr("data-stepid");this.destinationID=jQuery("#"+this.destinationID).attr("data-stepid")});jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveLinks",formID:lfb_currentFormID,links:JSON.stringify(a)},success:function(){lfb_closeWin(jQuery("#lfb_winLink"));lfb_loadForm(lfb_currentFormID)}})}}function lfb_conditionGetOperators(c,b){var a=new Array();switch(c.type){case"totalPrice":a.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"pricefield"});a.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"pricefield"});a.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"pricefield"});a.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"pricefield"});break;case"totalQt":a.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"numberfield"});a.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"numberfield"});a.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"numberfield"});a.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"numberfield"});break;case"picture":a.push({value:"clicked",text:lfb_data.texts.isSelected});a.push({value:"unclicked",text:lfb_data.texts.isUnselected});a.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"});a.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"});a.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"});a.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});if(c.quantity_enabled=="1"){a.push({value:"QtSuperior",text:lfb_data.texts.isQuantitySuperior,hasVariable:"numberfield"});a.push({value:"QtInferior",text:lfb_data.texts.isQuantityInferior,hasVariable:"numberfield"});a.push({value:"QtEqual",text:lfb_data.texts.isQuantityEqual,hasVariable:"numberfield"});a.push({value:"QtDifferent",text:lfb_data.texts.isntQuantityEqual,hasVariable:"numberfield"})}break;case"slider":a.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"});a.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"});a.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"});a.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});a.push({value:"QtSuperior",text:lfb_data.texts.isQuantitySuperior,hasVariable:"numberfield"});a.push({value:"QtInferior",text:lfb_data.texts.isQuantityInferior,hasVariable:"numberfield"});a.push({value:"QtEqual",text:lfb_data.texts.isQuantityEqual,hasVariable:"numberfield"});a.push({value:"QtDifferent",text:lfb_data.texts.isntQuantityEqual,hasVariable:"numberfield"});break;case"textfield":a.push({value:"filled",text:lfb_data.texts.isFilled});break;case"numberfield":a.push({value:"filled",text:lfb_data.texts.isFilled});a.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"numberfield"});a.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"numberfield"});a.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"numberfield"});a.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"numberfield"});break;case"textarea":a.push({value:"filled",text:lfb_data.texts.isFilled});break;case"datepicker":a.push({value:"filled",text:lfb_data.texts.isFilled});a.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"datefield"});a.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"datefield"});a.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"datefield"});a.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"datefield"});break;case"select":a.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"select"});a.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"select"});break;case"filefield":a.push({value:"filled",text:lfb_data.texts.isFilled});break;case"checkbox":a.push({value:"clicked",text:lfb_data.texts.isSelected});a.push({value:"unclicked",text:lfb_data.texts.isUnselected});a.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"});a.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"});a.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"});a.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});break;case"datefield":a.push({value:"filled",text:lfb_data.txt_filled});a.push({value:"superior",text:lfb_data.txt_superiorTo});a.push({value:"inferior",text:lfb_data.txt_inferiorTo});a.push({value:"equal",text:lfb_data.txt_equalTo});a.push({value:"different",text:lfb_data.texts.isntEqual});break;case"date":a.push({value:"superior",text:lfb_data.txt_superiorTo});a.push({value:"inferior",text:lfb_data.txt_inferiorTo});a.push({value:"equal",text:lfb_data.txt_equalTo});a.push({value:"different",text:lfb_data.texts.isntEqual});break}return a}function lfb_updateWinItemPosition(){if(jQuery("#lfb_winStep").css("display")!="none"){var a=jQuery("#"+jQuery("#lfb_itemWindow").attr("data-item"));if(a.length>0){jQuery("#lfb_itemWindow").css({top:a.offset().top-jQuery("#lfb_bootstraped.lfb_bootstraped").offset().top+a.outerHeight()+12,left:a.offset().left-jQuery("#lfb_bootstraped.lfb_bootstraped").offset().left})}else{jQuery("#lfb_itemWindow").fadeOut()}}else{jQuery("#lfb_itemWindow").fadeOut()}}function lfb_checkEmail(a){if(a.indexOf("@")!="-1"&&a.indexOf(".")!="-1"&&a!=""){return true}return false}function lfb_existInDefaultStep(b){var a=false;jQuery.each(lfb_defaultStep.interactions,function(){var c=this;if(c.itemID==b){a=true}});return a}function lfb_removeAllSteps(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeAllSteps",formID:lfb_currentFormID},success:function(){lfb_loadForm(lfb_currentFormID)}})}function lfb_addForm(){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addForm"},success:function(a){lfb_loadForm(a)}})}function lfb_removeForm(a){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeForm",formID:a},success:function(){lfb_closeSettings()}})}function lfb_saveForm(){lfb_showLoader();var formData={};jQuery("#lfb_formFields").find("input,select,textarea").each(function(){if(jQuery(this).closest("#lfb_fieldBubble").length==0&&jQuery(this).closest("#lfb_couponsTable").length==0&&jQuery(this).closest("#lfb_distanceValueBubble").length==0&&jQuery(this).closest("#lfb_calculationDatesDiffBubble").length==0){if(!jQuery(this).is('[data-switch="switch"]')){if(jQuery(this).is('[name="percentToPay"]')){if(jQuery(this).val()==0||jQuery(this).val()>100){jQuery(this).val("100")}}if(jQuery(this).is('[name="stripe_percentToPay"]')){if(jQuery(this).val()==0||jQuery(this).val()>100){jQuery(this).val("100")}}eval("formData."+jQuery(this).attr("name")+" = jQuery(this).val();")}else{var value=0;if(jQuery(this).is(":checked")){value=1}eval("formData."+jQuery(this).attr("name")+" = value;")}}});formData.email_adminContent=jQuery("#email_adminContent").code();formData.email_userContent=jQuery("#email_userContent").code();formData.legalNoticeContent=jQuery("#lfb_legalNoticeContent").code();formData.customCss=lfb_editorCustomCSS.getValue();formData.customJS=lfb_editorCustomJS.getValue();formData.action="lfb_saveForm";formData.formID=lfb_currentFormID;jQuery.ajax({url:ajaxurl,type:"post",data:formData,success:function(){jQuery("#lfb_loader").fadeOut()}})}function lfb_editField(fieldID){jQuery("#lfb_fieldBubble").find("input,textarea").val("");jQuery("#lfb_fieldBubble").find("select option").removeAttr("selected");jQuery("#lfb_fieldBubble").find("select option:eq(0)").attr("selected","selected");if(fieldID>0){jQuery.each(lfb_currentForm.fields,function(){var field=this;if(field.id==fieldID){jQuery("#lfb_fieldBubble").find("input,select,textarea").each(function(){eval("jQuery(this).val(field."+jQuery(this).attr("name")+");")})}});jQuery("#lfb_fieldBubble").css({left:jQuery('#lfb_finalStepFields tr[data-fieldid="'+fieldID+'"] td:eq(0) a').offset().left,top:jQuery('#lfb_finalStepFields tr[data-fieldid="'+fieldID+'"] td:eq(0) a').offset().top})}else{jQuery("#lfb_fieldBubble").find('input[name="id"]').val(0);jQuery("#lfb_fieldBubble").css({left:jQuery("#lfb_addFieldBtn").offset().left,top:jQuery("#lfb_addFieldBtn").offset().top+18})}jQuery("#lfb_fieldBubble").fadeIn();jQuery("#lfb_fieldBubble").addClass("lfb_hover");setTimeout(function(){jQuery("#lfb_fieldBubble").removeClass("lfb_hover")},50)}function lfb_saveField(){lfb_showLoader();jQuery("#lfb_fieldBubble").fadeOut();var fieldData={};jQuery("#lfb_fieldBubble").find("input,select,textarea").each(function(){eval("fieldData."+jQuery(this).attr("name")+" = jQuery(this).val();")});fieldData.action="lfb_saveField";fieldData.formID=lfb_currentFormID;jQuery.ajax({url:ajaxurl,type:"post",data:fieldData,success:function(){lfb_loadFields()}})}function lfb_loadFields(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadFields",formID:lfb_currentFormID},success:function(a){jQuery("#lfb_finalStepFields table tbody").html("");if(a!="[]"){a=JSON.parse(a);lfb_currentForm.fields=a;jQuery.each(a,function(){var c=this;var b=jQuery('<tr data-fieldid="'+c.id+'"></tr>');b.append('<td><a href="javascript:" onclick="lfb_editField('+c.id+');">'+c.label+"</a></td>");b.append("<td>"+c.typefield+"</td>");b.append('<td><a href="javascript:" onclick="lfb_editField('+c.id+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_removeField('+c.id+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>');jQuery("#lfb_finalStepFields table tbody").append(b);if(lfb_data.designForm==0){jQuery("#lfb_loader").fadeOut()}})}}})}function lfb_removeField(a){jQuery('#lfb_finalStepFields table tr[data-fieldid="'+a+'"]').slideUp();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeField",fieldID:a}})}function lfb_loadForm(formID){lfb_currentFormID=formID;if(jQuery("#tld_tdgnFrame").length>0){tld_previewUrl=lfb_data.websiteUrl+"?lfb_action=preview&form="+lfb_currentFormID;jQuery("#tld_tdgnFrame").attr("src",tld_previewUrl)}jQuery("#lfb_btnLogsForm").attr("data-formid",formID);lfb_showLoader();jQuery("#lfb_stepsContainer .lfb_stepBloc,.lfb_loadSteps,.lfb_linkPoint").remove();jQuery("#lfb_formFields").find('.switch [data-switch="switch"]').bootstrapSwitch("destroy");jQuery("#lfb_formFields").find('.switch > div > :not([data-switch="switch"])').remove();jQuery("#lfb_formFields").find('.switch [data-switch="switch"]').unwrap().unwrap();jQuery("#lfb_formFields").find("#lfb_itemPricesGrid tbody tr").not(".static").remove();lfb_loadFields();jQuery("#lfb_logsBtn").attr("data-formid",formID);jQuery("#lfb_chartsBtn").attr("data-formid",formID);jQuery("#lfb_btnPreview").attr("href",lfb_data.websiteUrl+"?lfb_action=preview&form="+formID);jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:formID},success:function(rep){rep=JSON.parse(rep);lfb_currentForm=rep;lfb_params=rep.params;lfb_steps=rep.steps;jQuery("#lfb_formFields").find("input,select,textarea").each(function(){if(jQuery(this).closest("#lfb_calculationDatesDiffBubble").length==0&&jQuery(this).closest("#lfb_calculationValueBubble").length==0){if(jQuery(this).is('[data-switch="switch"]')){var value=false;eval("if(rep.form."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}");jQuery(this).wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No});var self=this;if(jQuery(self).closest(".form-group").find("small").length>0){jQuery(self).closest(".has-switch").tooltip({title:jQuery(self).closest(".form-group").find("small").html()})}}else{if(jQuery(this).is("pre")){eval("jQuery(this).html(rep.form."+jQuery(this).attr("name")+");")}else{eval("jQuery(this).val(rep.form."+jQuery(this).attr("name")+");")}}}});lfb_initFormsBackend();jQuery("#lfb_itemRichText").summernote({height:300,minHeight:null,maxHeight:null,});jQuery("#lfb_tabEmail").show();jQuery("#email_adminContent").summernote({height:300,minHeight:null,maxHeight:null,});jQuery("#email_adminContent").code(rep.form.email_adminContent);jQuery("#lfb_formEmailUser").show();jQuery("#email_userContent").summernote({height:300,minHeight:null,maxHeight:null,});jQuery("#email_userContent").code(rep.form.email_userContent);jQuery("#lfb_legalNoticeContent").summernote({height:300,minHeight:null,maxHeight:null,});jQuery("#lfb_legalNoticeContent").code(rep.form.legalNoticeContent);lfb_editorCustomJS.setValue(rep.form.customJS);lfb_editorCustomCSS.setValue(rep.form.customCss);setTimeout(function(){lfb_editorCustomJS.refresh()},100);jQuery(".imageBtn").click(function(){lfb_formfield=jQuery(this).prev("input");tb_show("","media-upload.php?TB_iframe=true");return false});if(!jQuery('#lfb_formFields [name="email_toUser"]').is(":checked")){jQuery("#lfb_formEmailUser").hide()}jQuery("#lfb_tabEmail").attr("style","");jQuery("#lfb_tabEmail").prop("style","");jQuery(".colorpick").each(function(){var $this=jQuery(this);if(jQuery(this).prev(".lfb_colorPreview").length==0){jQuery(this).before('<div class="lfb_colorPreview" style="background-color:#'+$this.val().substr(1,7)+'"></div>')}jQuery(this).prev(".lfb_colorPreview").click(function(){jQuery(this).next(".colorpick").trigger("click")});jQuery(this).colpick({color:$this.val().substr(1,7),onChange:function(hsb,hex,rgb,el,bySetColor){jQuery(el).val("#"+hex);jQuery(el).prev(".lfb_colorPreview").css({backgroundColor:"#"+hex})}})});jQuery.each(rep.steps,function(index){var step=this;step.content=JSON.parse(step.content);lfb_addStep(step)});jQuery.each(rep.links,function(index){var link=this;link.originID=jQuery('.lfb_stepBloc[data-stepid="'+link.originID+'"]').attr("id");link.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+link.destinationID+'"]').attr("id");link.conditions=JSON.parse(link.conditions);lfb_links[index]=link});jQuery.each(rep.redirections,function(index){var tr=jQuery('<tr data-id="'+this.id+'"></tr>');tr.append("<td>"+this.url+"</td>");tr.append('<td><a href="javascript:" onclick="lfb_editRedirection('+this.id+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_removeRedirection('+this.id+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>');jQuery("#lfb_redirsTable tbody").append(tr)});jQuery("#lfb_panelPreview").show();jQuery("#lfb_panelFormsList").hide();jQuery("#lfb_panelLogs").hide();jQuery("#lfb_panelSettings").hide();jQuery("#lfb_couponsTable tbody").html("");jQuery.each(rep.coupons,function(){var coupon=this;if(coupon.reductionType=="percentage"){coupon.reduction="-"+coupon.reduction+"%"}else{coupon.reduction="-"+parseFloat(coupon.reduction).toFixed(2)}var tdAction='<td style="text-align:right;"><a href="javascript:" onclick="lfb_editCoupon('+coupon.id+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_removeCoupon('+coupon.id+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>';jQuery("#lfb_couponsTable tbody").append('<tr data-couponid="'+coupon.id+'"><td>'+coupon.couponCode+"</td><td>"+coupon.useMax+"</td><td>"+coupon.currentUses+"</td><td>"+coupon.reduction+"</td>"+tdAction+"</tr>")});lfb_updateStepsDesign();if(lfb_openChartsAuto){lfb_openChartsAuto=false;lfb_loadCharts(formID)}else{if(lfb_data.designForm==0){jQuery("#lfb_loader").delay(1000).fadeOut()}}setTimeout(function(){lfb_updateStepsDesign()},250);if(lfb_data.designForm!=0){lfb_data.designForm=0;window.history.pushState("lfb",document.title,"admin.php?page=lfb_menu");lfb_openFormDesigner()}}})}function lfb_initCharts(){google.charts.load("current",{packages:["corechart"]})}function lfb_openCharts(a){lfb_openChartsAuto=true;lfb_loadForm(a)}function lfb_closeCharts(){lfb_showLoader();jQuery("#lfb_panelPreview").show();jQuery("#lfb_panelCharts").hide();lfb_loadForm(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_loadCharts(c){jQuery("#lfb_panelCharts").attr("data-formid",c);jQuery("#lfb_panelPreview").hide();jQuery("#lfb_panelFormsList").hide();jQuery("#lfb_panelLogs").hide();var d=jQuery("#lfb_chartsTypeSelect").val();var a=jQuery("#lfb_chartsYear").val();var b=jQuery("#lfb_chartsMonth").val();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadCharts",formID:c,mode:d,year:a,yearMonth:b},success:function(f){jQuery("#lfb_panelCharts").show();var e=[];f=f.split("|");jQuery.each(f,function(){if(this.indexOf(";")>-1){var g=this.split(";");if(g[2]>0){chkSubs=true}e.push([g[0].toString(),parseFloat(g[1]),parseFloat(g[2])])}});google.charts.setOnLoadCallback(function(){var i=new google.visualization.DataTable();i.addColumn("string","X");i.addColumn("number",lfb_data.texts.oneTimePayment);i.addColumn("number",lfb_data.texts.subscriptions);var h="";var m="";if(jQuery('#lfb_formFields [name="currencyPosition"]').val()=="right"){m=jQuery('#lfb_formFields [name="currency"]').val()}else{h=jQuery('#lfb_formFields [name="currency"]').val()}var l=jQuery('#lfb_formFields [name="decimalsSeparator"]').val();var o=jQuery('#lfb_formFields [name="thousandsSeparator"]').val();var g=jQuery('#lfb_formFields [name="millionSeparator"]').val();var j=h+"###"+g+"###"+o+"###"+l+"00"+m;var n=new google.visualization.NumberFormat({prefix:h,suffix:m,});var p={hAxis:{title:lfb_data.texts.months,},vAxis:{title:lfb_data.texts.amountOrders,format:j,viewWindow:{min:0}},legend:{position:"bottom"},backgroundColor:"#FFFFFF",colors:["#16a085","#e67e22","#95a5a6","#34495e"],width:jQuery("#lfb_charts").parent().width(),height:550};i.addRows(e);n.format(i,1);n.format(i,2);lfb_currentChartsOptions=p;lfb_currentChartsData=i;var k=new google.visualization.LineChart(document.getElementById("lfb_charts"));lfb_currentCharts=k;k.draw(i,p);jQuery(window).resize(function(){var r=lfb_currentChartsData;var q=lfb_currentChartsOptions;q.width=jQuery("#lfb_charts").parent().width();lfb_currentCharts.draw(r,q)});jQuery("#lfb_loader").fadeOut()})}})}function lfb_loadLogs(a){lfb_showLoader();jQuery("#lfb_panelLogs").attr("data-formid",a);jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadLogs",formID:a},success:function(b){jQuery("#lfb_logsTable tbody").html(b);jQuery("#lfb_panelPreview").hide();jQuery("#lfb_panelFormsList").hide();jQuery("#lfb_panelCharts").hide();jQuery("#lfb_panelLogs").show();jQuery('#lfb_logsTable tbody [data-toggle="tooltip"]').tooltip();jQuery("#lfb_loader").fadeOut()}})}function lfb_loadLog(a){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadLog",logID:a},success:function(b){jQuery("#lfb_winLog").find(".modal-body").html(b);jQuery("#lfb_winLog").find(".modal-body [bgcolor]").each(function(){jQuery(this).css({backgroundColor:jQuery(this).attr("bgcolor")})});jQuery("#lfb_winLog").modal("show")}})}function lfb_removeLog(a,b){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeLog",logID:a},success:function(){lfb_loadLogs(b)}})}function lfb_exportForms(){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportForms"},success:function(a){jQuery("#lfb_loader").fadeOut();if(a=="1"){jQuery("#lfb_winExport").modal("show")}else{alert(lfb_data.texts.errorExport)}}})}function lfb_importForms(){lfb_showLoader();jQuery("#lfb_winImport").modal("hide");var a=new FormData(jQuery("#lfb_winImportForm")[0]);jQuery.ajax({url:ajaxurl,type:"post",xhr:function(){var b=jQuery.ajaxSettings.xhr();return b},success:function(b){if(b!="1"){jQuery("#lfb_loader").fadeOut();alert(lfb_data.texts.errorImport)}else{document.location.href=document.location.href}},data:a,cache:false,contentType:false,processData:false})}function lfb_editCoupon(b){var c="";var a=1;var d=0;if(b>0){c=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+b+'"] td:eq(0)').html();a=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+b+'"] td:eq(1)').html();d=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+b+'"] td:eq(3)').html();d=d.substr(1,d.length);if(d.substr(d.length-1,1)=="%"){d=d.substr(0,d.length-1)}}jQuery("#lfb_winEditCoupon .form-group").removeClass("has-error");jQuery("#lfb_winEditCoupon").attr("data-couponid",b);jQuery('#lfb_winEditCoupon [name="couponCode"]').val(c);jQuery('#lfb_winEditCoupon [name="useMax"]').val(a);jQuery('#lfb_winEditCoupon [name="reduction"]').val(d);jQuery("#lfb_winEditCoupon").modal("show")}function lfb_removeCoupon(a){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeCoupon",formID:lfb_currentFormID,couponID:a},success:function(){jQuery('#lfb_couponsTable tbody tr[data-couponid="'+a+'"]').slideUp();setTimeout(function(){jQuery('#lfb_couponsTable tbody tr[data-couponid="'+a+'"]').remove()},300)}})}function lfb_removeAllCoupons(){jQuery("#lfb_couponsTable tbody").html("");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeAllCoupons",formID:lfb_currentFormID},success:function(){}})}function lfb_saveCoupon(){var c=jQuery("#lfb_winEditCoupon").attr("data-couponid");jQuery("#lfb_winEditCoupon .form-group").removeClass("has-error");var a=false;if(jQuery('#lfb_winEditCoupon [name="couponCode"]').val().length<3){a=true;jQuery('#lfb_winEditCoupon [name="couponCode"]').closest(".form-group").addClass("has-error")}if(!a){var e=jQuery('#lfb_winEditCoupon [name="couponCode"]').val();var b=jQuery('#lfb_winEditCoupon [name="useMax"]').val();var f=jQuery('#lfb_winEditCoupon [name="reduction"]').val();var d=jQuery('#lfb_winEditCoupon [name="reductionType"]').val();if(f==""||isNaN(f)){f=0}if(f<0){f*=-1}jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCoupon",formID:lfb_currentFormID,couponID:c,couponCode:jQuery('#lfb_winEditCoupon [name="couponCode"]').val(),useMax:jQuery('#lfb_winEditCoupon [name="useMax"]').val(),reduction:jQuery('#lfb_winEditCoupon [name="reduction"]').val(),reductionType:jQuery('#lfb_winEditCoupon [name="reductionType"]').val()},success:function(h){jQuery("#lfb_winEditCoupon").modal("hide");if(d=="percentage"){f="-"+f+"%"}else{f="-"+parseFloat(f).toFixed(2)}if(c==0){var g='<td><a href="javascript:" onclick="lfb_editCoupon('+h+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_removeCoupon('+h+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>';jQuery("#lfb_couponsTable tbody").append('<tr data-couponid="'+h+'"><td>'+e+"</td><td>"+b+"</td><td>0</td><td>"+f+"</td>"+g+"</tr>")}else{jQuery('#lfb_couponsTable tbody tr[data-couponid="'+c+'"] td:eq(0)').html(e);jQuery('#lfb_couponsTable tbody tr[data-couponid="'+c+'"] td:eq(1)').html(b);jQuery('#lfb_couponsTable tbody tr[data-couponid="'+c+'"] td:eq(3)').html(f)}}})}}function lfb_addDateDiffValue(a){jQuery("#lfb_calculationDatesDiffBubble").find("select").val("currentDate");jQuery("#lfb_calculationDatesDiffBubble").css({left:jQuery(a).offset().left,top:jQuery(a).offset().top+10});jQuery("#lfb_calculationValueBubble").fadeOut();jQuery("#lfb_calculationDatesDiffBubble").fadeIn();jQuery("#lfb_calculationDatesDiffBubble").addClass("lfb_hover");lfb_updateCalculationsDates()}function lfb_updateCalculationsDates(){jQuery("#lfb_calculationDatesDiffBubble select option:not([data-static])").remove();jQuery.each(lfb_steps,function(){var a=this;jQuery.each(a.items,function(){var b=this;if(b.type=="datepicker"){var c=b.id;jQuery("#lfb_calculationDatesDiffBubble select").append('<option value="'+c+'" data-type="'+b.type+'">'+a.title+' : " '+b.title+' "</option>')}})})}function lfb_addCalculationValue(a){jQuery("#lfb_calculationValueBubble").find("select,textarea,input").val("");lfb_updateCalculationsValueItems();jQuery("#lfb_calculationValueBubble").css({left:jQuery(a).offset().left,top:jQuery(a).offset().top+10});jQuery("#lfb_calculationDatesDiffBubble").fadeOut();jQuery("#lfb_calculationValueBubble").fadeIn();jQuery("#lfb_calculationValueBubble").addClass("lfb_hover");lfb_updateCalculationsValueElements()}function lfb_updateCalculationsValueItems(){var a=jQuery('#lfb_calculationValueBubble select[name="itemID"]');a.html("");jQuery.each(lfb_steps,function(){var b=this;jQuery.each(b.items,function(){var c=this;if(c.type=="picture"||c.type=="checkbox"||c.type=="numberfield"||c.type=="select"||c.type=="slider"){var d=c.id;a.append('<option value="'+d+'" data-type="'+c.type+'">'+b.title+' : " '+c.title+' "</option>')}})});a.append('<option value="_total" data-type="totalPrice">'+lfb_data.texts.totalPrice+"</option>");a.append('<option value="_total_qt" data-type="totalQt">'+lfb_data.texts.totalQuantity+"</option>")}function lfb_updateCalculationsValueElements(){var a=jQuery('#lfb_calculationValueBubble select[name="itemID"]');var c=jQuery('#lfb_calculationValueBubble select[name="element"]');c.val("");c.find('option[value="quantity"]').hide();c.find('option[value=""]').show();if(a.val()!=""){var b=a.val();jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){if(this.id==b){if(this.quantity_enabled==1||this.type=="slider"){c.find('option[value="quantity"]').show()}else{c.find('option[value="quantity"]').hide()}if(this.type=="numberfield"){c.find('option[value="value"]').show();c.find('option[value=""]').hide();c.val("value")}else{c.find('option[value="value"]').hide();c.find('option[value=""]').show()}}})});if(a.val()=="_total_qt"){c.find('option[value="quantity"]').show();c.find('option[value=""]').hide();c.val("quantity")}}}function lfb_addDistanceCondition(){jQuery("#lfb_winDistances").fadeIn()}function lfb_saveCalculationValue(){var b=jQuery('#lfb_calculationValueBubble select[name="itemID"]');var g=jQuery('#lfb_calculationValueBubble select[name="element"]');var d="price";if(g.val()!=""){d=g.val()}var c="[item-"+b.val()+"_"+d+"]";if(b.val()=="_total"){c="[total]"}if(b.val()=="_total_qt"){c="[total_quantity]"}var a=jQuery("#lfb_winItem").find('[name="calculation"]').prop("selectionStart");var e=jQuery("#lfb_winItem").find('[name="calculation"]').val();if(isNaN(a)){a=e.length}var f=e.substr(0,a)+" "+c+" "+e.substr(a,e.length);jQuery("#lfb_winItem").find('[name="calculation"]').val(f);jQuery("#lfb_calculationValueBubble").fadeOut()}function lfb_saveCalculationDatesDiff(){var d=jQuery('#lfb_calculationDatesDiffBubble select[name="startDate"]');var b=jQuery('#lfb_calculationDatesDiffBubble select[name="endDate"]');var c="[dateDifference-"+d.val()+"_"+b.val()+"]";var a=jQuery("#lfb_winItem").find('[name="calculation"]').prop("selectionStart");var e=jQuery("#lfb_winItem").find('[name="calculation"]').val();if(isNaN(a)){a=e.length}var f=e.substr(0,a)+" "+c+" "+e.substr(a,e.length);jQuery("#lfb_winItem").find('[name="calculation"]').val(f);jQuery("#lfb_calculationDatesDiffBubble").fadeOut()}function lfb_addCalculationCondition(){jQuery("#lfb_winCalculationConditions #lfb_calcConditionsTable tbody").html("");jQuery("body,html").animate({scrollTop:0},200);jQuery("#lfb_winCalculationConditions").fadeIn()}function lfb_calcConditionSave(){var b="if(";if(jQuery("#lfb_winItem").find('[name="calculation"]').val().length>0){b="\n"+b}var c="&&";if(jQuery("#lfb_calcOperator").val()=="OR"){c="||"}jQuery("#lfb_winCalculationConditions #lfb_calcConditionsTable tbody tr.lfb_conditionItem").each(function(){var f=this;var g=jQuery(f).find(".lfb_conditionSelect").val();if(g!="_total"&&g!="_total_qt"){g="item-"+g.substr(g.indexOf("_")+1,g.length)}if(jQuery(f).find(".lfb_conditionoperatorSelect ").val().substr(0,2)=="Qt"){b+="(["+g+"_quantity]";if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="QtSuperior"){b+=" >"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="QtInferior"){b+=" <"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="QtDifferent"){b+=" !="}else{b+=" =="}}}b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val().substr(0,5)=="Price"){b+="(["+g+"_price]";if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="PriceSuperior"){b+=" >"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="PriceInferior"){b+=" <"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="PriceDifferent"){b+=" !="}else{b+=" =="}}}b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="clicked"){b+="(["+g+"_isChecked]"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="unclicked"){b+="(["+g+"_isUnchecked]"}else{if(jQuery(f).find(".lfb_conditionoperatorSelect ").val()=="superior"){if(g=="_total"){b+="([total]";b+=" >";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(g=="_total_qt"){b+="([total_quantity]";b+=" >";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="select"){b+="(["+g+"_value]";b+=" >";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="numberfield"){b+="(["+g+"_value]";b+=" >";b+=jQuery(f).find(".lfb_conditionValue").val()}else{b+="(["+g+"_date]";b+=" >";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}}}}}else{if(jQuery(f).find(".lfb_conditionoperatorSelect").val()=="inferior"){if(g=="_total"){b+="([total]";b+=" <";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(g=="_total_qt"){b+="([total_quantity]";b+=" <";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="select"){b+="(["+g+"_value]";b+=" <";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="numberfield"){b+="(["+g+"_value]";b+=" <";b+=jQuery(f).find(".lfb_conditionValue").val()}else{b+="(["+g+"_date]";b+=" <";b+='"'+jQuery(f).find(".lfb_conditionValue").val()+'"'}}}}}else{if(jQuery(f).find(".lfb_conditionoperatorSelect").val()=="equal"){if(g=="_total"){b+="([total]";b+=" ==";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(g=="_total_qt"){b+="([total_quantity]";b+=" ==";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="select"){b+="(["+g+"_value]";b+=" ==";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="numberfield"){b+="(["+g+"_value]";b+=" ==";b+=jQuery(f).find(".lfb_conditionValue").val()}else{b+="(["+g+"_date]";b+=" ==";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}}}}}else{if(jQuery(f).find(".lfb_conditionoperatorSelect").val()=="different"){if(g=="_total"){b+="([total]";b+=" !=";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(g=="_total_qt"){b+="([total_quantity]";b+=" !=";b+=jQuery(f).find(".lfb_conditionValue").val()}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="select"){b+="(["+g+"_value]";b+=" !=";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}else{if(jQuery(f).find('.lfb_conditionSelect option[value="'+jQuery(f).find(".lfb_conditionSelect").val()+'"]').attr("data-type")=="numberfield"){b+="(["+g+"_value]";b+=" !=";b+=jQuery(f).find(".lfb_conditionValue").val()}else{b+="(["+g+"_date]";b+=" !=";b+="'"+jQuery(f).find(".lfb_conditionValue").val()+"'"}}}}}else{if(jQuery(f).find(".lfb_conditionoperatorSelect").val()=="filled"){b+="(["+g+"_isFilled]"}}}}}}}}}b+=")"+c});b=b.substr(0,b.length-2);b+=") {\n\n}";var a=jQuery("#lfb_winItem").find('[name="calculation"]').prop("selectionStart");var d=jQuery("#lfb_winItem").find('[name="calculation"]').val();if(isNaN(a)){a==d.length}var e=d.substr(0,a)+" "+b+" "+d.substr(a,d.length);jQuery("#lfb_winItem").find('[name="calculation"]').val(e);jQuery("#lfb_winCalculationConditions").fadeOut()}function lfb_addEmailValue(b){jQuery("#lfb_emailValueBubble").find("select,textarea,input").val("");lfb_updateEmailValueItems();var a="#lfb_btnAddEmailValue";if(b){jQuery("#lfb_emailValueBubble").attr("data-customermode","1");a="#lfb_btnAddEmailValueCustomer"}else{jQuery("#lfb_emailValueBubble").attr("data-customermode","0")}jQuery("#lfb_emailValueBubble").css({left:jQuery(a).offset().left-80,top:jQuery(a).offset().top+18});jQuery("#lfb_emailValueBubble").fadeIn();jQuery("#lfb_emailValueBubble").addClass("lfb_hover");lfb_updateEmailValueElements()}function lfb_updateEmailValueElements(){var a=jQuery('#lfb_emailValueBubble select[name="itemID"]');var c=jQuery('#lfb_emailValueBubble select[name="element"]');c.val("");c.find('option[value="quantity"]').hide();c.find('option[value=""]').show();if(a.val()!=""){var b=a.val();jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){if(this.id==b){if(this.quantity_enabled==1||this.type=="slider"){c.find('option[value="quantity"]').show()}else{c.find('option[value="quantity"]').hide()}if(this.type=="numberfield"||this.type=="textfield"||this.type=="textarea"||this.type=="select"||this.type=="colorpicker"||this.type=="datepicker"){c.find('option[value="value"]').show();c.find('option[value=""]').hide();c.val("value")}else{c.find('option[value="value"]').hide();c.find('option[value=""]').show()}}})})}}function lfb_updateEmailValueItems(){var a=jQuery('#lfb_emailValueBubble select[name="itemID"]');a.html("");jQuery.each(lfb_steps,function(){var b=this;jQuery.each(b.items,function(){var c=this;if(this.type=="numberfield"||this.type=="textfield"||this.type=="textarea"||this.type=="select"||this.type=="colorpicker"||this.type=="datepicker"){var d=c.id;a.append('<option value="'+d+'" data-type="'+c.type+'">'+b.title+' : " '+c.title+' "</option>')}})});jQuery.each(lfb_currentForm.fields,function(){a.append('<option value="f'+this.id+'" data-type="textfield">'+lfb_data.texts.lastStep+' : " '+this.label+' "</option>')})}function lfb_saveEmailValue(){var a=jQuery('#lfb_emailValueBubble select[name="itemID"]');var e=jQuery('#lfb_emailValueBubble select[name="element"]');var d="#email_adminContent";if(jQuery("#lfb_emailValueBubble").attr("data-customermode")=="1"){d="#email_userContent"}var c="value";if(e.val()!=""){c=e.val()}var b="[item-"+a.val()+"_"+c+"]";jQuery(d).summernote("editor.focus");jQuery(d).summernote("editor.insertText",b);jQuery("#lfb_emailValueBubble").fadeOut()}function lfb_exportLogs(){var a=jQuery("#lfb_panelLogs").attr("data-formid");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportLogs",formID:a},success:function(b){if(b!="error"){window.open(b,"_blank")}}})}function lfb_editShowStepConditions(){jQuery("#lfb_winShowStepConditions #lfb_showStepOperator").val(jQuery("#lfb_winStep").find('[name="showConditionsOperator"]').val());jQuery("#lfb_winShowStepConditions #lfb_showStepConditionsTable tbody").html("");if(jQuery("#lfb_winStep").find('[name="showConditions"]').val()!=""){try{var b=JSON.parse(jQuery("#lfb_winStep").find('[name="showConditions"]').val());jQuery.each(b,function(){lfb_addShowStepInteraction(this)})}catch(a){}}jQuery("#lfb_winShowStepConditions").fadeIn();setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300);jQuery("body,html").animate({scrollTop:0},200)}function lfb_editShowConditions(){jQuery("#lfb_winShowConditions #lfb_showOperator").val(jQuery("#lfb_winItem").find('[name="showConditionsOperator"]').val());jQuery("#lfb_winShowConditions #lfb_showConditionsTable tbody").html("");if(jQuery("#lfb_winItem").find('[name="showConditions"]').val()!=""){try{var b=JSON.parse(jQuery("#lfb_winItem").find('[name="showConditions"]').val());jQuery.each(b,function(){lfb_addShowInteraction(this)})}catch(a){}}jQuery("#lfb_winShowConditions").fadeIn();setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300);jQuery("body,html").animate({scrollTop:0},200)}function lfb_showConditionSave(){var a=new Array();jQuery("#lfb_showConditionsTable .lfb_conditionItem").each(function(){var b=jQuery(this).find(".lfb_conditionValue").val();if(b){b=b.replace(/\'/g,"`")}a.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:b})});jQuery("#lfb_winItem").find('[name="showConditionsOperator"]').val(jQuery("#lfb_showOperator").val());jQuery("#lfb_winItem").find('[name="showConditions"]').val(JSON.stringify(a));jQuery("#lfb_winShowConditions").fadeOut()}function lfb_showStepConditionSave(){var a=new Array();jQuery("#lfb_showStepConditionsTable .lfb_conditionItem").each(function(){var b=jQuery(this).find(".lfb_conditionValue").val();if(b){b=b.replace(/\'/g,"`")}a.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:b})});jQuery("#lfb_winStep").find('[name="showConditionsOperator"]').val(jQuery("#lfb_showStepOperator").val());jQuery("#lfb_winStep").find('[name="showConditions"]').val(JSON.stringify(a));jQuery("#lfb_winShowStepConditions").fadeOut()}function lfb_selectPre(a){jQuery(a).select()}function lfb_removeRedirection(a){jQuery('#lfb_redirsTable tr[data-id="'+a+'"]').remove();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeRedirection",id:a,formID:lfb_currentFormID}})}function lfb_editRedirection(b,a){lfb_currentRedirEdit=b;jQuery("#lfb_winRedirection #lfb_redirOperator").val(jQuery("#lfb_winItem").find('[name="showConditionsOperator"]').val());jQuery("#lfb_winRedirection #lfb_redirConditionsTable tbody").html("");jQuery("#lfb_winRedirection #lfb_redirUrl").val("");if(b>0){jQuery.each(lfb_currentForm.redirections,function(){if(this.id==b){jQuery("#lfb_winRedirection #lfb_redirUrl").val(this.url);var c=this.conditions.replace(/\\"/g,'"');c=JSON.parse(c);jQuery.each(c,function(){lfb_addRedirInteraction(this)})}})}jQuery("#lfb_winRedirection").fadeIn();setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300);jQuery("body,html").animate({scrollTop:0},200)}function lfb_redirSave(){var c=new Array();jQuery("#lfb_winRedirection #lfb_redirUrl").parent().removeClass("has-error");jQuery("#lfb_winRedirection .lfb_conditionItem").each(function(){var d=jQuery(this).find(".lfb_conditionValue").val();if(d){d=d.replace(/\'/g,"`")}c.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:d})});var a=jQuery("#lfb_winRedirection #lfb_redirUrl").val();if(a.length<1){jQuery("#lfb_winRedirection #lfb_redirUrl").parent().addClass("has-error")}else{var b={action:"lfb_saveRedirection",id:lfb_currentRedirEdit,url:a,formID:lfb_currentFormID,conditions:JSON.stringify(c),operator:jQuery("#lfb_redirOperator").val()};lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:b,success:function(e){if(lfb_currentRedirEdit==0){b.id=e;lfb_currentForm.redirections.push(b);var d=jQuery('<tr data-id="'+this.id+'"></tr>');d.append("<td>"+b.url+"</td>");d.append('<td style="text-align:right;"><a href="javascript:" onclick="lfb_editRedirection('+b.id+');" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" onclick="lfb_removeRedirection('+b.id+');" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>');jQuery("#lfb_redirsTable tbody").append(d)}else{jQuery.each(lfb_currentForm.redirections,function(){if(this.id==lfb_currentRedirEdit){this.url=b.url;this.conditions=b.conditions;this.conditionsOperator=b.operator}})}jQuery("#lfb_loader").fadeOut()}})}jQuery("#lfb_winRedirection").fadeOut()}function lfb_editDistanceValue(u){lfb_distanceModeQt=u;var n=-1;var r=-1;var f=-1;var y=-1;var A=-1;var h=-1;var x=-1;var e=-1;var B="km";if(u){var m=jQuery('#lfb_winItem [name="distanceQt"]').val();if(m.indexOf("distance_")>-1){var w=-1;while((w=m.indexOf("distance_",w+1))!=-1){var v=m.indexOf("-",w+9)+1;n=m.substr(w+9,m.indexOf("-",w)-(w+9));var C=m.indexOf("-",v)+1;r=m.substr(v,m.indexOf("-",v)-(v));var s=m.indexOf("-",C)+1;f=m.substr(C,m.indexOf("-",C)-(C));var b=m.indexOf("_",s)+1;y=m.substr(s,m.indexOf("_",s)-(s));var c=m.indexOf("-",b)+1;A=m.substr(b,m.indexOf("-",b)-(b));var p=m.indexOf("-",c)+1;h=m.substr(c,m.indexOf("-",c)-(c));var a=m.indexOf("-",p)+1;x=m.substr(p,m.indexOf("-",p)-(p));var t=m.indexOf("-",a)+1;e=m.substr(a,m.indexOf("_",a)-(a));B=m.substr(t,m.indexOf("]",t)-(t))}}}var g=jQuery("#lfb_departAdressItem");var d=jQuery("#lfb_arrivalAdressItem");var l=jQuery("#lfb_departCityItem");var k=jQuery("#lfb_arrivalCityItem");var q=jQuery("#lfb_departZipItem");var o=jQuery("#lfb_arrivalZipItem");var j=jQuery("#lfb_departCountryItem");var z=jQuery("#lfb_arrivalCountryItem");g.find("option").remove();d.find("option").remove();l.find("option").remove();k.find("option").remove();q.find("option").remove();o.find("option").remove();j.find("option").remove();z.find("option").remove();g.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");d.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");l.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");k.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");q.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");o.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");j.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");z.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>");jQuery.each(lfb_currentForm.steps,function(){var i=this;jQuery.each(this.items,function(){var M=this;if(M.type=="textfield"||M.type=="select"){var D=M.id;var H="";var I="";var E="";var F="";var L="";var K="";var J="";var G="";if(M.id==n){H="selected"}if(M.id==r){I="selected"}if(M.id==f){E="selected"}if(M.id==y){F="selected"}if(M.id==A){L="selected"}if(M.id==h){K="selected"}if(M.id==x){J="selected"}if(M.id==e){G="selected"}g.append("<option "+H+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');d.append("<option "+L+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');l.append("<option "+I+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');k.append("<option "+K+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');q.append("<option "+E+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');o.append("<option "+J+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');j.append("<option "+F+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>');z.append("<option "+G+' value="'+D+'" data-type="'+M.type+'">'+i.title+' : " '+M.title+' "</option>')}})});jQuery("body,html").animate({scrollTop:0},200);jQuery("#lfb_winDistance").fadeIn()}function lfb_addonTdgn(){lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addonTdgn",code:jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').val()},success:function(a){a.trim();if(a=="101"){document.location.href=document.location.href+"&lfb_formDesign="+lfb_currentFormID}else{jQuery("#lfb_loader").fadeOut();jQuery("#lfb_winTldAddon").modal("show");jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').closest(".form-group").addClass("has-error")}}})}function lfb_settings_checkLicense(){var a=false;var b=jQuery('#lfb_settings_licenseContainer input[name="purchaseCode"]');if(b.val().length<9){b.parent().addClass("has-error")}else{lfb_showLoader();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_checkLicense",code:b.val()},success:function(c){jQuery("#lfb_loader").fadeOut();if(c=="1"){b.parent().addClass("has-error")}else{document.location.href=document.location.href}}})}}function lfb_saveDistanceValue(){var e="";if(jQuery("#lfb_departAdressItem").val()!=""){e=jQuery("#lfb_departAdressItem").val()}var c="";if(jQuery("#lfb_departCityItem").val()!=""){c=jQuery("#lfb_departCityItem").val()}var f="";if(jQuery("#lfb_departCountryItem").val()!=""){f=jQuery("#lfb_departCountryItem").val()}var k="";if(jQuery("#lfb_departZipItem").val()!=""){k=jQuery("#lfb_departZipItem").val()}var h="";if(jQuery("#lfb_arrivalAdressItem").val()!=""){h=jQuery("#lfb_arrivalAdressItem").val()}var m="";if(jQuery("#lfb_arrivalCityItem").val()!=""){m=jQuery("#lfb_arrivalCityItem").val()}var l="";if(jQuery("#lfb_arrivalCountryItem").val()!=""){l=jQuery("#lfb_arrivalCountryItem").val()}var g="";if(jQuery("#lfb_arrivalZipItem").val()!=""){g=jQuery("#lfb_arrivalZipItem").val()}var d=jQuery("#lfb_distanceType").val();var b="[distance_";b+=e+"-"+c+"-"+k+"-"+f+"_"+h+"-"+m+"-"+g+"-"+l+"_"+d;b+="]";if(e==""&&c==""&&f==""&&h==""&&m==""&&l==""&&k==""&&g==""){b=""}if(!lfb_distanceModeQt){var i=jQuery("#lfb_winItem").find('[name="calculation"]').prop("selectionStart");var j=jQuery("#lfb_winItem").find('[name="calculation"]').val();if(isNaN(i)){i==j.length}var a=j.substr(0,i)+" "+b+" "+j.substr(i,j.length);jQuery("#lfb_winItem").find('[name="calculation"]').val(a)}else{jQuery("#lfb_winItem").find('[name="distanceQt"]').val(b)}jQuery("#lfb_winDistance").fadeOut()}function lfb_openFormDesigner(){lfb_showLoader();jQuery("#lfb_loader").css({position:"fixed"});jQuery("body").css({overflow:"hidden"});setTimeout(function(){jQuery(".tld_tdgnBootstrap").fadeIn()},500);tld_onOpen()}function lfb_closeFormDesigner(){jQuery("#lfb_loader").css({position:"absolute"});jQuery(".tld_tdgnBootstrap").fadeOut();jQuery("body").css({overflow:"auto"})}function lfb_edit_option(b){var d=jQuery(b).closest("tr");var a=d.children("td:eq(0)").html();var c=d.children("td:eq(1)").html();d.children("td:eq(0)").html('<input type="text" id="option_edit_value" class="form-control" value="'+a+'" placeholder="Option value">');d.children("td:eq(1)").html('<input type="number" id="option_new_price" step="any" class="form-control" value="'+c+'" placeholder="Option price">');jQuery(b).hide();jQuery(b).after('<a href="javascript:" onclick="lfb_edit_saveOption(this);" class="btn btn-primary btn-circle "><span class="glyphicon glyphicon-ok"></span></a>')}function lfb_edit_saveOption(b){var d=jQuery(b).closest("tr");var a=d.children("td:eq(0)").find("input").val();var c=d.children("td:eq(1)").find("input").val();d.children("td:eq(0)").html(a);d.children("td:eq(1)").html(c);jQuery(b).prev("a").show();jQuery(b).remove()};