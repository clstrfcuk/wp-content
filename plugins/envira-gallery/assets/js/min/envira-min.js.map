{"version":3,"sources":["webpack:///webpack/bootstrap 5034528d3f2cdb572116","webpack:///external \"jQuery\"","webpack:///./assets/js/lib/layout-mode.js","webpack:///./node_modules/get-size/get-size.js","webpack:///./node_modules/outlayer/outlayer.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./assets/js/envira.js","webpack:///./assets/js/lib/mousewheel.js","webpack:///./assets/js/gallery-themes.js","webpack:///./assets/js/lib/jquery.justifiedGallery.js","webpack:///./assets/js/lib/enviraJustifiedGallery-extensions.js","webpack:///./assets/js/lib/isotope.js","webpack:///./node_modules/fizzy-ui-utils/utils.js","webpack:///./node_modules/desandro-matches-selector/matches-selector.js","webpack:///./node_modules/outlayer/item.js","webpack:///./assets/js/lib/layout-modes/masonry.js","webpack:///./node_modules/masonry-layout/masonry.js","webpack:///./assets/js/lib/layout-modes/fit-rows.js","webpack:///./assets/js/lib/layout-modes/vertical.js","webpack:///./assets/js/lib/enviratope-item.js","webpack:///./assets/js/lib/imagesloaded.js","webpack:///./assets/js/lib/envirabox.js","webpack:///./assets/js/lib/envirabox-fullscreen.js","webpack:///./assets/js/lib/envirabox-media.js","webpack:///./assets/js/lib/envirabox-wheel.js","webpack:///./assets/js/lib/envirabox-guestures.js","webpack:///./assets/js/lib/envirabox-thumbs.js","webpack:///./assets/js/lib/envirabox-slideshow.js","webpack:///./assets/js/gallery-init.js","webpack:///./assets/js/lib/enviraLazy.js","webpack:///./assets/js/gallery-link.js"],"names":["window","factory","define","module","exports","require","Isotope","LayoutMode","getSize","Outlayer","isotope","options","namespace","element","items","filteredItems","size","proto","prototype","facadeMethods","forEach","methodName","apply","arguments","needsVerticalResizeLayout","hasSizes","innerHeight","_getMeasurement","getColumnWidth","getSegmentSize","getRowHeight","segment","segmentName","outerSize","firstItemSize","getFirstItemSize","firstItem","layout","modes","create","Mode","Object","constructor","envira_galleries","envira_links","$","document","Envira","Envira_Link","envira_gallery","on","e","each","$this","$id","data","$envira_galleries","$envira_images","$envira_lightbox","trigger","debug","undefined","console","log","location","pathname","replace","hostname","envirabox","close","event","image_id","envira_container","find","closest","hasClass","delay","show","envira_lazy_width","width","ratio1","naturalHeight","naturalWidth","ratio2","ratio","padding_bottom","parent","div_envira_lazy","css","attr","gallery_id","laidOutItems","jQuery","toFix","toBind","documentMode","slice","Array","nullLowestDeltaTimeout","lowestDelta","fixHooks","i","length","mouseHooks","special","mousewheel","version","setup","addEventListener","handler","onmousewheel","getLineHeight","getPageHeight","teardown","removeEventListener","removeData","elem","$elem","$parent","fn","parseInt","height","settings","adjustOldDeltas","normalizeOffset","extend","bind","unmousewheel","unbind","orgEvent","args","call","delta","deltaX","deltaY","absDelta","offsetX","offsetY","fix","type","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaMode","lineHeight","pageHeight","Math","max","abs","shouldAdjustOldDeltas","getBoundingClientRect","boundingRect","clientX","left","clientY","top","deltaFactor","unshift","clearTimeout","setTimeout","nullLowestDelta","dispatch","handle","jg_effect_desaturate","src","supportsCanvas","createElement","getContext","canvas","context","imageData","px","gray","img","Image","drawImage","getImageData","putImageData","toDataURL","jg_effect_threshold","threshold","r","g","b","v","jg_effect_blur","top_x","top_y","radius","iterations","pixels","rsum","gsum","bsum","asum","x","y","p","p1","p2","yp","yi","yw","idx","wm","hm","wh","rad1","mul_sum","mul_table","shg_sum","shg_table","vmin","vmax","jg_effect_vintage","onError","alert","effect","vignette","sepia","noise","desaturate","lighten","VintageJS","hasScrollBar","JustifiedGallery","$gallery","checkSettings","imgAnalyzerTimeout","entries","buildingRow","entriesBuff","aspectRatio","lastAnalyzedIndex","yield","every","flushed","border","margins","maxRowHeight","retrieveMaxRowHeight","suffixRanges","retrieveSuffixRanges","offY","rows","spinner","phase","timeSlot","$el","intervalId","checkWidthIntervalId","galleryWidth","getSuffix","longestSide","sizeRangeSuffixes","removeSuffix","str","suffix","substring","endsWith","indexOf","getUsedSuffix","si","hasOwnProperty","newSrc","imageSrc","imgWidth","imgHeight","newImageSrc","thumbnailPath","matchRes","match","extension","ext","showImg","$entry","callback","cssAnimation","addClass","stop","fadeTo","imagesAnimationDuration","extractImgSrcFromImage","$image","imgFromEntry","$img","captionFromEntry","$caption","displayEntry","rowHeight","one","loadNewImage","onImageEvent","proxy","displayEntryCaption","captions","$imgCaption","caption","isValidCaption","append","captionSettings","nonVisibleOpacity","addCaptionEventsHandlers","removeCaptionEventsHandlers","onEntryMouseEnterForCaption","eventObject","currentTarget","removeClass","animationDuration","visibleOpacity","onEntryMouseLeaveForCaption","captionMouseEvents","mouseenter","mouseleave","off","prepareBuildingRow","isLastRow","imgAspectRatio","newImgW","newImgH","justify","minHeight","availableWidth","defaultRowHeight","justifiable","justifyThreshold","lastRow","round","ceil","fixedHeight","clearBuildingRow","flushRow","buildingRowRes","offX","isPercentage","value","galleryHeightToSet","getSpinnerHeight","scrollBarOn","checkWidth","setInterval","parseFloat","refreshSensitivity","rewind","startImgAnalyzer","refreshTime","isSpinnerActive","stopLoadingSpinnerAnimation","clearInterval","detach","startLoadingSpinnerAnimation","spinnerContext","$spinnerPoints","eq","updateEntries","norewind","selector","toArray","filter","modifyEntries","filterArray","resetFilters","isFunction","sort","sortArray","randomize","shuffleArray","insertToGallery","that","appendTo","a","j","temp","floor","random","el","is","functionToApply","lastEntries","splice","concat","destroy","_","entry","remove","analyzeImages","isForResize","push","stopImgAnalyzerStarter","onLoad","memImage","$memImage","init","imagesToLoad","skippedImages","index","rel","target","waitThumbnailsLoad","isNaN","loadImg","checkOrConvertNumber","settingContainer","settingName","checkSizeRangesSuffixes","rangeIdx","newSizeRngSuffixes","numIdx","newMaxRowHeight","lastRowModes","join","updateSettings","newSettings","justifiedGallery","arg","gallery","controller","defaults","EnviraJustifiedGallery","enviraJustifiedGallery","obj","revised_caption","html","text","after","imgCaptionHeight","jQueryBridget","arraySlice","logError","message","error","PluginClass","option","opts","isPlainObject","arg0","methodCall","plainCall","$elems","returnValue","pluginMethodStr","instance","method","charAt","_init","updateJQuery","bridget","global","EvEmitter","eventName","listener","events","_events","listeners","once","onceEvents","_onceEvents","onceListeners","emitEvent","isOnce","getStyleSize","num","isValid","noop","measurements","measurementsLength","getZeroSize","innerWidth","outerWidth","outerHeight","measurement","getStyle","style","getComputedStyle","isSetup","isBoxSizeOuter","div","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","removeChild","querySelector","nodeType","display","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","prefix","fizzyUIUtils","utils","prop","modulo","makeArray","ary","isArray","removeFrom","getParent","parentNode","getQueryElement","handleEvent","filterFindElements","elems","ffElems","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","timeoutName","timeout","_this","docReady","readyState","toDashed","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","dataOptionsAttr","getAttribute","JSON","parse","className","Item","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","position","_create","_transn","ingProperties","clean","onEnd","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","compareX","compareY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","h","enableTransition","toDashedAll","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","propertyName","disableTransition","removeTransitionStyles","cleanStyle","cleanTransitionStyle","stagger","removeElem","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","right","bottom","GUID","instances","queryElement","$element","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","_itemize","children","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","map","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getItemsForLayout","_layoutItems","_postLayout","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","onComplete","dispatchEvent","count","doneCount","tick","emitArgs","$event","Event","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","_boundingRect","_getElementOffset","thisRect","offset","isResizeBound","unbindResize","onresize","needsResizeLayout","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","Layout","subclass","Parent","SubClass","msUnits","ms","s","time","unit","mult","Enviratope","itemGUID","sortData","updateSortData","getSortData","sorters","_sorters","key","sorter","_destroy","enviratope","Masonry","fitWidth","measureColumns","colYs","cols","maxY","getContainerWidth","columnWidth","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colGroup","_getColGroup","minimumY","shortColIndex","setHeight","setSpan","groupCount","groupColYs","stampSize","firstX","lastX","firstCol","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","MasonryMode","keepModeMethods","FitRows","itemWidth","Vertical","horizontalAlignment","trim","String","layoutMode","isJQueryFiltering","sortAscending","_getSorters","sortHistory","name","_initLayoutMode","_updateItemsSortData","initialOpts","arrange","_layout","_getIsInstant","filtered","_filter","_bindArrangeComplete","_isInstant","_noTransition","_hideReveal","_sort","needReveal","needHide","isLayoutComplete","isHideComplete","isRevealComplete","arrangeParallelCallback","hiddenMatched","visibleUnmatched","test","_getFilterTest","isMatched","mungeSorter","len","split","query","attrMatch","getValue","getValueGetter","parser","sortDataParsers","getChildText","child","textContent","val","sortByOpt","sortBy","sortBys","itemSorter","getItemSorter","sortAsc","itemA","itemB","isAscending","direction","_mode","mode","Error","_filterRevealAdded","insert","filteredInsertItems","_remove","shuffle","getFilteredItemElements","enviraImagesLoaded","EnviraImagesLoaded","onAlways","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","reURL","exec","backgroundImage","url","addBackground","loadingImage","LoadingImage","Background","progressedCount","hasAnyBroken","complete","onProgress","image","progress","isLoaded","notify","isComplete","jqMethod","getIsImageComplete","confirm","proxyImage","pendingSrc","currentSrc","onload","unbindEvents","onerror","makeJQueryPlugin","promise","loop","margin","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","preload","ajax","iframe","tpl","scrolling","animationEffect","zoomOpacity","transitionEffect","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","slideShow","fullScreen","thumbs","parentEl","autoFocus","backFocus","trapFocus","autoStart","touch","vertical","momentum","hash","media","speed","hideOnClose","onInit","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","$W","$D","called","isQuery","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","transitionEnd","t","transitions","forceRedraw","EnviraBox","content","self","group","currIndex","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","testWidth","$container","buttonStr","firstItemOpts","scrollTop","scrollLeft","getInstance","isMobile","translate","prependTo","$refs","activate","jumpTo","arr","n","$item","found","srcParts","srcset","$orig","videoFormat","$thumb","shift","addEvents","removeEvents","stopPropagation","preventDefault","previous","next","originalEvent","update","stage","isClosing","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","hideControls","pos","slide","canvasWidth","currentPos","groupLen","isSliding","isAnimating","createSlide","updateControls","$slide","isMoved","forcedDuration","isNumeric","loadSlide","animate","removeAttr","revealContent","updateSlide","scaleToActual","$what","$content","imgPos","posX","posY","scaleX","scaleY","canvasHeight","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","setTranslate","nextWidth","nextHeight","isScaledDown","isZoomable","fitPos","rez","canPan","ajaxLoad","isLoading","setImage","setContent","setIframe","setError","showLoading","success","textStatus","jqXHR","abort","pxRatio","windowWidth","devicePixelRatio","ret","postfix","arrow_position","prepend","insideCap","cap","thumb","$ghost","setBigImage","timouts","hideLoading","$iframe","Date","getTime","isReady","$wrap","frameWidth","frameHeight","scrollWidth","$contents","$body","contents","contentWindow","empty","$placeholder","insertAfter","$smallBtn","first","$spinner","button","effectClassName","start","getThumbPos","isElementVisible","elementRect","parentRects","visibleInAllParents","parentElement","parentRect","visiblePixelX","visiblePixelY","thumbPos","slidePos","ownerDocument","siblings","prev","uid","d","done","cleanUp","force","isHiddenControls","toggleClass","toggleControls","command","open","all","createTouch","navigator","userAgent","use3d","getPropertyValue","matrix","transRegex","transRez","props","leaveAnimationName","_run","active","fnMap","FullScreen","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","toggle","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","$button","keypress","fullscreenchange","format","params","param","youtube","matcher","autoplay","autohide","fs","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","o","provider","m","decodeURIComponent","contentProvider","prevTime","currTime","wheel","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","substr","hasScrollbars","overflowY","overflowX","scrollHeight","clientHeight","clientWidth","isScrollable","Guestures","$bg","bg","$stage","ontouchstart","$target","isTouchDevice","startPoints","canTap","startTime","distanceX","distanceY","isPanning","isSwiping","isZooming","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","swiping","angle","atan2","PI","inTransition","requestId","newOffsetX","newOffsetY","newPos","limitMovement","newWidth","newHeight","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","currentOffsetX","currentOffsetY","limitPosition","currentWidth","currentHeight","endDistanceBetweenFingers","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","translateFromTranslatingY","ontouchend","dMs","panning","zooming","endPoints","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","reset","tapX","tapY","where","process","action","startEvent","tapped","FancyThumbs","$grid","$list","isVisible","second","list","thumbWidth","thumbHeight","widthRatio","heightRatio","Thumbs","timer","set","clear","hidden","lightbox","envirabox_config","get_config","justified","load_images","scroll","enviratopes","run","envira_isotopes_config","masonry","get_lightbox_config","slideshow","lightbox_images","lightbox_options","prepend_cap","enviraLazy","hasWebPSupport","windowHeight","justifiedReady","galleryClass","hasIntersectionObserverSupport","IntersectionObserver","rect","elementTop","elementLeft","elementWidth","elementHeight","exists","updateElement","optionsCount","spaceIndex","lastIndexOf","optionImage","optionWidth","add","bestSelectedOption","optionData","lastSetOption","fireEvent","setAttribute","Function","the_image","firstElementChild","the_container","image_src","updateWindowSize","setGalleryClass","theClass","unknownHeight","elementsCount","ll_delay","ll_initial","myVar","updateIntersectionObservers","responsivelyLazyObserverAttached","intersectionObserver","observe","intersectionRatio","tagName","requestAnimationFrameFunction","hasChange","runIfHasChange","setChanged","updateParentNodesScrollListeners","responsivelyLazyScrollAttached","attachEvents","resizeTimeout","MutationObserver","observer","childList","subtree"],"mappings":"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AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;;;;;;AChND;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CACA;AACA;AACA;AAAA,oGACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,WAAW,gBAAgB;AAC3B,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;;AAEA;AACA;AACA,iCAAiC;AACjC,yBAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,iCAAiC;AAC5C,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,iCAAiC;AAC5C,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oCAAoC;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,4BAA4B;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,oCAAoC;AAC/C,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,MAAM,GAAG,QAAQ,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM,GAAG,QAAQ,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,cAAc;AAC3B;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,yCAAyC;;AAEzC;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;;;;;;AC16BD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;AC/GD;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AACA;;;;;;AAEA,IAAIoC,mBAAmB3C,OAAO2C,gBAAP,IAA2B,EAAlD;AAAA,IACCC,eAAe5C,OAAO4C,YAAP,IAAuB,EADvC;;AAGA,CAAC,CAAC,UAAWC,CAAX,EAAc7C,MAAd,EAAsB8C,QAAtB,EAAgCC,MAAhC,EAAwCC,WAAxC,EAAqDC,cAArD,EAAqEN,gBAArE,EAAwF;;AAEzFE,GAAE,YAAW;;AAEZ7C,SAAO2C,gBAAP,GAA0BA,gBAA1B;AACA3C,SAAO4C,YAAP,GAAsBA,YAAtB;;AAEAC,IAAGC,QAAH,EAAcI,EAAd,CAAkB,aAAlB,EAAiC,UAASC,CAAT,EAAW;;AAE3CN,KAAE,wBAAF,EAA4BO,IAA5B,CAAiC,YAAW;;AAE3C,QAAIC,QAAaR,EAAG,IAAH,CAAjB;AAAA,QACCS,MAAWD,MAAME,IAAN,CAAW,WAAX,CADZ;AAAA,QAECC,oBAAoBH,MAAME,IAAN,CAAW,gBAAX,CAFrB;AAAA,QAGCE,iBAAoBJ,MAAME,IAAN,CAAW,gBAAX,CAHrB;AAAA,QAICG,mBAAoBL,MAAME,IAAN,CAAW,gBAAX,CAJrB;;AAMAZ,qBAAkBa,kBAAmB,YAAnB,CAAlB,IAAwD,IAAIT,MAAJ,CAAYO,GAAZ,EAAiBE,iBAAjB,EAAoCC,cAApC,EAAoDC,gBAApD,CAAxD;AAEA,IAVD;AAWAb,KAAG,uBAAH,EAA6BO,IAA7B,CAAkC,YAAY;;AAE7C,QAAIC,QAAQR,EAAG,IAAH,CAAZ;AAAA,QACCW,oBAAoBH,MAAME,IAAN,CAAW,gBAAX,CADrB;AAAA,QAECE,iBAAiBJ,MAAME,IAAN,CAAW,gBAAX,CAFlB;AAAA,QAGCG,mBAAmBL,MAAME,IAAN,CAAW,gBAAX,CAHpB;;AAKAX,iBAAcY,kBAAmB,YAAnB,CAAd,IAAoD,IAAIR,WAAJ,CAAiBQ,iBAAjB,EAAoCC,cAApC,EAAoDC,gBAApD,CAApD;AAEA,IATD;;AAWAb,KAAEC,QAAF,EAAYa,OAAZ,CAAoB,eAApB,EAAqC,CAAChB,gBAAD,EAAmBC,YAAnB,CAArC;AAEA,GA1BD;;AA4BAC,IAAEC,QAAF,EAAYa,OAAZ,CAAoB,aAApB;;AAEA,MAAIV,eAAeW,KAAf,KAAyBC,SAAzB,IAAsCZ,eAAeW,KAAzD,EAAgE;;AAE/DE,WAAQC,GAAR,CAAanB,YAAb;AACAkB,WAAQC,GAAR,CAAapB,gBAAb;AAEA;;AAEDE,IAAG,MAAH,EAAYK,EAAZ,CAAgB,OAAhB,EAAyB,kDAAzB,EAA6E,UAAUC,CAAV,EAAc;;AAE1F,OAAKa,SAASC,QAAT,CAAkBC,OAAlB,CAA2B,KAA3B,EAAkC,EAAlC,KAA0C,KAAKD,QAAL,CAAcC,OAAd,CAAuB,KAAvB,EAA8B,EAA9B,CAA1C,IAAgFF,SAASG,QAAT,IAAqB,KAAKA,QAA/G,EAA0H;AACzHtB,MAAEuB,SAAF,CAAYC,KAAZ;AACA,WAAO,KAAP;AACA;AAED,GAPD;;AASA;AACAxB,IAAGC,QAAH,EAAcI,EAAd,CAAkB,iCAAlB,EAAqD,UAAUoB,KAAV,EAAkB;;AAEtE,OAAKA,UAAUT,SAAV,IAAuBS,MAAMC,QAAN,KAAmBV,SAA1C,IAAuDS,MAAMC,QAAN,KAAmB,IAA/E,EAAsF;;AAIrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIC,mBAAmB3B,EAAE,2BAAF,EAA+B4B,IAA/B,CAAoC,SAASH,MAAMC,QAAnD,CAAvB;;AAEA;AACA;;AAEA,QAAKC,iBAAiBE,OAAjB,CAAyB,2BAAzB,EAAsDC,QAAtD,CAA+D,0BAA/D,CAAL,EAAkG;;AAEjG;AACA9B,OAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,qCAArE,EAA6GG,KAA7G,CAAoH,GAApH,EAA0HC,IAA1H;AAEA,KALD,MAKO;;AAEN;AACAhC,OAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,qCAArE,EAA6GG,KAA7G,CAAoH,GAApH,EAA0HC,IAA1H;;AAEA;AACA;;AAEA,SAAIC,oBAAoBjC,EAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAoE,cAApE,EAAoFM,KAApF,EAAxB;AACA,SAAIC,SAAWV,MAAMW,aAAN,GAAsBX,MAAMY,YAA3C;AACA,SAAIC,SAAWb,MAAMW,aAAN,GAAsBH,iBAArC;;AAEA,SAAKK,SAASH,MAAd,EAAuB;AACtB,UAAII,QAAQD,MAAZ;AACA,MAFD,MAEO;AACN,UAAIC,QAAQJ,MAAZ;AACA;;AAED,SAAIK,iBAAiBD,QAAQ,GAA7B;AACA,SAAKZ,iBAAiBE,OAAjB,CAAyB,2BAAzB,EAAsDY,MAAtD,GAA+DX,QAA/D,CAAwE,4BAAxE,CAAL,EAA6G;AAC5G;AACAU,uBAAiBA,iBAAiB,CAAlC;AACA;;AAEE,SAAIE,kBAAkB1C,EAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAoE,iBAApE,CAAtB;AACAc,qBAAgBC,GAAhB,CAAoB,gBAApB,EAAsCH,iBAAiB,GAAvD,EAA4DI,IAA5D,CAAiE,qBAAjE,EAAwF,MAAxF;AACA;AACH5C,OAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,mBAArE,EAA2FG,KAA3F,CAAkG,IAAlG,EAAyGY,GAAzG,CAA6G,YAA7G,EAA2H,SAA3H;AACA3C,OAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,qBAArE,EAA6FG,KAA7F,CAAoG,IAApG,EAA2GY,GAA3G,CAA+G,YAA/G,EAA6H,SAA7H;;AAEA,SAAKxF,OAAO,sBAAsBsE,MAAMoB,UAAnC,MAAmD7B,SAAxD,EAAoE;;AAEnE,UAAKhB,EAAE,qBAAqByB,MAAMoB,UAA7B,EAAyCf,QAAzC,CAAkD,YAAlD,CAAL,EAAuE;;AAEtE3E,cAAO,sBAAsBsE,MAAMoB,UAAnC,EAA+CxC,EAA/C,CAAmD,gBAAnD,EACE,UAAUoB,KAAV,EAAiBqB,YAAjB,EAAgC;;AAEjC9C,UAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,mBAArE,EAA2FG,KAA3F,CAAkG,IAAlG,EAAyGY,GAAzG,CAA6G,YAA7G,EAA2H,SAA3H;AACA3C,UAAG2B,gBAAH,EAAsBE,OAAtB,CAA8B,+BAA9B,EAA+DD,IAA/D,CAAqE,qBAArE,EAA6FG,KAA7F,CAAoG,IAApG,EAA2GY,GAA3G,CAA+G,YAA/G,EAA6H,SAA7H;AAGE,QAPH;AAUA,OAZD,MAYO,CAGN;AAED;AAED;AAED;AACD,GAhFD;AAkFA,EAtID;AAwIA,CA1IA,EA0IGI,MA1IH,EA0IY5F,MA1IZ,EA0IoB8C,QA1IpB,gDA0ImDG,cA1InD,EA0ImEN,gBA1InE,E;;;;;;;;;;;;ACpBD;;;;;;;;AAQC,WAAU1C,OAAV,EAAmB;AAChB,QAAK,IAAL,EAAkD;AAC9C;AACAC,QAAA,iCAAO,CAAC,sBAAD,CAAP,oCAAmBD,OAAnB;AAAA;AAAA;AAAA;AACH,KAHD,MAGO,IAAI,QAAOG,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACpC;AACAD,eAAOC,OAAP,GAAiBH,OAAjB;AACH,KAHM,MAGA;AACH;AACAA,gBAAQ2F,MAAR;AACH;AACJ,CAXA,EAWC,UAAU/C,CAAV,EAAa;;AAEX,QAAIgD,QAAS,CAAC,OAAD,EAAU,YAAV,EAAwB,gBAAxB,EAA0C,qBAA1C,CAAb;AAAA,QACIC,SAAW,aAAahD,QAAb,IAAyBA,SAASiD,YAAT,IAAyB,CAApD,GACG,CAAC,OAAD,CADH,GACe,CAAC,YAAD,EAAe,gBAAf,EAAiC,qBAAjC,CAF5B;AAAA,QAGIC,QAASC,MAAM/E,SAAN,CAAgB8E,KAH7B;AAAA,QAIIE,sBAJJ;AAAA,QAI4BC,WAJ5B;;AAMA,QAAKtD,EAAEyB,KAAF,CAAQ8B,QAAb,EAAwB;AACpB,aAAM,IAAIC,IAAIR,MAAMS,MAApB,EAA4BD,CAA5B,GAAiC;AAC7BxD,cAAEyB,KAAF,CAAQ8B,QAAR,CAAkBP,MAAM,EAAEQ,CAAR,CAAlB,IAAiCxD,EAAEyB,KAAF,CAAQiC,UAAzC;AACH;AACJ;;AAED,QAAIC,UAAU3D,EAAEyB,KAAF,CAAQkC,OAAR,CAAgBC,UAAhB,GAA6B;AACvCC,iBAAS,QAD8B;;AAGvCC,eAAO,iBAAW;AACd,gBAAK,KAAKC,gBAAV,EAA6B;AACzB,qBAAM,IAAIP,IAAIP,OAAOQ,MAArB,EAA6BD,CAA7B,GAAkC;AAC9B,yBAAKO,gBAAL,CAAuBd,OAAO,EAAEO,CAAT,CAAvB,EAAoCQ,OAApC,EAA6C,KAA7C;AACH;AACJ,aAJD,MAIO;AACH,qBAAKC,YAAL,GAAoBD,OAApB;AACH;AACD;AACAhE,cAAEU,IAAF,CAAO,IAAP,EAAa,wBAAb,EAAuCiD,QAAQO,aAAR,CAAsB,IAAtB,CAAvC;AACAlE,cAAEU,IAAF,CAAO,IAAP,EAAa,wBAAb,EAAuCiD,QAAQQ,aAAR,CAAsB,IAAtB,CAAvC;AACH,SAdsC;;AAgBvCC,kBAAU,oBAAW;AACjB,gBAAK,KAAKC,mBAAV,EAAgC;AAC5B,qBAAM,IAAIb,IAAIP,OAAOQ,MAArB,EAA6BD,CAA7B,GAAkC;AAC9B,yBAAKa,mBAAL,CAA0BpB,OAAO,EAAEO,CAAT,CAA1B,EAAuCQ,OAAvC,EAAgD,KAAhD;AACH;AACJ,aAJD,MAIO;AACH,qBAAKC,YAAL,GAAoB,IAApB;AACH;AACD;AACAjE,cAAEsE,UAAF,CAAa,IAAb,EAAmB,wBAAnB;AACAtE,cAAEsE,UAAF,CAAa,IAAb,EAAmB,wBAAnB;AACH,SA3BsC;;AA6BvCJ,uBAAe,uBAASK,IAAT,EAAe;AAC1B,gBAAIC,QAAQxE,EAAEuE,IAAF,CAAZ;AAAA,gBACIE,UAAUD,MAAM,kBAAkBxE,EAAE0E,EAApB,GAAyB,cAAzB,GAA0C,QAAhD,GADd;AAEA,gBAAI,CAACD,QAAQhB,MAAb,EAAqB;AACjBgB,0BAAUzE,EAAE,MAAF,CAAV;AACH;AACD,mBAAO2E,SAASF,QAAQ9B,GAAR,CAAY,UAAZ,CAAT,EAAkC,EAAlC,KAAyCgC,SAASH,MAAM7B,GAAN,CAAU,UAAV,CAAT,EAAgC,EAAhC,CAAzC,IAAgF,EAAvF;AACH,SApCsC;;AAsCvCwB,uBAAe,uBAASI,IAAT,EAAe;AAC1B,mBAAOvE,EAAEuE,IAAF,EAAQK,MAAR,EAAP;AACH,SAxCsC;;AA0CvCC,kBAAU;AACNC,6BAAiB,IADX,EACiB;AACvBC,6BAAiB,IAFX,CAEiB;AAFjB;AA1C6B,KAA3C;;AAgDA/E,MAAE0E,EAAF,CAAKM,MAAL,CAAY;AACRpB,oBAAY,oBAASc,EAAT,EAAa;AACrB,mBAAOA,KAAK,KAAKO,IAAL,CAAU,YAAV,EAAwBP,EAAxB,CAAL,GAAmC,KAAK5D,OAAL,CAAa,YAAb,CAA1C;AACH,SAHO;;AAKRoE,sBAAc,sBAASR,EAAT,EAAa;AACvB,mBAAO,KAAKS,MAAL,CAAY,YAAZ,EAA0BT,EAA1B,CAAP;AACH;AAPO,KAAZ;;AAWA,aAASV,OAAT,CAAiBvC,KAAjB,EAAwB;AACpB,YAAI2D,WAAa3D,SAAStE,OAAOsE,KAAjC;AAAA,YACI4D,OAAalC,MAAMmC,IAAN,CAAW5G,SAAX,EAAsB,CAAtB,CADjB;AAAA,YAEI6G,QAAa,CAFjB;AAAA,YAGIC,SAAa,CAHjB;AAAA,YAIIC,SAAa,CAJjB;AAAA,YAKIC,WAAa,CALjB;AAAA,YAMIC,UAAa,CANjB;AAAA,YAOIC,UAAa,CAPjB;AAQAnE,gBAAQzB,EAAEyB,KAAF,CAAQoE,GAAR,CAAYT,QAAZ,CAAR;AACA3D,cAAMqE,IAAN,GAAa,YAAb;;AAEA;AACA,YAAK,YAAiBV,QAAtB,EAAiC;AAAEK,qBAASL,SAASW,MAAT,GAAkB,CAAC,CAA5B;AAAqC;AACxE,YAAK,gBAAiBX,QAAtB,EAAiC;AAAEK,qBAASL,SAASY,UAAlB;AAAqC;AACxE,YAAK,iBAAiBZ,QAAtB,EAAiC;AAAEK,qBAASL,SAASa,WAAlB;AAAqC;AACxE,YAAK,iBAAiBb,QAAtB,EAAiC;AAAEI,qBAASJ,SAASc,WAAT,GAAuB,CAAC,CAAjC;AAAqC;;AAExE;AACA,YAAK,UAAUd,QAAV,IAAsBA,SAASe,IAAT,KAAkBf,SAASgB,eAAtD,EAAwE;AACpEZ,qBAASC,SAAS,CAAC,CAAnB;AACAA,qBAAS,CAAT;AACH;;AAED;AACAF,gBAAQE,WAAW,CAAX,GAAeD,MAAf,GAAwBC,MAAhC;;AAEA;AACA,YAAK,YAAYL,QAAjB,EAA4B;AACxBK,qBAASL,SAASK,MAAT,GAAkB,CAAC,CAA5B;AACAF,oBAASE,MAAT;AACH;AACD,YAAK,YAAYL,QAAjB,EAA4B;AACxBI,qBAASJ,SAASI,MAAlB;AACA,gBAAKC,WAAW,CAAhB,EAAoB;AAAEF,wBAASC,SAAS,CAAC,CAAnB;AAAuB;AAChD;;AAED;AACA,YAAKC,WAAW,CAAX,IAAgBD,WAAW,CAAhC,EAAoC;AAAE;AAAS;;AAE/C;AACA;AACA;AACA;AACA;AACA,YAAKJ,SAASiB,SAAT,KAAuB,CAA5B,EAAgC;AAC5B,gBAAIC,aAAatG,EAAEU,IAAF,CAAO,IAAP,EAAa,wBAAb,CAAjB;AACA6E,qBAAUe,UAAV;AACAb,sBAAUa,UAAV;AACAd,sBAAUc,UAAV;AACH,SALD,MAKO,IAAKlB,SAASiB,SAAT,KAAuB,CAA5B,EAAgC;AACnC,gBAAIE,aAAavG,EAAEU,IAAF,CAAO,IAAP,EAAa,wBAAb,CAAjB;AACA6E,qBAAUgB,UAAV;AACAd,sBAAUc,UAAV;AACAf,sBAAUe,UAAV;AACH;;AAED;AACAb,mBAAWc,KAAKC,GAAL,CAAUD,KAAKE,GAAL,CAASjB,MAAT,CAAV,EAA4Be,KAAKE,GAAL,CAASlB,MAAT,CAA5B,CAAX;;AAEA,YAAK,CAAClC,WAAD,IAAgBoC,WAAWpC,WAAhC,EAA8C;AAC1CA,0BAAcoC,QAAd;;AAEA;AACA,gBAAKiB,sBAAsBvB,QAAtB,EAAgCM,QAAhC,CAAL,EAAiD;AAC7CpC,+BAAe,EAAf;AACH;AACJ;;AAED;AACA,YAAKqD,sBAAsBvB,QAAtB,EAAgCM,QAAhC,CAAL,EAAiD;AAC7C;AACAH,qBAAU,EAAV;AACAC,sBAAU,EAAV;AACAC,sBAAU,EAAV;AACH;;AAED;AACAF,gBAASiB,KAAMjB,SAAU,CAAV,GAAc,OAAd,GAAwB,MAA9B,EAAuCA,QAASjC,WAAhD,CAAT;AACAkC,iBAASgB,KAAMhB,UAAU,CAAV,GAAc,OAAd,GAAwB,MAA9B,EAAuCA,SAASlC,WAAhD,CAAT;AACAmC,iBAASe,KAAMf,UAAU,CAAV,GAAc,OAAd,GAAwB,MAA9B,EAAuCA,SAASnC,WAAhD,CAAT;;AAEA;AACA,YAAKK,QAAQkB,QAAR,CAAiBE,eAAjB,IAAoC,KAAK6B,qBAA9C,EAAsE;AAClE,gBAAIC,eAAe,KAAKD,qBAAL,EAAnB;AACAjB,sBAAUlE,MAAMqF,OAAN,GAAgBD,aAAaE,IAAvC;AACAnB,sBAAUnE,MAAMuF,OAAN,GAAgBH,aAAaI,GAAvC;AACH;;AAED;AACAxF,cAAM+D,MAAN,GAAeA,MAAf;AACA/D,cAAMgE,MAAN,GAAeA,MAAf;AACAhE,cAAMyF,WAAN,GAAoB5D,WAApB;AACA7B,cAAMkE,OAAN,GAAgBA,OAAhB;AACAlE,cAAMmE,OAAN,GAAgBA,OAAhB;AACA;AACA;AACA;AACAnE,cAAM4E,SAAN,GAAkB,CAAlB;;AAEA;AACAhB,aAAK8B,OAAL,CAAa1F,KAAb,EAAoB8D,KAApB,EAA2BC,MAA3B,EAAmCC,MAAnC;;AAEA;AACA;AACA;AACA;AACA,YAAIpC,sBAAJ,EAA4B;AAAE+D,yBAAa/D,sBAAb;AAAuC;AACrEA,iCAAyBgE,WAAWC,eAAX,EAA4B,GAA5B,CAAzB;;AAEA,eAAO,CAACtH,EAAEyB,KAAF,CAAQ8F,QAAR,IAAoBvH,EAAEyB,KAAF,CAAQ+F,MAA7B,EAAqC/I,KAArC,CAA2C,IAA3C,EAAiD4G,IAAjD,CAAP;AACH;;AAED,aAASiC,eAAT,GAA2B;AACvBhE,sBAAc,IAAd;AACH;;AAED,aAASqD,qBAAT,CAA+BvB,QAA/B,EAAyCM,QAAzC,EAAmD;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO/B,QAAQkB,QAAR,CAAiBC,eAAjB,IAAoCM,SAASU,IAAT,KAAkB,YAAtD,IAAsEJ,WAAW,GAAX,KAAmB,CAAhG;AACH;AAEJ,CApNA,CAAD,C;;;;;;;;;ACRA,SAAS+B,oBAAT,CAA8BC,GAA9B,EAAmC;AAC/B,QAAIC,iBAAiB,CAAC,CAAC1H,SAAS2H,aAAT,CAAuB,QAAvB,EAAiCC,UAAxD;AACA,QAAIF,cAAJ,EAAoB;AAChB,YAAIG,SAAS7H,SAAS2H,aAAT,CAAuB,QAAvB,CAAb;AAAA,YACAG,UAAUD,OAAOD,UAAP,CAAkB,IAAlB,CADV;AAAA,YAEAG,SAFA;AAAA,YAEWC,EAFX;AAAA,YAEexE,MAFf;AAAA,YAEuBD,IAAI,CAF3B;AAAA,YAE8B0E,IAF9B;AAAA,YAGAC,MAAM,IAAIC,KAAJ,EAHN;;AAKAD,YAAIT,GAAJ,GAAUA,GAAV;AACAI,eAAO5F,KAAP,GAAeiG,IAAIjG,KAAnB;AACA4F,eAAOlD,MAAP,GAAgBuD,IAAIvD,MAApB;AACAmD,gBAAQM,SAAR,CAAkBF,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B;;AAEAH,oBAAYD,QAAQO,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BR,OAAO5F,KAAlC,EAAyC4F,OAAOlD,MAAhD,CAAZ;AACAqD,aAAKD,UAAUtH,IAAf;AACA+C,iBAASwE,GAAGxE,MAAZ;;AAEA,eAAOD,IAAIC,MAAX,EAAmBD,KAAK,CAAxB,EAA2B;AACvB0E,mBAAOD,GAAGzE,CAAH,IAAQ,EAAR,GAAayE,GAAGzE,IAAI,CAAP,IAAY,GAAzB,GAA+ByE,GAAGzE,IAAI,CAAP,IAAY,GAAlD;AACAyE,eAAGzE,CAAH,IAAQyE,GAAGzE,IAAI,CAAP,IAAYyE,GAAGzE,IAAI,CAAP,IAAY0E,IAAhC;AACH;;AAEDH,gBAAQQ,YAAR,CAAqBP,SAArB,EAAgC,CAAhC,EAAmC,CAAnC;AACA,eAAOF,OAAOU,SAAP,EAAP;AACH,KAtBD,MAsBO;AACH,eAAOd,GAAP;AACH;AACJ;;AAED,SAASe,mBAAT,CAA6Bf,GAA7B,EAAkC;AAC9B,QAAIC,iBAAiB,CAAC,CAAC1H,SAAS2H,aAAT,CAAuB,QAAvB,EAAiCC,UAAxD;AACA,QAAIF,cAAJ,EAAoB;AAChB,YAAIG,SAAS7H,SAAS2H,aAAT,CAAuB,QAAvB,CAAb;AAAA,YACAG,UAAUD,OAAOD,UAAP,CAAkB,IAAlB,CADV;AAAA,YAEAG,SAFA;AAAA,YAEWC,EAFX;AAAA,YAEexE,MAFf;AAAA,YAEuBD,IAAI,CAF3B;AAAA,YAE8B0E,IAF9B;AAAA,YAGAC,MAAM,IAAIC,KAAJ,EAHN;;AAKAD,YAAIT,GAAJ,GAAUA,GAAV;AACAI,eAAO5F,KAAP,GAAeiG,IAAIjG,KAAnB;AACA4F,eAAOlD,MAAP,GAAgBuD,IAAIvD,MAApB;AACAmD,gBAAQM,SAAR,CAAkBF,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B;;AAEAH,oBAAYD,QAAQO,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BR,OAAO5F,KAAlC,EAAyC4F,OAAOlD,MAAhD,CAAZ;AACAqD,aAAKD,UAAUtH,IAAf;AACA+C,iBAASwE,GAAGxE,MAAZ;;AAEAiF,oBAAY,GAAZ;;AAEA,aAAK,IAAIlF,IAAE,CAAX,EAAcA,IAAEC,MAAhB,EAAwBD,KAAG,CAA3B,EAA8B;AAC1B,gBAAImF,IAAIV,GAAGzE,CAAH,CAAR;AACA,gBAAIoF,IAAIX,GAAGzE,IAAE,CAAL,CAAR;AACA,gBAAIqF,IAAIZ,GAAGzE,IAAE,CAAL,CAAR;AACA,gBAAIsF,IAAK,SAAOH,CAAP,GAAW,SAAOC,CAAlB,GAAsB,SAAOC,CAA7B,IAAkCH,SAAnC,GAAgD,GAAhD,GAAsD,CAA9D;AACAT,eAAGzE,CAAH,IAAQyE,GAAGzE,IAAE,CAAL,IAAUyE,GAAGzE,IAAE,CAAL,IAAUsF,CAA5B;AACH;;AAEDf,gBAAQQ,YAAR,CAAqBP,SAArB,EAAgC,CAAhC,EAAmC,CAAnC;AACA,eAAOF,OAAOU,SAAP,EAAP;AACH,KA3BD,MA2BO;AACH,eAAOd,GAAP;AACH;AACJ;;AAED,SAASqB,cAAT,CAAwBrB,GAAxB,EAA6B;AACzB,QAAIC,iBAAiB,CAAC,CAAC1H,SAAS2H,aAAT,CAAuB,QAAvB,EAAiCC,UAAxD;AACA,QAAIF,cAAJ,EAAoB;AAChB,YAAIG,SAAS7H,SAAS2H,aAAT,CAAuB,QAAvB,CAAb;AAAA,YACAG,UAAUD,OAAOD,UAAP,CAAkB,IAAlB,CADV;AAAA,YAEAG,SAFA;AAAA,YAEWC,EAFX;AAAA,YAEexE,MAFf;AAAA,YAEuBD,IAAI,CAF3B;AAAA,YAE8B0E,IAF9B;AAAA,YAEoCc,QAAQ,CAF5C;AAAA,YAE+CC,QAAQ,CAFvD;AAAA,YAE0DC,SAAS,EAFnE;AAAA,YAEuEC,aAAa,CAFpF;AAGAhB,cAAM,IAAIC,KAAJ,EAAN;;AAEAD,YAAIT,GAAJ,GAAUA,GAAV;AACAI,eAAO5F,KAAP,GAAeiG,IAAIjG,KAAnB;AACA4F,eAAOlD,MAAP,GAAgBuD,IAAIvD,MAApB;AACAmD,gBAAQM,SAAR,CAAkBF,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B;;AAEA,YAAIH,SAAJ;AACA,YAAI9F,QAAQiG,IAAIjG,KAAhB;AACA,YAAI0C,SAASuD,IAAIvD,MAAjB;;AAEAoD,oBAAYD,QAAQO,YAAR,CAAsBU,KAAtB,EAA6BC,KAA7B,EAAoC/G,KAApC,EAA2C0C,MAA3C,CAAZ;AACA,YAAIwE,SAASpB,UAAUtH,IAAvB;;AAEA,YAAI2I,IAAJ,EAASC,IAAT,EAAcC,IAAd,EAAmBC,IAAnB,EAAwBC,CAAxB,EAA0BC,CAA1B,EAA4BlG,CAA5B,EAA8BmG,CAA9B,EAAgCC,EAAhC,EAAmCC,EAAnC,EAAsCC,EAAtC,EAAyCC,EAAzC,EAA4CC,EAA5C,EAA+CC,GAA/C;AACA,YAAIC,KAAKhI,QAAQ,CAAjB;AACA,YAAIiI,KAAKvF,SAAS,CAAlB;AACA,YAAIwF,KAAKlI,QAAQ0C,MAAjB;AACA,YAAIyF,OAAOnB,SAAS,CAApB;;AAEA,YAAIP,IAAI,EAAR;AACA,YAAIC,IAAI,EAAR;AACA,YAAIC,IAAI,EAAR;;AAEA,YAAIyB,UAAUC,UAAUrB,MAAV,CAAd;AACA,YAAIsB,UAAUC,UAAUvB,MAAV,CAAd;;AAEA,YAAIwB,OAAO,EAAX;AACA,YAAIC,OAAO,EAAX;;AAEA,eAAQxB,eAAe,CAAvB,EAA0B;AACtBa,iBAAKD,KAAK,CAAV;;AAEA,iBAAML,IAAE,CAAR,EAAWA,IAAI9E,MAAf,EAAuB8E,GAAvB,EAA4B;AACxBL,uBAAOD,OAAOY,EAAP,IAAeK,IAAtB;AACAf,uBAAOF,OAAOY,KAAG,CAAV,IAAeK,IAAtB;AACAd,uBAAOH,OAAOY,KAAG,CAAV,IAAeK,IAAtB;;AAEA,qBAAK7G,IAAI,CAAT,EAAYA,KAAK0F,MAAjB,EAAyB1F,GAAzB,EAA8B;AAC1BmG,wBAAIK,MAAM,CAAExG,IAAI0G,EAAJ,GAASA,EAAT,GAAc1G,CAAhB,KAAwB,CAA9B,CAAJ;AACA6F,4BAAQD,OAAOO,GAAP,CAAR;AACAL,4BAAQF,OAAOO,GAAP,CAAR;AACAJ,4BAAQH,OAAOO,GAAP,CAAR;AACH;;AAED,qBAAMF,IAAI,CAAV,EAAaA,IAAIvH,KAAjB,EAAwBuH,GAAxB,EAA6B;AACzBd,sBAAEoB,EAAF,IAAQV,IAAR;AACAT,sBAAEmB,EAAF,IAAQT,IAAR;AACAT,sBAAEkB,EAAF,IAAQR,IAAR;;AAEA,wBAAIG,KAAG,CAAP,EAAU;AACNgB,6BAAKjB,CAAL,IAAU,CAAE,CAAEE,IAAIF,IAAIY,IAAV,IAAkBH,EAAlB,GAAuBP,CAAvB,GAA2BO,EAA7B,KAAqC,CAA/C;AACAS,6BAAKlB,CAAL,IAAY,CAAEE,IAAIF,IAAIP,MAAV,IAAoB,CAApB,GAAwBS,KAAK,CAA7B,GAAiC,CAA7C;AACH;;AAEDC,yBAAKI,KAAKU,KAAKjB,CAAL,CAAV;AACAI,yBAAKG,KAAKW,KAAKlB,CAAL,CAAV;;AAEAJ,4BAAQD,OAAOQ,IAAP,IAAeR,OAAOS,IAAP,CAAvB;AACAP,4BAAQF,OAAOQ,IAAP,IAAeR,OAAOS,IAAP,CAAvB;AACAN,4BAAQH,OAAOQ,IAAP,IAAeR,OAAOS,IAAP,CAAvB;;AAEAE;AACH;AACDC,sBAAQ9H,SAAS,CAAjB;AACH;;AAED,iBAAMuH,IAAI,CAAV,EAAaA,IAAIvH,KAAjB,EAAwBuH,GAAxB,EAA6B;AACzBK,qBAAKL,CAAL;AACAJ,uBAAOV,EAAEmB,EAAF,IAAQO,IAAf;AACAf,uBAAOV,EAAEkB,EAAF,IAAQO,IAAf;AACAd,uBAAOV,EAAEiB,EAAF,IAAQO,IAAf;;AAEA,qBAAK7G,IAAI,CAAT,EAAYA,KAAK0F,MAAjB,EAAyB1F,GAAzB,EAA8B;AAC5BsG,0BAAQtG,IAAI2G,EAAJ,GAAS,CAAT,GAAajI,KAArB;AACAmH,4BAAQV,EAAEmB,EAAF,CAAR;AACAR,4BAAQV,EAAEkB,EAAF,CAAR;AACAP,4BAAQV,EAAEiB,EAAF,CAAR;AACD;;AAEDC,qBAAKN,KAAK,CAAV;AACA,qBAAMC,IAAI,CAAV,EAAaA,IAAI9E,MAAjB,EAAyB8E,GAAzB,EAA6B;AACzBN,2BAAOW,EAAP,IAAgBV,OAAOiB,OAAR,KAAqBE,OAApC;AACApB,2BAAOW,KAAG,CAAV,IAAgBT,OAAOgB,OAAR,KAAqBE,OAApC;AACApB,2BAAOW,KAAG,CAAV,IAAgBR,OAAOe,OAAR,KAAqBE,OAApC;;AAEA,wBAAIf,KAAK,CAAT,EAAa;AACTiB,6BAAKhB,CAAL,IAAU,CAAE,CAAEC,IAAID,IAAIW,IAAV,IAAkBF,EAAlB,GAAuBR,CAAvB,GAA2BQ,EAA7B,IAAoCjI,KAA9C;AACAyI,6BAAKjB,CAAL,IAAY,CAAEC,IAAID,IAAIR,MAAV,IAAoB,CAApB,GAAwBS,IAAIzH,KAA5B,GAAoC,CAAhD;AACH;;AAED0H,yBAAKH,IAAIiB,KAAKhB,CAAL,CAAT;AACAG,yBAAKJ,IAAIkB,KAAKjB,CAAL,CAAT;;AAEAL,4BAAQV,EAAEiB,EAAF,IAAQjB,EAAEkB,EAAF,CAAhB;AACAP,4BAAQV,EAAEgB,EAAF,IAAQhB,EAAEiB,EAAF,CAAhB;AACAN,4BAAQV,EAAEe,EAAF,IAAQf,EAAEgB,EAAF,CAAhB;;AAEAE,0BAAM7H,SAAS,CAAf;AACH;AACJ;AACJ;AACD6F,gBAAQQ,YAAR,CAAsBP,SAAtB,EAAiCgB,KAAjC,EAAwCC,KAAxC;;AAEA,eAAOnB,OAAOU,SAAP,EAAP;AAEH,KA9GD,MA8GO;AACH,eAAOd,GAAP;AACH;AACJ;;AAED,SAASkD,iBAAT,CAA4BzC,GAA5B,EAAkC;AAC9B,QAAIrK,UAAU;AACV+M,iBAAS,mBAAW;AAChBC,kBAAM,OAAN;AACH;AAHS,KAAd;AAKA,QAAIC,SAAS;AACTC,kBAAU,CADD;AAETC,eAAO,IAFE;AAGTC,eAAO,EAHE;AAITC,oBAAY,EAJH;AAKTC,iBAAS;;AALA,KAAb;AAQA,QAAIC,SAAJ,CAAclD,GAAd,EAAmBrK,OAAnB,EAA4BiN,MAA5B;AACH,C;;;;;;;;;ACnMD;;;;;;AAMC,WAAS/K,CAAT,EAAY;;AAEX,WAASsL,YAAT,GAAwB;AACtB,WAAOtL,EAAE,MAAF,EAAU4E,MAAV,KAAqB5E,EAAE7C,MAAF,EAAUyH,MAAV,EAA5B;AACD;AACD;;;;;;;AAOA,MAAI2G,mBAAmB,SAAnBA,gBAAmB,CAAUC,QAAV,EAAoB3G,QAApB,EAA8B;;AAEnD,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAK4G,aAAL;;AAEA,SAAKC,kBAAL,GAA0B,IAA1B;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,WAAL,GAAmB;AACjBC,mBAAc,EADG;AAEjB3J,aAAQ,CAFS;AAGjB0C,cAAS,CAHQ;AAIjBkH,mBAAc;AAJG,KAAnB;AAMA,SAAKC,iBAAL,GAAyB,CAAC,CAA1B;AACA,SAAKC,KAAL,GAAa;AACXC,aAAQ,CADG,EACA;AACXC,eAAU,CAFC,CAEC;AAFD,KAAb;AAIA,SAAKC,MAAL,GAActH,SAASsH,MAAT,IAAmB,CAAnB,GAAuBtH,SAASsH,MAAhC,GAAyCtH,SAASuH,OAAhE;AACA,SAAKC,YAAL,GAAoB,KAAKC,oBAAL,EAApB;AACA,SAAKC,YAAL,GAAoB,KAAKC,oBAAL,EAApB;AACA,SAAKC,IAAL,GAAY,KAAKN,MAAjB;AACA,SAAKO,IAAL,GAAY,CAAZ;AACA,SAAKC,OAAL,GAAe;AACbC,aAAQ,CADK;AAEbC,gBAAW,GAFE;AAGbC,WAAM9M,EAAE,oEAAF,CAHO;AAIb+M,kBAAa;AAJA,KAAf;AAMA,SAAKC,oBAAL,GAA4B,IAA5B;AACA,SAAKC,YAAL,GAAoBzB,SAAStJ,KAAT,EAApB;AACA,SAAKsJ,QAAL,GAAgBA,QAAhB;AAED,GAjCD;;AAmCA;AACAD,mBAAiBlN,SAAjB,CAA2B6O,SAA3B,GAAuC,UAAUhL,KAAV,EAAiB0C,MAAjB,EAAyB;AAC9D,QAAIuI,WAAJ,EAAiB3J,CAAjB;AACA2J,kBAAejL,QAAQ0C,MAAT,GAAmB1C,KAAnB,GAA2B0C,MAAzC;AACA,SAAKpB,IAAI,CAAT,EAAYA,IAAI,KAAK+I,YAAL,CAAkB9I,MAAlC,EAA0CD,GAA1C,EAA+C;AAC7C,UAAI2J,eAAe,KAAKZ,YAAL,CAAkB/I,CAAlB,CAAnB,EAAyC;AACvC,eAAO,KAAKqB,QAAL,CAAcuI,iBAAd,CAAgC,KAAKb,YAAL,CAAkB/I,CAAlB,CAAhC,CAAP;AACD;AACF;AACD,WAAO,KAAKqB,QAAL,CAAcuI,iBAAd,CAAgC,KAAKb,YAAL,CAAkB/I,IAAI,CAAtB,CAAhC,CAAP;AACD,GATD;;AAWA;;;;;AAKA+H,mBAAiBlN,SAAjB,CAA2BgP,YAA3B,GAA0C,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AAC/D,WAAOD,IAAIE,SAAJ,CAAc,CAAd,EAAiBF,IAAI7J,MAAJ,GAAa8J,OAAO9J,MAArC,CAAP;AACD,GAFD;;AAIA;;;AAGA8H,mBAAiBlN,SAAjB,CAA2BoP,QAA3B,GAAsC,UAAUH,GAAV,EAAeC,MAAf,EAAuB;AAC3D,WAAOD,IAAII,OAAJ,CAAYH,MAAZ,EAAoBD,IAAI7J,MAAJ,GAAa8J,OAAO9J,MAAxC,MAAoD,CAAC,CAA5D;AACD,GAFD;;AAIA;;;;;;AAMA8H,mBAAiBlN,SAAjB,CAA2BsP,aAA3B,GAA2C,UAAUL,GAAV,EAAe;AACxD,SAAK,IAAIM,EAAT,IAAe,KAAK/I,QAAL,CAAcuI,iBAA7B,EAAgD;AAC9C,UAAI,KAAKvI,QAAL,CAAcuI,iBAAd,CAAgCS,cAAhC,CAA+CD,EAA/C,CAAJ,EAAwD;AACtD,YAAI,KAAK/I,QAAL,CAAcuI,iBAAd,CAAgCQ,EAAhC,EAAoCnK,MAApC,KAA+C,CAAnD,EAAsD;AACtD,YAAI,KAAKgK,QAAL,CAAcH,GAAd,EAAmB,KAAKzI,QAAL,CAAcuI,iBAAd,CAAgCQ,EAAhC,CAAnB,CAAJ,EAA6D,OAAO,KAAK/I,QAAL,CAAcuI,iBAAd,CAAgCQ,EAAhC,CAAP;AAC9D;AACF;AACD,WAAO,EAAP;AACD,GARD;;AAUA;;;;;;AAMArC,mBAAiBlN,SAAjB,CAA2ByP,MAA3B,GAAoC,UAAUC,QAAV,EAAoBC,QAApB,EAA8BC,SAA9B,EAAyC;AAC3E,QAAIC,WAAJ;;AAEA,QAAI,KAAKrJ,QAAL,CAAcsJ,aAAlB,EAAiC;AAC/BD,oBAAc,KAAKrJ,QAAL,CAAcsJ,aAAd,CAA4BJ,QAA5B,EAAsCC,QAAtC,EAAgDC,SAAhD,CAAd;AACD,KAFD,MAEO;AACL,UAAIG,WAAWL,SAASM,KAAT,CAAe,KAAKxJ,QAAL,CAAcyJ,SAA7B,CAAf;AACA,UAAIC,MAAOH,aAAa,IAAd,GAAsBA,SAAS,CAAT,CAAtB,GAAoC,EAA9C;AACAF,oBAAcH,SAAS1M,OAAT,CAAiB,KAAKwD,QAAL,CAAcyJ,SAA/B,EAA0C,EAA1C,CAAd;AACAJ,oBAAc,KAAKb,YAAL,CAAkBa,WAAlB,EAA+B,KAAKP,aAAL,CAAmBO,WAAnB,CAA/B,CAAd;AACAA,qBAAe,KAAKhB,SAAL,CAAec,QAAf,EAAyBC,SAAzB,IAAsCM,GAArD;AACD;;AAED,WAAOL,WAAP;AACD,GAdD;;AAgBA;;;;;;AAMA3C,mBAAiBlN,SAAjB,CAA2BmQ,OAA3B,GAAqC,UAAUC,MAAV,EAAkBC,QAAlB,EAA4B;AAC/D,QAAI,KAAK7J,QAAL,CAAc8J,YAAlB,EAAgC;AAC9BF,aAAOG,QAAP,CAAgB,eAAhB;AACA,UAAIF,QAAJ,EAAcA;AACf,KAHD,MAGO;AACLD,aAAOI,IAAP,GAAcC,MAAd,CAAqB,KAAKjK,QAAL,CAAckK,uBAAnC,EAA4D,GAA5D,EAAiEL,QAAjE;AACD;AACF,GAPD;;AASA;;;;;;;AAOAnD,mBAAiBlN,SAAjB,CAA2B2Q,sBAA3B,GAAoD,UAAUC,MAAV,EAAkB;AACpE,QAAIlB,WAAY,OAAOkB,OAAOvO,IAAP,CAAY,UAAZ,CAAP,KAAmC,WAApC,GAAmDuO,OAAOvO,IAAP,CAAY,UAAZ,CAAnD,GAA6EuO,OAAOrM,IAAP,CAAY,KAAZ,CAA5F;AACAqM,WAAOvO,IAAP,CAAY,gBAAZ,EAA8BqN,QAA9B;AACA,WAAOA,QAAP;AACD,GAJD;;AAMA;AACAxC,mBAAiBlN,SAAjB,CAA2B6Q,YAA3B,GAA0C,UAAUT,MAAV,EAAkB;AAC1D,QAAIU,OAAOV,OAAO7M,IAAP,CAAY,OAAZ,CAAX;AACA,QAAIuN,KAAK1L,MAAL,KAAgB,CAApB,EAAuB0L,OAAOV,OAAO7M,IAAP,CAAY,WAAZ,CAAP;AACvB,WAAOuN,KAAK1L,MAAL,KAAgB,CAAhB,GAAoB,IAApB,GAA2B0L,IAAlC;AACD,GAJD;;AAMA;AACA5D,mBAAiBlN,SAAjB,CAA2B+Q,gBAA3B,GAA8C,UAAUX,MAAV,EAAkB;AAC9D,QAAIY,WAAWZ,OAAO7M,IAAP,CAAY,UAAZ,CAAf;AACA,WAAOyN,SAAS5L,MAAT,KAAoB,CAApB,GAAwB,IAAxB,GAA+B4L,QAAtC;AACD,GAHD;;AAKA;;;;;;;;;;AAUA9D,mBAAiBlN,SAAjB,CAA2BiR,YAA3B,GAA0C,UAAUb,MAAV,EAAkBhF,CAAlB,EAAqBC,CAArB,EAAwBsE,QAAxB,EAAkCC,SAAlC,EAA6CsB,SAA7C,EAAwD;AAChGd,WAAOvM,KAAP,CAAa8L,QAAb;AACAS,WAAO7J,MAAP,CAAc2K,SAAd;AACAd,WAAO9L,GAAP,CAAW,KAAX,EAAkB+G,CAAlB;AACA+E,WAAO9L,GAAP,CAAW,MAAX,EAAmB8G,CAAnB;;AAEA,QAAIwF,SAAS,KAAKC,YAAL,CAAkBT,MAAlB,CAAb;AACA,QAAIQ,WAAW,IAAf,EAAqB;AACnBA,aAAOtM,GAAP,CAAW,OAAX,EAAoBqL,QAApB;AACAiB,aAAOtM,GAAP,CAAW,QAAX,EAAqBsL,SAArB;AACAgB,aAAOtM,GAAP,CAAW,aAAX,EAA0B,CAAEqL,QAAF,GAAa,CAAvC;AACAiB,aAAOtM,GAAP,CAAW,YAAX,EAAyB,CAAEsL,SAAF,GAAc,CAAvC;;AAEA;AACA,UAAIF,WAAWkB,OAAOrM,IAAP,CAAY,KAAZ,CAAf;AACA,UAAIsL,cAAc,KAAKJ,MAAL,CAAYC,QAAZ,EAAsBC,QAAtB,EAAgCC,SAAhC,CAAlB;;AAEAgB,aAAOO,GAAP,CAAW,OAAX,EAAoB,YAAY;AAC9BP,eAAOrM,IAAP,CAAY,KAAZ,EAAmBqM,OAAOvO,IAAP,CAAY,gBAAZ,CAAnB,EAD8B,CACqB;AACpD,OAFD;;AAIA,UAAI+O,eAAe,SAAfA,YAAe,GAAY;AAC7B,YAAI1B,aAAaG,WAAjB,EAA8B;AAAE;AAC9Be,iBAAOrM,IAAP,CAAY,KAAZ,EAAmBsL,WAAnB;AACD;AACF,OAJD;;AAMA,UAAIO,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,SAAjC,EAA4C;AAC1C,aAAKgP,YAAL,CAAkB3B,QAAlB,EAA4B/N,EAAE2P,KAAF,CAAQ,YAAW;AAC7C,eAAKnB,OAAL,CAAaC,MAAb,EAAqBgB,YAArB;AACAhB,iBAAO/N,IAAP,CAAY,WAAZ,EAAyB,IAAzB;AACD,SAH2B,EAGzB,IAHyB,CAA5B;AAID,OALD,MAKO;AACL,aAAK8N,OAAL,CAAaC,MAAb,EAAqBgB,YAArB;AACD;AAEF,KA7BD,MA6BO;AACL,WAAKjB,OAAL,CAAaC,MAAb;AACD;;AAED,SAAKmB,mBAAL,CAAyBnB,MAAzB;AACD,GAzCD;;AA2CA;;;;;;AAMAlD,mBAAiBlN,SAAjB,CAA2BuR,mBAA3B,GAAiD,UAAUnB,MAAV,EAAkB;AACjE,QAAIQ,SAAS,KAAKC,YAAL,CAAkBT,MAAlB,CAAb;AACA,QAAIQ,WAAW,IAAX,IAAmB,KAAKpK,QAAL,CAAcgL,QAArC,EAA+C;AAC7C,UAAIC,cAAc,KAAKV,gBAAL,CAAsBX,MAAtB,CAAlB;;AAEA;AACA,UAAIqB,gBAAgB,IAApB,EAA0B;AACxB,YAAIC,UAAUd,OAAOrM,IAAP,CAAY,KAAZ,CAAd;AACA,YAAI,CAAC,KAAKoN,cAAL,CAAoBD,OAApB,CAAL,EAAmCA,UAAUtB,OAAO7L,IAAP,CAAY,OAAZ,CAAV;AACnC,YAAI,KAAKoN,cAAL,CAAoBD,OAApB,CAAJ,EAAkC;AAAE;AAClCD,wBAAc9P,EAAE,0BAA0B+P,OAA1B,GAAoC,QAAtC,CAAd;AACAtB,iBAAOwB,MAAP,CAAcH,WAAd;AACArB,iBAAO/N,IAAP,CAAY,mBAAZ,EAAiC,IAAjC;AACD;AACF;;AAED;AACA,UAAIoP,gBAAgB,IAApB,EAA0B;AACxB,YAAI,CAAC,KAAKjL,QAAL,CAAc8J,YAAnB,EAAiCmB,YAAYjB,IAAZ,GAAmBC,MAAnB,CAA0B,CAA1B,EAA6B,KAAKjK,QAAL,CAAcqL,eAAd,CAA8BC,iBAA3D;AACjC,aAAKC,wBAAL,CAA8B3B,MAA9B;AACD;AACF,KAnBD,MAmBO;AACL,WAAK4B,2BAAL,CAAiC5B,MAAjC;AACD;AACF,GAxBD;;AA0BA;;;;;;AAMAlD,mBAAiBlN,SAAjB,CAA2B2R,cAA3B,GAA4C,UAAUD,OAAV,EAAmB;AAC7D,WAAQ,OAAOA,OAAP,KAAmB,WAAnB,IAAkCA,QAAQtM,MAAR,GAAiB,CAA3D;AACD,GAFD;;AAIA;;;;;;AAMA8H,mBAAiBlN,SAAjB,CAA2BiS,2BAA3B,GAAyD,UAAUC,WAAV,EAAuB;AAC9E,QAAIlB,WAAW,KAAKD,gBAAL,CAAsBpP,EAAEuQ,YAAYC,aAAd,CAAtB,CAAf;AACA,QAAI,KAAK3L,QAAL,CAAc8J,YAAlB,EAAgC;AAC9B,UAAI,OAAOU,QAAP,KAAoB,WAApB,IAAmCA,YAAY,IAAnD,EAA0D;AACxDA,iBAAST,QAAT,CAAkB,iBAAlB,EAAqC6B,WAArC,CAAiD,gBAAjD;AACD;AACF,KAJD,MAIO;AACL,UAAI,OAAOpB,QAAP,KAAoB,WAApB,IAAmCA,YAAY,IAAnD,EAA0D;AACxDA,iBAASR,IAAT,GAAgBC,MAAhB,CAAuB,KAAKjK,QAAL,CAAcqL,eAAd,CAA8BQ,iBAArD,EACI,KAAK7L,QAAL,CAAcqL,eAAd,CAA8BS,cADlC;AAED;AACF;AACF,GAZD;;AAcA;;;;;;AAMApF,mBAAiBlN,SAAjB,CAA2BuS,2BAA3B,GAAyD,UAAUL,WAAV,EAAuB;AAC9E,QAAIlB,WAAW,KAAKD,gBAAL,CAAsBpP,EAAEuQ,YAAYC,aAAd,CAAtB,CAAf;AACA,QAAI,KAAK3L,QAAL,CAAc8J,YAAlB,EAAgC;AAC9B,UAAI,OAAOU,QAAP,KAAoB,WAApB,IAAmCA,YAAY,IAAnD,EAA0D;AACxDA,iBAASoB,WAAT,CAAqB,iBAArB,EAAwCA,WAAxC,CAAoD,gBAApD;AACD;AACF,KAJD,MAIO;AACL,UAAI,OAAOpB,QAAP,KAAoB,WAApB,IAAmCA,YAAY,IAAnD,EAA0D;AACxDA,iBAASR,IAAT,GAAgBC,MAAhB,CAAuB,KAAKjK,QAAL,CAAcqL,eAAd,CAA8BQ,iBAArD,EACI,KAAK7L,QAAL,CAAcqL,eAAd,CAA8BC,iBADlC;AAED;AACF;AACF,GAZD;;AAcA;;;;;AAKA5E,mBAAiBlN,SAAjB,CAA2B+R,wBAA3B,GAAsD,UAAU3B,MAAV,EAAkB;AACtE,QAAIoC,qBAAqBpC,OAAO/N,IAAP,CAAY,uBAAZ,CAAzB;AACA,QAAI,OAAOmQ,kBAAP,KAA8B,WAAlC,EAA+C;AAC7CA,2BAAqB;AACnBC,oBAAY9Q,EAAE2P,KAAF,CAAQ,KAAKW,2BAAb,EAA0C,IAA1C,CADO;AAEnBS,oBAAY/Q,EAAE2P,KAAF,CAAQ,KAAKiB,2BAAb,EAA0C,IAA1C;AAFO,OAArB;AAIAnC,aAAOpO,EAAP,CAAU,YAAV,EAAwBW,SAAxB,EAAmCA,SAAnC,EAA8C6P,mBAAmBC,UAAjE;AACArC,aAAOpO,EAAP,CAAU,YAAV,EAAwBW,SAAxB,EAAmCA,SAAnC,EAA8C6P,mBAAmBE,UAAjE;AACAtC,aAAO/N,IAAP,CAAY,uBAAZ,EAAqCmQ,kBAArC;AACD;AACF,GAXD;;AAaA;;;;;AAKAtF,mBAAiBlN,SAAjB,CAA2BgS,2BAA3B,GAAyD,UAAU5B,MAAV,EAAkB;AACzE,QAAIoC,qBAAqBpC,OAAO/N,IAAP,CAAY,uBAAZ,CAAzB;AACA,QAAI,OAAOmQ,kBAAP,KAA8B,WAAlC,EAA+C;AAC7CpC,aAAOuC,GAAP,CAAW,YAAX,EAAyBhQ,SAAzB,EAAoC6P,mBAAmBC,UAAvD;AACArC,aAAOuC,GAAP,CAAW,YAAX,EAAyBhQ,SAAzB,EAAoC6P,mBAAmBE,UAAvD;AACAtC,aAAOnK,UAAP,CAAkB,uBAAlB;AACD;AACF,GAPD;;AASA;;;;;;AAMAiH,mBAAiBlN,SAAjB,CAA2B4S,kBAA3B,GAAgD,UAAUC,SAAV,EAAqB;AACnE,QAAI1N,CAAJ;AAAA,QAAOiL,MAAP;AAAA,QAAe0C,cAAf;AAAA,QAA+BC,OAA/B;AAAA,QAAwCC,OAAxC;AAAA,QAAiDC,UAAU,IAA3D;AACA,QAAIC,YAAY,CAAhB;AACA,QAAIC,iBAAiB,KAAKvE,YAAL,GAAoB,IAAI,KAAKd,MAA7B,GACjB,CAAC,KAAKP,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7B,GAAsC,CAAvC,IAA4C,KAAKoB,QAAL,CAAcuH,OAD9D;AAEA,QAAImD,YAAYiC,iBAAiB,KAAK5F,WAAL,CAAiBE,WAAlD;AACA,QAAI2F,mBAAmB,KAAK5M,QAAL,CAAc0K,SAArC;AACA,QAAImC,cAAc,KAAK9F,WAAL,CAAiB1J,KAAjB,GAAyBsP,cAAzB,GAA0C,KAAK3M,QAAL,CAAc8M,gBAA1E;;AAEA;AACA,QAAIT,aAAa,KAAKrM,QAAL,CAAc+M,OAAd,KAA0B,MAAvC,IAAiD,CAACF,WAAtD,EAAmE;AACjE,WAAKlO,IAAI,CAAT,EAAYA,IAAI,KAAKoI,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7C,EAAqDD,GAArD,EAA0D;AACxDiL,iBAAS,KAAK7C,WAAL,CAAiBC,WAAjB,CAA6BrI,CAA7B,CAAT;AACA,YAAI,KAAKqB,QAAL,CAAc8J,YAAlB,EACEF,OAAOgC,WAAP,CAAmB,eAAnB,EADF,KAGEhC,OAAOI,IAAP,GAAcC,MAAd,CAAqB,CAArB,EAAwB,CAAxB;AACH;AACD,aAAO,CAAC,CAAR;AACD;;AAED;AACA,QAAIoC,aAAa,CAACQ,WAAd,IAA6B,KAAK7M,QAAL,CAAc+M,OAAd,KAA0B,SAAvD,IAAoE,KAAK/M,QAAL,CAAc+M,OAAd,KAA0B,MAAlG,EAA0G;AACxGN,gBAAU,KAAV;;AAEA,UAAI,KAAK5E,IAAL,GAAY,CAAhB,EAAmB;AACjB+E,2BAAmB,CAAC,KAAKhF,IAAL,GAAY,KAAKN,MAAjB,GAA0B,KAAKtH,QAAL,CAAcuH,OAAd,GAAwB,KAAKM,IAAxD,IAAgE,KAAKA,IAAxF;AACA,YAAI+E,mBAAmB,KAAK7F,WAAL,CAAiBE,WAApC,GAAkD0F,cAAlD,GAAmE,KAAK3M,QAAL,CAAc8M,gBAArF,EAAuG;AACrGL,oBAAU,IAAV;AACD,SAFD,MAEO;AACLA,oBAAU,KAAV;AACD;AACF;AACF;;AAED,SAAK9N,IAAI,CAAT,EAAYA,IAAI,KAAKoI,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7C,EAAqDD,GAArD,EAA0D;AACxDiL,eAAS,KAAK7C,WAAL,CAAiBC,WAAjB,CAA6BrI,CAA7B,CAAT;AACA2N,uBAAiB1C,OAAO/N,IAAP,CAAY,UAAZ,IAA0B+N,OAAO/N,IAAP,CAAY,WAAZ,CAA3C;;AAEA,UAAI4Q,OAAJ,EAAa;AACXF,kBAAW5N,MAAM,KAAKoI,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7B,GAAsC,CAA7C,GAAkD+N,cAAlD,GAAmEjC,YAAY4B,cAAzF;AACAE,kBAAU9B,SAAV;;AAEA;;;;AAIA;;;;AAKD,OAbD,MAaO;AACL6B,kBAAUK,mBAAmBN,cAA7B;AACAE,kBAAUI,gBAAV;AACD;;AAEDD,wBAAkBhL,KAAKqL,KAAL,CAAWT,OAAX,CAAlB;AACA3C,aAAO/N,IAAP,CAAY,WAAZ,EAAyB8F,KAAKqL,KAAL,CAAWT,OAAX,CAAzB;AACA3C,aAAO/N,IAAP,CAAY,YAAZ,EAA0B8F,KAAKsL,IAAL,CAAUT,OAAV,CAA1B;AACA,UAAI7N,MAAM,CAAN,IAAW+N,YAAYF,OAA3B,EAAoCE,YAAYF,OAAZ;AACrC;;AAED,QAAI,KAAKxM,QAAL,CAAckN,WAAd,IAA6BR,YAAY,KAAK1M,QAAL,CAAc0K,SAA3D,EACEgC,YAAY,KAAK1M,QAAL,CAAc0K,SAA1B;;AAEF,SAAK3D,WAAL,CAAiBhH,MAAjB,GAA0B2M,SAA1B;AACA,WAAOD,OAAP;AACD,GApED;;AAsEA;;;AAGA/F,mBAAiBlN,SAAjB,CAA2B2T,gBAA3B,GAA8C,YAAY;AACxD,SAAKpG,WAAL,CAAiBC,WAAjB,GAA+B,EAA/B;AACA,SAAKD,WAAL,CAAiBE,WAAjB,GAA+B,CAA/B;AACA,SAAKF,WAAL,CAAiB1J,KAAjB,GAAyB,CAAzB;AACD,GAJD;;AAMA;;;;;AAKAqJ,mBAAiBlN,SAAjB,CAA2B4T,QAA3B,GAAsC,UAAUf,SAAV,EAAqB;AACzD,QAAIrM,WAAW,KAAKA,QAApB;AACA,QAAI4J,MAAJ;AAAA,QAAYyD,cAAZ;AAAA,QAA4BC,OAAO,KAAKhG,MAAxC;AAAA,QAAgD3I,CAAhD;;AAEA0O,qBAAiB,KAAKjB,kBAAL,CAAwBC,SAAxB,CAAjB;AACA,QAAIA,aAAarM,SAAS+M,OAAT,KAAqB,MAAlC,IAA4CM,mBAAmB,CAAC,CAApE,EAAuE;AACrE,WAAKF,gBAAL;AACA;AACD;;AAED,QAAI,KAAK3F,YAAL,CAAkB+F,YAAtB,EAAoC;AAClC,UAAI,KAAK/F,YAAL,CAAkBgG,KAAlB,GAA0BxN,SAAS0K,SAAnC,GAA+C,KAAK3D,WAAL,CAAiBhH,MAApE,EAA4E;AAC1E,aAAKgH,WAAL,CAAiBhH,MAAjB,GAA0B,KAAKyH,YAAL,CAAkBgG,KAAlB,GAA0BxN,SAAS0K,SAA7D;AACD;AACF,KAJD,MAIO;AACL,UAAI,KAAKlD,YAAL,CAAkBgG,KAAlB,GAA0B,CAA1B,IAA+B,KAAKhG,YAAL,CAAkBgG,KAAlB,GAA0B,KAAKzG,WAAL,CAAiBhH,MAA9E,EAAsF;AACpF,aAAKgH,WAAL,CAAiBhH,MAAjB,GAA0B,KAAKyH,YAAL,CAAkBgG,KAA5C;AACD;AACF;;AAED;AACA,QAAIxN,SAAS+M,OAAT,KAAqB,QAArB,IAAiC/M,SAAS+M,OAAT,KAAqB,OAA1D,EAAmE;AACjE,UAAIJ,iBAAiB,KAAKvE,YAAL,GAAoB,IAAI,KAAKd,MAA7B,GAAsC,CAAC,KAAKP,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7B,GAAsC,CAAvC,IAA4CoB,SAASuH,OAAhH;;AAEA,WAAK5I,IAAI,CAAT,EAAYA,IAAI,KAAKoI,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7C,EAAqDD,GAArD,EAA0D;AACxDiL,iBAAS,KAAK7C,WAAL,CAAiBC,WAAjB,CAA6BrI,CAA7B,CAAT;AACAgO,0BAAkB/C,OAAO/N,IAAP,CAAY,WAAZ,CAAlB;AACD;;AAED,UAAImE,SAAS+M,OAAT,KAAqB,QAAzB,EACEO,QAAQX,iBAAiB,CAAzB,CADF,KAEK,IAAI3M,SAAS+M,OAAT,KAAqB,OAAzB,EACHO,QAAQX,cAAR;AACH;;AAED,SAAKhO,IAAI,CAAT,EAAYA,IAAI,KAAKoI,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7C,EAAqDD,GAArD,EAA0D;AACxDiL,eAAS,KAAK7C,WAAL,CAAiBC,WAAjB,CAA6BrI,CAA7B,CAAT;AACA,WAAK8L,YAAL,CAAkBb,MAAlB,EAA0B0D,IAA1B,EAAgC,KAAK1F,IAArC,EAA2CgC,OAAO/N,IAAP,CAAY,WAAZ,CAA3C,EAAqE+N,OAAO/N,IAAP,CAAY,YAAZ,CAArE,EAAgG,KAAKkL,WAAL,CAAiBhH,MAAjH;AACAuN,cAAQ1D,OAAO/N,IAAP,CAAY,WAAZ,IAA2BmE,SAASuH,OAA5C;AACD;;AAED;AACA,SAAKkG,kBAAL,GAA0B,KAAK7F,IAAL,GAAY,KAAKb,WAAL,CAAiBhH,MAA7B,GAAsC,KAAKuH,MAArE;AACA,SAAKX,QAAL,CAAc5G,MAAd,CAAqB,KAAK0N,kBAAL,GAA0B,KAAKC,gBAAL,EAA/C;;AAEA,QAAI,CAACrB,SAAD,IAAe,KAAKtF,WAAL,CAAiBhH,MAAjB,IAA2BC,SAAS0K,SAApC,IAAiD2C,cAApE,EAAqF;AACnF;AACA,WAAKzF,IAAL,IAAa,KAAKb,WAAL,CAAiBhH,MAAjB,GAA0BC,SAASuH,OAAhD;AACA,WAAKM,IAAL,IAAa,CAAb;AACA,WAAKsF,gBAAL;AACA,WAAKxG,QAAL,CAAc1K,OAAd,CAAsB,aAAtB;AACD;AACF,GApDD;;AAsDA;;;AAGA,MAAI0R,cAAc,KAAlB;AACAjH,mBAAiBlN,SAAjB,CAA2BoU,UAA3B,GAAwC,YAAY;AAClD,SAAKzF,oBAAL,GAA4B0F,YAAY1S,EAAE2P,KAAF,CAAQ,YAAY;AAC1D,UAAI1C,eAAe0F,WAAW,KAAKnH,QAAL,CAActJ,KAAd,EAAX,CAAnB;AACA,UAAIoJ,mBAAmBkH,WAAvB,EAAmC;;AAEjC,YAAIhM,KAAKE,GAAL,CAASuG,eAAe,KAAKA,YAA7B,IAA6C,KAAKpI,QAAL,CAAc+N,kBAA/D,EAAmF;AACjF,eAAK3F,YAAL,GAAoBA,YAApB;AACA,eAAK4F,MAAL;;AAEA;AACA,eAAKC,gBAAL,CAAsB,IAAtB;AACD;AACF,OATD,MASO;AACLN,sBAAclH,cAAd;AACA,aAAK2B,YAAL,GAAoBA,YAApB;AACD;AACF,KAfuC,EAerC,IAfqC,CAAZ,EAelB,KAAKpI,QAAL,CAAckO,WAfI,CAA5B;AAgBD,GAjBD;;AAmBA;;;AAGAxH,mBAAiBlN,SAAjB,CAA2B2U,eAA3B,GAA6C,YAAY;AACvD,WAAO,KAAKrG,OAAL,CAAaI,UAAb,KAA4B,IAAnC;AACD,GAFD;;AAIA;;;AAGAxB,mBAAiBlN,SAAjB,CAA2BkU,gBAA3B,GAA8C,YAAY;AACxD,WAAO,KAAK5F,OAAL,CAAaG,GAAb,CAAiBjO,WAAjB,EAAP;AACD,GAFD;;AAIA;;;AAGA0M,mBAAiBlN,SAAjB,CAA2B4U,2BAA3B,GAAyD,YAAY;AACnEC,kBAAc,KAAKvG,OAAL,CAAaI,UAA3B;AACA,SAAKJ,OAAL,CAAaI,UAAb,GAA0B,IAA1B;AACA,SAAKvB,QAAL,CAAc5G,MAAd,CAAqB,KAAK4G,QAAL,CAAc5G,MAAd,KAAyB,KAAK2N,gBAAL,EAA9C;AACA,SAAK5F,OAAL,CAAaG,GAAb,CAAiBqG,MAAjB;AACD,GALD;;AAOA;;;AAGA5H,mBAAiBlN,SAAjB,CAA2B+U,4BAA3B,GAA0D,YAAY;AACpE,QAAIC,iBAAiB,KAAK1G,OAA1B;AACA,QAAI2G,iBAAiBD,eAAevG,GAAf,CAAmBlL,IAAnB,CAAwB,MAAxB,CAArB;AACAsR,kBAAcG,eAAetG,UAA7B;AACA,SAAKvB,QAAL,CAAcyE,MAAd,CAAqBoD,eAAevG,GAApC;AACA,SAAKtB,QAAL,CAAc5G,MAAd,CAAqB,KAAK6H,IAAL,GAAY,KAAKb,WAAL,CAAiBhH,MAA7B,GAAsC,KAAK2N,gBAAL,EAA3D;AACAc,mBAAetG,UAAf,GAA4B2F,YAAY,YAAY;AAClD,UAAIW,eAAezG,KAAf,GAAuB0G,eAAe7P,MAA1C,EAAkD;AAChD6P,uBAAeC,EAAf,CAAkBF,eAAezG,KAAjC,EAAwCkC,MAAxC,CAA+CuE,eAAexG,QAA9D,EAAwE,CAAxE;AACD,OAFD,MAEO;AACLyG,uBAAeC,EAAf,CAAkBF,eAAezG,KAAf,GAAuB0G,eAAe7P,MAAxD,EAAgEqL,MAAhE,CAAuEuE,eAAexG,QAAtF,EAAgG,CAAhG;AACD;AACDwG,qBAAezG,KAAf,GAAuB,CAACyG,eAAezG,KAAf,GAAuB,CAAxB,KAA8B0G,eAAe7P,MAAf,GAAwB,CAAtD,CAAvB;AACD,KAP2B,EAOzB4P,eAAexG,QAPU,CAA5B;AAQD,GAdD;;AAgBA;;;AAGAtB,mBAAiBlN,SAAjB,CAA2BwU,MAA3B,GAAoC,YAAY;AAC9C,SAAK9G,iBAAL,GAAyB,CAAC,CAA1B;AACA,SAAKU,IAAL,GAAY,KAAKN,MAAjB;AACA,SAAKO,IAAL,GAAY,CAAZ;AACA,SAAKsF,gBAAL;AACD,GALD;;AAOA;;;;;;AAMAzG,mBAAiBlN,SAAjB,CAA2BmV,aAA3B,GAA2C,UAAUC,QAAV,EAAoB;AAC7D,SAAK9H,OAAL,GAAe,KAAKH,QAAL,CAAc5J,IAAd,CAAmB,KAAKiD,QAAL,CAAc6O,QAAjC,EAA2CC,OAA3C,EAAf;AACA,QAAI,KAAKhI,OAAL,CAAalI,MAAb,KAAwB,CAA5B,EAA+B,OAAO,KAAP;;AAE/B;AACA,QAAI,KAAKoB,QAAL,CAAc+O,MAAlB,EAA0B;AACxB,WAAKC,aAAL,CAAmB,KAAKC,WAAxB,EAAqCL,QAArC;AACD,KAFD,MAEO;AACL,WAAKI,aAAL,CAAmB,KAAKE,YAAxB,EAAsCN,QAAtC;AACD;;AAED;AACA,QAAIzT,EAAEgU,UAAF,CAAa,KAAKnP,QAAL,CAAcoP,IAA3B,CAAJ,EAAsC;AACpC,WAAKJ,aAAL,CAAmB,KAAKK,SAAxB,EAAmCT,QAAnC;AACD,KAFD,MAEO,IAAI,KAAK5O,QAAL,CAAcsP,SAAlB,EAA6B;AAClC,WAAKN,aAAL,CAAmB,KAAKO,YAAxB,EAAsCX,QAAtC;AACD;;AAED,WAAO,IAAP;AACD,GAnBD;;AAqBA;;;;;AAKAlI,mBAAiBlN,SAAjB,CAA2BgW,eAA3B,GAA6C,UAAU1I,OAAV,EAAmB;AAC9D,QAAI2I,OAAO,IAAX;AACAtU,MAAEO,IAAF,CAAOoL,OAAP,EAAgB,YAAY;AAC1B3L,QAAE,IAAF,EAAQuU,QAAR,CAAiBD,KAAK9I,QAAtB;AACD,KAFD;AAGD,GALD;;AAOA;;;;;;AAMAD,mBAAiBlN,SAAjB,CAA2B+V,YAA3B,GAA0C,UAAUI,CAAV,EAAa;AACrD,QAAIhR,CAAJ,EAAOiR,CAAP,EAAUC,IAAV;AACA,SAAKlR,IAAIgR,EAAE/Q,MAAF,GAAW,CAApB,EAAuBD,IAAI,CAA3B,EAA8BA,GAA9B,EAAmC;AACjCiR,UAAIjO,KAAKmO,KAAL,CAAWnO,KAAKoO,MAAL,MAAiBpR,IAAI,CAArB,CAAX,CAAJ;AACAkR,aAAOF,EAAEhR,CAAF,CAAP;AACAgR,QAAEhR,CAAF,IAAOgR,EAAEC,CAAF,CAAP;AACAD,QAAEC,CAAF,IAAOC,IAAP;AACD;AACD,SAAKL,eAAL,CAAqBG,CAArB;AACA,WAAOA,CAAP;AACD,GAVD;;AAYA;;;;;;AAMAjJ,mBAAiBlN,SAAjB,CAA2B6V,SAA3B,GAAuC,UAAUM,CAAV,EAAa;AAClDA,MAAEP,IAAF,CAAO,KAAKpP,QAAL,CAAcoP,IAArB;AACA,SAAKI,eAAL,CAAqBG,CAArB;AACA,WAAOA,CAAP;AACD,GAJD;;AAMA;;;;;AAKAjJ,mBAAiBlN,SAAjB,CAA2B0V,YAA3B,GAA0C,UAAUS,CAAV,EAAa;AACrD,SAAK,IAAIhR,IAAI,CAAb,EAAgBA,IAAIgR,EAAE/Q,MAAtB,EAA8BD,GAA9B;AAAmCxD,QAAEwU,EAAEhR,CAAF,CAAF,EAAQiN,WAAR,CAAoB,aAApB;AAAnC,KACA,OAAO+D,CAAP;AACD,GAHD;;AAKA;;;;;;AAMAjJ,mBAAiBlN,SAAjB,CAA2ByV,WAA3B,GAAyC,UAAUU,CAAV,EAAa;AACpD,QAAI3P,WAAW,KAAKA,QAApB;AACA,QAAI7E,EAAE8F,IAAF,CAAOjB,SAAS+O,MAAhB,MAA4B,QAAhC,EAA0C;AACxC;AACA,aAAOY,EAAEZ,MAAF,CAAS,UAAUiB,EAAV,EAAc;AAC5B,YAAI/H,MAAM9M,EAAE6U,EAAF,CAAV;AACA,YAAI/H,IAAIgI,EAAJ,CAAOjQ,SAAS+O,MAAhB,CAAJ,EAA6B;AAC3B9G,cAAI2D,WAAJ,CAAgB,aAAhB;AACA,iBAAO,IAAP;AACD,SAHD,MAGO;AACL3D,cAAI8B,QAAJ,CAAa,aAAb;AACA,iBAAO,KAAP;AACD;AACF,OATM,CAAP;AAUD,KAZD,MAYO,IAAI5O,EAAEgU,UAAF,CAAanP,SAAS+O,MAAtB,CAAJ,EAAmC;AACxC;AACA,aAAOY,EAAEZ,MAAF,CAAS/O,SAAS+O,MAAlB,CAAP;AACD;AACF,GAlBD;;AAoBA;;;;;;AAMArI,mBAAiBlN,SAAjB,CAA2BwV,aAA3B,GAA2C,UAAUkB,eAAV,EAA2BtB,QAA3B,EAAqC;AAC9E,QAAIuB,cAAcvB,WACd,KAAK9H,OAAL,CAAasJ,MAAb,CAAoB,KAAKlJ,iBAAL,GAAyB,CAA7C,EAAgD,KAAKJ,OAAL,CAAalI,MAAb,GAAsB,KAAKsI,iBAA3B,GAA+C,CAA/F,CADc,GAEZ,KAAKJ,OAFX;AAGAqJ,kBAAcD,gBAAgBzP,IAAhB,CAAqB,IAArB,EAA2B0P,WAA3B,CAAd;AACA,SAAKrJ,OAAL,GAAe8H,WAAW,KAAK9H,OAAL,CAAauJ,MAAb,CAAoBF,WAApB,CAAX,GAA8CA,WAA7D;AACD,GAND;;AAQA;;;;;;;;;AASAzJ,mBAAiBlN,SAAjB,CAA2B8W,OAA3B,GAAqC,YAAY;AAC/CjC,kBAAc,KAAKlG,oBAAnB;;AAEAhN,MAAEO,IAAF,CAAO,KAAKoL,OAAZ,EAAqB3L,EAAE2P,KAAF,CAAQ,UAASyF,CAAT,EAAYC,KAAZ,EAAmB;AAC9C,UAAI5G,SAASzO,EAAEqV,KAAF,CAAb;;AAEA;AACA5G,aAAO9L,GAAP,CAAW,OAAX,EAAoB,EAApB;AACA8L,aAAO9L,GAAP,CAAW,QAAX,EAAqB,EAArB;AACA8L,aAAO9L,GAAP,CAAW,KAAX,EAAkB,EAAlB;AACA8L,aAAO9L,GAAP,CAAW,MAAX,EAAmB,EAAnB;AACA8L,aAAO/N,IAAP,CAAY,WAAZ,EAAyBM,SAAzB;AACAyN,aAAOgC,WAAP,CAAmB,UAAnB;;AAEA;AACA,UAAItB,OAAO,KAAKD,YAAL,CAAkBT,MAAlB,CAAX;AACAU,WAAKxM,GAAL,CAAS,OAAT,EAAkB,EAAlB;AACAwM,WAAKxM,GAAL,CAAS,QAAT,EAAmB,EAAnB;AACAwM,WAAKxM,GAAL,CAAS,aAAT,EAAwB,EAAxB;AACAwM,WAAKxM,GAAL,CAAS,YAAT,EAAuB,EAAvB;AACAwM,WAAKvM,IAAL,CAAU,KAAV,EAAiBuM,KAAKzO,IAAL,CAAU,gBAAV,CAAjB;AACAyO,WAAKzO,IAAL,CAAU,gBAAV,EAA4BM,SAA5B;;AAEA;AACA,WAAKqP,2BAAL,CAAiC5B,MAAjC;AACA,UAAIY,WAAW,KAAKD,gBAAL,CAAsBX,MAAtB,CAAf;AACA,UAAIA,OAAO/N,IAAP,CAAY,mBAAZ,CAAJ,EAAsC;AACpC;AACA+N,eAAO/N,IAAP,CAAY,mBAAZ,EAAiCM,SAAjC;AACA,YAAIqO,aAAa,IAAjB,EAAuBA,SAASiG,MAAT;AACxB,OAJD,MAIO;AACL,YAAIjG,aAAa,IAAjB,EAAuBA,SAASP,MAAT,CAAgB,CAAhB,EAAmB,CAAnB;AACxB;AAEF,KA/BoB,EA+BlB,IA/BkB,CAArB;;AAiCA,SAAKtD,QAAL,CAAc7I,GAAd,CAAkB,QAAlB,EAA4B,EAA5B;AACA,SAAK6I,QAAL,CAAciF,WAAd,CAA0B,0BAA1B;AACA,SAAKjF,QAAL,CAAc9K,IAAd,CAAmB,eAAnB,EAAoCM,SAApC;AACD,GAvCD;;AAyCA;;;;;AAKAuK,mBAAiBlN,SAAjB,CAA2BkX,aAA3B,GAA2C,UAAUC,WAAV,EAAuB;AAChE,SAAK,IAAIhS,IAAI,KAAKuI,iBAAL,GAAyB,CAAtC,EAAyCvI,IAAI,KAAKmI,OAAL,CAAalI,MAA1D,EAAkED,GAAlE,EAAuE;AACrE,UAAIiL,SAASzO,EAAE,KAAK2L,OAAL,CAAanI,CAAb,CAAF,CAAb;AACA,UAAIiL,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,IAA7B,IAAqC+N,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,SAAtE,EAAiF;AAC/E,YAAI8Q,iBAAiB,KAAKvE,YAAL,GAAoB,IAAI,KAAKd,MAA7B,GACjB,CAAC,KAAKP,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7B,GAAsC,CAAvC,IAA4C,KAAKoB,QAAL,CAAcuH,OAD9D;AAEA,YAAI+E,iBAAiB1C,OAAO/N,IAAP,CAAY,UAAZ,IAA0B+N,OAAO/N,IAAP,CAAY,WAAZ,CAA/C;AACA,YAAI8Q,kBAAkB,KAAK5F,WAAL,CAAiBE,WAAjB,GAA+BqF,cAAjD,IAAmE,KAAKtM,QAAL,CAAc0K,SAArF,EAAgG;AAC9F,eAAK0C,QAAL,CAAc,KAAd;AACA,cAAG,EAAE,KAAKjG,KAAL,CAAWE,OAAb,IAAwB,KAAKF,KAAL,CAAWC,KAAtC,EAA6C;AAC3C,iBAAK6G,gBAAL,CAAsB0C,WAAtB;AACA;AACD;AACF;;AAED,aAAK5J,WAAL,CAAiBC,WAAjB,CAA6B4J,IAA7B,CAAkChH,MAAlC;AACA,aAAK7C,WAAL,CAAiBE,WAAjB,IAAgCqF,cAAhC;AACA,aAAKvF,WAAL,CAAiB1J,KAAjB,IAA0BiP,iBAAiB,KAAKtM,QAAL,CAAc0K,SAAzD;AACA,aAAKxD,iBAAL,GAAyBvI,CAAzB;AAED,OAjBD,MAiBO,IAAIiL,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,OAAjC,EAA0C;AAC/C;AACD;AACF;;AAED;AACA,QAAI,KAAKkL,WAAL,CAAiBC,WAAjB,CAA6BpI,MAA7B,GAAsC,CAA1C,EAA6C,KAAKwO,QAAL,CAAc,IAAd;;AAE7C,QAAI,KAAKe,eAAL,EAAJ,EAA4B;AAC1B,WAAKC,2BAAL;AACD;;AAED;;;;AAIA,SAAKyC,sBAAL;;AAEA;AACA,SAAKlK,QAAL,CAAc1K,OAAd,CAAsB0U,cAAc,WAAd,GAA4B,aAAlD;AACA,SAAKhK,QAAL,CAAc5G,MAAd,CAAqB,KAAK0N,kBAA1B;AACD,GAzCD;;AA2CA;;;AAGA/G,mBAAiBlN,SAAjB,CAA2BqX,sBAA3B,GAAoD,YAAY;AAC9D,SAAK1J,KAAL,CAAWE,OAAX,GAAqB,CAArB;AACA,QAAI,KAAKR,kBAAL,KAA4B,IAAhC,EAAsCtE,aAAa,KAAKsE,kBAAlB;AACvC,GAHD;;AAKA;;;;;AAKAH,mBAAiBlN,SAAjB,CAA2ByU,gBAA3B,GAA8C,UAAU0C,WAAV,EAAuB;AACnE,QAAIlB,OAAO,IAAX;AACA,SAAKoB,sBAAL;AACA,SAAKhK,kBAAL,GAA0BrE,WAAW,YAAY;AAC/CiN,WAAKiB,aAAL,CAAmBC,WAAnB;AACD,KAFyB,EAEvB,KAFuB,CAA1B,CAHmE,CAKxD;AACZ,GAND;;AAQA;;;;;;;;AAQAjK,mBAAiBlN,SAAjB,CAA2BqR,YAA3B,GAA0C,UAAU3B,QAAV,EAAoB4H,MAApB,EAA4B9K,OAA5B,EAAqC;AAC7E,QAAI,CAAC8K,MAAD,IAAW,CAAC9K,OAAhB,EAAyB;;AAEzB,QAAI+K,WAAW,IAAIxN,KAAJ,EAAf;AACA,QAAIyN,YAAY7V,EAAE4V,QAAF,CAAhB;AACA,QAAID,MAAJ,EAAY;AACVE,gBAAUrG,GAAV,CAAc,MAAd,EAAsB,YAAY;AAChCqG,kBAAU7E,GAAV,CAAc,YAAd;AACA2E,eAAOC,QAAP;AACD,OAHD;AAID;AACD,QAAI/K,OAAJ,EAAa;AACXgL,gBAAUrG,GAAV,CAAc,OAAd,EAAuB,YAAW;AAChCqG,kBAAU7E,GAAV,CAAc,YAAd;AACAnG,gBAAQ+K,QAAR;AACD,OAHD;AAID;AACDA,aAASlO,GAAT,GAAeqG,QAAf;AACD,GAlBD;;AAoBA;;;;AAIAxC,mBAAiBlN,SAAjB,CAA2ByX,IAA3B,GAAkC,YAAY;AAC5C,QAAIC,eAAe,KAAnB;AAAA,QAA0BC,gBAAgB,KAA1C;AAAA,QAAiD1B,OAAO,IAAxD;AACAtU,MAAEO,IAAF,CAAO,KAAKoL,OAAZ,EAAqB,UAAUsK,KAAV,EAAiBZ,KAAjB,EAAwB;AAC3C,UAAI5G,SAASzO,EAAEqV,KAAF,CAAb;AACA,UAAIpG,SAASqF,KAAKpF,YAAL,CAAkBT,MAAlB,CAAb;;AAEAA,aAAOG,QAAP,CAAgB,UAAhB;;AAEA,UAAIH,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,IAA7B,IAAqC+N,OAAO/N,IAAP,CAAY,WAAZ,MAA6B,SAAtE,EAAiF;;AAE/E;AACA,YAAI4T,KAAKzP,QAAL,CAAcqR,GAAd,KAAsB,IAA1B,EAAgCzH,OAAO7L,IAAP,CAAY,KAAZ,EAAmB0R,KAAKzP,QAAL,CAAcqR,GAAjC;;AAEhC;AACA,YAAI5B,KAAKzP,QAAL,CAAcsR,MAAd,KAAyB,IAA7B,EAAmC1H,OAAO7L,IAAP,CAAY,QAAZ,EAAsB0R,KAAKzP,QAAL,CAAcsR,MAApC;;AAEnC,YAAIlH,WAAW,IAAf,EAAqB;;AAEnB;AACA,cAAIlB,WAAWuG,KAAKtF,sBAAL,CAA4BC,MAA5B,CAAf;AACAA,iBAAOrM,IAAP,CAAY,KAAZ,EAAmBmL,QAAnB;;AAEA;;AAEA,cAAIuG,KAAKzP,QAAL,CAAcuR,kBAAd,KAAqC,KAAzC,EAAgD;AAC9C,gBAAIlU,QAAQyQ,WAAW1D,OAAOrM,IAAP,CAAY,OAAZ,CAAX,CAAZ;AACA,gBAAIgC,SAAS+N,WAAW1D,OAAOrM,IAAP,CAAY,QAAZ,CAAX,CAAb;AACA,gBAAI,CAACyT,MAAMnU,KAAN,CAAD,IAAiB,CAACmU,MAAMzR,MAAN,CAAtB,EAAqC;AACnC6J,qBAAO/N,IAAP,CAAY,UAAZ,EAAwBwB,KAAxB;AACAuM,qBAAO/N,IAAP,CAAY,WAAZ,EAAyBkE,MAAzB;AACA6J,qBAAO/N,IAAP,CAAY,WAAZ,EAAyB,SAAzB;AACAsV,8BAAgB,IAAhB;AACA1B,mBAAKxB,gBAAL,CAAsB,KAAtB;AACA,qBAAO,IAAP,CANmC,CAMtB;AACd;AACF;;AAEDrE,iBAAO/N,IAAP,CAAY,WAAZ,EAAyB,KAAzB;AACAqV,yBAAe,IAAf;;AAEA;AACA,cAAI,CAACzB,KAAKtB,eAAL,EAAL,EAA6BsB,KAAKlB,4BAAL;;AAE7BkB,eAAK5E,YAAL,CAAkB3B,QAAlB,EAA4B,UAAUuI,OAAV,EAAmB;AAAE;AAC/C7H,mBAAO/N,IAAP,CAAY,UAAZ,EAAwB+N,OAAO7M,IAAP,CAAY,uBAAZ,EAAqClB,IAArC,CAA0C,cAA1C,CAAxB;AACA+N,mBAAO/N,IAAP,CAAY,WAAZ,EAAyB+N,OAAO7M,IAAP,CAAY,uBAAZ,EAAqClB,IAArC,CAA0C,eAA1C,CAAzB;;AAEA+N,mBAAO/N,IAAP,CAAY,WAAZ,EAAyB,IAAzB;;AAGA4T,iBAAKxB,gBAAL,CAAsB,KAAtB;AACD,WARD,EAQG,YAAY;AAAE;AACfrE,mBAAO/N,IAAP,CAAY,WAAZ,EAAyB,OAAzB;AACA4T,iBAAKxB,gBAAL,CAAsB,KAAtB;AACD,WAXD;AAaD,SAxCD,MAwCO;AACLrE,iBAAO/N,IAAP,CAAY,WAAZ,EAAyB,IAAzB;AACA+N,iBAAO/N,IAAP,CAAY,UAAZ,EAAwB+N,OAAOvM,KAAP,KAAiByQ,WAAWlE,OAAO9L,GAAP,CAAW,OAAX,CAAX,CAAjB,GAAmD,CAA3E;AACA8L,iBAAO/N,IAAP,CAAY,WAAZ,EAAyB+N,OAAO7J,MAAP,KAAkB+N,WAAWlE,OAAO9L,GAAP,CAAW,QAAX,CAAX,CAAlB,GAAqD,CAA9E;AACD;AAEF;AAEF,KA9DD;;AAgEA,QAAI,CAACoT,YAAD,IAAiB,CAACC,aAAtB,EAAqC,KAAKlD,gBAAL,CAAsB,KAAtB;AACrC,SAAKL,UAAL;AACD,GApED;;AAsEA;;;;;;AAMAlH,mBAAiBlN,SAAjB,CAA2BkY,oBAA3B,GAAkD,UAAUC,gBAAV,EAA4BC,WAA5B,EAAyC;AACzF,QAAIzW,EAAE8F,IAAF,CAAO0Q,iBAAiBC,WAAjB,CAAP,MAA0C,QAA9C,EAAwD;AACtDD,uBAAiBC,WAAjB,IAAgC9D,WAAW6D,iBAAiBC,WAAjB,CAAX,CAAhC;AACD;;AAED,QAAIzW,EAAE8F,IAAF,CAAO0Q,iBAAiBC,WAAjB,CAAP,MAA0C,QAA9C,EAAwD;AACtD,UAAIJ,MAAMG,iBAAiBC,WAAjB,CAAN,CAAJ,EAA0C,MAAM,wBAAwBA,WAA9B;AAC3C,KAFD,MAEO;AACL,YAAMA,cAAc,mBAApB;AACD;AACF,GAVD;;AAYA;;;;AAIAlL,mBAAiBlN,SAAjB,CAA2BqY,uBAA3B,GAAqD,YAAY;AAC/D,QAAI1W,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAcuI,iBAArB,MAA4C,QAAhD,EAA0D;AACxD,YAAM,yDAAN;AACD;;AAED,QAAIb,eAAe,EAAnB;AACA,SAAK,IAAIoK,QAAT,IAAqB,KAAK9R,QAAL,CAAcuI,iBAAnC,EAAsD;AACpD,UAAI,KAAKvI,QAAL,CAAcuI,iBAAd,CAAgCS,cAAhC,CAA+C8I,QAA/C,CAAJ,EAA8DpK,aAAakJ,IAAb,CAAkBkB,QAAlB;AAC/D;;AAED,QAAIC,qBAAqB,EAAC,GAAG,EAAJ,EAAzB;AACA,SAAK,IAAIpT,IAAI,CAAb,EAAgBA,IAAI+I,aAAa9I,MAAjC,EAAyCD,GAAzC,EAA8C;AAC5C,UAAIxD,EAAE8F,IAAF,CAAOyG,aAAa/I,CAAb,CAAP,MAA4B,QAAhC,EAA0C;AACxC,YAAI;AACF,cAAIqT,SAASlS,SAAS4H,aAAa/I,CAAb,EAAgBnC,OAAhB,CAAwB,SAAxB,EAAmC,EAAnC,CAAT,EAAiD,EAAjD,CAAb;AACAuV,6BAAmBC,MAAnB,IAA6B,KAAKhS,QAAL,CAAcuI,iBAAd,CAAgCb,aAAa/I,CAAb,CAAhC,CAA7B;AACD,SAHD,CAGE,OAAOlD,CAAP,EAAU;AACV,gBAAM,2DAA2DA,CAA3D,GAA+D,GAArE;AACD;AACF,OAPD,MAOO;AACLsW,2BAAmBrK,aAAa/I,CAAb,CAAnB,IAAsC,KAAKqB,QAAL,CAAcuI,iBAAd,CAAgCb,aAAa/I,CAAb,CAAhC,CAAtC;AACD;AACF;;AAED,SAAKqB,QAAL,CAAcuI,iBAAd,GAAkCwJ,kBAAlC;AACD,GAzBD;;AA2BA;;;AAGArL,mBAAiBlN,SAAjB,CAA2BiO,oBAA3B,GAAkD,YAAY;AAC5D,QAAIwK,kBAAkB,EAAtB;;AAEA,QAAI9W,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAcwH,YAArB,MAAuC,QAA3C,EAAqD;AACnD,UAAI,KAAKxH,QAAL,CAAcwH,YAAd,CAA2BgC,KAA3B,CAAiC,WAAjC,CAAJ,EAAmD;AACjDyI,wBAAgBzE,KAAhB,GAAwBM,WAAW,KAAK9N,QAAL,CAAcwH,YAAd,CAA2BgC,KAA3B,CAAiC,aAAjC,EAAgD,CAAhD,CAAX,IAAiE,GAAzF;AACAyI,wBAAgB1E,YAAhB,GAA+B,KAA/B;AACD,OAHD,MAGO;AACL0E,wBAAgBzE,KAAhB,GAAwBM,WAAW,KAAK9N,QAAL,CAAcwH,YAAzB,CAAxB;AACAyK,wBAAgB1E,YAAhB,GAA+B,IAA/B;AACD;AACF,KARD,MAQO,IAAIpS,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAcwH,YAArB,MAAuC,QAA3C,EAAqD;AAC1DyK,sBAAgBzE,KAAhB,GAAwB,KAAKxN,QAAL,CAAcwH,YAAtC;AACAyK,sBAAgB1E,YAAhB,GAA+B,KAA/B;AACD,KAHM,MAGA;AACL,YAAM,+CAAN;AACD;;AAED;AACA,QAAIiE,MAAMS,gBAAgBzE,KAAtB,CAAJ,EAAkC,MAAM,iCAAN;;AAElC;AACA,QAAIyE,gBAAgB1E,YAApB,EAAkC;AAChC,UAAI0E,gBAAgBzE,KAAhB,GAAwB,GAA5B,EAAiCyE,gBAAgBzE,KAAhB,GAAwB,GAAxB;AAClC,KAFD,MAEO;AACL,UAAIyE,gBAAgBzE,KAAhB,GAAwB,CAAxB,IAA6ByE,gBAAgBzE,KAAhB,GAAwB,KAAKxN,QAAL,CAAc0K,SAAvE,EAAkF;AAChFuH,wBAAgBzE,KAAhB,GAAwB,KAAKxN,QAAL,CAAc0K,SAAtC;AACD;AACF;;AAED,WAAOuH,eAAP;AAED,GAhCD;;AAkCA;;;AAGAvL,mBAAiBlN,SAAjB,CAA2BoN,aAA3B,GAA2C,YAAY;AACrD,SAAKiL,uBAAL;;AAEA,SAAKH,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,WAAzC;AACA,SAAK0R,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,SAAzC;AACA,SAAK0R,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,QAAzC;;AAEA,QAAIkS,eAAe,CACjB,SADiB,EAEjB,WAFiB,EAGjB,MAHiB,EAIjB,QAJiB,EAKjB,OALiB,EAMjB,MANiB,CAAnB;AAQA,QAAIA,aAAarJ,OAAb,CAAqB,KAAK7I,QAAL,CAAc+M,OAAnC,MAAgD,CAAC,CAArD,EAAwD;AACtD,YAAM,6BAA6BmF,aAAaC,IAAb,CAAkB,IAAlB,CAAnC;AACD;;AAED,SAAKT,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,kBAAzC;AACA,QAAI,KAAKA,QAAL,CAAc8M,gBAAd,GAAiC,CAAjC,IAAsC,KAAK9M,QAAL,CAAc8M,gBAAd,GAAiC,CAA3E,EAA8E;AAC5E,YAAM,gDAAN;AACD;AACD,QAAI3R,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAc8J,YAArB,MAAuC,SAA3C,EAAsD;AACpD,YAAM,gCAAN;AACD;;AAED,QAAI3O,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAcgL,QAArB,MAAmC,SAAvC,EAAkD,MAAM,4BAAN;AAClD,SAAK0G,oBAAL,CAA0B,KAAK1R,QAAL,CAAcqL,eAAxC,EAAyD,mBAAzD;;AAEA,SAAKqG,oBAAL,CAA0B,KAAK1R,QAAL,CAAcqL,eAAxC,EAAyD,gBAAzD;AACA,QAAI,KAAKrL,QAAL,CAAcqL,eAAd,CAA8BS,cAA9B,GAA+C,CAA/C,IACA,KAAK9L,QAAL,CAAcqL,eAAd,CAA8BS,cAA9B,GAA+C,CADnD,EACsD;AACpD,YAAM,+DAAN;AACD;;AAED,SAAK4F,oBAAL,CAA0B,KAAK1R,QAAL,CAAcqL,eAAxC,EAAyD,mBAAzD;AACA,QAAI,KAAKrL,QAAL,CAAcqL,eAAd,CAA8BC,iBAA9B,GAAkD,CAAlD,IACA,KAAKtL,QAAL,CAAcqL,eAAd,CAA8BC,iBAA9B,GAAkD,CADtD,EACyD;AACvD,YAAM,kEAAN;AACD;;AAED,QAAInQ,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAckN,WAArB,MAAsC,SAA1C,EAAqD,MAAM,+BAAN;AACrD,SAAKwE,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,yBAAzC;AACA,SAAK0R,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,aAAzC;AACA,SAAK0R,oBAAL,CAA0B,KAAK1R,QAA/B,EAAyC,oBAAzC;AACA,QAAI7E,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAcsP,SAArB,MAAoC,SAAxC,EAAmD,MAAM,6BAAN;AACnD,QAAInU,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAc6O,QAArB,MAAmC,QAAvC,EAAiD,MAAM,2BAAN;;AAEjD,QAAI,KAAK7O,QAAL,CAAcoP,IAAd,KAAuB,KAAvB,IAAgC,CAACjU,EAAEgU,UAAF,CAAa,KAAKnP,QAAL,CAAcoP,IAA3B,CAArC,EAAuE;AACrE,YAAM,6CAAN;AACD;;AAED,QAAI,KAAKpP,QAAL,CAAc+O,MAAd,KAAyB,KAAzB,IAAkC,CAAC5T,EAAEgU,UAAF,CAAa,KAAKnP,QAAL,CAAc+O,MAA3B,CAAnC,IACA5T,EAAE8F,IAAF,CAAO,KAAKjB,QAAL,CAAc+O,MAArB,MAAiC,QADrC,EAC+C;AAC7C,YAAM,qDAAN;AACD;AACF,GAzDD;;AA2DA;;;;AAIArI,mBAAiBlN,SAAjB,CAA2BmO,oBAA3B,GAAkD,YAAY;AAC5D,QAAID,eAAe,EAAnB;AACA,SAAK,IAAIoK,QAAT,IAAqB,KAAK9R,QAAL,CAAcuI,iBAAnC,EAAsD;AACpD,UAAI,KAAKvI,QAAL,CAAcuI,iBAAd,CAAgCS,cAAhC,CAA+C8I,QAA/C,CAAJ,EAA8DpK,aAAakJ,IAAb,CAAkB9Q,SAASgS,QAAT,EAAmB,EAAnB,CAAlB;AAC/D;AACDpK,iBAAa0H,IAAb,CAAkB,UAAUO,CAAV,EAAa3L,CAAb,EAAgB;AAAE,aAAO2L,IAAI3L,CAAJ,GAAQ,CAAR,GAAY2L,IAAI3L,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAhC;AAAoC,KAAxE;AACA,WAAO0D,YAAP;AACD,GAPD;;AASA;;;;;AAKAhB,mBAAiBlN,SAAjB,CAA2B4Y,cAA3B,GAA4C,UAAUC,WAAV,EAAuB;AACjE;AACA,SAAKrS,QAAL,GAAgB7E,EAAEgF,MAAF,CAAS,EAAT,EAAa,KAAKH,QAAlB,EAA4BqS,WAA5B,CAAhB;AACA,SAAKzL,aAAL;;AAEA;AACA,SAAKU,MAAL,GAAc,KAAKtH,QAAL,CAAcsH,MAAd,IAAwB,CAAxB,GAA4B,KAAKtH,QAAL,CAAcsH,MAA1C,GAAmD,KAAKtH,QAAL,CAAcuH,OAA/E;;AAEA,SAAKC,YAAL,GAAoB,KAAKC,oBAAL,EAApB;AACA,SAAKC,YAAL,GAAoB,KAAKC,oBAAL,EAApB;AACD,GAVD;;AAYA;;;;;;;;;;;AAWAxM,IAAE0E,EAAF,CAAKyS,gBAAL,GAAwB,UAAUC,GAAV,EAAe;AACrC,WAAO,KAAK7W,IAAL,CAAU,UAAU0V,KAAV,EAAiBoB,OAAjB,EAA0B;;AAEzC,UAAI7L,WAAWxL,EAAEqX,OAAF,CAAf;;AAEA7L,eAASoD,QAAT,CAAkB,0BAAlB;;AAEA,UAAI0I,aAAa9L,SAAS9K,IAAT,CAAc,eAAd,CAAjB;AACA,UAAI,OAAO4W,UAAP,KAAsB,WAA1B,EAAuC;AACrC;AACA,YAAI,OAAOF,GAAP,KAAe,WAAf,IAA8BA,QAAQ,IAAtC,IAA8CpX,EAAE8F,IAAF,CAAOsR,GAAP,MAAgB,QAAlE,EAA4E;AAC1E,cAAIA,QAAQ,SAAZ,EAAuB,OADmD,CAC3C;AAC/B,gBAAM,gCAAN;AACD;AACDE,qBAAa,IAAI/L,gBAAJ,CAAqBC,QAArB,EAA+BxL,EAAEgF,MAAF,CAAS,EAAT,EAAahF,EAAE0E,EAAF,CAAKyS,gBAAL,CAAsBI,QAAnC,EAA6CH,GAA7C,CAA/B,CAAb;AACA5L,iBAAS9K,IAAT,CAAc,eAAd,EAA+B4W,UAA/B;AACD,OARD,MAQO,IAAIF,QAAQ,UAAZ,EAAwB;AAC7B;AACA;AACD,OAHM,MAGA,IAAIA,QAAQ,SAAZ,EAAuB;AAC5BE,mBAAWnC,OAAX;AACA;AACD,OAHM,MAGA;AACL;AACAmC,mBAAWL,cAAX,CAA0BG,GAA1B;AACAE,mBAAWzE,MAAX;AACD;;AAED;AACA,UAAI,CAACyE,WAAW9D,aAAX,CAAyB4D,QAAQ,UAAjC,CAAL,EAAmD;;AAEnD;AACAE,iBAAWxB,IAAX;AAED,KAjCM,CAAP;AAkCD,GAnCD;;AAqCA;AACA9V,IAAE0E,EAAF,CAAKyS,gBAAL,CAAsBI,QAAtB,GAAiC;AAC/BnK,uBAAmB,EADY,EACP;;;;;;;;;;AAUxBe,mBAAenN,SAXgB,EAWL;;;AAG1BuO,eAAW,GAdoB;AAe/BlD,kBAAc,CAAC,CAfgB,EAeb;AACI;AACA;AACtBD,aAAS,CAlBsB;AAmB/BD,YAAQ,CAAC,CAnBsB,EAmBnB;;AAEZyF,aAAS,WArBsB,EAqBT;;AAEtBD,sBAAkB,IAvBa,EAuBP;;AAExBI,iBAAa,KAzBkB;AA0B/BqE,wBAAoB,IA1BW;AA2B/BvG,cAAU,IA3BqB;AA4B/BlB,kBAAc,KA5BiB;AA6B/BI,6BAAyB,GA7BM,EA6BD;AAC9BmB,qBAAiB,EAAE;AACjBQ,yBAAmB,GADJ;AAEfC,sBAAgB,GAFD;AAGfR,yBAAmB;AAHJ,KA9Bc;AAmC/B+F,SAAK,IAnC0B,EAmCpB;AACXC,YAAQ,IApCuB,EAoCjB;AACd7H,eAAW,aArCoB,EAqCL;AAC1ByE,iBAAa,GAtCkB,EAsCb;AAClBH,wBAAoB,CAvCW,EAuCR;AACvBuB,eAAW,KAxCoB;AAyC/BF,UAAM,KAzCyB,EAyClB;;;;AAIbL,YAAQ,KA7CuB,EA6ChB;;;;;;;AAOfF,cAAU,0BApDqB,CAoDM;AApDN,GAAjC;AAuDD,CA3oCA,EA2oCC3Q,MA3oCD,CAAD,C;;;;;;;;;;ACNA;;;;;;AAMA,CAAC,UAAU/C,CAAV,EAAa;;AAEb,KAAImX,mBAAoBnX,EAAE0E,EAAF,CAAKyS,gBAA7B;AAAA,KACCK,yBAAyB,EAD1B;;AAGAxX,GAAE0E,EAAF,CAAK+S,sBAAL,GAA8B,YAAY;;AAEzC,MAAIC,MAAMP,iBAAiB1Y,KAAjB,CAAuB,IAAvB,EAA6BC,SAA7B,CAAV;AACC8Y,2BAAyBE,IAAIhX,IAAJ,CAAS,eAAT,CAAzB;;AAEA,MAAI8W,2BAA2BxW,SAA/B,EAA0C;;AAEzCwW,0BAAuB5H,mBAAvB,GAA6C,UAAUnB,MAAV,EAAkB;;AAE/D,QAAIQ,SAAS,KAAKC,YAAL,CAAkBT,MAAlB,CAAb;;AAEA,QAAIQ,WAAW,IAAX,IAAmB,KAAKpK,QAAL,CAAcgL,QAArC,EAA+C;;AAE9C,SAAIC,cAAc,KAAKV,gBAAL,CAAsBX,MAAtB,CAAlB;;AAEA;AACA,SAAIqB,gBAAgB,IAApB,EAA0B;;AAEzB,UAAIC,UAAUd,OAAOvO,IAAP,CAAY,gBAAZ,CAAd;AAAA,UACCiX,kBAAkB,EADnB;;AAGA,UAAK5H,YAAY/O,SAAZ,IAAyB,OAAO+O,OAAP,KAAmB,QAAjD,EAA4D;;AAE3DA,iBAAUA,QAAQ1O,OAAR,CAAgB,GAAhB,EAAqB,MAArB,CAAV;AACAsW,yBAAkB3X,EAAE,cAAF,EAAkB4X,IAAlB,CAAuB7H,OAAvB,EAAgC8H,IAAhC,EAAlB;AAEA;;AAED,UAAKF,oBAAoB3W,SAAzB,EAAqC;AACpC,WAAI,KAAKgP,cAAL,CAAoB2H,eAApB,CAAJ,EAA0C;AAAE;AAC3C7H,sBAAc9P,EAAE,0BAA0B2X,eAA1B,GAA4C,QAA9C,CAAd;AACA1I,eAAO6I,KAAP,CAAahI,WAAb;AACArB,eAAO/N,IAAP,CAAY,mBAAZ,EAAiC,IAAjC;AACA;AACD;AACC;;AAEJ;AACA,SAAIoP,gBAAgB,IAApB,EAA0B;AAC3B,UAAI,CAAC,KAAKjL,QAAL,CAAc8J,YAAnB,EAAiCmB,YAAYjB,IAAZ,GAAmBC,MAAnB,CAA0B,CAA1B,EAA6B,KAAKjK,QAAL,CAAcqL,eAAd,CAA8BC,iBAA3D;AACjC;AACA,UAAI4H,mBAAmBjI,YAAYnN,GAAZ,CAAgB,QAAhB,CAAvB;AACA8L,aAAO7M,IAAP,CAAY,6DAAZ,EAA2Ee,GAA3E,CAA+E,QAA/E,EAAyFoV,gBAAzF;AACAtJ,aAAO7M,IAAP,CAAY,8DAAZ,EAA4Ee,GAA5E,CAAgF,QAAhF,EAA0FoV,gBAA1F;AACA,WAAK3H,wBAAL,CAA8B3B,MAA9B;AACE;AACF,KAnCC,MAmCK;AACL,UAAK4B,2BAAL,CAAiC5B,MAAjC;AACD;AACD,IA1CE;;AA4CH,UAAO+I,sBAAP;AAEC;AAEC,EAvDF;AAwDA,CA7DD,EA6DGzU,MA7DH,E;;;;;;;;;;;;ACNA;;;;;;;;;;AAUA;;;;;;AAMA;;AAEE,WAAU5F,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA;;AAEA,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAwC,CAAE,sBAAF,CAAxC,mCAAsD,UAAU0F,MAAV,EAAmB;AACvE3F,cAASD,MAAT,EAAiB4F,MAAjB;AACD,KAFD;AAAA;AAGD,GALD,MAKO,IAAK,QAAOzF,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfD,MADe,EAEfK,QAAQ,QAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAL,WAAO6a,aAAP,GAAuB5a,QACrBD,MADqB,EAErBA,OAAO4F,MAFc,CAAvB;AAID;AAEF,CAvBC,EAuBC5F,MAvBD,EAuBS,SAASC,OAAT,CAAkBD,MAAlB,EAA0B4F,MAA1B,EAAmC;AAC9C;;AAEA;;AAEA,MAAIkV,aAAa7U,MAAM/E,SAAN,CAAgB8E,KAAjC;;AAEA;AACA;AACA,MAAIlC,UAAU9D,OAAO8D,OAArB;AACA,MAAIiX,WAAW,OAAOjX,OAAP,IAAkB,WAAlB,GAAgC,YAAW,CAAE,CAA7C,GACb,UAAUkX,OAAV,EAAoB;AAClBlX,YAAQmX,KAAR,CAAeD,OAAf;AACD,GAHH;;AAKA;;AAEA,WAASH,aAAT,CAAwBja,SAAxB,EAAmCsa,WAAnC,EAAgDrY,CAAhD,EAAoD;AAClDA,QAAIA,KAAK+C,MAAL,IAAe5F,OAAO4F,MAA1B;AACA,QAAK,CAAC/C,CAAN,EAAU;AACR;AACD;;AAED;AACA,QAAK,CAACqY,YAAYha,SAAZ,CAAsBia,MAA5B,EAAqC;AACnC;AACAD,kBAAYha,SAAZ,CAAsBia,MAAtB,GAA+B,UAAUC,IAAV,EAAiB;AAC9C;AACA,YAAK,CAACvY,EAAEwY,aAAF,CAAiBD,IAAjB,CAAN,EAA+B;AAC7B;AACD;AACD,aAAKza,OAAL,GAAekC,EAAEgF,MAAF,CAAU,IAAV,EAAgB,KAAKlH,OAArB,EAA8Bya,IAA9B,CAAf;AACD,OAND;AAOD;;AAED;AACAvY,MAAE0E,EAAF,CAAM3G,SAAN,IAAoB,UAAU0a,IAAV,CAAe,WAAf,EAA6B;AAC/C,UAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B;AACA;AACA,YAAIpT,OAAO4S,WAAW3S,IAAX,CAAiB5G,SAAjB,EAA4B,CAA5B,CAAX;AACA,eAAOga,WAAY,IAAZ,EAAkBD,IAAlB,EAAwBpT,IAAxB,CAAP;AACD;AACD;AACAsT,gBAAW,IAAX,EAAiBF,IAAjB;AACA,aAAO,IAAP;AACD,KAVD;;AAYA;AACA,aAASC,UAAT,CAAqBE,MAArB,EAA6Bpa,UAA7B,EAAyC6G,IAAzC,EAAgD;AAC9C,UAAIwT,WAAJ;AACA,UAAIC,kBAAkB,SAAS/a,SAAT,GAAqB,IAArB,GAA4BS,UAA5B,GAAyC,IAA/D;;AAEAoa,aAAOrY,IAAP,CAAa,UAAUiD,CAAV,EAAae,IAAb,EAAoB;AAC/B;AACA,YAAIwU,WAAW/Y,EAAEU,IAAF,CAAQ6D,IAAR,EAAcxG,SAAd,CAAf;AACA,YAAK,CAACgb,QAAN,EAAiB;AACfb,mBAAUna,YAAY,8CAAZ,GACR+a,eADF;AAEA;AACD;;AAED,YAAIE,SAASD,SAAUva,UAAV,CAAb;AACA,YAAK,CAACwa,MAAD,IAAWxa,WAAWya,MAAX,CAAkB,CAAlB,KAAwB,GAAxC,EAA8C;AAC5Cf,mBAAUY,kBAAkB,wBAA5B;AACA;AACD;;AAED;AACA,YAAIzG,QAAQ2G,OAAOva,KAAP,CAAcsa,QAAd,EAAwB1T,IAAxB,CAAZ;AACA;AACAwT,sBAAcA,gBAAgB7X,SAAhB,GAA4BqR,KAA5B,GAAoCwG,WAAlD;AACD,OAnBD;;AAqBA,aAAOA,gBAAgB7X,SAAhB,GAA4B6X,WAA5B,GAA0CD,MAAjD;AACD;;AAED,aAASD,SAAT,CAAoBC,MAApB,EAA4B9a,OAA5B,EAAsC;AACpC8a,aAAOrY,IAAP,CAAa,UAAUiD,CAAV,EAAae,IAAb,EAAoB;AAC/B,YAAIwU,WAAW/Y,EAAEU,IAAF,CAAQ6D,IAAR,EAAcxG,SAAd,CAAf;AACA,YAAKgb,QAAL,EAAgB;AACd;AACAA,mBAAST,MAAT,CAAiBxa,OAAjB;AACAib,mBAASG,KAAT;AACD,SAJD,MAIO;AACL;AACAH,qBAAW,IAAIV,WAAJ,CAAiB9T,IAAjB,EAAuBzG,OAAvB,CAAX;AACAkC,YAAEU,IAAF,CAAQ6D,IAAR,EAAcxG,SAAd,EAAyBgb,QAAzB;AACD;AACF,OAXD;AAYD;;AAEDI,iBAAcnZ,CAAd;AAED;;AAED;;AAEA;AACA,WAASmZ,YAAT,CAAuBnZ,CAAvB,EAA2B;AACzB,QAAK,CAACA,CAAD,IAAQA,KAAKA,EAAEoZ,OAApB,EAAgC;AAC9B;AACD;AACDpZ,MAAEoZ,OAAF,GAAYpB,aAAZ;AACD;;AAEDmB,eAAcpW,UAAU5F,OAAO4F,MAA/B;;AAEA;;AAEA,SAAOiV,aAAP;AAEC,CAvIC,CAAF;;AAyIA;;;;;;AAMA;;AAEE,WAAUqB,MAAV,EAAkBjc,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,uCAAgCD,OAAhC;AACD,GAHD,MAGO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,SAAjB;AACD,GAHM,MAGA;AACL;AACAic,WAAOC,SAAP,GAAmBlc,SAAnB;AACD;AAEF,CAdC,aAcO,YAAW;;AAIpB,WAASkc,SAAT,GAAqB,CAAE;;AAEvB,MAAIlb,QAAQkb,UAAUjb,SAAtB;;AAEAD,QAAMiC,EAAN,GAAW,UAAUkZ,SAAV,EAAqBC,QAArB,EAAgC;AACzC,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,QAAIC,SAAS,KAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA5C;AACA;AACA,QAAIC,YAAYF,OAAQF,SAAR,IAAsBE,OAAQF,SAAR,KAAuB,EAA7D;AACA;AACA,QAAKI,UAAUjM,OAAV,CAAmB8L,QAAnB,KAAiC,CAAC,CAAvC,EAA2C;AACzCG,gBAAUlE,IAAV,CAAgB+D,QAAhB;AACD;;AAED,WAAO,IAAP;AACD,GAdD;;AAgBApb,QAAMwb,IAAN,GAAa,UAAUL,SAAV,EAAqBC,QAArB,EAAgC;AAC3C,QAAK,CAACD,SAAD,IAAc,CAACC,QAApB,EAA+B;AAC7B;AACD;AACD;AACA,SAAKnZ,EAAL,CAASkZ,SAAT,EAAoBC,QAApB;AACA;AACA;AACA,QAAIK,aAAa,KAAKC,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAxD;AACA;AACA,QAAIC,gBAAgBF,WAAYN,SAAZ,IAA0BM,WAAYN,SAAZ,KAA2B,EAAzE;AACA;AACAQ,kBAAeP,QAAf,IAA4B,IAA5B;;AAEA,WAAO,IAAP;AACD,GAfD;;AAiBApb,QAAM4S,GAAN,GAAY,UAAUuI,SAAV,EAAqBC,QAArB,EAAgC;AAC1C,QAAIG,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUlW,MAA9B,EAAuC;AACrC;AACD;AACD,QAAIwS,QAAQ0D,UAAUjM,OAAV,CAAmB8L,QAAnB,CAAZ;AACA,QAAKvD,SAAS,CAAC,CAAf,EAAmB;AACjB0D,gBAAU1E,MAAV,CAAkBgB,KAAlB,EAAyB,CAAzB;AACD;;AAED,WAAO,IAAP;AACD,GAXD;;AAaA7X,QAAM4b,SAAN,GAAkB,UAAUT,SAAV,EAAqBlU,IAArB,EAA4B;AAC5C,QAAIsU,YAAY,KAAKD,OAAL,IAAgB,KAAKA,OAAL,CAAcH,SAAd,CAAhC;AACA,QAAK,CAACI,SAAD,IAAc,CAACA,UAAUlW,MAA9B,EAAuC;AACrC;AACD;AACD,QAAID,IAAI,CAAR;AACA,QAAIgW,WAAWG,UAAUnW,CAAV,CAAf;AACA6B,WAAOA,QAAQ,EAAf;AACA;AACA,QAAI0U,gBAAgB,KAAKD,WAAL,IAAoB,KAAKA,WAAL,CAAkBP,SAAlB,CAAxC;;AAEA,WAAQC,QAAR,EAAmB;AACjB,UAAIS,SAASF,iBAAiBA,cAAeP,QAAf,CAA9B;AACA,UAAKS,MAAL,EAAc;AACZ;AACA;AACA,aAAKjJ,GAAL,CAAUuI,SAAV,EAAqBC,QAArB;AACA;AACA,eAAOO,cAAeP,QAAf,CAAP;AACD;AACD;AACAA,eAAS/a,KAAT,CAAgB,IAAhB,EAAsB4G,IAAtB;AACA;AACA7B,WAAKyW,SAAS,CAAT,GAAa,CAAlB;AACAT,iBAAWG,UAAUnW,CAAV,CAAX;AACD;;AAED,WAAO,IAAP;AACD,GA5BD;;AA8BA,SAAO8V,SAAP;AAEC,CApGC,CAAF;;AAsGA;;;;;;AAMA;AACA;;AAEA,CAAE,UAAUnc,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;;AAEA,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA4B,EAA5B,iCAA+B,YAAW;AACxC,aAAOD,SAAP;AACD,KAFD;AAGD,GALD,MAKO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,SAAjB;AACD,GAHM,MAGA;AACL;AACAD,WAAOQ,OAAP,GAAiBP,SAAjB;AACD;AAEF,CAhBD,EAgBID,MAhBJ,EAgBY,SAASC,OAAT,GAAmB;AAC/B;;AAEA;;AAEA;;AACA,WAAS8c,YAAT,CAAuB7H,KAAvB,EAA+B;AAC7B,QAAI8H,MAAMxH,WAAYN,KAAZ,CAAV;AACA;AACA,QAAI+H,UAAU/H,MAAM3E,OAAN,CAAc,GAAd,KAAsB,CAAC,CAAvB,IAA4B,CAAC2I,MAAO8D,GAAP,CAA3C;AACA,WAAOC,WAAWD,GAAlB;AACD;;AAED,WAASE,IAAT,GAAgB,CAAE;;AAElB,MAAInC,WAAW,OAAOjX,OAAP,IAAkB,WAAlB,GAAgCoZ,IAAhC,GACb,UAAUlC,OAAV,EAAoB;AAClBlX,YAAQmX,KAAR,CAAeD,OAAf;AACD,GAHH;;AAKA;;AAEA,MAAImC,eAAe,CACjB,aADiB,EAEjB,cAFiB,EAGjB,YAHiB,EAIjB,eAJiB,EAKjB,YALiB,EAMjB,aANiB,EAOjB,WAPiB,EAQjB,cARiB,EASjB,iBATiB,EAUjB,kBAViB,EAWjB,gBAXiB,EAYjB,mBAZiB,CAAnB;;AAeA,MAAIC,qBAAqBD,aAAa7W,MAAtC;;AAEA,WAAS+W,WAAT,GAAuB;AACrB,QAAIrc,OAAO;AACT+D,aAAO,CADE;AAET0C,cAAQ,CAFC;AAGT6V,kBAAY,CAHH;AAIT5b,mBAAa,CAJJ;AAKT6b,kBAAY,CALH;AAMTC,mBAAa;AANJ,KAAX;AAQA,SAAM,IAAInX,IAAE,CAAZ,EAAeA,IAAI+W,kBAAnB,EAAuC/W,GAAvC,EAA6C;AAC3C,UAAIoX,cAAcN,aAAa9W,CAAb,CAAlB;AACArF,WAAMyc,WAAN,IAAsB,CAAtB;AACD;AACD,WAAOzc,IAAP;AACD;;AAED;;AAEA;;;;AAIA,WAAS0c,QAAT,CAAmBtW,IAAnB,EAA0B;AACxB,QAAIuW,QAAQC,iBAAkBxW,IAAlB,CAAZ;AACA,QAAK,CAACuW,KAAN,EAAc;AACZ5C,eAAU,oBAAoB4C,KAApB,GACR,6DADQ,GAER,+BAFF;AAGD;AACD,WAAOA,KAAP;AACD;;AAED;;AAEA,MAAIE,UAAU,KAAd;;AAEA,MAAIC,cAAJ;;AAEA;;;;;AAKA,WAASnX,KAAT,GAAiB;AACf;AACA,QAAKkX,OAAL,EAAe;AACb;AACD;AACDA,cAAU,IAAV;;AAEA;;AAEA;;;;AAIA,QAAIE,MAAMjb,SAAS2H,aAAT,CAAuB,KAAvB,CAAV;AACAsT,QAAIJ,KAAJ,CAAU5Y,KAAV,GAAkB,OAAlB;AACAgZ,QAAIJ,KAAJ,CAAUK,OAAV,GAAoB,iBAApB;AACAD,QAAIJ,KAAJ,CAAUM,WAAV,GAAwB,OAAxB;AACAF,QAAIJ,KAAJ,CAAUO,WAAV,GAAwB,iBAAxB;AACAH,QAAIJ,KAAJ,CAAUQ,SAAV,GAAsB,YAAtB;;AAEA,QAAIC,OAAOtb,SAASsb,IAAT,IAAiBtb,SAASub,eAArC;AACAD,SAAKE,WAAL,CAAkBP,GAAlB;AACA,QAAIJ,QAAQD,SAAUK,GAAV,CAAZ;;AAEAvd,YAAQsd,cAAR,GAAyBA,iBAAiBf,aAAcY,MAAM5Y,KAApB,KAA+B,GAAzE;AACAqZ,SAAKG,WAAL,CAAkBR,GAAlB;AAED;;AAED;;AAEA,WAASvd,OAAT,CAAkB4G,IAAlB,EAAyB;AACvBT;;AAEA;AACA,QAAK,OAAOS,IAAP,IAAe,QAApB,EAA+B;AAC7BA,aAAOtE,SAAS0b,aAAT,CAAwBpX,IAAxB,CAAP;AACD;;AAED;AACA,QAAK,CAACA,IAAD,IAAS,QAAOA,IAAP,yCAAOA,IAAP,MAAe,QAAxB,IAAoC,CAACA,KAAKqX,QAA/C,EAA0D;AACxD;AACD;;AAED,QAAId,QAAQD,SAAUtW,IAAV,CAAZ;;AAEA;AACA,QAAKuW,MAAMe,OAAN,IAAiB,MAAtB,EAA+B;AAC7B,aAAOrB,aAAP;AACD;;AAED,QAAIrc,OAAO,EAAX;AACAA,SAAK+D,KAAL,GAAaqC,KAAKuX,WAAlB;AACA3d,SAAKyG,MAAL,GAAcL,KAAKwX,YAAnB;;AAEA,QAAIC,cAAc7d,KAAK6d,WAAL,GAAmBlB,MAAMQ,SAAN,IAAmB,YAAxD;;AAEA;AACA,SAAM,IAAI9X,IAAE,CAAZ,EAAeA,IAAI+W,kBAAnB,EAAuC/W,GAAvC,EAA6C;AAC3C,UAAIoX,cAAcN,aAAa9W,CAAb,CAAlB;AACA,UAAI6O,QAAQyI,MAAOF,WAAP,CAAZ;AACA,UAAIT,MAAMxH,WAAYN,KAAZ,CAAV;AACA;AACAlU,WAAMyc,WAAN,IAAsB,CAACvE,MAAO8D,GAAP,CAAD,GAAgBA,GAAhB,GAAsB,CAA5C;AACD;;AAED,QAAI8B,eAAe9d,KAAK+d,WAAL,GAAmB/d,KAAKge,YAA3C;AACA,QAAIC,gBAAgBje,KAAKke,UAAL,GAAkBle,KAAKme,aAA3C;AACA,QAAIC,cAAcpe,KAAKqe,UAAL,GAAkBre,KAAKse,WAAzC;AACA,QAAIC,eAAeve,KAAKwe,SAAL,GAAiBxe,KAAKye,YAAzC;AACA,QAAIvB,cAAcld,KAAK0e,eAAL,GAAuB1e,KAAK2e,gBAA9C;AACA,QAAIC,eAAe5e,KAAK6e,cAAL,GAAsB7e,KAAK8e,iBAA9C;;AAEA,QAAIC,uBAAuBlB,eAAef,cAA1C;;AAEA;AACA,QAAIkC,aAAajD,aAAcY,MAAM5Y,KAApB,CAAjB;AACA,QAAKib,eAAe,KAApB,EAA4B;AAC1Bhf,WAAK+D,KAAL,GAAaib;AACX;AACED,6BAAuB,CAAvB,GAA2BjB,eAAeZ,WAFjC,CAAb;AAGD;;AAED,QAAI+B,cAAclD,aAAcY,MAAMlW,MAApB,CAAlB;AACA,QAAKwY,gBAAgB,KAArB,EAA6B;AAC3Bjf,WAAKyG,MAAL,GAAcwY;AACZ;AACEF,6BAAuB,CAAvB,GAA2Bd,gBAAgBW,YAFjC,CAAd;AAGD;;AAED5e,SAAKsc,UAAL,GAAkBtc,KAAK+D,KAAL,IAAe+Z,eAAeZ,WAA9B,CAAlB;AACAld,SAAKU,WAAL,GAAmBV,KAAKyG,MAAL,IAAgBwX,gBAAgBW,YAAhC,CAAnB;;AAEA5e,SAAKuc,UAAL,GAAkBvc,KAAK+D,KAAL,GAAaqa,WAA/B;AACApe,SAAKwc,WAAL,GAAmBxc,KAAKyG,MAAL,GAAc8X,YAAjC;;AAEA,WAAOve,IAAP;AACD;;AAED,SAAOR,OAAP;AAEC,CAvMD;;AAyMA;;;;;;AAMA;;AAEE,WAAUR,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA;AACA;;AACA,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,uCAAqDD,OAArD;AACD,GAHD,MAGO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,SAAjB;AACD,GAHM,MAGA;AACL;AACAD,WAAOkgB,eAAP,GAAyBjgB,SAAzB;AACD;AAEF,CAfC,EAeCD,MAfD,EAeS,SAASC,OAAT,GAAmB;AAC5B;;AAEA,MAAIkgB,gBAAkB,YAAW;AAC/B,QAAIC,YAAYC,QAAQnf,SAAxB;AACA;AACA,QAAKkf,UAAUE,OAAf,EAAyB;AACvB,aAAO,SAAP;AACD;AACD;AACA,QAAKF,UAAUF,eAAf,EAAiC;AAC/B,aAAO,iBAAP;AACD;AACD;AACA,QAAIK,WAAW,CAAE,QAAF,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,GAAzB,CAAf;;AAEA,SAAM,IAAIla,IAAE,CAAZ,EAAeA,IAAIka,SAASja,MAA5B,EAAoCD,GAApC,EAA0C;AACxC,UAAIma,SAASD,SAASla,CAAT,CAAb;AACA,UAAIwV,SAAS2E,SAAS,iBAAtB;AACA,UAAKJ,UAAWvE,MAAX,CAAL,EAA2B;AACzB,eAAOA,MAAP;AACD;AACF;AACF,GApBmB,EAApB;;AAsBA,SAAO,SAASqE,eAAT,CAA0B9Y,IAA1B,EAAgCmP,QAAhC,EAA2C;AAChD,WAAOnP,KAAM+Y,aAAN,EAAuB5J,QAAvB,CAAP;AACD,GAFD;AAID,CA5CC,CAAF;;AA8CA;;;;;AAKA;;AAEE,WAAUvW,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,2BAF4B,CAEF;;AAE1B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA+B,CAC7B,0BAD6B,CAA/B,iCAEG,UAAUggB,eAAV,EAA4B;AAC7B,aAAOjgB,QAASD,MAAT,EAAiBkgB,eAAjB,CAAP;AACD,KAJD;AAKD,GAPD,MAOO,IAAK,QAAO/f,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfD,MADe,EAEfK,QAAQ,2BAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAL,WAAOygB,YAAP,GAAsBxgB,QACpBD,MADoB,EAEpBA,OAAOkgB,eAFa,CAAtB;AAID;AAEF,CAzBC,EAyBClgB,MAzBD,EAyBS,SAASC,OAAT,CAAkBD,MAAlB,EAA0BkgB,eAA1B,EAA4C;;AAIvD,MAAIQ,QAAQ,EAAZ;;AAEA;;AAEA;AACAA,QAAM7Y,MAAN,GAAe,UAAUwP,CAAV,EAAa3L,CAAb,EAAiB;AAC9B,SAAM,IAAIiV,IAAV,IAAkBjV,CAAlB,EAAsB;AACpB2L,QAAGsJ,IAAH,IAAYjV,EAAGiV,IAAH,CAAZ;AACD;AACD,WAAOtJ,CAAP;AACD,GALD;;AAOA;;AAEAqJ,QAAME,MAAN,GAAe,UAAU5D,GAAV,EAAee,GAAf,EAAqB;AAClC,WAAO,CAAIf,MAAMe,GAAR,GAAgBA,GAAlB,IAA0BA,GAAjC;AACD,GAFD;;AAIA;;AAEA;AACA2C,QAAMG,SAAN,GAAkB,UAAUtG,GAAV,EAAgB;AAChC,QAAIuG,MAAM,EAAV;AACA,QAAK7a,MAAM8a,OAAN,CAAexG,GAAf,CAAL,EAA4B;AAC1B;AACAuG,YAAMvG,GAAN;AACD,KAHD,MAGO,IAAKA,OAAO,OAAOA,IAAIjU,MAAX,IAAqB,QAAjC,EAA4C;AACjD;AACA,WAAM,IAAID,IAAE,CAAZ,EAAeA,IAAIkU,IAAIjU,MAAvB,EAA+BD,GAA/B,EAAqC;AACnCya,YAAIxI,IAAJ,CAAUiC,IAAIlU,CAAJ,CAAV;AACD;AACF,KALM,MAKA;AACL;AACAya,UAAIxI,IAAJ,CAAUiC,GAAV;AACD;AACD,WAAOuG,GAAP;AACD,GAfD;;AAiBA;;AAEAJ,QAAMM,UAAN,GAAmB,UAAUF,GAAV,EAAevG,GAAf,EAAqB;AACtC,QAAIzB,QAAQgI,IAAIvQ,OAAJ,CAAagK,GAAb,CAAZ;AACA,QAAKzB,SAAS,CAAC,CAAf,EAAmB;AACjBgI,UAAIhJ,MAAJ,CAAYgB,KAAZ,EAAmB,CAAnB;AACD;AACF,GALD;;AAOA;;AAEA4H,QAAMO,SAAN,GAAkB,UAAU7Z,IAAV,EAAgBmP,QAAhB,EAA2B;AAC3C,WAAQnP,QAAQtE,SAASsb,IAAzB,EAAgC;AAC9BhX,aAAOA,KAAK8Z,UAAZ;AACA,UAAKhB,gBAAiB9Y,IAAjB,EAAuBmP,QAAvB,CAAL,EAAyC;AACvC,eAAOnP,IAAP;AACD;AACF;AACF,GAPD;;AASA;;AAEA;AACAsZ,QAAMS,eAAN,GAAwB,UAAU/Z,IAAV,EAAiB;AACvC,QAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B,aAAOtE,SAAS0b,aAAT,CAAwBpX,IAAxB,CAAP;AACD;AACD,WAAOA,IAAP;AACD,GALD;;AAOA;;AAEA;AACAsZ,QAAMU,WAAN,GAAoB,UAAU9c,KAAV,EAAkB;AACpC,QAAIuX,SAAS,OAAOvX,MAAMqE,IAA1B;AACA,QAAK,KAAMkT,MAAN,CAAL,EAAsB;AACpB,WAAMA,MAAN,EAAgBvX,KAAhB;AACD;AACF,GALD;;AAOA;;AAEAoc,QAAMW,kBAAN,GAA2B,UAAUC,KAAV,EAAiB/K,QAAjB,EAA4B;AACrD;AACA+K,YAAQZ,MAAMG,SAAN,CAAiBS,KAAjB,CAAR;AACA,QAAIC,UAAU,EAAd;;AAEAD,UAAMlgB,OAAN,CAAe,UAAUgG,IAAV,EAAiB;AAC9B;AACA,UAAK,EAAGA,gBAAgBoa,WAAnB,CAAL,EAAwC;AACtC;AACD;AACD;AACA,UAAK,CAACjL,QAAN,EAAiB;AACfgL,gBAAQjJ,IAAR,CAAclR,IAAd;AACA;AACD;AACD;AACA;AACA,UAAK8Y,gBAAiB9Y,IAAjB,EAAuBmP,QAAvB,CAAL,EAAyC;AACvCgL,gBAAQjJ,IAAR,CAAclR,IAAd;AACD;AACD;AACA,UAAIqa,aAAara,KAAKsa,gBAAL,CAAuBnL,QAAvB,CAAjB;AACA;AACA,WAAM,IAAIlQ,IAAE,CAAZ,EAAeA,IAAIob,WAAWnb,MAA9B,EAAsCD,GAAtC,EAA4C;AAC1Ckb,gBAAQjJ,IAAR,CAAcmJ,WAAWpb,CAAX,CAAd;AACD;AACF,KArBD;;AAuBA,WAAOkb,OAAP;AACD,GA7BD;;AA+BA;;AAEAb,QAAMiB,cAAN,GAAuB,UAAUC,MAAV,EAAkBvgB,UAAlB,EAA8BkK,SAA9B,EAA0C;AAC/D;AACA,QAAIsQ,SAAS+F,OAAO1gB,SAAP,CAAkBG,UAAlB,CAAb;AACA,QAAIwgB,cAAcxgB,aAAa,SAA/B;;AAEAugB,WAAO1gB,SAAP,CAAkBG,UAAlB,IAAiC,YAAW;AAC1C,UAAIygB,UAAU,KAAMD,WAAN,CAAd;AACA,UAAKC,OAAL,EAAe;AACb7X,qBAAc6X,OAAd;AACD;AACD,UAAI5Z,OAAO3G,SAAX;;AAEA,UAAIwgB,QAAQ,IAAZ;AACA,WAAMF,WAAN,IAAsB3X,WAAY,YAAW;AAC3C2R,eAAOva,KAAP,CAAcygB,KAAd,EAAqB7Z,IAArB;AACA,eAAO6Z,MAAOF,WAAP,CAAP;AACD,OAHqB,EAGnBtW,aAAa,GAHM,CAAtB;AAID,KAZD;AAaD,GAlBD;;AAoBA;;AAEAmV,QAAMsB,QAAN,GAAiB,UAAUzQ,QAAV,EAAqB;AACpC,QAAKzO,SAASmf,UAAT,IAAuB,UAA5B,EAAyC;AACvC1Q;AACD,KAFD,MAEO;AACLzO,eAAS8D,gBAAT,CAA2B,kBAA3B,EAA+C2K,QAA/C;AACD;AACF,GAND;;AAQA;;AAEA;AACAmP,QAAMwB,QAAN,GAAiB,UAAU/R,GAAV,EAAgB;AAC/B,WAAOA,IAAIjM,OAAJ,CAAa,aAAb,EAA4B,UAAUgN,KAAV,EAAiBiR,EAAjB,EAAqBC,EAArB,EAA0B;AAC3D,aAAOD,KAAK,GAAL,GAAWC,EAAlB;AACD,KAFM,EAEJC,WAFI,EAAP;AAGD,GAJD;;AAMA,MAAIve,UAAU9D,OAAO8D,OAArB;AACA;;;;;AAKA4c,QAAM4B,QAAN,GAAiB,UAAUC,WAAV,EAAuB3hB,SAAvB,EAAmC;AAClD8f,UAAMsB,QAAN,CAAgB,YAAW;AACzB,UAAIQ,kBAAkB9B,MAAMwB,QAAN,CAAgBthB,SAAhB,CAAtB;AACA,UAAI6hB,WAAW,UAAUD,eAAzB;AACA,UAAIE,gBAAgB5f,SAAS4e,gBAAT,CAA2B,MAAMe,QAAN,GAAiB,GAA5C,CAApB;AACA,UAAIE,cAAc7f,SAAS4e,gBAAT,CAA2B,SAASc,eAApC,CAAlB;AACA,UAAIlB,QAAQZ,MAAMG,SAAN,CAAiB6B,aAAjB,EACT3K,MADS,CACD2I,MAAMG,SAAN,CAAiB8B,WAAjB,CADC,CAAZ;AAEA,UAAIC,kBAAkBH,WAAW,UAAjC;AACA,UAAI7c,SAAS5F,OAAO4F,MAApB;;AAEA0b,YAAMlgB,OAAN,CAAe,UAAUgG,IAAV,EAAiB;AAC9B,YAAI3B,OAAO2B,KAAKyb,YAAL,CAAmBJ,QAAnB,KACTrb,KAAKyb,YAAL,CAAmBD,eAAnB,CADF;AAEA,YAAIjiB,OAAJ;AACA,YAAI;AACFA,oBAAU8E,QAAQqd,KAAKC,KAAL,CAAYtd,IAAZ,CAAlB;AACD,SAFD,CAEE,OAAQwV,KAAR,EAAgB;AAChB;AACA,cAAKnX,OAAL,EAAe;AACbA,oBAAQmX,KAAR,CAAe,mBAAmBwH,QAAnB,GAA8B,MAA9B,GAAuCrb,KAAK4b,SAA5C,GACf,IADe,GACR/H,KADP;AAED;AACD;AACD;AACD;AACA,YAAIW,WAAW,IAAI2G,WAAJ,CAAiBnb,IAAjB,EAAuBzG,OAAvB,CAAf;AACA;AACA,YAAKiF,MAAL,EAAc;AACZA,iBAAOrC,IAAP,CAAa6D,IAAb,EAAmBxG,SAAnB,EAA8Bgb,QAA9B;AACD;AACF,OApBD;AAsBD,KAhCD;AAiCD,GAlCD;;AAoCA;;AAEA,SAAO8E,KAAP;AAEC,CAnOC,CAAF;;AAqOA;;;;AAIE,WAAU1gB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAmC,CAC/B,0BAD+B,EAE/B,0BAF+B,CAAnC,oCAIED,OAJF;AAAA;AAAA;AAMD,GARD,MAQO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,YAAR,CADe,EAEfA,QAAQ,UAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAL,WAAOS,QAAP,GAAkB,EAAlB;AACAT,WAAOS,QAAP,CAAgBwiB,IAAhB,GAAuBhjB,QACrBD,OAAOmc,SADc,EAErBnc,OAAOQ,OAFc,CAAvB;AAID;AAEF,CA1BC,EA0BCR,MA1BD,EA0BS,SAASC,OAAT,CAAkBkc,SAAlB,EAA6B3b,OAA7B,EAAuC;AAClD;;AAEA;;AAEA,WAAS0iB,UAAT,CAAqB3I,GAArB,EAA2B;AACzB,SAAM,IAAIoG,IAAV,IAAkBpG,GAAlB,EAAwB;AACtB,aAAO,KAAP;AACD;AACDoG,WAAO,IAAP;AACA,WAAO,IAAP;AACD;;AAED;;;AAGA,MAAIwC,eAAergB,SAASub,eAAT,CAAyBV,KAA5C;;AAEA,MAAIyF,qBAAqB,OAAOD,aAAaE,UAApB,IAAkC,QAAlC,GACvB,YADuB,GACR,kBADjB;AAEA,MAAIC,oBAAoB,OAAOH,aAAaI,SAApB,IAAiC,QAAjC,GACtB,WADsB,GACR,iBADhB;;AAGA,MAAIC,qBAAqB;AACvBC,sBAAkB,qBADK;AAEvBJ,gBAAY;AAFW,IAGtBD,kBAHsB,CAAzB;;AAKA;AACA,MAAIM,mBAAmB;AACrBH,eAAWD,iBADU;AAErBD,gBAAYD,kBAFS;AAGrBO,wBAAoBP,qBAAqB,UAHpB;AAIrBA,wBAAoBA,qBAAqB,UAJpB;AAKrBQ,qBAAiBR,qBAAqB;AALjB,GAAvB;;AAQA;;AAEA,WAASH,IAAT,CAAepiB,OAAf,EAAwBwB,MAAxB,EAAiC;AAC/B,QAAK,CAACxB,OAAN,EAAgB;AACd;AACD;;AAED,SAAKA,OAAL,GAAeA,OAAf;AACA;AACA,SAAKwB,MAAL,GAAcA,MAAd;AACA,SAAKwhB,QAAL,GAAgB;AACdvX,SAAG,CADW;AAEdC,SAAG;AAFW,KAAhB;;AAKA,SAAKuX,OAAL;AACD;;AAED;AACA,MAAI7iB,QAAQgiB,KAAK/hB,SAAL,GAAiBuB,OAAOF,MAAP,CAAe4Z,UAAUjb,SAAzB,CAA7B;AACAD,QAAMyB,WAAN,GAAoBugB,IAApB;;AAEAhiB,QAAM6iB,OAAN,GAAgB,YAAW;AACzB;AACA,SAAKC,OAAL,GAAe;AACbC,qBAAe,EADF;AAEbC,aAAO,EAFM;AAGbC,aAAO;AAHM,KAAf;;AAMA,SAAK1e,GAAL,CAAS;AACPqe,gBAAU;AADH,KAAT;AAGD,GAXD;;AAaA;AACA5iB,QAAMmgB,WAAN,GAAoB,UAAU9c,KAAV,EAAkB;AACpC,QAAIuX,SAAS,OAAOvX,MAAMqE,IAA1B;AACA,QAAK,KAAMkT,MAAN,CAAL,EAAsB;AACpB,WAAMA,MAAN,EAAgBvX,KAAhB;AACD;AACF,GALD;;AAOArD,QAAMT,OAAN,GAAgB,YAAW;AACzB,SAAKQ,IAAL,GAAYR,QAAS,KAAKK,OAAd,CAAZ;AACD,GAFD;;AAIA;;;;AAIAI,QAAMuE,GAAN,GAAY,UAAUmY,KAAV,EAAkB;AAC5B,QAAIwG,YAAY,KAAKtjB,OAAL,CAAa8c,KAA7B;;AAEA,SAAM,IAAIgD,IAAV,IAAkBhD,KAAlB,EAA0B;AACxB;AACA,UAAIyG,gBAAgBV,iBAAkB/C,IAAlB,KAA4BA,IAAhD;AACAwD,gBAAWC,aAAX,IAA6BzG,MAAOgD,IAAP,CAA7B;AACD;AACF,GARD;;AAUC;AACD1f,QAAMojB,WAAN,GAAoB,YAAW;AAC7B,QAAI1G,QAAQC,iBAAkB,KAAK/c,OAAvB,CAAZ;AACA,QAAIyjB,eAAe,KAAKjiB,MAAL,CAAYkiB,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKniB,MAAL,CAAYkiB,UAAZ,CAAuB,WAAvB,CAAlB;AACA,QAAIE,SAAS9G,MAAO2G,eAAe,MAAf,GAAwB,OAA/B,CAAb;AACA,QAAII,SAAS/G,MAAO6G,cAAc,KAAd,GAAsB,QAA7B,CAAb;AACA;AACA,QAAIG,aAAa,KAAKtiB,MAAL,CAAYrB,IAA7B;AACA,QAAIsL,IAAImY,OAAOlU,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GACJiF,WAAYiP,MAAZ,IAAuB,GAAzB,GAAiCE,WAAW5f,KADtC,GAC8CyC,SAAUid,MAAV,EAAkB,EAAlB,CADtD;AAEA,QAAIlY,IAAImY,OAAOnU,OAAP,CAAe,GAAf,KAAuB,CAAC,CAAxB,GACJiF,WAAYkP,MAAZ,IAAuB,GAAzB,GAAiCC,WAAWld,MADtC,GAC+CD,SAAUkd,MAAV,EAAkB,EAAlB,CADvD;;AAGA;AACApY,QAAI4M,MAAO5M,CAAP,IAAa,CAAb,GAAiBA,CAArB;AACAC,QAAI2M,MAAO3M,CAAP,IAAa,CAAb,GAAiBA,CAArB;AACA;AACAD,SAAKgY,eAAeK,WAAW5F,WAA1B,GAAwC4F,WAAW3F,YAAxD;AACAzS,SAAKiY,cAAcG,WAAWzF,UAAzB,GAAsCyF,WAAWxF,aAAtD;;AAEA,SAAK0E,QAAL,CAAcvX,CAAd,GAAkBA,CAAlB;AACA,SAAKuX,QAAL,CAActX,CAAd,GAAkBA,CAAlB;AACD,GAtBD;;AAwBA;AACAtL,QAAM2jB,cAAN,GAAuB,YAAW;AAChC,QAAID,aAAa,KAAKtiB,MAAL,CAAYrB,IAA7B;AACA,QAAI2c,QAAQ,EAAZ;AACA,QAAI2G,eAAe,KAAKjiB,MAAL,CAAYkiB,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKniB,MAAL,CAAYkiB,UAAZ,CAAuB,WAAvB,CAAlB;;AAEA;AACA,QAAIM,WAAWP,eAAe,aAAf,GAA+B,cAA9C;AACA,QAAIQ,YAAYR,eAAe,MAAf,GAAwB,OAAxC;AACA,QAAIS,iBAAiBT,eAAe,OAAf,GAAyB,MAA9C;;AAEA,QAAIhY,IAAI,KAAKuX,QAAL,CAAcvX,CAAd,GAAkBqY,WAAYE,QAAZ,CAA1B;AACA;AACAlH,UAAOmH,SAAP,IAAqB,KAAKE,SAAL,CAAgB1Y,CAAhB,CAArB;AACA;AACAqR,UAAOoH,cAAP,IAA0B,EAA1B;;AAEA;AACA,QAAIE,WAAWT,cAAc,YAAd,GAA6B,eAA5C;AACA,QAAIU,YAAYV,cAAc,KAAd,GAAsB,QAAtC;AACA,QAAIW,iBAAiBX,cAAc,QAAd,GAAyB,KAA9C;;AAEA,QAAIjY,IAAI,KAAKsX,QAAL,CAActX,CAAd,GAAkBoY,WAAYM,QAAZ,CAA1B;AACA;AACAtH,UAAOuH,SAAP,IAAqB,KAAKE,SAAL,CAAgB7Y,CAAhB,CAArB;AACA;AACAoR,UAAOwH,cAAP,IAA0B,EAA1B;;AAEA,SAAK3f,GAAL,CAAUmY,KAAV;AACA,SAAKd,SAAL,CAAgB,QAAhB,EAA0B,CAAE,IAAF,CAA1B;AACD,GA9BD;;AAgCA5b,QAAM+jB,SAAN,GAAkB,UAAU1Y,CAAV,EAAc;AAC9B,QAAI+Y,eAAe,KAAKhjB,MAAL,CAAYkiB,UAAZ,CAAuB,YAAvB,CAAnB;AACA,WAAO,KAAKliB,MAAL,CAAY1B,OAAZ,CAAoB2kB,eAApB,IAAuC,CAACD,YAAxC,GACD/Y,IAAI,KAAKjK,MAAL,CAAYrB,IAAZ,CAAiB+D,KAAvB,GAAiC,GAAnC,GAA2C,GADtC,GAC4CuH,IAAI,IADvD;AAED,GAJD;;AAMArL,QAAMmkB,SAAN,GAAkB,UAAU7Y,CAAV,EAAc;AAC9B,QAAI8Y,eAAe,KAAKhjB,MAAL,CAAYkiB,UAAZ,CAAuB,YAAvB,CAAnB;AACA,WAAO,KAAKliB,MAAL,CAAY1B,OAAZ,CAAoB2kB,eAApB,IAAuCD,YAAvC,GACD9Y,IAAI,KAAKlK,MAAL,CAAYrB,IAAZ,CAAiByG,MAAvB,GAAkC,GAApC,GAA4C,GADvC,GAC6C8E,IAAI,IADxD;AAED,GAJD;;AAMAtL,QAAMskB,aAAN,GAAsB,UAAUjZ,CAAV,EAAaC,CAAb,EAAiB;AACrC,SAAK8X,WAAL;AACA;AACA,QAAImB,OAAO,KAAK3B,QAAL,CAAcvX,CAAzB;AACA,QAAImZ,OAAO,KAAK5B,QAAL,CAActX,CAAzB;;AAEA,QAAImZ,WAAWle,SAAU8E,CAAV,EAAa,EAAb,CAAf;AACA,QAAIqZ,WAAWne,SAAU+E,CAAV,EAAa,EAAb,CAAf;AACA,QAAIqZ,aAAaF,aAAa,KAAK7B,QAAL,CAAcvX,CAA3B,IAAgCqZ,aAAa,KAAK9B,QAAL,CAActX,CAA5E;;AAEA;AACA,SAAKsZ,WAAL,CAAkBvZ,CAAlB,EAAqBC,CAArB;;AAEA;AACA,QAAKqZ,cAAc,CAAC,KAAKE,eAAzB,EAA2C;AACzC,WAAKlB,cAAL;AACA;AACD;;AAED,QAAImB,SAASzZ,IAAIkZ,IAAjB;AACA,QAAIQ,SAASzZ,IAAIkZ,IAAjB;AACA,QAAIQ,kBAAkB,EAAtB;AACAA,oBAAgB1C,SAAhB,GAA4B,KAAK2C,YAAL,CAAmBH,MAAnB,EAA2BC,MAA3B,CAA5B;;AAEA,SAAK3C,UAAL,CAAgB;AACd8C,UAAIF,eADU;AAEdG,uBAAiB;AACf7C,mBAAW,KAAKqB;AADD,OAFH;AAKdyB,kBAAY;AALE,KAAhB;AAOD,GA/BD;;AAiCAplB,QAAMilB,YAAN,GAAqB,UAAU5Z,CAAV,EAAaC,CAAb,EAAiB;AACpC;AACA,QAAI+X,eAAe,KAAKjiB,MAAL,CAAYkiB,UAAZ,CAAuB,YAAvB,CAAnB;AACA,QAAIC,cAAc,KAAKniB,MAAL,CAAYkiB,UAAZ,CAAuB,WAAvB,CAAlB;AACAjY,QAAIgY,eAAehY,CAAf,GAAmB,CAACA,CAAxB;AACAC,QAAIiY,cAAcjY,CAAd,GAAkB,CAACA,CAAvB;AACA,WAAO,iBAAiBD,CAAjB,GAAqB,MAArB,GAA8BC,CAA9B,GAAkC,QAAzC;AACD,GAPD;;AASA;AACAtL,QAAMqlB,IAAN,GAAa,UAAUha,CAAV,EAAaC,CAAb,EAAiB;AAC5B,SAAKsZ,WAAL,CAAkBvZ,CAAlB,EAAqBC,CAArB;AACA,SAAKqY,cAAL;AACD,GAHD;;AAKA3jB,QAAMslB,MAAN,GAAetlB,MAAMskB,aAArB;;AAEAtkB,QAAM4kB,WAAN,GAAoB,UAAUvZ,CAAV,EAAaC,CAAb,EAAiB;AACnC,SAAKsX,QAAL,CAAcvX,CAAd,GAAkB9E,SAAU8E,CAAV,EAAa,EAAb,CAAlB;AACA,SAAKuX,QAAL,CAActX,CAAd,GAAkB/E,SAAU+E,CAAV,EAAa,EAAb,CAAlB;AACD,GAHD;;AAKA;;AAEA;;;;;AAKA;AACAtL,QAAMulB,cAAN,GAAuB,UAAUte,IAAV,EAAiB;AACtC,SAAK1C,GAAL,CAAU0C,KAAKie,EAAf;AACA,QAAKje,KAAKme,UAAV,EAAuB;AACrB,WAAKI,aAAL,CAAoBve,KAAKie,EAAzB;AACD;AACD,SAAM,IAAIxF,IAAV,IAAkBzY,KAAKke,eAAvB,EAAyC;AACvCle,WAAKke,eAAL,CAAsBzF,IAAtB,EAA6BxY,IAA7B,CAAmC,IAAnC;AACD;AACF,GARD;;AAUA;;;;;;;;AAQAlH,QAAMoiB,UAAN,GAAmB,UAAUnb,IAAV,EAAiB;AAClC;AACA,QAAK,CAACsN,WAAY,KAAKnT,MAAL,CAAY1B,OAAZ,CAAoBgjB,kBAAhC,CAAN,EAA6D;AAC3D,WAAK6C,cAAL,CAAqBte,IAArB;AACA;AACD;;AAED,QAAIwe,cAAc,KAAK3C,OAAvB;AACA;AACA,SAAM,IAAIpD,IAAV,IAAkBzY,KAAKke,eAAvB,EAAyC;AACvCM,kBAAYxC,KAAZ,CAAmBvD,IAAnB,IAA4BzY,KAAKke,eAAL,CAAsBzF,IAAtB,CAA5B;AACD;AACD;AACA,SAAMA,IAAN,IAAczY,KAAKie,EAAnB,EAAwB;AACtBO,kBAAY1C,aAAZ,CAA2BrD,IAA3B,IAAoC,IAApC;AACA;AACA,UAAKzY,KAAKme,UAAV,EAAuB;AACrBK,oBAAYzC,KAAZ,CAAmBtD,IAAnB,IAA4B,IAA5B;AACD;AACF;;AAED;AACA,QAAKzY,KAAKye,IAAV,EAAiB;AACf,WAAKnhB,GAAL,CAAU0C,KAAKye,IAAf;AACA;AACA,UAAIC,IAAI,KAAK/lB,OAAL,CAAa+d,YAArB;AACA;AACAgI,UAAI,IAAJ;AACD;AACD;AACA,SAAKC,gBAAL,CAAuB3e,KAAKie,EAA5B;AACA;AACA,SAAK3gB,GAAL,CAAU0C,KAAKie,EAAf;;AAEA,SAAKL,eAAL,GAAuB,IAAvB;AAED,GApCD;;AAsCA;AACA;AACA,WAASgB,WAAT,CAAsB3W,GAAtB,EAA4B;AAC1B,WAAOA,IAAIjM,OAAJ,CAAa,UAAb,EAAyB,UAAUie,EAAV,EAAe;AAC7C,aAAO,MAAMA,GAAGE,WAAH,EAAb;AACD,KAFM,CAAP;AAGD;;AAED,MAAI0E,kBAAkB,aAAaD,YAAaxD,iBAAb,CAAnC;;AAEAriB,QAAM4lB,gBAAN,GAAyB,YAAS,WAAa;AAC7C;AACA;AACA,QAAK,KAAKf,eAAV,EAA4B;AAC1B;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIkB,WAAW,KAAK3kB,MAAL,CAAY1B,OAAZ,CAAoBgjB,kBAAnC;AACAqD,eAAW,OAAOA,QAAP,IAAmB,QAAnB,GAA8BA,WAAW,IAAzC,GAAgDA,QAA3D;AACA;AACA,SAAKxhB,GAAL,CAAS;AACP4d,0BAAoB2D,eADb;AAEPpD,0BAAoBqD,QAFb;AAGPpD,uBAAiB,KAAKqD,YAAL,IAAqB;AAH/B,KAAT;AAKA;AACA,SAAKpmB,OAAL,CAAa+F,gBAAb,CAA+B4c,kBAA/B,EAAmD,IAAnD,EAAyD,KAAzD;AACD,GA3BD;;AA6BA;;AAEAviB,QAAMimB,qBAAN,GAA8B,UAAU5iB,KAAV,EAAkB;AAC9C,SAAK6iB,eAAL,CAAsB7iB,KAAtB;AACD,GAFD;;AAIArD,QAAMmmB,gBAAN,GAAyB,UAAU9iB,KAAV,EAAkB;AACzC,SAAK6iB,eAAL,CAAsB7iB,KAAtB;AACD,GAFD;;AAIA;AACA,MAAI+iB,yBAAyB;AAC3B,yBAAqB;AADM,GAA7B;;AAIApmB,QAAMkmB,eAAN,GAAwB,UAAU7iB,KAAV,EAAkB;AACxC;AACA,QAAKA,MAAM0U,MAAN,KAAiB,KAAKnY,OAA3B,EAAqC;AACnC;AACD;AACD,QAAI6lB,cAAc,KAAK3C,OAAvB;AACA;AACA,QAAIuD,eAAeD,uBAAwB/iB,MAAMgjB,YAA9B,KAAgDhjB,MAAMgjB,YAAzE;;AAEA;AACA,WAAOZ,YAAY1C,aAAZ,CAA2BsD,YAA3B,CAAP;AACA;AACA,QAAKpE,WAAYwD,YAAY1C,aAAxB,CAAL,EAA+C;AAC7C;AACA,WAAKuD,iBAAL;AACD;AACD;AACA,QAAKD,gBAAgBZ,YAAYzC,KAAjC,EAAyC;AACvC;AACA,WAAKpjB,OAAL,CAAa8c,KAAb,CAAoBrZ,MAAMgjB,YAA1B,IAA2C,EAA3C;AACA,aAAOZ,YAAYzC,KAAZ,CAAmBqD,YAAnB,CAAP;AACD;AACD;AACA,QAAKA,gBAAgBZ,YAAYxC,KAAjC,EAAyC;AACvC,UAAIkC,kBAAkBM,YAAYxC,KAAZ,CAAmBoD,YAAnB,CAAtB;AACAlB,sBAAgBje,IAAhB,CAAsB,IAAtB;AACA,aAAOue,YAAYxC,KAAZ,CAAmBoD,YAAnB,CAAP;AACD;;AAED,SAAKzK,SAAL,CAAgB,eAAhB,EAAiC,CAAE,IAAF,CAAjC;AACD,GA9BD;;AAgCA5b,QAAMsmB,iBAAN,GAA0B,YAAW;AACnC,SAAKC,sBAAL;AACA,SAAK3mB,OAAL,CAAaqG,mBAAb,CAAkCsc,kBAAlC,EAAsD,IAAtD,EAA4D,KAA5D;AACA,SAAKsC,eAAL,GAAuB,KAAvB;AACD,GAJD;;AAMA;;;;AAIA7kB,QAAMwlB,aAAN,GAAsB,UAAU9I,KAAV,EAAkB;AACtC;AACA,QAAI8J,aAAa,EAAjB;AACA,SAAM,IAAI9G,IAAV,IAAkBhD,KAAlB,EAA0B;AACxB8J,iBAAY9G,IAAZ,IAAqB,EAArB;AACD;AACD,SAAKnb,GAAL,CAAUiiB,UAAV;AACD,GAPD;;AASA,MAAIC,uBAAuB;AACzBtE,wBAAoB,EADK;AAEzBO,wBAAoB,EAFK;AAGzBC,qBAAiB;AAHQ,GAA3B;;AAMA3iB,QAAMumB,sBAAN,GAA+B,YAAW;AACxC;AACA,SAAKhiB,GAAL,CAAUkiB,oBAAV;AACD,GAHD;;AAKA;;AAEAzmB,QAAM0mB,OAAN,GAAgB,UAAU/iB,KAAV,EAAkB;AAChCA,YAAQsU,MAAOtU,KAAP,IAAiB,CAAjB,GAAqBA,KAA7B;AACA,SAAKqiB,YAAL,GAAoBriB,QAAQ,IAA5B;AACD,GAHD;;AAKA;;AAEA;AACA3D,QAAM2mB,UAAN,GAAmB,YAAW;AAC5B,SAAK/mB,OAAL,CAAaqgB,UAAb,CAAwB3C,WAAxB,CAAqC,KAAK1d,OAA1C;AACA;AACA,SAAK2E,GAAL,CAAS,EAAEkZ,SAAS,EAAX,EAAT;AACA,SAAK7B,SAAL,CAAgB,QAAhB,EAA0B,CAAE,IAAF,CAA1B;AACD,GALD;;AAOA5b,QAAMkX,MAAN,GAAe,YAAW;AACxB;AACA,QAAK,CAACiL,kBAAD,IAAuB,CAAC5N,WAAY,KAAKnT,MAAL,CAAY1B,OAAZ,CAAoBgjB,kBAAhC,CAA7B,EAAoF;AAClF,WAAKiE,UAAL;AACA;AACD;;AAED;AACA,SAAKnL,IAAL,CAAW,eAAX,EAA4B,YAAW;AACrC,WAAKmL,UAAL;AACD,KAFD;AAGA,SAAKC,IAAL;AACD,GAZD;;AAcA5mB,QAAM6mB,MAAN,GAAe,YAAW;AACxB,WAAO,KAAKC,QAAZ;AACA;AACA,SAAKviB,GAAL,CAAS,EAAEkZ,SAAS,EAAX,EAAT;;AAEA,QAAI/d,UAAU,KAAK0B,MAAL,CAAY1B,OAA1B;;AAEA,QAAIylB,kBAAkB,EAAtB;AACA,QAAI4B,wBAAwB,KAAKC,kCAAL,CAAwC,cAAxC,CAA5B;AACA7B,oBAAiB4B,qBAAjB,IAA2C,KAAKE,qBAAhD;;AAEA,SAAK7E,UAAL,CAAgB;AACdsD,YAAMhmB,QAAQwnB,WADA;AAEdhC,UAAIxlB,QAAQynB,YAFE;AAGd/B,kBAAY,IAHE;AAIdD,uBAAiBA;AAJH,KAAhB;AAMD,GAjBD;;AAmBAnlB,QAAMinB,qBAAN,GAA8B,YAAW;AACvC;AACA;AACA,QAAK,CAAC,KAAKH,QAAX,EAAsB;AACpB,WAAKlL,SAAL,CAAe,QAAf;AACD;AACF,GAND;;AAQA;;;;;AAKA5b,QAAMgnB,kCAAN,GAA2C,UAAUI,aAAV,EAA0B;AACnE,QAAIC,cAAc,KAAKjmB,MAAL,CAAY1B,OAAZ,CAAqB0nB,aAArB,CAAlB;AACA;AACA,QAAKC,YAAYC,OAAjB,EAA2B;AACzB,aAAO,SAAP;AACD;AACD;AACA,SAAM,IAAI5H,IAAV,IAAkB2H,WAAlB,EAAgC;AAC9B,aAAO3H,IAAP;AACD;AACF,GAVD;;AAYA1f,QAAM4mB,IAAN,GAAa,YAAW;AACtB;AACA,SAAKE,QAAL,GAAgB,IAAhB;AACA;AACA,SAAKviB,GAAL,CAAS,EAAEkZ,SAAS,EAAX,EAAT;;AAEA,QAAI/d,UAAU,KAAK0B,MAAL,CAAY1B,OAA1B;;AAEA,QAAIylB,kBAAkB,EAAtB;AACA,QAAI4B,wBAAwB,KAAKC,kCAAL,CAAwC,aAAxC,CAA5B;AACA7B,oBAAiB4B,qBAAjB,IAA2C,KAAKQ,mBAAhD;;AAEA,SAAKnF,UAAL,CAAgB;AACdsD,YAAMhmB,QAAQynB,YADA;AAEdjC,UAAIxlB,QAAQwnB,WAFE;AAGd;AACA9B,kBAAY,IAJE;AAKdD,uBAAiBA;AALH,KAAhB;AAOD,GAnBD;;AAqBAnlB,QAAMunB,mBAAN,GAA4B,YAAW;AACrC;AACA;AACA,QAAK,KAAKT,QAAV,EAAqB;AACnB,WAAKviB,GAAL,CAAS,EAAEkZ,SAAS,MAAX,EAAT;AACA,WAAK7B,SAAL,CAAe,MAAf;AACD;AACF,GAPD;;AASA5b,QAAM+W,OAAN,GAAgB,YAAW;AACzB,SAAKxS,GAAL,CAAS;AACPqe,gBAAU,EADH;AAEPja,YAAM,EAFC;AAGP6e,aAAO,EAHA;AAIP3e,WAAK,EAJE;AAKP4e,cAAQ,EALD;AAMPrF,kBAAY,EANL;AAOPE,iBAAW;AAPJ,KAAT;AASD,GAVD;;AAYA,SAAON,IAAP;AAEC,CApiBC,CAAF;;AAsiBA;;;;;;AAME,WAAUjjB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA;AACA,4BAH4B,CAGD;;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA4B,CACxB,0BADwB,EAExB,0BAFwB,EAGxB,0BAHwB,EAIxB,0BAJwB,CAA5B,iCAME,UAAUic,SAAV,EAAqB3b,OAArB,EAA8BkgB,KAA9B,EAAqCuC,IAArC,EAA4C;AAC1C,aAAOhjB,QAASD,MAAT,EAAiBmc,SAAjB,EAA4B3b,OAA5B,EAAqCkgB,KAArC,EAA4CuC,IAA5C,CAAP;AACD,KARH;AAUD,GAZD,MAYO,IAAK,QAAO9iB,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfD,MADe,EAEfK,QAAQ,YAAR,CAFe,EAGfA,QAAQ,UAAR,CAHe,EAIfA,QAAQ,gBAAR,CAJe,EAKfA,QAAQ,sBAAR,CALe,CAAjB;AAOD,GATM,MASA;AACL;AACAL,WAAOS,QAAP,GAAkBR,QAChBD,MADgB,EAEhBA,OAAOmc,SAFS,EAGhBnc,OAAOQ,OAHS,EAIhBR,OAAOygB,YAJS,EAKhBzgB,OAAOS,QAAP,CAAgBwiB,IALA,CAAlB;AAOD;AAEF,CApCC,EAoCCjjB,MApCD,EAoCS,SAASC,OAAT,CAAkBD,MAAlB,EAA0Bmc,SAA1B,EAAqC3b,OAArC,EAA8CkgB,KAA9C,EAAqDuC,IAArD,EAA4D;AACvE;;AAEA;;AAEA,MAAInf,UAAU9D,OAAO8D,OAArB;AACA,MAAI8B,SAAS5F,OAAO4F,MAApB;AACA,MAAIsX,OAAO,SAAPA,IAAO,GAAW,CAAE,CAAxB;;AAEA;;AAEA;AACA,MAAIyL,OAAO,CAAX;AACA;AACA,MAAIC,YAAY,EAAhB;;AAGA;;;;;AAKA,WAASnoB,QAAT,CAAmBI,OAAnB,EAA4BF,OAA5B,EAAsC;AACpC,QAAIkoB,eAAenI,MAAMS,eAAN,CAAuBtgB,OAAvB,CAAnB;AACA,QAAK,CAACgoB,YAAN,EAAqB;AACnB,UAAK/kB,OAAL,EAAe;AACbA,gBAAQmX,KAAR,CAAe,qBAAqB,KAAKvY,WAAL,CAAiB9B,SAAtC,GACb,IADa,IACJioB,gBAAgBhoB,OADZ,CAAf;AAED;AACD;AACD;AACD,SAAKA,OAAL,GAAegoB,YAAf;AACA;AACA,QAAKjjB,MAAL,EAAc;AACZ,WAAKkjB,QAAL,GAAgBljB,OAAQ,KAAK/E,OAAb,CAAhB;AACD;;AAED;AACA,SAAKF,OAAL,GAAe+f,MAAM7Y,MAAN,CAAc,EAAd,EAAkB,KAAKnF,WAAL,CAAiB0X,QAAnC,CAAf;AACA,SAAKe,MAAL,CAAaxa,OAAb;;AAEA;AACA,QAAIooB,KAAK,EAAEJ,IAAX;AACA,SAAK9nB,OAAL,CAAamoB,YAAb,GAA4BD,EAA5B,CArBoC,CAqBJ;AAChCH,cAAWG,EAAX,IAAkB,IAAlB,CAtBoC,CAsBZ;;AAExB;AACA,SAAKjF,OAAL;;AAEA,QAAImF,eAAe,KAAK1E,UAAL,CAAgB,YAAhB,CAAnB;AACA,QAAK0E,YAAL,EAAoB;AAClB,WAAK5mB,MAAL;AACD;AACF;;AAED;AACA5B,WAASG,SAAT,GAAqB,UAArB;AACAH,WAASwiB,IAAT,GAAgBA,IAAhB;;AAEA;AACAxiB,WAAS2Z,QAAT,GAAoB;AAClB8O,oBAAgB;AACdrF,gBAAU;AADI,KADE;AAIlBsF,gBAAY,IAJM;AAKlBC,gBAAY,IALM;AAMlBC,eAAW,IANO;AAOlBC,YAAQ,IAPU;AAQlBC,qBAAiB,IARC;AASlB;AACA5F,wBAAoB,MAVF;AAWlBwE,iBAAa;AACXI,eAAS,CADE;AAEXhF,iBAAW;AAFA,KAXK;AAelB6E,kBAAc;AACZG,eAAS,CADG;AAEZhF,iBAAW;AAFC;AAfI,GAApB;;AAqBA,MAAItiB,QAAQR,SAASS,SAArB;AACA;AACAwf,QAAM7Y,MAAN,CAAc5G,KAAd,EAAqBkb,UAAUjb,SAA/B;;AAEA;;;;AAIAD,QAAMka,MAAN,GAAe,UAAUC,IAAV,EAAiB;AAC9BsF,UAAM7Y,MAAN,CAAc,KAAKlH,OAAnB,EAA4Bya,IAA5B;AACD,GAFD;;AAIA;;;AAGAna,QAAMsjB,UAAN,GAAmB,UAAUpJ,MAAV,EAAmB;AACpC,QAAIqO,YAAY,KAAK9mB,WAAL,CAAiB+mB,aAAjB,CAAgCtO,MAAhC,CAAhB;AACA,WAAOqO,aAAa,KAAK7oB,OAAL,CAAc6oB,SAAd,MAA8B3lB,SAA3C,GACL,KAAKlD,OAAL,CAAc6oB,SAAd,CADK,GACuB,KAAK7oB,OAAL,CAAcwa,MAAd,CAD9B;AAED,GAJD;;AAMA1a,WAASgpB,aAAT,GAAyB;AACvB;AACAN,gBAAY,cAFW;AAGvBO,gBAAY,cAHW;AAIvBC,mBAAe,iBAJQ;AAKvBP,gBAAY,cALW;AAMvBC,eAAW,aANY;AAOvBC,YAAQ,eAPe;AAQvBC,qBAAiB;AARM,GAAzB;;AAWAtoB,QAAM6iB,OAAN,GAAgB,YAAW;AACzB;AACA,SAAK8F,WAAL;AACA;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,KAAL,CAAY,KAAKnpB,OAAL,CAAampB,KAAzB;AACA;AACApJ,UAAM7Y,MAAN,CAAc,KAAKhH,OAAL,CAAa8c,KAA3B,EAAkC,KAAKhd,OAAL,CAAauoB,cAA/C;;AAEA;AACA,QAAIa,gBAAgB,KAAKxF,UAAL,CAAgB,QAAhB,CAApB;AACA,QAAKwF,aAAL,EAAqB;AACnB,WAAKC,UAAL;AACD;AACF,GAdD;;AAgBA;AACA/oB,QAAM2oB,WAAN,GAAoB,YAAW;AAC7B;AACA,SAAK9oB,KAAL,GAAa,KAAKmpB,QAAL,CAAe,KAAKppB,OAAL,CAAaqpB,QAA5B,CAAb;AACD,GAHD;;AAMA;;;;;AAKAjpB,QAAMgpB,QAAN,GAAiB,UAAU3I,KAAV,EAAkB;;AAEjC,QAAI6I,YAAY,KAAKC,uBAAL,CAA8B9I,KAA9B,CAAhB;AACA,QAAI2B,OAAO,KAAKvgB,WAAL,CAAiBugB,IAA5B;;AAEA;AACA,QAAIniB,QAAQ,EAAZ;AACA,SAAM,IAAIuF,IAAE,CAAZ,EAAeA,IAAI8jB,UAAU7jB,MAA7B,EAAqCD,GAArC,EAA2C;AACzC,UAAIe,OAAO+iB,UAAU9jB,CAAV,CAAX;AACA,UAAIgkB,OAAO,IAAIpH,IAAJ,CAAU7b,IAAV,EAAgB,IAAhB,CAAX;AACAtG,YAAMwX,IAAN,CAAY+R,IAAZ;AACD;;AAED,WAAOvpB,KAAP;AACD,GAdD;;AAgBA;;;;;AAKAG,QAAMmpB,uBAAN,GAAgC,UAAU9I,KAAV,EAAkB;AAChD,WAAOZ,MAAMW,kBAAN,CAA0BC,KAA1B,EAAiC,KAAK3gB,OAAL,CAAa2pB,YAA9C,CAAP;AACD,GAFD;;AAIA;;;;AAIArpB,QAAMspB,eAAN,GAAwB,YAAW;AACjC,WAAO,KAAKzpB,KAAL,CAAW0pB,GAAX,CAAgB,UAAUH,IAAV,EAAiB;AACtC,aAAOA,KAAKxpB,OAAZ;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;AAEA;;;AAGAI,QAAMoB,MAAN,GAAe,YAAW;AACxB,SAAKooB,YAAL;AACA,SAAKC,aAAL;;AAEA;AACA,QAAIf,gBAAgB,KAAKpF,UAAL,CAAgB,eAAhB,CAApB;AACA,QAAIoG,YAAYhB,kBAAkB9lB,SAAlB,GACd8lB,aADc,GACE,CAAC,KAAKiB,eADxB;AAEA,SAAKC,WAAL,CAAkB,KAAK/pB,KAAvB,EAA8B6pB,SAA9B;;AAEA;AACA,SAAKC,eAAL,GAAuB,IAAvB;AACD,GAZD;;AAcA;AACA3pB,QAAM8a,KAAN,GAAc9a,MAAMoB,MAApB;;AAEA;;;AAGApB,QAAMwpB,YAAN,GAAqB,YAAW;AAC9B,SAAKjqB,OAAL;AACD,GAFD;;AAKAS,QAAMT,OAAN,GAAgB,YAAW;AACzB,SAAKQ,IAAL,GAAYR,QAAS,KAAKK,OAAd,CAAZ;AACD,GAFD;;AAIA;;;;;;;;;;AAUAI,QAAMU,eAAN,GAAwB,UAAU8b,WAAV,EAAuBzc,IAAvB,EAA8B;AACpD,QAAIma,SAAS,KAAKxa,OAAL,CAAc8c,WAAd,CAAb;AACA,QAAIrW,IAAJ;AACA,QAAK,CAAC+T,MAAN,EAAe;AACb;AACA,WAAMsC,WAAN,IAAsB,CAAtB;AACD,KAHD,MAGO;AACL;AACA,UAAK,OAAOtC,MAAP,IAAiB,QAAtB,EAAiC;AAC/B/T,eAAO,KAAKvG,OAAL,CAAa2d,aAAb,CAA4BrD,MAA5B,CAAP;AACD,OAFD,MAEO,IAAKA,kBAAkBqG,WAAvB,EAAqC;AAC1Cpa,eAAO+T,MAAP;AACD;AACD;AACA,WAAMsC,WAAN,IAAsBrW,OAAO5G,QAAS4G,IAAT,EAAiBpG,IAAjB,CAAP,GAAiCma,MAAvD;AACD;AACF,GAhBD;;AAkBA;;;;AAIAla,QAAM4pB,WAAN,GAAoB,UAAU/pB,KAAV,EAAiB6pB,SAAjB,EAA6B;AAC/C7pB,YAAQ,KAAKgqB,kBAAL,CAAyBhqB,KAAzB,CAAR;;AAEA,SAAKiqB,YAAL,CAAmBjqB,KAAnB,EAA0B6pB,SAA1B;;AAEA,SAAKK,WAAL;AACD,GAND;;AAQA;;;;;;AAMA/pB,QAAM6pB,kBAAN,GAA2B,UAAUhqB,KAAV,EAAkB;AAC3C,WAAOA,MAAM2V,MAAN,CAAc,UAAU4T,IAAV,EAAiB;AACpC,aAAO,CAACA,KAAKY,SAAb;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;;;;AAKAhqB,QAAM8pB,YAAN,GAAqB,UAAUjqB,KAAV,EAAiB6pB,SAAjB,EAA6B;AAChD,SAAKO,oBAAL,CAA2B,QAA3B,EAAqCpqB,KAArC;;AAEA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAMwF,MAAtB,EAA+B;AAC7B;AACA;AACD;;AAED,QAAI6kB,QAAQ,EAAZ;;AAEArqB,UAAMM,OAAN,CAAe,UAAUipB,IAAV,EAAiB;AAC9B;AACA,UAAIxG,WAAW,KAAKuH,sBAAL,CAA6Bf,IAA7B,CAAf;AACA;AACAxG,eAASwG,IAAT,GAAgBA,IAAhB;AACAxG,eAAS8G,SAAT,GAAqBA,aAAaN,KAAKgB,eAAvC;AACAF,YAAM7S,IAAN,CAAYuL,QAAZ;AACD,KAPD,EAOG,IAPH;;AASA,SAAKyH,mBAAL,CAA0BH,KAA1B;AACD,GApBD;;AAsBA;;;;;AAKAlqB,QAAMmqB,sBAAN,GAA+B,YAAU,UAAa;AACpD,WAAO;AACL9e,SAAG,CADE;AAELC,SAAG;AAFE,KAAP;AAID,GALD;;AAOA;;;;;;AAMAtL,QAAMqqB,mBAAN,GAA4B,UAAUH,KAAV,EAAkB;AAC5C,SAAKI,aAAL;AACAJ,UAAM/pB,OAAN,CAAe,UAAUmZ,GAAV,EAAelU,CAAf,EAAmB;AAChC,WAAKmlB,aAAL,CAAoBjR,IAAI8P,IAAxB,EAA8B9P,IAAIjO,CAAlC,EAAqCiO,IAAIhO,CAAzC,EAA4CgO,IAAIoQ,SAAhD,EAA2DtkB,CAA3D;AACD,KAFD,EAEG,IAFH;AAGD,GALD;;AAOA;AACApF,QAAMsqB,aAAN,GAAsB,YAAW;AAC/B,QAAI5D,UAAU,KAAKhnB,OAAL,CAAagnB,OAA3B;AACA,QAAKA,YAAY,IAAZ,IAAoBA,YAAY9jB,SAArC,EAAiD;AAC/C,WAAK8jB,OAAL,GAAe,CAAf;AACA;AACD;AACD,SAAKA,OAAL,GAAe8D,gBAAiB9D,OAAjB,CAAf;AACA,WAAO,KAAKA,OAAZ;AACD,GARD;;AAUA;;;;;;;AAOA1mB,QAAMuqB,aAAN,GAAsB,UAAUnB,IAAV,EAAgB/d,CAAhB,EAAmBC,CAAnB,EAAsBoe,SAAtB,EAAiCtkB,CAAjC,EAAqC;AACzD,QAAKskB,SAAL,EAAiB;AACf;AACAN,WAAK/D,IAAL,CAAWha,CAAX,EAAcC,CAAd;AACD,KAHD,MAGO;AACL8d,WAAK1C,OAAL,CAActhB,IAAI,KAAKshB,OAAvB;AACA0C,WAAK9D,MAAL,CAAaja,CAAb,EAAgBC,CAAhB;AACD;AACF,GARD;;AAUA;;;;AAIAtL,QAAM+pB,WAAN,GAAoB,YAAW;AAC7B,SAAKzB,eAAL;AACD,GAFD;;AAIAtoB,QAAMsoB,eAAN,GAAwB,YAAW;AACjC,QAAImC,sBAAsB,KAAKnH,UAAL,CAAgB,iBAAhB,CAA1B;AACA,QAAK,CAACmH,mBAAN,EAA4B;AAC1B;AACD;AACD,QAAI1qB,OAAO,KAAK2qB,iBAAL,EAAX;AACA,QAAK3qB,IAAL,EAAY;AACV,WAAK4qB,oBAAL,CAA2B5qB,KAAK+D,KAAhC,EAAuC,IAAvC;AACA,WAAK6mB,oBAAL,CAA2B5qB,KAAKyG,MAAhC,EAAwC,KAAxC;AACD;AACF,GAVD;;AAYA;;;;;;AAMAxG,QAAM0qB,iBAAN,GAA0BzO,IAA1B;;AAEA;;;;AAIAjc,QAAM2qB,oBAAN,GAA6B,UAAUC,OAAV,EAAmBC,OAAnB,EAA6B;AACxD,QAAKD,YAAYhoB,SAAjB,EAA6B;AAC3B;AACD;;AAED,QAAIkoB,WAAW,KAAK/qB,IAApB;AACA;AACA,QAAK+qB,SAASlN,WAAd,EAA4B;AAC1BgN,iBAAWC,UAAUC,SAAShN,WAAT,GAAuBgN,SAAS/M,YAAhC,GACnB+M,SAASrM,eADU,GACQqM,SAASpM,gBAD3B,GAEToM,SAAS5M,aAAT,GAAyB4M,SAAS7M,UAAlC,GACA6M,SAASlM,cADT,GAC0BkM,SAASjM,iBAHrC;AAID;;AAED+L,cAAUxiB,KAAKC,GAAL,CAAUuiB,OAAV,EAAmB,CAAnB,CAAV;AACA,SAAKhrB,OAAL,CAAa8c,KAAb,CAAoBmO,UAAU,OAAV,GAAoB,QAAxC,IAAqDD,UAAU,IAA/D;AACD,GAhBD;;AAkBA;;;;;AAKA5qB,QAAMiqB,oBAAN,GAA6B,UAAU9O,SAAV,EAAqBtb,KAArB,EAA6B;AACxD,QAAIihB,QAAQ,IAAZ;AACA,aAASiK,UAAT,GAAsB;AACpBjK,YAAMkK,aAAN,CAAqB7P,YAAY,UAAjC,EAA6C,IAA7C,EAAmD,CAAEtb,KAAF,CAAnD;AACD;;AAED,QAAIorB,QAAQprB,MAAMwF,MAAlB;AACA,QAAK,CAACxF,KAAD,IAAU,CAACorB,KAAhB,EAAwB;AACtBF;AACA;AACD;;AAED,QAAIG,YAAY,CAAhB;AACA,aAASC,IAAT,GAAgB;AACdD;AACA,UAAKA,aAAaD,KAAlB,EAA0B;AACxBF;AACD;AACF;;AAED;AACAlrB,UAAMM,OAAN,CAAe,UAAUipB,IAAV,EAAiB;AAC9BA,WAAK5N,IAAL,CAAWL,SAAX,EAAsBgQ,IAAtB;AACD,KAFD;AAGD,GAxBD;;AA0BA;;;;;;AAMAnrB,QAAMgrB,aAAN,GAAsB,UAAUtjB,IAAV,EAAgBrE,KAAhB,EAAuB4D,IAAvB,EAA8B;AAClD;AACA,QAAImkB,WAAW/nB,QAAQ,CAAEA,KAAF,EAAUyT,MAAV,CAAkB7P,IAAlB,CAAR,GAAmCA,IAAlD;AACA,SAAK2U,SAAL,CAAgBlU,IAAhB,EAAsB0jB,QAAtB;;AAEA,QAAKzmB,MAAL,EAAc;AACZ;AACA,WAAKkjB,QAAL,GAAgB,KAAKA,QAAL,IAAiBljB,OAAQ,KAAK/E,OAAb,CAAjC;AACA,UAAKyD,KAAL,EAAa;AACX;AACA,YAAIgoB,SAAS1mB,OAAO2mB,KAAP,CAAcjoB,KAAd,CAAb;AACAgoB,eAAO3jB,IAAP,GAAcA,IAAd;AACA,aAAKmgB,QAAL,CAAcnlB,OAAd,CAAuB2oB,MAAvB,EAA+BpkB,IAA/B;AACD,OALD,MAKO;AACL;AACA,aAAK4gB,QAAL,CAAcnlB,OAAd,CAAuBgF,IAAvB,EAA6BT,IAA7B;AACD;AACF;AACF,GAlBD;;AAoBA;;;AAGA;;;;;AAKAjH,QAAMurB,MAAN,GAAe,UAAUplB,IAAV,EAAiB;AAC9B,QAAIijB,OAAO,KAAKoC,OAAL,CAAcrlB,IAAd,CAAX;AACA,QAAKijB,IAAL,EAAY;AACVA,WAAKY,SAAL,GAAiB,IAAjB;AACD;AACF,GALD;;AAOA;;;;AAIAhqB,QAAMyrB,QAAN,GAAiB,UAAUtlB,IAAV,EAAiB;AAChC,QAAIijB,OAAO,KAAKoC,OAAL,CAAcrlB,IAAd,CAAX;AACA,QAAKijB,IAAL,EAAY;AACV,aAAOA,KAAKY,SAAZ;AACD;AACF,GALD;;AAOA;;;;AAIAhqB,QAAM6oB,KAAN,GAAc,UAAUxI,KAAV,EAAkB;AAC9BA,YAAQ,KAAKqL,KAAL,CAAYrL,KAAZ,CAAR;AACA,QAAK,CAACA,KAAN,EAAc;AACZ;AACD;;AAED,SAAKuI,MAAL,GAAc,KAAKA,MAAL,CAAY9R,MAAZ,CAAoBuJ,KAApB,CAAd;AACA;AACAA,UAAMlgB,OAAN,CAAe,KAAKorB,MAApB,EAA4B,IAA5B;AACD,GATD;;AAWA;;;;AAIAvrB,QAAM2rB,OAAN,GAAgB,UAAUtL,KAAV,EAAkB;AAChCA,YAAQ,KAAKqL,KAAL,CAAYrL,KAAZ,CAAR;AACA,QAAK,CAACA,KAAN,EAAa;AACX;AACD;;AAEDA,UAAMlgB,OAAN,CAAe,UAAUgG,IAAV,EAAiB;AAC9B;AACAsZ,YAAMM,UAAN,CAAkB,KAAK6I,MAAvB,EAA+BziB,IAA/B;AACA,WAAKslB,QAAL,CAAetlB,IAAf;AACD,KAJD,EAIG,IAJH;AAKD,GAXD;;AAaA;;;;;AAKAnG,QAAM0rB,KAAN,GAAc,UAAUrL,KAAV,EAAkB;AAC9B,QAAK,CAACA,KAAN,EAAc;AACZ;AACD;AACD;AACA,QAAK,OAAOA,KAAP,IAAgB,QAArB,EAAgC;AAC9BA,cAAQ,KAAKzgB,OAAL,CAAa6gB,gBAAb,CAA+BJ,KAA/B,CAAR;AACD;AACDA,YAAQZ,MAAMG,SAAN,CAAiBS,KAAjB,CAAR;AACA,WAAOA,KAAP;AACD,GAVD;;AAYArgB,QAAMypB,aAAN,GAAsB,YAAW;AAC/B,QAAK,CAAC,KAAKb,MAAN,IAAgB,CAAC,KAAKA,MAAL,CAAYvjB,MAAlC,EAA2C;AACzC;AACD;;AAED,SAAKumB,gBAAL;;AAEA,SAAKhD,MAAL,CAAYzoB,OAAZ,CAAqB,KAAK0rB,YAA1B,EAAwC,IAAxC;AACD,GARD;;AAUA;AACA7rB,QAAM4rB,gBAAN,GAAyB,YAAW;AAClC;AACA,QAAInjB,eAAe,KAAK7I,OAAL,CAAa4I,qBAAb,EAAnB;AACA,QAAIzI,OAAO,KAAKA,IAAhB;AACA,SAAK+rB,aAAL,GAAqB;AACnBnjB,YAAMF,aAAaE,IAAb,GAAoB5I,KAAK+d,WAAzB,GAAuC/d,KAAK0e,eAD/B;AAEnB5V,WAAKJ,aAAaI,GAAb,GAAmB9I,KAAKke,UAAxB,GAAqCle,KAAK6e,cAF5B;AAGnB4I,aAAO/e,aAAa+e,KAAb,IAAuBznB,KAAKge,YAAL,GAAoBhe,KAAK2e,gBAAhD,CAHY;AAInB+I,cAAQhf,aAAagf,MAAb,IAAwB1nB,KAAKme,aAAL,GAAqBne,KAAK8e,iBAAlD;AAJW,KAArB;AAMD,GAVD;;AAYA;;;AAGA7e,QAAM6rB,YAAN,GAAqB5P,IAArB;;AAEA;;;;;AAKAjc,QAAM+rB,iBAAN,GAA0B,UAAU5lB,IAAV,EAAiB;AACzC,QAAIsC,eAAetC,KAAKqC,qBAAL,EAAnB;AACA,QAAIwjB,WAAW,KAAKF,aAApB;AACA,QAAI/rB,OAAOR,QAAS4G,IAAT,CAAX;AACA,QAAI8lB,SAAS;AACXtjB,YAAMF,aAAaE,IAAb,GAAoBqjB,SAASrjB,IAA7B,GAAoC5I,KAAKqe,UADpC;AAEXvV,WAAKJ,aAAaI,GAAb,GAAmBmjB,SAASnjB,GAA5B,GAAkC9I,KAAKwe,SAFjC;AAGXiJ,aAAOwE,SAASxE,KAAT,GAAiB/e,aAAa+e,KAA9B,GAAsCznB,KAAKse,WAHvC;AAIXoJ,cAAQuE,SAASvE,MAAT,GAAkBhf,aAAagf,MAA/B,GAAwC1nB,KAAKye;AAJ1C,KAAb;AAMA,WAAOyN,MAAP;AACD,GAXD;;AAaA;;AAEA;AACA;AACAjsB,QAAMmgB,WAAN,GAAoBV,MAAMU,WAA1B;;AAEA;;;AAGAngB,QAAM+oB,UAAN,GAAmB,YAAW;AAC5BhqB,WAAO4G,gBAAP,CAAyB,QAAzB,EAAmC,IAAnC;AACA,SAAKumB,aAAL,GAAqB,IAArB;AACD,GAHD;;AAKA;;;AAGAlsB,QAAMmsB,YAAN,GAAqB,YAAW;AAC9BptB,WAAOkH,mBAAP,CAA4B,QAA5B,EAAsC,IAAtC;AACA,SAAKimB,aAAL,GAAqB,KAArB;AACD,GAHD;;AAKAlsB,QAAMosB,QAAN,GAAiB,YAAW;AAC1B,SAAK/D,MAAL;AACD,GAFD;;AAIA5I,QAAMiB,cAAN,CAAsBlhB,QAAtB,EAAgC,UAAhC,EAA4C,GAA5C;;AAEAQ,QAAMqoB,MAAN,GAAe,YAAW;AACxB;AACA;AACA,QAAK,CAAC,KAAK6D,aAAN,IAAuB,CAAC,KAAKG,iBAAL,EAA7B,EAAwD;AACtD;AACD;;AAED,SAAKjrB,MAAL;AACD,GARD;;AAUA;;;;AAIApB,QAAMqsB,iBAAN,GAA0B,YAAW;AACnC,QAAItsB,OAAOR,QAAS,KAAKK,OAAd,CAAX;AACA;AACA;AACA,QAAIY,WAAW,KAAKT,IAAL,IAAaA,IAA5B;AACA,WAAOS,YAAYT,KAAKsc,UAAL,KAAoB,KAAKtc,IAAL,CAAUsc,UAAjD;AACD,GAND;;AAQA;;AAEA;;;;;AAKArc,QAAMssB,QAAN,GAAiB,UAAUjM,KAAV,EAAkB;AACjC,QAAIxgB,QAAQ,KAAKmpB,QAAL,CAAe3I,KAAf,CAAZ;AACA;AACA,QAAKxgB,MAAMwF,MAAX,EAAoB;AAClB,WAAKxF,KAAL,GAAa,KAAKA,KAAL,CAAWiX,MAAX,CAAmBjX,KAAnB,CAAb;AACD;AACD,WAAOA,KAAP;AACD,GAPD;;AASA;;;;AAIAG,QAAMusB,QAAN,GAAiB,UAAUlM,KAAV,EAAkB;AACjC,QAAIxgB,QAAQ,KAAKysB,QAAL,CAAejM,KAAf,CAAZ;AACA,QAAK,CAACxgB,MAAMwF,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,SAAKukB,WAAL,CAAkB/pB,KAAlB,EAAyB,IAAzB;AACA,SAAKgnB,MAAL,CAAahnB,KAAb;AACD,GARD;;AAUA;;;;AAIAG,QAAMwsB,SAAN,GAAkB,UAAUnM,KAAV,EAAkB;AAClC,QAAIxgB,QAAQ,KAAKmpB,QAAL,CAAe3I,KAAf,CAAZ;AACA,QAAK,CAACxgB,MAAMwF,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,QAAIonB,gBAAgB,KAAK5sB,KAAL,CAAWkF,KAAX,CAAiB,CAAjB,CAApB;AACA,SAAKlF,KAAL,GAAaA,MAAMiX,MAAN,CAAc2V,aAAd,CAAb;AACA;AACA,SAAKjD,YAAL;AACA,SAAKC,aAAL;AACA;AACA,SAAKG,WAAL,CAAkB/pB,KAAlB,EAAyB,IAAzB;AACA,SAAKgnB,MAAL,CAAahnB,KAAb;AACA;AACA,SAAK+pB,WAAL,CAAkB6C,aAAlB;AACD,GAhBD;;AAkBA;;;;AAIAzsB,QAAM6mB,MAAN,GAAe,UAAUhnB,KAAV,EAAkB;AAC/B,SAAKoqB,oBAAL,CAA2B,QAA3B,EAAqCpqB,KAArC;AACA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAMwF,MAAtB,EAA+B;AAC7B;AACD;AACD,QAAIqhB,UAAU,KAAK4D,aAAL,EAAd;AACAzqB,UAAMM,OAAN,CAAe,UAAUipB,IAAV,EAAgBhkB,CAAhB,EAAoB;AACjCgkB,WAAK1C,OAAL,CAActhB,IAAIshB,OAAlB;AACA0C,WAAKvC,MAAL;AACD,KAHD;AAID,GAVD;;AAYA;;;;AAIA7mB,QAAM4mB,IAAN,GAAa,UAAU/mB,KAAV,EAAkB;AAC7B,SAAKoqB,oBAAL,CAA2B,MAA3B,EAAmCpqB,KAAnC;AACA,QAAK,CAACA,KAAD,IAAU,CAACA,MAAMwF,MAAtB,EAA+B;AAC7B;AACD;AACD,QAAIqhB,UAAU,KAAK4D,aAAL,EAAd;AACAzqB,UAAMM,OAAN,CAAe,UAAUipB,IAAV,EAAgBhkB,CAAhB,EAAoB;AACjCgkB,WAAK1C,OAAL,CAActhB,IAAIshB,OAAlB;AACA0C,WAAKxC,IAAL;AACD,KAHD;AAID,GAVD;;AAYA;;;;AAIA5mB,QAAM0sB,kBAAN,GAA2B,UAAUrM,KAAV,EAAkB;AAC3C,QAAIxgB,QAAQ,KAAK8sB,QAAL,CAAetM,KAAf,CAAZ;AACA,SAAKwG,MAAL,CAAahnB,KAAb;AACD,GAHD;;AAKA;;;;AAIAG,QAAM4sB,gBAAN,GAAyB,UAAUvM,KAAV,EAAkB;AACzC,QAAIxgB,QAAQ,KAAK8sB,QAAL,CAAetM,KAAf,CAAZ;AACA,SAAKuG,IAAL,CAAW/mB,KAAX;AACD,GAHD;;AAKA;;;;;;AAMAG,QAAMwrB,OAAN,GAAgB,UAAUrlB,IAAV,EAAiB;AAC/B;AACA,SAAM,IAAIf,IAAE,CAAZ,EAAeA,IAAI,KAAKvF,KAAL,CAAWwF,MAA9B,EAAsCD,GAAtC,EAA4C;AAC1C,UAAIgkB,OAAO,KAAKvpB,KAAL,CAAWuF,CAAX,CAAX;AACA,UAAKgkB,KAAKxpB,OAAL,IAAgBuG,IAArB,EAA4B;AAC1B;AACA,eAAOijB,IAAP;AACD;AACF;AACF,GATD;;AAWA;;;;;AAKAppB,QAAM2sB,QAAN,GAAiB,UAAUtM,KAAV,EAAkB;AACjCA,YAAQZ,MAAMG,SAAN,CAAiBS,KAAjB,CAAR;AACA,QAAIxgB,QAAQ,EAAZ;AACAwgB,UAAMlgB,OAAN,CAAe,UAAUgG,IAAV,EAAiB;AAC9B,UAAIijB,OAAO,KAAKoC,OAAL,CAAcrlB,IAAd,CAAX;AACA,UAAKijB,IAAL,EAAY;AACVvpB,cAAMwX,IAAN,CAAY+R,IAAZ;AACD;AACF,KALD,EAKG,IALH;;AAOA,WAAOvpB,KAAP;AACD,GAXD;;AAaA;;;;AAIAG,QAAMkX,MAAN,GAAe,UAAUmJ,KAAV,EAAkB;AAC/B,QAAIwM,cAAc,KAAKF,QAAL,CAAetM,KAAf,CAAlB;;AAEA,SAAK4J,oBAAL,CAA2B,QAA3B,EAAqC4C,WAArC;;AAEA;AACA,QAAK,CAACA,WAAD,IAAgB,CAACA,YAAYxnB,MAAlC,EAA2C;AACzC;AACD;;AAEDwnB,gBAAY1sB,OAAZ,CAAqB,UAAUipB,IAAV,EAAiB;AACpCA,WAAKlS,MAAL;AACA;AACAuI,YAAMM,UAAN,CAAkB,KAAKlgB,KAAvB,EAA8BupB,IAA9B;AACD,KAJD,EAIG,IAJH;AAKD,GAfD;;AAiBA;;AAEA;AACAppB,QAAM+W,OAAN,GAAgB,YAAW;AACzB;AACA,QAAI2F,QAAQ,KAAK9c,OAAL,CAAa8c,KAAzB;AACAA,UAAMlW,MAAN,GAAe,EAAf;AACAkW,UAAMkG,QAAN,GAAiB,EAAjB;AACAlG,UAAM5Y,KAAN,GAAc,EAAd;AACA;AACA,SAAKjE,KAAL,CAAWM,OAAX,CAAoB,UAAUipB,IAAV,EAAiB;AACnCA,WAAKrS,OAAL;AACD,KAFD;;AAIA,SAAKoV,YAAL;;AAEA,QAAIrE,KAAK,KAAKloB,OAAL,CAAamoB,YAAtB;AACA,WAAOJ,UAAWG,EAAX,CAAP,CAdyB,CAcD;AACxB,WAAO,KAAKloB,OAAL,CAAamoB,YAApB;AACA;AACA,QAAKpjB,MAAL,EAAc;AACZA,aAAOuB,UAAP,CAAmB,KAAKtG,OAAxB,EAAiC,KAAK6B,WAAL,CAAiB9B,SAAlD;AACD;AAEF,GArBD;;AAuBA;;AAEA;;;;;AAKAH,WAAS8C,IAAT,GAAgB,UAAU6D,IAAV,EAAiB;AAC/BA,WAAOsZ,MAAMS,eAAN,CAAuB/Z,IAAvB,CAAP;AACA,QAAI2hB,KAAK3hB,QAAQA,KAAK4hB,YAAtB;AACA,WAAOD,MAAMH,UAAWG,EAAX,CAAb;AACD,GAJD;;AAOA;;AAEA;;;;AAIAtoB,WAAS8B,MAAT,GAAkB,UAAU3B,SAAV,EAAqBD,OAArB,EAA+B;AAC/C;AACA,QAAIotB,SAASC,SAAUvtB,QAAV,CAAb;AACA;AACAstB,WAAO3T,QAAP,GAAkBsG,MAAM7Y,MAAN,CAAc,EAAd,EAAkBpH,SAAS2Z,QAA3B,CAAlB;AACAsG,UAAM7Y,MAAN,CAAckmB,OAAO3T,QAArB,EAA+BzZ,OAA/B;AACAotB,WAAOtE,aAAP,GAAuB/I,MAAM7Y,MAAN,CAAc,EAAd,EAAkBpH,SAASgpB,aAA3B,CAAvB;;AAEAsE,WAAOntB,SAAP,GAAmBA,SAAnB;;AAEAmtB,WAAOxqB,IAAP,GAAc9C,SAAS8C,IAAvB;;AAEA;AACAwqB,WAAO9K,IAAP,GAAc+K,SAAU/K,IAAV,CAAd;;AAEA;;AAEAvC,UAAM4B,QAAN,CAAgByL,MAAhB,EAAwBntB,SAAxB;;AAEA;;AAEA;AACA,QAAKgF,UAAUA,OAAOqW,OAAtB,EAAgC;AAC9BrW,aAAOqW,OAAP,CAAgBrb,SAAhB,EAA2BmtB,MAA3B;AACD;;AAED,WAAOA,MAAP;AACD,GA3BD;;AA6BA,WAASC,QAAT,CAAmBC,MAAnB,EAA4B;AAC1B,aAASC,QAAT,GAAoB;AAClBD,aAAO3sB,KAAP,CAAc,IAAd,EAAoBC,SAApB;AACD;;AAED2sB,aAAShtB,SAAT,GAAqBuB,OAAOF,MAAP,CAAe0rB,OAAO/sB,SAAtB,CAArB;AACAgtB,aAAShtB,SAAT,CAAmBwB,WAAnB,GAAiCwrB,QAAjC;;AAEA,WAAOA,QAAP;AACD;;AAED;;AAEA;AACA,MAAIC,UAAU;AACZC,QAAI,CADQ;AAEZC,OAAG;AAFS,GAAd;;AAKA;AACA;AACA,WAAS5C,eAAT,CAA0B6C,IAA1B,EAAiC;AAC/B,QAAK,OAAOA,IAAP,IAAe,QAApB,EAA+B;AAC7B,aAAOA,IAAP;AACD;AACD,QAAIhO,UAAUgO,KAAKpd,KAAL,CAAY,mBAAZ,CAAd;AACA,QAAI8L,MAAMsD,WAAWA,QAAQ,CAAR,CAArB;AACA,QAAIiO,OAAOjO,WAAWA,QAAQ,CAAR,CAAtB;AACA,QAAK,CAACtD,IAAI1W,MAAV,EAAmB;AACjB,aAAO,CAAP;AACD;AACD0W,UAAMxH,WAAYwH,GAAZ,CAAN;AACA,QAAIwR,OAAOL,QAASI,IAAT,KAAmB,CAA9B;AACA,WAAOvR,MAAMwR,IAAb;AACD;;AAED;;AAEA;AACA/tB,WAASwiB,IAAT,GAAgBA,IAAhB;;AAEA,SAAOxiB,QAAP;AAEC,CAp6BC,CAAF;;AAs6BA;;;;AAIE,WAAUT,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA0B,CACtB,0BADsB,CAA1B,oCAGED,OAHF;AAAA;AAAA;AAAA;AAID,GAND,MAMO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,UAAR,CADe,CAAjB;AAGD,GALM,MAKA;AACL;AACAL,WAAOyuB,UAAP,GAAoBzuB,OAAOyuB,UAAP,IAAqB,EAAzC;AACAzuB,WAAOyuB,UAAP,CAAkBxL,IAAlB,GAAyBhjB,QACvBD,OAAOS,QADgB,CAAzB;AAGD;AAEF,CAtBC,EAsBCT,MAtBD,EAsBS,SAASC,OAAT,CAAkBQ,QAAlB,EAA6B;AACxC;;AAEA;;AAEA;;AACA,WAASwiB,IAAT,GAAgB;AACdxiB,aAASwiB,IAAT,CAAc3hB,KAAd,CAAqB,IAArB,EAA2BC,SAA3B;AACD;;AAED,MAAIN,QAAQgiB,KAAK/hB,SAAL,GAAiBuB,OAAOF,MAAP,CAAe9B,SAASwiB,IAAT,CAAc/hB,SAA7B,CAA7B;;AAEA,MAAI4iB,UAAU7iB,MAAM6iB,OAApB;AACA7iB,QAAM6iB,OAAN,GAAgB,YAAW;AACzB;AACA,SAAKiF,EAAL,GAAU,KAAK1mB,MAAL,CAAYqsB,QAAZ,EAAV;AACA5K,YAAQ3b,IAAR,CAAc,IAAd;AACA,SAAKwmB,QAAL,GAAgB,EAAhB;AACD,GALD;;AAOA1tB,QAAM2tB,cAAN,GAAuB,YAAW;AAChC,QAAK,KAAK3D,SAAV,EAAsB;AACpB;AACD;AACD;AACA,SAAK0D,QAAL,CAAc5F,EAAd,GAAmB,KAAKA,EAAxB;AACA;AACA,SAAK4F,QAAL,CAAc,gBAAd,IAAkC,KAAK5F,EAAvC;AACA,SAAK4F,QAAL,CAAclX,MAAd,GAAuBpO,KAAKoO,MAAL,EAAvB;AACA;AACA,QAAIoX,cAAc,KAAKxsB,MAAL,CAAY1B,OAAZ,CAAoBkuB,WAAtC;AACA,QAAIC,UAAU,KAAKzsB,MAAL,CAAY0sB,QAA1B;AACA,SAAM,IAAIC,GAAV,IAAiBH,WAAjB,EAA+B;AAC7B,UAAII,SAASH,QAASE,GAAT,CAAb;AACA,WAAKL,QAAL,CAAeK,GAAf,IAAuBC,OAAQ,KAAKpuB,OAAb,EAAsB,IAAtB,CAAvB;AACD;AACF,GAhBD;;AAkBA,MAAIquB,WAAWjuB,MAAM+W,OAArB;AACA/W,QAAM+W,OAAN,GAAgB,YAAW;AACzB;AACAkX,aAAS5tB,KAAT,CAAgB,IAAhB,EAAsBC,SAAtB;AACA;AACA,SAAKiE,GAAL,CAAS;AACPkZ,eAAS;AADF,KAAT;AAGD,GAPD;;AASA,SAAOuE,IAAP;AAEC,CAxEC,CAAF;;AA0EA;;;;AAIE,WAAUjjB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAiC,CAC7B,0BAD6B,EAE7B,0BAF6B,CAAjC,oCAIED,OAJF;AAAA;AAAA;AAKD,GAPD,MAOO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,UAAR,CADe,EAEfA,QAAQ,UAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAL,WAAOyuB,UAAP,GAAoBzuB,OAAOyuB,UAAP,IAAqB,EAAzC;AACAzuB,WAAOyuB,UAAP,CAAkBluB,UAAlB,GAA+BN,QAC7BD,OAAOQ,OADsB,EAE7BR,OAAOS,QAFsB,CAA/B;AAID;AAEF,CAzBC,EAyBCT,MAzBD,EAyBS,SAASC,OAAT,CAAkBO,OAAlB,EAA2BC,QAA3B,EAAsC;AAC/C;;AAEA;;AACA,WAASF,UAAT,CAAqB4uB,UAArB,EAAkC;AAChC,SAAKA,UAAL,GAAkBA,UAAlB;AACA;AACA,QAAKA,UAAL,EAAkB;AAChB,WAAKxuB,OAAL,GAAewuB,WAAWxuB,OAAX,CAAoB,KAAKC,SAAzB,CAAf;AACA,WAAKC,OAAL,GAAesuB,WAAWtuB,OAA1B;AACA,WAAKC,KAAL,GAAaquB,WAAWpuB,aAAxB;AACA,WAAKC,IAAL,GAAYmuB,WAAWnuB,IAAvB;AACD;AACF;;AAED,MAAIC,QAAQV,WAAWW,SAAvB;;AAEA;;;;AAIA,MAAIC,gBAAgB,CAClB,cADkB,EAElB,wBAFkB,EAGlB,cAHkB,EAIlB,mBAJkB,EAKlB,mBALkB,EAMlB,mBANkB,EAOlB,YAPkB,CAApB;;AAUAA,gBAAcC,OAAd,CAAuB,UAAUC,UAAV,EAAuB;AAC5CJ,UAAOI,UAAP,IAAsB,YAAW;AAC/B,aAAOZ,SAASS,SAAT,CAAoBG,UAApB,EAAiCC,KAAjC,CAAwC,KAAK6tB,UAA7C,EAAyD5tB,SAAzD,CAAP;AACD,KAFD;AAGD,GAJD;;AAMA;;AAEA;AACAN,QAAMO,yBAAN,GAAkC,YAAW;AAC3C;AACA,QAAIR,OAAOR,QAAS,KAAK2uB,UAAL,CAAgBtuB,OAAzB,CAAX;AACA;AACA;AACA,QAAIY,WAAW,KAAK0tB,UAAL,CAAgBnuB,IAAhB,IAAwBA,IAAvC;AACA,WAAOS,YAAYT,KAAKU,WAAL,IAAoB,KAAKytB,UAAL,CAAgBnuB,IAAhB,CAAqBU,WAA5D;AACD,GAPD;;AASA;;AAEAT,QAAMU,eAAN,GAAwB,YAAW;AACjC,SAAKwtB,UAAL,CAAgBxtB,eAAhB,CAAgCL,KAAhC,CAAuC,IAAvC,EAA6CC,SAA7C;AACD,GAFD;;AAIAN,QAAMW,cAAN,GAAuB,YAAW;AAChC,SAAKC,cAAL,CAAqB,QAArB,EAA+B,OAA/B;AACD,GAFD;;AAIAZ,QAAMa,YAAN,GAAqB,YAAW;AAC9B,SAAKD,cAAL,CAAqB,KAArB,EAA4B,QAA5B;AACD,GAFD;;AAIA;;;;;AAKAZ,QAAMY,cAAN,GAAuB,UAAUE,OAAV,EAAmBf,IAAnB,EAA0B;AAC/C,QAAIgB,cAAcD,UAAUf,IAA5B;AACA,QAAIiB,YAAY,UAAUjB,IAA1B;AACA;AACA,SAAKW,eAAL,CAAsBK,WAAtB,EAAmCC,SAAnC;AACA;AACA,QAAK,KAAMD,WAAN,CAAL,EAA2B;AACzB;AACD;AACD;AACA,QAAIE,gBAAgB,KAAKC,gBAAL,EAApB;AACA,SAAMH,WAAN,IAAsBE,iBAAiBA,cAAeD,SAAf,CAAjB;AACpB;AACA,SAAKktB,UAAL,CAAgBnuB,IAAhB,CAAsB,UAAUA,IAAhC,CAFF;AAGD,GAdD;;AAgBAC,QAAMkB,gBAAN,GAAyB,YAAW;AAClC,QAAIC,YAAY,KAAK+sB,UAAL,CAAgBpuB,aAAhB,CAA8B,CAA9B,CAAhB;AACA,WAAOqB,aAAaA,UAAUvB,OAAvB,IAAkCL,QAAS4B,UAAUvB,OAAnB,CAAzC;AACD,GAHD;;AAKA;;AAEAI,QAAMoB,MAAN,GAAe,YAAW;AACxB,SAAK8sB,UAAL,CAAgB9sB,MAAhB,CAAuBf,KAAvB,CAA8B,KAAK6tB,UAAnC,EAA+C5tB,SAA/C;AACD,GAFD;;AAIAN,QAAMT,OAAN,GAAgB,YAAW;AACzB,SAAK2uB,UAAL,CAAgB3uB,OAAhB;AACA,SAAKQ,IAAL,GAAY,KAAKmuB,UAAL,CAAgBnuB,IAA5B;AACD,GAHD;;AAKA;;AAEAT,aAAW+B,KAAX,GAAmB,EAAnB;;AAEA/B,aAAWgC,MAAX,GAAoB,UAAU3B,SAAV,EAAqBD,OAArB,EAA+B;;AAEjD,aAAS6B,IAAT,GAAgB;AACdjC,iBAAWe,KAAX,CAAkB,IAAlB,EAAwBC,SAAxB;AACD;;AAEDiB,SAAKtB,SAAL,GAAiBuB,OAAOF,MAAP,CAAetB,KAAf,CAAjB;AACAuB,SAAKtB,SAAL,CAAewB,WAAf,GAA6BF,IAA7B;;AAEA;AACA,QAAK7B,OAAL,EAAe;AACb6B,WAAK7B,OAAL,GAAeA,OAAf;AACD;;AAED6B,SAAKtB,SAAL,CAAeN,SAAf,GAA2BA,SAA3B;AACA;AACAL,eAAW+B,KAAX,CAAkB1B,SAAlB,IAAgC4B,IAAhC;;AAEA,WAAOA,IAAP;AACD,GAnBD;;AAqBA,SAAOjC,UAAP;AAED,CAxJC,CAAF;;AA0JA;;;;;;;;AAQE,WAAUP,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA0B,CACtB,0BADsB,EAEtB,0BAFsB,CAA1B,oCAIED,OAJF;AAAA;AAAA;AAKD,GAPD,MAOO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,UAAR,CADe,EAEfA,QAAQ,UAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAL,WAAOovB,OAAP,GAAiBnvB,QACfD,OAAOS,QADQ,EAEfT,OAAOQ,OAFQ,CAAjB;AAID;AAEF,CAxBC,EAwBCR,MAxBD,EAwBS,SAASC,OAAT,CAAkBQ,QAAlB,EAA4BD,OAA5B,EAAsC;;AAIjD;;AAEE;AACA,MAAI4uB,UAAU3uB,SAAS8B,MAAT,CAAgB,SAAhB,CAAd;AACA;AACA6sB,UAAQ3F,aAAR,CAAsB4F,QAAtB,GAAiC,YAAjC;;AAEAD,UAAQluB,SAAR,CAAkBupB,YAAlB,GAAiC,YAAW;AAC1C,SAAKjqB,OAAL;AACA,SAAKmB,eAAL,CAAsB,aAAtB,EAAqC,YAArC;AACA,SAAKA,eAAL,CAAsB,QAAtB,EAAgC,YAAhC;AACA,SAAK2tB,cAAL;;AAEA;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAM,IAAIlpB,IAAE,CAAZ,EAAeA,IAAI,KAAKmpB,IAAxB,EAA8BnpB,GAA9B,EAAoC;AAClC,WAAKkpB,KAAL,CAAWjX,IAAX,CAAiB,CAAjB;AACD;;AAED,SAAKmX,IAAL,GAAY,CAAZ;AACD,GAbD;;AAeAL,UAAQluB,SAAR,CAAkBouB,cAAlB,GAAmC,YAAW;AAC5C,SAAKI,iBAAL;AACA;AACA,QAAK,CAAC,KAAKC,WAAX,EAAyB;AACvB,UAAIvtB,YAAY,KAAKtB,KAAL,CAAW,CAAX,CAAhB;AACA,UAAI8uB,gBAAgBxtB,aAAaA,UAAUvB,OAA3C;AACA;AACA,WAAK8uB,WAAL,GAAmBC,iBAAiBpvB,QAASovB,aAAT,EAAyBrS,UAA1C;AACjB;AACA,WAAKsS,cAFP;AAGD;;AAED,QAAIF,cAAc,KAAKA,WAAL,IAAoB,KAAKG,MAA3C;;AAEA;AACA,QAAID,iBAAiB,KAAKA,cAAL,GAAsB,KAAKC,MAAhD;AACA,QAAIN,OAAOK,iBAAiBF,WAA5B;AACA;AACA,QAAII,SAASJ,cAAcE,iBAAiBF,WAA5C;AACA;AACA,QAAIK,aAAaD,UAAUA,SAAS,CAAnB,GAAuB,OAAvB,GAAiC,OAAlD;AACAP,WAAOnmB,KAAM2mB,UAAN,EAAoBR,IAApB,CAAP;AACA,SAAKA,IAAL,GAAYnmB,KAAKC,GAAL,CAAUkmB,IAAV,EAAgB,CAAhB,CAAZ;AACD,GAvBD;;AAyBAJ,UAAQluB,SAAR,CAAkBwuB,iBAAlB,GAAsC,YAAW;AAC/C;AACA,QAAIO,aAAa,KAAK1L,UAAL,CAAgB,UAAhB,CAAjB;AACA,QAAI2L,YAAYD,aAAa,KAAKpvB,OAAL,CAAaqgB,UAA1B,GAAuC,KAAKrgB,OAA5D;AACA;AACA;AACA,QAAIG,OAAOR,QAAS0vB,SAAT,CAAX;AACA,SAAKL,cAAL,GAAsB7uB,QAAQA,KAAKsc,UAAnC;AACD,GARD;;AAUA8R,UAAQluB,SAAR,CAAkBkqB,sBAAlB,GAA2C,UAAUf,IAAV,EAAiB;AAC1DA,SAAK7pB,OAAL;AACA;AACA,QAAI2vB,YAAY9F,KAAKrpB,IAAL,CAAUuc,UAAV,GAAuB,KAAKoS,WAA5C;AACA,QAAIK,aAAaG,aAAaA,YAAY,CAAzB,GAA6B,OAA7B,GAAuC,MAAxD;AACA;AACA,QAAIC,UAAU/mB,KAAM2mB,UAAN,EAAoB3F,KAAKrpB,IAAL,CAAUuc,UAAV,GAAuB,KAAKoS,WAAhD,CAAd;AACAS,cAAU/mB,KAAKgnB,GAAL,CAAUD,OAAV,EAAmB,KAAKZ,IAAxB,CAAV;;AAEA,QAAIc,WAAW,KAAKC,YAAL,CAAmBH,OAAnB,CAAf;AACA;AACA,QAAII,WAAWnnB,KAAKgnB,GAAL,CAAS/uB,KAAT,CAAgB+H,IAAhB,EAAsBinB,QAAtB,CAAf;AACA,QAAIG,gBAAgBH,SAAS/f,OAAT,CAAkBigB,QAAlB,CAApB;;AAEA;AACA,QAAI3M,WAAW;AACbvX,SAAG,KAAKqjB,WAAL,GAAmBc,aADT;AAEblkB,SAAGikB;AAFU,KAAf;;AAKA;AACA,QAAIE,YAAYF,WAAWnG,KAAKrpB,IAAL,CAAUwc,WAArC;AACA,QAAImT,UAAU,KAAKnB,IAAL,GAAY,CAAZ,GAAgBc,SAAShqB,MAAvC;AACA,SAAM,IAAID,IAAI,CAAd,EAAiBA,IAAIsqB,OAArB,EAA8BtqB,GAA9B,EAAoC;AAClC,WAAKkpB,KAAL,CAAYkB,gBAAgBpqB,CAA5B,IAAkCqqB,SAAlC;AACD;;AAED,WAAO7M,QAAP;AACD,GA5BD;;AA8BA;;;;AAIAuL,UAAQluB,SAAR,CAAkBqvB,YAAlB,GAAiC,UAAUH,OAAV,EAAoB;AACnD,QAAKA,UAAU,CAAf,EAAmB;AACjB;AACA,aAAO,KAAKb,KAAZ;AACD;;AAED,QAAIe,WAAW,EAAf;AACA;AACA,QAAIM,aAAa,KAAKpB,IAAL,GAAY,CAAZ,GAAgBY,OAAjC;AACA;AACA,SAAM,IAAI/pB,IAAI,CAAd,EAAiBA,IAAIuqB,UAArB,EAAiCvqB,GAAjC,EAAuC;AACrC;AACA,UAAIwqB,aAAa,KAAKtB,KAAL,CAAWvpB,KAAX,CAAkBK,CAAlB,EAAqBA,IAAI+pB,OAAzB,CAAjB;AACA;AACAE,eAASjqB,CAAT,IAAcgD,KAAKC,GAAL,CAAShI,KAAT,CAAgB+H,IAAhB,EAAsBwnB,UAAtB,CAAd;AACD;AACD,WAAOP,QAAP;AACD,GAjBD;;AAmBAlB,UAAQluB,SAAR,CAAkB4rB,YAAlB,GAAiC,UAAUhD,KAAV,EAAkB;AACjD,QAAIgH,YAAYtwB,QAASspB,KAAT,CAAhB;AACA,QAAIoD,SAAS,KAAKF,iBAAL,CAAwBlD,KAAxB,CAAb;AACA;AACA,QAAIxF,eAAe,KAAKC,UAAL,CAAgB,YAAhB,CAAnB;AACA,QAAIwM,SAASzM,eAAe4I,OAAOtjB,IAAtB,GAA6BsjB,OAAOzE,KAAjD;AACA,QAAIuI,QAAQD,SAASD,UAAUvT,UAA/B;AACA,QAAI0T,WAAW5nB,KAAKmO,KAAL,CAAYuZ,SAAS,KAAKpB,WAA1B,CAAf;AACAsB,eAAW5nB,KAAKC,GAAL,CAAU,CAAV,EAAa2nB,QAAb,CAAX;AACA,QAAIC,UAAU7nB,KAAKmO,KAAL,CAAYwZ,QAAQ,KAAKrB,WAAzB,CAAd;AACA;AACAuB,eAAWF,QAAQ,KAAKrB,WAAb,GAA2B,CAA3B,GAA+B,CAA1C;AACAuB,cAAU7nB,KAAKgnB,GAAL,CAAU,KAAKb,IAAL,GAAY,CAAtB,EAAyB0B,OAAzB,CAAV;AACA;;AAEA,QAAI1M,cAAc,KAAKD,UAAL,CAAgB,WAAhB,CAAlB;AACA,QAAI4M,YAAY,CAAE3M,cAAc0I,OAAOpjB,GAArB,GAA2BojB,OAAOxE,MAApC,IACdoI,UAAUtT,WADZ;AAEA,SAAM,IAAInX,IAAI4qB,QAAd,EAAwB5qB,KAAK6qB,OAA7B,EAAsC7qB,GAAtC,EAA4C;AAC1C,WAAKkpB,KAAL,CAAWlpB,CAAX,IAAgBgD,KAAKC,GAAL,CAAU6nB,SAAV,EAAqB,KAAK5B,KAAL,CAAWlpB,CAAX,CAArB,CAAhB;AACD;AACF,GArBD;;AAuBA+oB,UAAQluB,SAAR,CAAkByqB,iBAAlB,GAAsC,YAAW;AAC/C,SAAK8D,IAAL,GAAYpmB,KAAKC,GAAL,CAAShI,KAAT,CAAgB+H,IAAhB,EAAsB,KAAKkmB,KAA3B,CAAZ;AACA,QAAIvuB,OAAO;AACTyG,cAAQ,KAAKgoB;AADJ,KAAX;;AAIA,QAAK,KAAKlL,UAAL,CAAgB,UAAhB,CAAL,EAAmC;AACjCvjB,WAAK+D,KAAL,GAAa,KAAKqsB,qBAAL,EAAb;AACD;;AAED,WAAOpwB,IAAP;AACD,GAXD;;AAaAouB,UAAQluB,SAAR,CAAkBkwB,qBAAlB,GAA0C,YAAW;AACnD,QAAIC,aAAa,CAAjB;AACA;AACA,QAAIhrB,IAAI,KAAKmpB,IAAb;AACA,WAAQ,EAAEnpB,CAAV,EAAc;AACZ,UAAK,KAAKkpB,KAAL,CAAWlpB,CAAX,MAAkB,CAAvB,EAA2B;AACzB;AACD;AACDgrB;AACD;AACD;AACA,WAAO,CAAE,KAAK7B,IAAL,GAAY6B,UAAd,IAA6B,KAAK1B,WAAlC,GAAgD,KAAKG,MAA5D;AACD,GAZD;;AAcAV,UAAQluB,SAAR,CAAkBosB,iBAAlB,GAAsC,YAAW;AAC/C,QAAIgE,gBAAgB,KAAKzB,cAAzB;AACA,SAAKH,iBAAL;AACA,WAAO4B,iBAAiB,KAAKzB,cAA7B;AACD,GAJD;;AAMA,SAAOT,OAAP;AAED,CApMC,CAAF;;AAsMA;;;;;;AAME,WAAUpvB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA0C,CACtC,0BADsC,EAEtC,0BAFsC,CAA1C,oCAIED,OAJF;AAAA;AAAA;AAAA;AAKD,GAPD,MAOO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,EAEfA,QAAQ,gBAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAJ,YACED,OAAOyuB,UAAP,CAAkBluB,UADpB,EAEEP,OAAOovB,OAFT;AAID;AAEF,CAxBC,EAwBCpvB,MAxBD,EAwBS,SAASC,OAAT,CAAkBM,UAAlB,EAA8B6uB,OAA9B,EAAwC;AACnD;;AAEA;;AAEE;;AACA,MAAImC,cAAchxB,WAAWgC,MAAX,CAAkB,SAAlB,CAAlB;;AAEA,MAAItB,QAAQswB,YAAYrwB,SAAxB;;AAEA,MAAIswB,kBAAkB;AACpBxE,uBAAmB,IADC;AAEpB3qB,YAAQ,IAFY;AAGpBV,qBAAiB;AAHG,GAAtB;;AAMA;AACA,OAAM,IAAIka,MAAV,IAAoBuT,QAAQluB,SAA5B,EAAwC;AACtC;AACA,QAAK,CAACswB,gBAAiB3V,MAAjB,CAAN,EAAkC;AAChC5a,YAAO4a,MAAP,IAAkBuT,QAAQluB,SAAR,CAAmB2a,MAAnB,CAAlB;AACD;AACF;;AAED,MAAIyT,iBAAiBruB,MAAMquB,cAA3B;AACAruB,QAAMquB,cAAN,GAAuB,YAAW;AAChC;AACA,SAAKxuB,KAAL,GAAa,KAAKquB,UAAL,CAAgBpuB,aAA7B;AACAuuB,mBAAennB,IAAf,CAAqB,IAArB;AACD,GAJD;;AAMA;AACA,MAAIoc,aAAatjB,MAAMsjB,UAAvB;AACAtjB,QAAMsjB,UAAN,GAAmB,UAAUpJ,MAAV,EAAmB;AACpC,QAAKA,UAAU,UAAf,EAA4B;AAC1B,aAAO,KAAKxa,OAAL,CAAasvB,UAAb,KAA4BpsB,SAA5B,GACL,KAAKlD,OAAL,CAAasvB,UADR,GACqB,KAAKtvB,OAAL,CAAa0uB,QADzC;AAED;AACD,WAAO9K,WAAWjjB,KAAX,CAAkB,KAAK6tB,UAAvB,EAAmC5tB,SAAnC,CAAP;AACD,GAND;;AAQA,SAAOgwB,WAAP;AAED,CAnEC,CAAF;;AAqEA;;;;AAIE,WAAUvxB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA2C,CACvC,0BADuC,CAA3C,oCAGED,OAHF;AAAA;AAAA;AAAA;AAID,GAND,MAMO,IAAK,QAAOG,OAAP,yCAAOA,OAAP,MAAkB,QAAvB,EAAkC;AACvC;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,CAAjB;AAGD,GALM,MAKA;AACL;AACAJ,YACED,OAAOyuB,UAAP,CAAkBluB,UADpB;AAGD;AAEF,CArBC,EAqBCP,MArBD,EAqBS,SAASC,OAAT,CAAkBM,UAAlB,EAA+B;AAC1C;;AAEA,MAAIkxB,UAAUlxB,WAAWgC,MAAX,CAAkB,SAAlB,CAAd;;AAEA,MAAItB,QAAQwwB,QAAQvwB,SAApB;;AAEAD,QAAMwpB,YAAN,GAAqB,YAAW;AAC9B,SAAKne,CAAL,GAAS,CAAT;AACA,SAAKC,CAAL,GAAS,CAAT;AACA,SAAKkjB,IAAL,GAAY,CAAZ;AACA,SAAK9tB,eAAL,CAAsB,QAAtB,EAAgC,YAAhC;AACD,GALD;;AAOAV,QAAMmqB,sBAAN,GAA+B,UAAUf,IAAV,EAAiB;AAC9CA,SAAK7pB,OAAL;;AAEA,QAAIkxB,YAAYrH,KAAKrpB,IAAL,CAAUuc,UAAV,GAAuB,KAAKuS,MAA5C;AACA;AACA,QAAID,iBAAiB,KAAKV,UAAL,CAAgBnuB,IAAhB,CAAqBsc,UAArB,GAAkC,KAAKwS,MAA5D;AACA,QAAK,KAAKxjB,CAAL,KAAW,CAAX,IAAgBolB,YAAY,KAAKplB,CAAjB,GAAqBujB,cAA1C,EAA2D;AACzD,WAAKvjB,CAAL,GAAS,CAAT;AACA,WAAKC,CAAL,GAAS,KAAKkjB,IAAd;AACD;;AAED,QAAI5L,WAAW;AACbvX,SAAG,KAAKA,CADK;AAEbC,SAAG,KAAKA;AAFK,KAAf;;AAKA,SAAKkjB,IAAL,GAAYpmB,KAAKC,GAAL,CAAU,KAAKmmB,IAAf,EAAqB,KAAKljB,CAAL,GAAS8d,KAAKrpB,IAAL,CAAUwc,WAAxC,CAAZ;AACA,SAAKlR,CAAL,IAAUolB,SAAV;;AAEA,WAAO7N,QAAP;AACD,GApBD;;AAsBA5iB,QAAM0qB,iBAAN,GAA0B,YAAW;AACnC,WAAO,EAAElkB,QAAQ,KAAKgoB,IAAf,EAAP;AACD,GAFD;;AAIA,SAAOgC,OAAP;AAEC,CA/DC,CAAF;;AAiEA;;;;AAIE,WAAUzxB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAA2C,CACvC,0BADuC,CAA3C,oCAGED,OAHF;AAAA;AAAA;AAAA;AAID,GAND,MAMO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,CAAjB;AAGD,GALM,MAKA;AACL;AACAJ,YACED,OAAOyuB,UAAP,CAAkBluB,UADpB;AAGD;AAEF,CArBC,EAqBCP,MArBD,EAqBS,SAASC,OAAT,CAAkBM,UAAlB,EAA+B;AAC1C;;AAEA,MAAIoxB,WAAWpxB,WAAWgC,MAAX,CAAmB,UAAnB,EAA+B;AAC5CqvB,yBAAqB;AADuB,GAA/B,CAAf;;AAIA,MAAI3wB,QAAQ0wB,SAASzwB,SAArB;;AAEAD,QAAMwpB,YAAN,GAAqB,YAAW;AAC9B,SAAKle,CAAL,GAAS,CAAT;AACD,GAFD;;AAIAtL,QAAMmqB,sBAAN,GAA+B,UAAUf,IAAV,EAAiB;AAC9CA,SAAK7pB,OAAL;AACA,QAAI8L,IAAI,CAAE,KAAK6iB,UAAL,CAAgBnuB,IAAhB,CAAqBsc,UAArB,GAAkC+M,KAAKrpB,IAAL,CAAUuc,UAA9C,IACN,KAAK5c,OAAL,CAAaixB,mBADf;AAEA,QAAIrlB,IAAI,KAAKA,CAAb;AACA,SAAKA,CAAL,IAAU8d,KAAKrpB,IAAL,CAAUwc,WAApB;AACA,WAAO,EAAElR,GAAGA,CAAL,EAAQC,GAAGA,CAAX,EAAP;AACD,GAPD;;AASAtL,QAAM0qB,iBAAN,GAA0B,YAAW;AACnC,WAAO,EAAElkB,QAAQ,KAAK8E,CAAf,EAAP;AACD,GAFD;;AAIA,SAAOolB,QAAP;AAEC,CAjDC,CAAF;;AAmDA;;;;;;;;;;AAUE,WAAU3xB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAQ,CACJ,0BADI,EAEJ,0BAFI,EAGJ,0BAHI,EAIJ,0BAJI,EAKJ,uBALI,EAMJ,sBANI;AAOJ;AACA,2BARI,EASJ,uBATI,EAUJ,uBAVI,CAAR,mCAYE,UAAUO,QAAV,EAAoBD,OAApB,EAA6B0f,eAA7B,EAA8CQ,KAA9C,EAAqDuC,IAArD,EAA2D1iB,UAA3D,EAAwE;AACtE,aAAON,QAASD,MAAT,EAAiBS,QAAjB,EAA2BD,OAA3B,EAAoC0f,eAApC,EAAqDQ,KAArD,EAA4DuC,IAA5D,EAAkE1iB,UAAlE,CAAP;AACD,KAdH;AAAA;AAeD,GAjBD,MAiBO,IAAK,QAAOJ,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfD,MADe,EAEfK,QAAQ,UAAR,CAFe,EAGfA,QAAQ,UAAR,CAHe,EAIfA,QAAQ,2BAAR,CAJe,EAKfA,QAAQ,gBAAR,CALe,EAMfA,QAAQ,mBAAR,CANe,EAOfA,QAAQ,eAAR,CAPe;AAQf;AACAA,YAAQ,wBAAR,CATe,EAUfA,QAAQ,yBAAR,CAVe,EAWfA,QAAQ,yBAAR,CAXe,CAAjB;AAaD,GAfM,MAeA;AACL;AACAL,WAAOyuB,UAAP,GAAoBxuB,QAClBD,MADkB,EAElBA,OAAOS,QAFW,EAGlBT,OAAOQ,OAHW,EAIlBR,OAAOkgB,eAJW,EAKlBlgB,OAAOygB,YALW,EAMlBzgB,OAAOyuB,UAAP,CAAkBxL,IANA,EAOlBjjB,OAAOyuB,UAAP,CAAkBluB,UAPA,CAApB;AASD;AAEF,CAhDC,EAgDCP,MAhDD,EAgDS,SAASC,OAAT,CAAkBD,MAAlB,EAA0BS,QAA1B,EAAoCD,OAApC,EAA6C0f,eAA7C,EAA8DQ,KAA9D,EACTuC,IADS,EACH1iB,UADG,EACU;;AAIrB;;AAEA,MAAIqF,SAAS5F,OAAO4F,MAApB;;AAEA;;AAEA,MAAIisB,OAAOC,OAAO5wB,SAAP,CAAiB2wB,IAAjB,GACT,UAAU1hB,GAAV,EAAgB;AACd,WAAOA,IAAI0hB,IAAJ,EAAP;AACD,GAHQ,GAIT,UAAU1hB,GAAV,EAAgB;AACd,WAAOA,IAAIjM,OAAJ,CAAa,YAAb,EAA2B,EAA3B,CAAP;AACD,GANH;;AAQA;;AAEE;AACA,MAAIuqB,aAAahuB,SAAS8B,MAAT,CAAiB,YAAjB,EAA+B;AAC9CwvB,gBAAY,SADkC;AAE9CC,uBAAmB,IAF2B;AAG9CC,mBAAe;AAH+B,GAA/B,CAAjB;;AAMAxD,aAAWxL,IAAX,GAAkBA,IAAlB;AACAwL,aAAWluB,UAAX,GAAwBA,UAAxB;;AAEA,MAAIU,QAAQwtB,WAAWvtB,SAAvB;;AAEAD,QAAM6iB,OAAN,GAAgB,YAAW;AACzB,SAAK4K,QAAL,GAAgB,CAAhB;AACA;AACA,SAAKK,QAAL,GAAgB,EAAhB;AACA,SAAKmD,WAAL;AACA;AACAzxB,aAASS,SAAT,CAAmB4iB,OAAnB,CAA2B3b,IAA3B,CAAiC,IAAjC;;AAEA;AACA,SAAK7F,KAAL,GAAa,EAAb;AACA;AACA,SAAKvB,aAAL,GAAqB,KAAKD,KAA1B;AACA;AACA,SAAKqxB,WAAL,GAAmB,CAAE,gBAAF,CAAnB;AACA;AACA,SAAM,IAAIC,IAAV,IAAkB7xB,WAAW+B,KAA7B,EAAqC;AACnC,WAAK+vB,eAAL,CAAsBD,IAAtB;AACD;AACF,GAlBD;;AAoBAnxB,QAAM2oB,WAAN,GAAoB,YAAW;AAC7B;AACA,SAAK8E,QAAL,GAAgB,CAAhB;AACA;AACAjuB,aAASS,SAAT,CAAmB0oB,WAAnB,CAA+BzhB,IAA/B,CAAqC,IAArC;AACD,GALD;;AAOAlH,QAAMgpB,QAAN,GAAiB,YAAW;AAC1B,QAAInpB,QAAQL,SAASS,SAAT,CAAmB+oB,QAAnB,CAA4B3oB,KAA5B,CAAmC,IAAnC,EAAyCC,SAAzC,CAAZ;AACA;AACA,SAAM,IAAI8E,IAAE,CAAZ,EAAeA,IAAIvF,MAAMwF,MAAzB,EAAiCD,GAAjC,EAAuC;AACrC,UAAIgkB,OAAOvpB,MAAMuF,CAAN,CAAX;AACAgkB,WAAKtB,EAAL,GAAU,KAAK2F,QAAL,EAAV;AACD;AACD,SAAK4D,oBAAL,CAA2BxxB,KAA3B;AACA,WAAOA,KAAP;AACD,GATD;;AAYA;;AAEAG,QAAMoxB,eAAN,GAAwB,UAAUD,IAAV,EAAiB;AACvC,QAAI5vB,OAAOjC,WAAW+B,KAAX,CAAkB8vB,IAAlB,CAAX;AACA;AACA;AACA,QAAIG,cAAc,KAAK5xB,OAAL,CAAcyxB,IAAd,KAAwB,EAA1C;AACA,SAAKzxB,OAAL,CAAcyxB,IAAd,IAAuB5vB,KAAK7B,OAAL,GACrB+f,MAAM7Y,MAAN,CAAcrF,KAAK7B,OAAnB,EAA4B4xB,WAA5B,CADqB,GACuBA,WAD9C;AAEA;AACA,SAAKjwB,KAAL,CAAY8vB,IAAZ,IAAqB,IAAI5vB,IAAJ,CAAU,IAAV,CAArB;AACD,GATD;;AAYAvB,QAAMoB,MAAN,GAAe,YAAW;AACxB;AACA,QAAK,CAAC,KAAKuoB,eAAN,IAAyB,KAAKrG,UAAL,CAAgB,YAAhB,CAA9B,EAA8D;AAC5D,WAAKiO,OAAL;AACA;AACD;AACD,SAAKC,OAAL;AACD,GAPD;;AASA;AACAxxB,QAAMwxB,OAAN,GAAgB,YAAW;AACzB;AACA,QAAI9H,YAAY,KAAK+H,aAAL,EAAhB;AACA;AACA,SAAKjI,YAAL;AACA,SAAKC,aAAL;AACA,SAAKG,WAAL,CAAkB,KAAK9pB,aAAvB,EAAsC4pB,SAAtC;;AAEA;AACA,SAAKC,eAAL,GAAuB,IAAvB;AACD,GAVD;;AAYA;AACA3pB,QAAMuxB,OAAN,GAAgB,UAAUpX,IAAV,EAAiB;AAC/B;AACA,SAAKD,MAAL,CAAaC,IAAb;AACA,SAAKsX,aAAL;AACA;;AAEA;AACA,QAAIC,WAAW,KAAKC,OAAL,CAAc,KAAK9xB,KAAnB,CAAf;AACA,SAAKC,aAAL,GAAqB4xB,SAASrS,OAA9B;;AAEA,SAAKuS,oBAAL;;AAEA,QAAK,KAAKC,UAAV,EAAuB;AACrB,WAAKC,aAAL,CAAoB,KAAKC,WAAzB,EAAsC,CAAEL,QAAF,CAAtC;AACD,KAFD,MAEO;AACL,WAAKK,WAAL,CAAkBL,QAAlB;AACD;;AAED,SAAKM,KAAL;AACA,SAAKR,OAAL;AACD,GApBD;AAqBA;AACAxxB,QAAM8a,KAAN,GAAc9a,MAAMuxB,OAApB;;AAEAvxB,QAAM+xB,WAAN,GAAoB,UAAUL,QAAV,EAAqB;AACvC,SAAK7K,MAAL,CAAa6K,SAASO,UAAtB;AACA,SAAKrL,IAAL,CAAW8K,SAASQ,QAApB;AACD,GAHD;;AAKA;AACA;AACA;AACAlyB,QAAMyxB,aAAN,GAAsB,YAAW;AAC/B,QAAIrH,kBAAkB,KAAK9G,UAAL,CAAgB,eAAhB,CAAtB;AACA,QAAIoG,YAAYU,oBAAoBxnB,SAApB,GAAgCwnB,eAAhC,GACd,CAAC,KAAKT,eADR;AAEA,SAAKkI,UAAL,GAAkBnI,SAAlB;AACA,WAAOA,SAAP;AACD,GAND;;AAQA;AACA;AACA1pB,QAAM4xB,oBAAN,GAA6B,YAAW;AACtC;AACA,QAAIO,gBAAJ,EAAsBC,cAAtB,EAAsCC,gBAAtC;AACA,QAAIvR,QAAQ,IAAZ;AACA,aAASwR,uBAAT,GAAmC;AACjC,UAAKH,oBAAoBC,cAApB,IAAsCC,gBAA3C,EAA8D;AAC5DvR,cAAMkK,aAAN,CAAqB,iBAArB,EAAwC,IAAxC,EAA8C,CAAElK,MAAMhhB,aAAR,CAA9C;AACD;AACF;AACD,SAAK0b,IAAL,CAAW,gBAAX,EAA6B,YAAW;AACtC2W,yBAAmB,IAAnB;AACAG;AACD,KAHD;AAIA,SAAK9W,IAAL,CAAW,cAAX,EAA2B,YAAW;AACpC4W,uBAAiB,IAAjB;AACAE;AACD,KAHD;AAIA,SAAK9W,IAAL,CAAW,gBAAX,EAA6B,YAAW;AACtC6W,yBAAmB,IAAnB;AACAC;AACD,KAHD;AAID,GArBD;;AAuBA;;AAEAtyB,QAAM2xB,OAAN,GAAgB,UAAU9xB,KAAV,EAAkB;AAChC,QAAI2V,SAAS,KAAK9V,OAAL,CAAa8V,MAA1B;AACAA,aAASA,UAAU,GAAnB;AACA,QAAI6J,UAAU,EAAd;AACA,QAAIkT,gBAAgB,EAApB;AACA,QAAIC,mBAAmB,EAAvB;;AAEA,QAAIC,OAAO,KAAKC,cAAL,CAAqBld,MAArB,CAAX;;AAEA;AACA,SAAM,IAAIpQ,IAAE,CAAZ,EAAeA,IAAIvF,MAAMwF,MAAzB,EAAiCD,GAAjC,EAAuC;AACrC,UAAIgkB,OAAOvpB,MAAMuF,CAAN,CAAX;AACA,UAAKgkB,KAAKY,SAAV,EAAsB;AACpB;AACD;AACD;AACA,UAAI2I,YAAYF,KAAMrJ,IAAN,CAAhB;AACA;AACA;AACA,UAAKuJ,SAAL,EAAiB;AACftT,gBAAQhI,IAAR,CAAc+R,IAAd;AACD;AACD;AACA,UAAKuJ,aAAavJ,KAAKtC,QAAvB,EAAkC;AAChCyL,sBAAclb,IAAd,CAAoB+R,IAApB;AACD,OAFD,MAEO,IAAK,CAACuJ,SAAD,IAAc,CAACvJ,KAAKtC,QAAzB,EAAoC;AACzC0L,yBAAiBnb,IAAjB,CAAuB+R,IAAvB;AACD;AACF;;AAED;AACA,WAAO;AACL/J,eAASA,OADJ;AAEL4S,kBAAYM,aAFP;AAGLL,gBAAUM;AAHL,KAAP;AAKD,GApCD;;AAsCA;AACAxyB,QAAM0yB,cAAN,GAAuB,UAAUld,MAAV,EAAmB;AACxC,QAAK7Q,UAAU,KAAKjF,OAAL,CAAaqxB,iBAA5B,EAAgD;AAC9C;AACA,aAAO,UAAU3H,IAAV,EAAiB;AACtB,eAAOzkB,OAAQykB,KAAKxpB,OAAb,EAAuB8W,EAAvB,CAA2BlB,MAA3B,CAAP;AACD,OAFD;AAGD;AACD,QAAK,OAAOA,MAAP,IAAiB,UAAtB,EAAmC;AACjC;AACA,aAAO,UAAU4T,IAAV,EAAiB;AACtB,eAAO5T,OAAQ4T,KAAKxpB,OAAb,CAAP;AACD,OAFD;AAGD;AACD;AACA,WAAO,UAAUwpB,IAAV,EAAiB;AACtB,aAAOnK,gBAAiBmK,KAAKxpB,OAAtB,EAA+B4V,MAA/B,CAAP;AACD,KAFD;AAGD,GAjBD;;AAmBA;;AAEA;;;;AAIAxV,QAAM2tB,cAAN,GAAuB,UAAUtN,KAAV,EAAkB;AACvC;AACA,QAAIxgB,KAAJ;AACA,QAAKwgB,KAAL,EAAa;AACXA,cAAQZ,MAAMG,SAAN,CAAiBS,KAAjB,CAAR;AACAxgB,cAAQ,KAAK8sB,QAAL,CAAetM,KAAf,CAAR;AACD,KAHD,MAGO;AACL;AACAxgB,cAAQ,KAAKA,KAAb;AACD;;AAED,SAAKoxB,WAAL;AACA,SAAKI,oBAAL,CAA2BxxB,KAA3B;AACD,GAbD;;AAeAG,QAAMixB,WAAN,GAAoB,YAAW;AAC7B,QAAIrD,cAAc,KAAKluB,OAAL,CAAakuB,WAA/B;AACA,SAAM,IAAIG,GAAV,IAAiBH,WAAjB,EAA+B;AAC7B,UAAII,SAASJ,YAAaG,GAAb,CAAb;AACA,WAAKD,QAAL,CAAeC,GAAf,IAAuB6E,YAAa5E,MAAb,CAAvB;AACD;AACF,GAND;;AAQA;;;;AAIAhuB,QAAMqxB,oBAAN,GAA6B,UAAUxxB,KAAV,EAAkB;AAC7C;AACA,QAAIgzB,MAAMhzB,SAASA,MAAMwF,MAAzB;;AAEA,SAAM,IAAID,IAAE,CAAZ,EAAeytB,OAAOztB,IAAIytB,GAA1B,EAA+BztB,GAA/B,EAAqC;AACnC,UAAIgkB,OAAOvpB,MAAMuF,CAAN,CAAX;AACAgkB,WAAKuE,cAAL;AACD;AACF,GARD;;AAUA;;AAEA;AACA;AACA,MAAIiF,cAAgB,YAAW;AAC7B;AACA;AACA;AACA;AACA;AACA,aAASA,WAAT,CAAsB5E,MAAtB,EAA+B;AAC7B;AACA,UAAK,OAAOA,MAAP,IAAiB,QAAtB,EAAiC;AAC/B,eAAOA,MAAP;AACD;AACD;AACA,UAAI/mB,OAAO2pB,KAAM5C,MAAN,EAAe8E,KAAf,CAAqB,GAArB,CAAX;AACA,UAAIC,QAAQ9rB,KAAK,CAAL,CAAZ;AACA;AACA,UAAI+rB,YAAYD,MAAM9iB,KAAN,CAAa,YAAb,CAAhB;AACA,UAAIzL,OAAOwuB,aAAaA,UAAU,CAAV,CAAxB;AACA,UAAIC,WAAWC,eAAgB1uB,IAAhB,EAAsBuuB,KAAtB,CAAf;AACA;AACA,UAAII,SAAS3F,WAAW4F,eAAX,CAA4BnsB,KAAK,CAAL,CAA5B,CAAb;AACA;AACA+mB,eAASmF,SAAS,UAAUhtB,IAAV,EAAiB;AACjC,eAAOA,QAAQgtB,OAAQF,SAAU9sB,IAAV,CAAR,CAAf;AACD,OAFQ;AAGT;AACA,gBAAUA,IAAV,EAAiB;AACf,eAAOA,QAAQ8sB,SAAU9sB,IAAV,CAAf;AACD,OAND;;AAQA,aAAO6nB,MAAP;AACD;;AAED;AACA,aAASkF,cAAT,CAAyB1uB,IAAzB,EAA+BuuB,KAA/B,EAAuC;AACrC;AACA,UAAKvuB,IAAL,EAAY;AACV,eAAO,SAASod,YAAT,CAAuBzb,IAAvB,EAA8B;AACnC,iBAAOA,KAAKyb,YAAL,CAAmBpd,IAAnB,CAAP;AACD,SAFD;AAGD;;AAED;AACA,aAAO,SAAS6uB,YAAT,CAAuBltB,IAAvB,EAA8B;AACnC,YAAImtB,QAAQntB,KAAKoX,aAAL,CAAoBwV,KAApB,CAAZ;AACA,eAAOO,SAASA,MAAMC,WAAtB;AACD,OAHD;AAID;;AAED,WAAOX,WAAP;AACD,GAjDiB,EAAlB;;AAmDA;AACApF,aAAW4F,eAAX,GAA6B;AAC3B;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,MAAY,UAAUI,GAAV,EAAgB;AAC1B,aAAOjtB,SAAUitB,GAAV,EAAe,EAAf,CAAP;AACD,KAFD,CAD2B;AAI3B;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,MAAc,UAAUA,GAAV,EAAgB;AAC5B,aAAOjf,WAAYif,GAAZ,CAAP;AACD,KAFD;AAJ2B,GAA7B;;AASA;;AAEA;AACAxzB,QAAMgyB,KAAN,GAAc,YAAW;AACvB,QAAIyB,YAAY,KAAK/zB,OAAL,CAAag0B,MAA7B;AACA,QAAK,CAACD,SAAN,EAAkB;AAChB;AACD;AACD;AACA,QAAIE,UAAU,GAAG7c,MAAH,CAAUzW,KAAV,CAAiBozB,SAAjB,EAA4B,KAAKvC,WAAjC,CAAd;AACA;AACA,QAAI0C,aAAaC,cAAeF,OAAf,EAAwB,KAAKj0B,OAAL,CAAasxB,aAArC,CAAjB;AACA,SAAKlxB,aAAL,CAAmB+V,IAAnB,CAAyB+d,UAAzB;AACA;AACA,QAAKH,aAAa,KAAKvC,WAAL,CAAiB,CAAjB,CAAlB,EAAwC;AACtC;AACA,WAAKA,WAAL,CAAiBnoB,OAAjB,CAA0B0qB,SAA1B;AACD;AACF,GAfD;;AAiBA;AACA,WAASI,aAAT,CAAwBF,OAAxB,EAAiCG,OAAjC,EAA2C;AACzC,WAAO,SAAS9F,MAAT,CAAiB+F,KAAjB,EAAwBC,KAAxB,EAAgC;AACrC;AACA,WAAM,IAAI5uB,IAAI,CAAd,EAAiBA,IAAIuuB,QAAQtuB,MAA7B,EAAqCD,GAArC,EAA2C;AACzC,YAAIsuB,SAASC,QAAQvuB,CAAR,CAAb;AACA,YAAIgR,IAAI2d,MAAMrG,QAAN,CAAgBgG,MAAhB,CAAR;AACA,YAAIjpB,IAAIupB,MAAMtG,QAAN,CAAgBgG,MAAhB,CAAR;AACA,YAAKtd,IAAI3L,CAAJ,IAAS2L,IAAI3L,CAAlB,EAAsB;AACpB;AACA,cAAIwpB,cAAcH,QAASJ,MAAT,MAAsB9wB,SAAtB,GAAkCkxB,QAASJ,MAAT,CAAlC,GAAsDI,OAAxE;AACA,cAAII,YAAYD,cAAc,CAAd,GAAkB,CAAC,CAAnC;AACA,iBAAO,CAAE7d,IAAI3L,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAAf,IAAqBypB,SAA5B;AACD;AACF;AACD,aAAO,CAAP;AACD,KAdD;AAeD;;AAED;;AAEA;AACAl0B,QAAMm0B,KAAN,GAAc,YAAW;AACvB,QAAIrD,aAAa,KAAKpxB,OAAL,CAAaoxB,UAA9B;AACA,QAAIsD,OAAO,KAAK/yB,KAAL,CAAYyvB,UAAZ,CAAX;AACA,QAAK,CAACsD,IAAN,EAAa;AACX;AACA,YAAM,IAAIC,KAAJ,CAAW,qBAAqBvD,UAAhC,CAAN;AACD;AACD;AACA;AACAsD,SAAK10B,OAAL,GAAe,KAAKA,OAAL,CAAcoxB,UAAd,CAAf;AACA,WAAOsD,IAAP;AACD,GAXD;;AAaAp0B,QAAMwpB,YAAN,GAAqB,YAAW;AAC9B;AACAhqB,aAASS,SAAT,CAAmBupB,YAAnB,CAAgCtiB,IAAhC,CAAsC,IAAtC;AACA,SAAKitB,KAAL,GAAa3K,YAAb;AACD,GAJD;;AAMAxpB,QAAMmqB,sBAAN,GAA+B,UAAUf,IAAV,EAAkB;AAC/C,WAAO,KAAK+K,KAAL,GAAahK,sBAAb,CAAqCf,IAArC,CAAP;AACD,GAFD;;AAIAppB,QAAM6rB,YAAN,GAAqB,UAAUhD,KAAV,EAAkB;AACrC,SAAKsL,KAAL,GAAatI,YAAb,CAA2BhD,KAA3B;AACD,GAFD;;AAIA7oB,QAAM0qB,iBAAN,GAA0B,YAAW;AACnC,WAAO,KAAKyJ,KAAL,GAAazJ,iBAAb,EAAP;AACD,GAFD;;AAIA1qB,QAAMqsB,iBAAN,GAA0B,YAAW;AACnC,WAAO,KAAK8H,KAAL,GAAa9H,iBAAb,EAAP;AACD,GAFD;;AAIA;;AAEA;AACArsB,QAAMusB,QAAN,GAAiB,UAAUlM,KAAV,EAAkB;AACjC,QAAIxgB,QAAQ,KAAKysB,QAAL,CAAejM,KAAf,CAAZ;AACA,QAAK,CAACxgB,MAAMwF,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,QAAIvF,gBAAgB,KAAKw0B,kBAAL,CAAyBz0B,KAAzB,CAApB;AACA;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBgX,MAAnB,CAA2BhX,aAA3B,CAArB;AACD,GATD;;AAWA;AACAE,QAAMwsB,SAAN,GAAkB,UAAUnM,KAAV,EAAkB;AAClC,QAAIxgB,QAAQ,KAAKmpB,QAAL,CAAe3I,KAAf,CAAZ;AACA,QAAK,CAACxgB,MAAMwF,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,SAAKmkB,YAAL;AACA,SAAKC,aAAL;AACA;AACA,QAAI3pB,gBAAgB,KAAKw0B,kBAAL,CAAyBz0B,KAAzB,CAApB;AACA;AACA,SAAK+pB,WAAL,CAAkB,KAAK9pB,aAAvB;AACA;AACA,SAAKA,aAAL,GAAqBA,cAAcgX,MAAd,CAAsB,KAAKhX,aAA3B,CAArB;AACA,SAAKD,KAAL,GAAaA,MAAMiX,MAAN,CAAc,KAAKjX,KAAnB,CAAb;AACD,GAfD;;AAiBAG,QAAMs0B,kBAAN,GAA2B,UAAUz0B,KAAV,EAAkB;AAC3C,QAAI6xB,WAAW,KAAKC,OAAL,CAAc9xB,KAAd,CAAf;AACA,SAAK+mB,IAAL,CAAW8K,SAASQ,QAApB;AACA;AACA,SAAKrL,MAAL,CAAa6K,SAASrS,OAAtB;AACA;AACA,SAAKuK,WAAL,CAAkB8H,SAASrS,OAA3B,EAAoC,IAApC;AACA,WAAOqS,SAASrS,OAAhB;AACD,GARD;;AAUA;;;;AAIArf,QAAMu0B,MAAN,GAAe,UAAUlU,KAAV,EAAkB;AAC/B,QAAIxgB,QAAQ,KAAKysB,QAAL,CAAejM,KAAf,CAAZ;AACA,QAAK,CAACxgB,MAAMwF,MAAZ,EAAqB;AACnB;AACD;AACD;AACA,QAAID,CAAJ,EAAOgkB,IAAP;AACA,QAAIyJ,MAAMhzB,MAAMwF,MAAhB;AACA,SAAMD,IAAE,CAAR,EAAWA,IAAIytB,GAAf,EAAoBztB,GAApB,EAA0B;AACxBgkB,aAAOvpB,MAAMuF,CAAN,CAAP;AACA,WAAKxF,OAAL,CAAayd,WAAb,CAA0B+L,KAAKxpB,OAA/B;AACD;AACD;AACA,QAAI40B,sBAAsB,KAAK7C,OAAL,CAAc9xB,KAAd,EAAsBwf,OAAhD;AACA;AACA,SAAMja,IAAE,CAAR,EAAWA,IAAIytB,GAAf,EAAoBztB,GAApB,EAA0B;AACxBvF,YAAMuF,CAAN,EAASglB,eAAT,GAA2B,IAA3B;AACD;AACD,SAAKmH,OAAL;AACA;AACA,SAAMnsB,IAAE,CAAR,EAAWA,IAAIytB,GAAf,EAAoBztB,GAApB,EAA0B;AACxB,aAAOvF,MAAMuF,CAAN,EAASglB,eAAhB;AACD;AACD,SAAKvD,MAAL,CAAa2N,mBAAb;AACD,GAxBD;;AA0BA,MAAIC,UAAUz0B,MAAMkX,MAApB;AACAlX,QAAMkX,MAAN,GAAe,UAAUmJ,KAAV,EAAkB;AAC/BA,YAAQZ,MAAMG,SAAN,CAAiBS,KAAjB,CAAR;AACA,QAAIwM,cAAc,KAAKF,QAAL,CAAetM,KAAf,CAAlB;AACA;AACAoU,YAAQvtB,IAAR,CAAc,IAAd,EAAoBmZ,KAApB;AACA;AACA,QAAIwS,MAAMhG,eAAeA,YAAYxnB,MAArC;AACA;AACA,SAAM,IAAID,IAAE,CAAZ,EAAeytB,OAAOztB,IAAIytB,GAA1B,EAA+BztB,GAA/B,EAAqC;AACnC,UAAIgkB,OAAOyD,YAAYznB,CAAZ,CAAX;AACA;AACAqa,YAAMM,UAAN,CAAkB,KAAKjgB,aAAvB,EAAsCspB,IAAtC;AACD;AACF,GAbD;;AAeAppB,QAAM00B,OAAN,GAAgB,YAAW;AACzB;AACA,SAAM,IAAItvB,IAAE,CAAZ,EAAeA,IAAI,KAAKvF,KAAL,CAAWwF,MAA9B,EAAsCD,GAAtC,EAA4C;AAC1C,UAAIgkB,OAAO,KAAKvpB,KAAL,CAAWuF,CAAX,CAAX;AACAgkB,WAAKsE,QAAL,CAAclX,MAAd,GAAuBpO,KAAKoO,MAAL,EAAvB;AACD;AACD,SAAK9W,OAAL,CAAag0B,MAAb,GAAsB,QAAtB;AACA,SAAK1B,KAAL;AACA,SAAKR,OAAL;AACD,GATD;;AAWA;;;;;;;;AAQAxxB,QAAM8xB,aAAN,GAAsB,UAAUxrB,EAAV,EAAcW,IAAd,EAAqB;AACzC;AACA,QAAIyb,qBAAqB,KAAKhjB,OAAL,CAAagjB,kBAAtC;AACA;AACA,SAAKhjB,OAAL,CAAagjB,kBAAb,GAAkC,CAAlC;AACA;AACA,QAAIjI,cAAcnU,GAAGjG,KAAH,CAAU,IAAV,EAAgB4G,IAAhB,CAAlB;AACA;AACA,SAAKvH,OAAL,CAAagjB,kBAAb,GAAkCA,kBAAlC;AACA,WAAOjI,WAAP;AACD,GAVD;;AAYA;;AAEA;;;;AAIAza,QAAM20B,uBAAN,GAAgC,YAAW;AACzC,WAAO,KAAK70B,aAAL,CAAmBypB,GAAnB,CAAwB,UAAUH,IAAV,EAAiB;AAC9C,aAAOA,KAAKxpB,OAAZ;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;AAEA,SAAO4tB,UAAP;AAED,CA1lBC,CAAF,C;;;;;;AC91FA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AAAA;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,GAAG;AACH;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;AC7OD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;ACpDD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CACA;AAAA;AAAA;AAAA,oGACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,YAAY,cAAc;;AAE1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,cAAc;;AAE1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,cAAc,kBAAkB;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA,CAAC;;;;;;;;;;;;ACziBD;;;;;;AAME,WAAUzuB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAQ,CACJ,sBADI,EAEJ,uBAFI,CAAR,oCAIED,OAJF;AAAA;AAAA;AAAA;AAKD,GAPD,MAOO,IAAK,QAAOE,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOC,OAAzC,EAAmD;AACxD;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,EAEfA,QAAQ,gBAAR,CAFe,CAAjB;AAID,GANM,MAMA;AACL;AACAJ,YACED,OAAOM,OAAP,CAAeC,UADjB,EAEEP,OAAOovB,OAFT;AAID;AAEF,CAxBC,EAwBCpvB,MAxBD,EAwBS,SAASC,OAAT,CAAkBM,UAAlB,EAA8B6uB,OAA9B,EAAwC;AACnD;;AAEA;;AAEE;;AACA,MAAImC,cAAchxB,WAAWgC,MAAX,CAAkB,SAAlB,CAAlB;;AAEA,MAAItB,QAAQswB,YAAYrwB,SAAxB;;AAEA,MAAIswB,kBAAkB;AACpBxE,uBAAmB,IADC;AAEpB3qB,YAAQ,IAFY;AAGpBV,qBAAiB;AAHG,GAAtB;;AAMA;AACA,OAAM,IAAIka,MAAV,IAAoBuT,QAAQluB,SAA5B,EAAwC;AACtC;AACA,QAAK,CAACswB,gBAAiB3V,MAAjB,CAAN,EAAkC;AAChC5a,YAAO4a,MAAP,IAAkBuT,QAAQluB,SAAR,CAAmB2a,MAAnB,CAAlB;AACD;AACF;;AAED,MAAIyT,iBAAiBruB,MAAMquB,cAA3B;AACAruB,QAAMquB,cAAN,GAAuB,YAAW;AAChC;AACA,SAAKxuB,KAAL,GAAa,KAAKJ,OAAL,CAAaK,aAA1B;AACAuuB,mBAAennB,IAAf,CAAqB,IAArB;AACD,GAJD;;AAMA;AACA,MAAIoc,aAAatjB,MAAMsjB,UAAvB;AACAtjB,QAAMsjB,UAAN,GAAmB,UAAUpJ,MAAV,EAAmB;AACpC,QAAKA,UAAU,UAAf,EAA4B;AAC1B,aAAO,KAAKxa,OAAL,CAAasvB,UAAb,KAA4BpsB,SAA5B,GACL,KAAKlD,OAAL,CAAasvB,UADR,GACqB,KAAKtvB,OAAL,CAAa0uB,QADzC;AAED;AACD,WAAO9K,WAAWjjB,KAAX,CAAkB,KAAKZ,OAAvB,EAAgCa,SAAhC,CAAP;AACD,GAND;;AAQA,SAAOgwB,WAAP;AAED,CAnEC,CAAF,C;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CACA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,YAAY;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;AC9OD;;;;AAIE,WAAUvxB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAQ,CACJ,sBADI,CAAR,oCAGED,OAHF;AAAA;AAAA;AAAA;AAID,GAND,MAMO,IAAK,QAAOG,OAAP,yCAAOA,OAAP,MAAkB,QAAvB,EAAkC;AACvC;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,CAAjB;AAGD,GALM,MAKA;AACL;AACAJ,YACED,OAAOM,OAAP,CAAeC,UADjB;AAGD;AAEF,CArBC,EAqBCP,MArBD,EAqBS,SAASC,OAAT,CAAkBM,UAAlB,EAA+B;AAC1C;;AAEA,MAAIkxB,UAAUlxB,WAAWgC,MAAX,CAAkB,SAAlB,CAAd;;AAEA,MAAItB,QAAQwwB,QAAQvwB,SAApB;;AAEAD,QAAMwpB,YAAN,GAAqB,YAAW;AAC9B,SAAKne,CAAL,GAAS,CAAT;AACA,SAAKC,CAAL,GAAS,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","file":"envira-min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5034528d3f2cdb572116","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","/**\n * Isotope LayoutMode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'get-size/get-size',\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.LayoutMode = factory(\n      window.getSize,\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( getSize, Outlayer ) {\n  'use strict';\n\n  // layout mode class\n  function LayoutMode( isotope ) {\n    this.isotope = isotope;\n    // link properties\n    if ( isotope ) {\n      this.options = isotope.options[ this.namespace ];\n      this.element = isotope.element;\n      this.items = isotope.filteredItems;\n      this.size = isotope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Isotope instance as `this`\n  **/\n  var facadeMethods = [\n    '_resetLayout',\n    '_getItemLayoutPosition',\n    '_manageStamp',\n    '_getContainerSize',\n    '_getElementOffset',\n    'needsResizeLayout',\n    '_getOption'\n  ];\n\n  facadeMethods.forEach( function( methodName ) {\n    proto[ methodName ] = function() {\n      return Outlayer.prototype[ methodName ].apply( this.isotope, arguments );\n    };\n  });\n\n  // -----  ----- //\n\n  // for horizontal layout modes, check vertical size\n  proto.needsVerticalResizeLayout = function() {\n    // don't trigger if size did not change\n    var size = getSize( this.isotope.element );\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.isotope.size && size;\n    return hasSizes && size.innerHeight != this.isotope.size.innerHeight;\n  };\n\n  // ----- measurements ----- //\n\n  proto._getMeasurement = function() {\n    this.isotope._getMeasurement.apply( this, arguments );\n  };\n\n  proto.getColumnWidth = function() {\n    this.getSegmentSize( 'column', 'Width' );\n  };\n\n  proto.getRowHeight = function() {\n    this.getSegmentSize( 'row', 'Height' );\n  };\n\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n  proto.getSegmentSize = function( segment, size ) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size;\n    // columnWidth / outerWidth // rowHeight / outerHeight\n    this._getMeasurement( segmentName, outerSize );\n    // got rowHeight or columnWidth, we can chill\n    if ( this[ segmentName ] ) {\n      return;\n    }\n    // fall back to item of first element\n    var firstItemSize = this.getFirstItemSize();\n    this[ segmentName ] = firstItemSize && firstItemSize[ outerSize ] ||\n      // or size of container\n      this.isotope.size[ 'inner' + size ];\n  };\n\n  proto.getFirstItemSize = function() {\n    var firstItem = this.isotope.filteredItems[0];\n    return firstItem && firstItem.element && getSize( firstItem.element );\n  };\n\n  // ----- methods that should reference isotope ----- //\n\n  proto.layout = function() {\n    this.isotope.layout.apply( this.isotope, arguments );\n  };\n\n  proto.getSize = function() {\n    this.isotope.getSize();\n    this.size = this.isotope.size;\n  };\n\n  // -------------------------- create -------------------------- //\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function( namespace, options ) {\n\n    function Mode() {\n      LayoutMode.apply( this, arguments );\n    }\n\n    Mode.prototype = Object.create( proto );\n    Mode.prototype.constructor = Mode;\n\n    // default options\n    if ( options ) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace;\n    // register in Isotope\n    LayoutMode.modes[ namespace ] = Mode;\n\n    return Mode;\n  };\n\n  return LayoutMode;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-mode.js","/*!\n * getSize v2.0.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false, console: false */\n\n( function( window, factory ) {\n  'use strict';\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( function() {\n      return factory();\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See http://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\n  body.removeChild( div );\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/get-size/get-size.js\n// module id = 2\n// module chunks = 0","/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/outlayer/outlayer.js\n// module id = 3\n// module chunks = 0","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/ev-emitter/ev-emitter.js\n// module id = 4\n// module chunks = 0","import './lib/mousewheel.js';\nimport './gallery-themes.js';\nimport './lib/jquery.justifiedGallery.js';\nimport './lib/enviraJustifiedGallery-extensions.js';\nimport './lib/isotope.js';\nimport './lib/imagesloaded.js';\nimport './lib/envirabox.js';\nimport './lib/envirabox-fullscreen.js';\nimport './lib/envirabox-media.js';\nimport './lib/envirabox-wheel.js';\nimport './lib/envirabox-guestures.js';\nimport './lib/envirabox-thumbs.js';\nimport './lib/envirabox-slideshow.js';\n\nimport Envira from './gallery-init.js';\nimport Envira_Link from './gallery-link.js';\n\nvar envira_galleries = window.envira_galleries || {},\n\tenvira_links = window.envira_links || {};\n\n;(function ( $, window, document, Envira, Envira_Link, envira_gallery, envira_galleries ) {\n\t\t\n\t$(function() {\n\t\t\n\t\twindow.envira_galleries = envira_galleries;\n\t\twindow.envira_links = envira_links\n\n\t\t$( document ).on( 'envira_load', function(e){\n\t\t\t\n\t\t\t$('.envira-gallery-public').each(function() {\n\t\t\t\t\n\t\t\t\tlet $this \t\t\t  = $( this ),\n\t\t\t\t\t$id \t\t\t  = $this.data('envira-id'),\n\t\t\t\t\t$envira_galleries = $this.data('gallery-config'),\n\t\t\t\t\t$envira_images\t   = $this.data('gallery-images'),\n\t\t\t\t\t$envira_lightbox  = $this.data('lightbox-theme');\t\t\t\n\t\t\t\t\t\n\t\t\t\tenvira_galleries[ $envira_galleries[ 'gallery_id' ] ] = new Envira( $id, $envira_galleries, $envira_images, $envira_lightbox );\t\n\t\n\t\t\t});\t\t\n\t\t\t$( '.envira-gallery-links' ).each(function( ) {\n\t\t\t\t\n\t\t\t\tlet $this = $( this ),\t\t\t\t\t\n\t\t\t\t\t$envira_galleries = $this.data('gallery-config'),\n\t\t\t\t\t$envira_images = $this.data('gallery-images'),\n\t\t\t\t\t$envira_lightbox = $this.data('lightbox-theme');\t\t\t\n\t\t\t\t\t\n\t\t\t\tenvira_links[ $envira_galleries[ 'gallery_id' ] ] = new Envira_Link( $envira_galleries, $envira_images, $envira_lightbox );\t\n\t\t\t\n\t\t\t});\t\t\n\t\t\t\n\t\t\t$(document).trigger('envira_loaded', [envira_galleries, envira_links] );\n\t\t\t\n\t\t});\t\t\t\t\n\t\t\n\t\t$(document).trigger('envira_load');\n\t\t\n\t\tif( envira_gallery.debug !== undefined && envira_gallery.debug ){\n\n\t\t\tconsole.log( envira_links );\n\t\t\tconsole.log( envira_galleries );\n\t\t\t\n\t\t}\n\t\t\n\t\t$( 'body' ).on( 'click', 'div.envirabox-title a[href*=\"#\"]:not([href=\"#\"])', function( e ) {\n\t\n\t\t\tif ( location.pathname.replace( /^\\//, '' ) == this.pathname.replace( /^\\//, '' ) && location.hostname == this.hostname ) {\n\t\t\t\t$.envirabox.close();\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t} );\n\n\t\t/* setup lazy load event */\t  \n\t\t$( document ).on( \"envira_image_lazy_load_complete\", function( event ) {\n\t\t\t\n\t\t\tif ( event !== undefined && event.image_id !== undefined && event.image_id !== null ) {\n\n\n\t\n\t\t\t\t// if ( event.image_id === undefined ) {\n\t\t\t\t// \tconsole.log('help2');\n\t\t\t\t// \tconsole.log ('event.image_id is undefined');\n\t\t\t\t// \treturn;\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.log('help');\n\t\t\t\t// \tconsole.log( 'event.image_id' );\n\t\t\t\t// \tconsole.log( event.image_id );\n\t\t\t\t// }\n\n\t\t\t\tlet envira_container = $('div.envira-gallery-public').find('img#' + event.image_id);\t \n\n\t\t\t\t// console.log( 'envira_container' );\n\t\t\t\t// console.log( envira_container );\n\t\n\t\t\t\tif ( envira_container.closest('div.envira-gallery-public').hasClass('envira-gallery-0-columns') ) {\n\t\t\t\t\t\n\t\t\t\t\t/* this is an automatic gallery */\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'div.envira-gallery-position-overlay' ).delay( 100 ).show();\n\t\n\t\t\t\t} else {\t\t\t\t\n\n\t\t\t\t\t/* this is a legacy gallery */\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'div.envira-gallery-position-overlay' ).delay( 100 ).show();\n\t\n\t\t\t\t\t/* re-do the padding bottom */\n\t\t\t\t\t/* $padding_bottom = ( $output_height / $output_width ) * 100; */\n\t\n\t\t\t\t\tvar envira_lazy_width = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-lazy').width();\n\t\t\t\t\tvar ratio1 = ( event.naturalHeight / event.naturalWidth );\n\t\t\t\t\tvar ratio2 = ( event.naturalHeight / envira_lazy_width );\n\t\n\t\t\t\t\tif ( ratio2 < ratio1 ) {\n\t\t\t\t\t\tvar ratio = ratio2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar ratio = ratio1;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar padding_bottom = ratio * 100;\n\t\t\t\t\tif ( envira_container.closest('div.envira-gallery-public').parent().hasClass('envira-gallery-theme-sleek') ) {\n\t\t\t\t\t\t// add additional padding for this theme\n\t\t\t\t\t\tpadding_bottom = padding_bottom + 2;\n\t\t\t\t\t}\t\t\t\t \n\t\t\t\t\t\n\t\t\t\t    var div_envira_lazy = $( envira_container ).closest('div.envira-gallery-item-inner').find('div.envira-lazy');\n\t\t\t\t    div_envira_lazy.css('padding-bottom', padding_bottom + '%').attr('data-envira-changed', 'true');\n\t\t\t\t    // div_envira_lazy.addClass('changed');\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-title' ).delay( 1000 ).css('visibility', 'visible');\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-caption' ).delay( 1000 ).css('visibility', 'visible');\n\t\n\t\t\t\t\tif ( window[\"envira_container_\" + event.gallery_id] !== undefined ) {\n\t\n\t\t\t\t\t\tif ( $('#envira-gallery-' + event.gallery_id).hasClass('enviratope') ) {\n\t\n\t\t\t\t\t\t\twindow[\"envira_container_\" + event.gallery_id].on( 'layoutComplete',\n\t\t\t\t\t\t\t  function( event, laidOutItems ) {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-title' ).delay( 1000 ).css('visibility', 'visible');\n\t\t\t\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-caption' ).delay( 1000 ).css('visibility', 'visible');\n\t\n\t\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t);\n\t\n\t\t\t\t\t\t} else {\n\t\n\t\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t});\n\n\t} );\n\n})( jQuery , window, document, Envira, Envira_Link, envira_gallery, envira_galleries );\n\n\n// WEBPACK FOOTER //\n// ./assets/js/envira.js","/*!\n * jQuery Mousewheel 3.1.13\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n */\n\n(function (factory) {\n    if ( typeof define === 'function' && define.amd ) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n\n    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?\n                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n        slice  = Array.prototype.slice,\n        nullLowestDeltaTimeout, lowestDelta;\n\n    if ( $.event.fixHooks ) {\n        for ( var i = toFix.length; i; ) {\n            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;\n        }\n    }\n\n    var special = $.event.special.mousewheel = {\n        version: '3.1.12',\n\n        setup: function() {\n            if ( this.addEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.addEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = handler;\n            }\n            // Store the line height and page height for this particular element\n            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n        },\n\n        teardown: function() {\n            if ( this.removeEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.removeEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = null;\n            }\n            // Clean up the data we added to the element\n            $.removeData(this, 'mousewheel-line-height');\n            $.removeData(this, 'mousewheel-page-height');\n        },\n\n        getLineHeight: function(elem) {\n            var $elem = $(elem),\n                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n            if (!$parent.length) {\n                $parent = $('body');\n            }\n            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n        },\n\n        getPageHeight: function(elem) {\n            return $(elem).height();\n        },\n\n        settings: {\n            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below\n            normalizeOffset: true  // calls getBoundingClientRect for each event\n        }\n    };\n\n    $.fn.extend({\n        mousewheel: function(fn) {\n            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n        },\n\n        unmousewheel: function(fn) {\n            return this.unbind('mousewheel', fn);\n        }\n    });\n\n\n    function handler(event) {\n        var orgEvent   = event || window.event,\n            args       = slice.call(arguments, 1),\n            delta      = 0,\n            deltaX     = 0,\n            deltaY     = 0,\n            absDelta   = 0,\n            offsetX    = 0,\n            offsetY    = 0;\n        event = $.event.fix(orgEvent);\n        event.type = 'mousewheel';\n\n        // Old school scrollwheel delta\n        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }\n        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }\n        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }\n        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }\n\n        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n            deltaX = deltaY * -1;\n            deltaY = 0;\n        }\n\n        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        // New school wheel delta (wheel event)\n        if ( 'deltaY' in orgEvent ) {\n            deltaY = orgEvent.deltaY * -1;\n            delta  = deltaY;\n        }\n        if ( 'deltaX' in orgEvent ) {\n            deltaX = orgEvent.deltaX;\n            if ( deltaY === 0 ) { delta  = deltaX * -1; }\n        }\n\n        // No change actually happened, no reason to go any further\n        if ( deltaY === 0 && deltaX === 0 ) { return; }\n\n        // Need to convert lines and pages to pixels if we aren't already in pixels\n        // There are three delta modes:\n        //   * deltaMode 0 is by pixels, nothing to do\n        //   * deltaMode 1 is by lines\n        //   * deltaMode 2 is by pages\n        if ( orgEvent.deltaMode === 1 ) {\n            var lineHeight = $.data(this, 'mousewheel-line-height');\n            delta  *= lineHeight;\n            deltaY *= lineHeight;\n            deltaX *= lineHeight;\n        } else if ( orgEvent.deltaMode === 2 ) {\n            var pageHeight = $.data(this, 'mousewheel-page-height');\n            delta  *= pageHeight;\n            deltaY *= pageHeight;\n            deltaX *= pageHeight;\n        }\n\n        // Store lowest absolute delta to normalize the delta values\n        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n        if ( !lowestDelta || absDelta < lowestDelta ) {\n            lowestDelta = absDelta;\n\n            // Adjust older deltas if necessary\n            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                lowestDelta /= 40;\n            }\n        }\n\n        // Adjust older deltas if necessary\n        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n            // Divide all the things by 40!\n            delta  /= 40;\n            deltaX /= 40;\n            deltaY /= 40;\n        }\n\n        // Get a whole, normalized value for the deltas\n        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);\n        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);\n        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);\n\n        // Normalise offsetX and offsetY properties\n        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {\n            var boundingRect = this.getBoundingClientRect();\n            offsetX = event.clientX - boundingRect.left;\n            offsetY = event.clientY - boundingRect.top;\n        }\n\n        // Add information to the event object\n        event.deltaX = deltaX;\n        event.deltaY = deltaY;\n        event.deltaFactor = lowestDelta;\n        event.offsetX = offsetX;\n        event.offsetY = offsetY;\n        // Go ahead and set deltaMode to 0 since we converted to pixels\n        // Although this is a little odd since we overwrite the deltaX/Y\n        // properties with normalized deltas.\n        event.deltaMode = 0;\n\n        // Add event and delta to the front of the arguments\n        args.unshift(event, delta, deltaX, deltaY);\n\n        // Clearout lowestDelta after sometime to better\n        // handle multiple device types that give different\n        // a different lowestDelta\n        // Ex: trackpad = 3 and mouse wheel = 120\n        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }\n        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n\n        return ($.event.dispatch || $.event.handle).apply(this, args);\n    }\n\n    function nullLowestDelta() {\n        lowestDelta = null;\n    }\n\n    function shouldAdjustOldDeltas(orgEvent, absDelta) {\n        // If this is an older event and the delta is divisable by 120,\n        // then we are assuming that the browser is treating this as an\n        // older mouse wheel event and that we should divide the deltas\n        // by 40 to try and get a more usable deltaFactor.\n        // Side note, this actually impacts the reported scroll distance\n        // in older browsers and can cause scrolling to be slower than native.\n        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n    }\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/mousewheel.js","function jg_effect_desaturate(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray,\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        px = imageData.data;\n        length = px.length;\n\n        for (; i < length; i += 4) {\n            gray = px[i] * .3 + px[i + 1] * .59 + px[i + 2] * .11;\n            px[i] = px[i + 1] = px[i + 2] = gray;\n        }\n\n        context.putImageData(imageData, 0, 0);\n        return canvas.toDataURL();\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_threshold(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray,\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        px = imageData.data;\n        length = px.length;\n\n        threshold = 120;\n\n        for (var i=0; i<length; i+=4) {\n            var r = px[i];\n            var g = px[i+1];\n            var b = px[i+2];\n            var v = (0.2126*r + 0.7152*g + 0.0722*b >= threshold) ? 255 : 0;\n            px[i] = px[i+1] = px[i+2] = v\n        }\n\n        context.putImageData(imageData, 0, 0);\n        return canvas.toDataURL();\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_blur(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray, top_x = 0, top_y = 0, radius = 30, iterations = 1\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        var imageData;\n        var width = img.width;\n        var height = img.height;\n\n        imageData = context.getImageData( top_x, top_y, width, height );\n        var pixels = imageData.data;\n\n        var rsum,gsum,bsum,asum,x,y,i,p,p1,p2,yp,yi,yw,idx;\n        var wm = width - 1;\n        var hm = height - 1;\n        var wh = width * height;\n        var rad1 = radius + 1;\n\n        var r = [];\n        var g = [];\n        var b = [];\n\n        var mul_sum = mul_table[radius];\n        var shg_sum = shg_table[radius];\n\n        var vmin = [];\n        var vmax = [];\n\n        while ( iterations-- > 0 ){\n            yw = yi = 0;\n\n            for ( y=0; y < height; y++ ){\n                rsum = pixels[yw]   * rad1;\n                gsum = pixels[yw+1] * rad1;\n                bsum = pixels[yw+2] * rad1;\n\n                for( i = 1; i <= radius; i++ ){\n                    p = yw + (((i > wm ? wm : i )) << 2 );\n                    rsum += pixels[p++];\n                    gsum += pixels[p++];\n                    bsum += pixels[p++];\n                }\n\n                for ( x = 0; x < width; x++ ){\n                    r[yi] = rsum;\n                    g[yi] = gsum;\n                    b[yi] = bsum;\n\n                    if( y==0) {\n                        vmin[x] = ( ( p = x + rad1) < wm ? p : wm ) << 2;\n                        vmax[x] = ( ( p = x - radius) > 0 ? p << 2 : 0 );\n                    }\n\n                    p1 = yw + vmin[x];\n                    p2 = yw + vmax[x];\n\n                    rsum += pixels[p1++] - pixels[p2++];\n                    gsum += pixels[p1++] - pixels[p2++];\n                    bsum += pixels[p1++] - pixels[p2++];\n\n                    yi++;\n                }\n                yw += ( width << 2 );\n            }\n\n            for ( x = 0; x < width; x++ ){\n                yp = x;\n                rsum = r[yp] * rad1;\n                gsum = g[yp] * rad1;\n                bsum = b[yp] * rad1;\n\n                for( i = 1; i <= radius; i++ ){\n                  yp += ( i > hm ? 0 : width );\n                  rsum += r[yp];\n                  gsum += g[yp];\n                  bsum += b[yp];\n                }\n\n                yi = x << 2;\n                for ( y = 0; y < height; y++){\n                    pixels[yi]   = (rsum * mul_sum) >>> shg_sum;\n                    pixels[yi+1] = (gsum * mul_sum) >>> shg_sum;\n                    pixels[yi+2] = (bsum * mul_sum) >>> shg_sum;\n\n                    if( x == 0 ) {\n                        vmin[y] = ( ( p = y + rad1) < hm ? p : hm ) * width;\n                        vmax[y] = ( ( p = y - radius) > 0 ? p * width : 0 );\n                    }\n\n                    p1 = x + vmin[y];\n                    p2 = x + vmax[y];\n\n                    rsum += r[p1] - r[p2];\n                    gsum += g[p1] - g[p2];\n                    bsum += b[p1] - b[p2];\n\n                    yi += width << 2;\n                }\n            }\n        }\n        context.putImageData( imageData, top_x, top_y );\n\n        return canvas.toDataURL();\n\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_vintage( img ) {\n    var options = {\n        onError: function() {\n            alert('ERROR');\n        }\n    };\n    var effect = {\n        vignette: 1,\n        sepia: true,\n        noise: 50,\n        desaturate: .2,\n        lighten: .1\n\n    };\n    new VintageJS(img, options, effect);\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-themes.js","/*!\n * Justified Gallery - v3.6.2\n * http://miromannino.github.io/Justified-Gallery/\n * Copyright (c) 2016 Miro Mannino\n * Licensed under the MIT license.\n */\n(function($) {\n\n  function hasScrollBar() {\n    return $(\"body\").height() > $(window).height();\n  }\n  /**\n   * Justified Gallery controller constructor\n   *\n   * @param $gallery the gallery to build\n   * @param settings the settings (the defaults are in $.fn.justifiedGallery.defaults)\n   * @constructor\n   */\n  var JustifiedGallery = function ($gallery, settings) {\n\n    this.settings = settings;\n    this.checkSettings();\n\n    this.imgAnalyzerTimeout = null;\n    this.entries = null;\n    this.buildingRow = {\n      entriesBuff : [],\n      width : 0,\n      height : 0,\n      aspectRatio : 0\n    };\n    this.lastAnalyzedIndex = -1;\n    this.yield = {\n      every : 2, // do a flush every n flushes (must be greater than 1)\n      flushed : 0 // flushed rows without a yield\n    };\n    this.border = settings.border >= 0 ? settings.border : settings.margins;\n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n    this.offY = this.border;\n    this.rows = 0;\n    this.spinner = {\n      phase : 0,\n      timeSlot : 150,\n      $el : $('<div class=\"spinner\"><span></span><span></span><span></span></div>'),\n      intervalId : null\n    };\n    this.checkWidthIntervalId = null;\n    this.galleryWidth = $gallery.width();\n    this.$gallery = $gallery;\n\n  };\n\n  /** @returns {String} the best suffix given the width and the height */\n  JustifiedGallery.prototype.getSuffix = function (width, height) {\n    var longestSide, i;\n    longestSide = (width > height) ? width : height;\n    for (i = 0; i < this.suffixRanges.length; i++) {\n      if (longestSide <= this.suffixRanges[i]) {\n        return this.settings.sizeRangeSuffixes[this.suffixRanges[i]];\n      }\n    }\n    return this.settings.sizeRangeSuffixes[this.suffixRanges[i - 1]];\n  };\n\n  /**\n   * Remove the suffix from the string\n   *\n   * @returns {string} a new string without the suffix\n   */\n  JustifiedGallery.prototype.removeSuffix = function (str, suffix) {\n    return str.substring(0, str.length - suffix.length);\n  };\n\n  /**\n   * @returns {boolean} a boolean to say if the suffix is contained in the str or not\n   */\n  JustifiedGallery.prototype.endsWith = function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  };\n\n  /**\n   * Get the used suffix of a particular url\n   *\n   * @param str\n   * @returns {String} return the used suffix\n   */\n  JustifiedGallery.prototype.getUsedSuffix = function (str) {\n    for (var si in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(si)) {\n        if (this.settings.sizeRangeSuffixes[si].length === 0) continue;\n        if (this.endsWith(str, this.settings.sizeRangeSuffixes[si])) return this.settings.sizeRangeSuffixes[si];\n      }\n    }\n    return '';\n  };\n\n  /**\n   * Given an image src, with the width and the height, returns the new image src with the\n   * best suffix to show the best quality thumbnail.\n   *\n   * @returns {String} the suffix to use\n   */\n  JustifiedGallery.prototype.newSrc = function (imageSrc, imgWidth, imgHeight) {\n    var newImageSrc;\n\n    if (this.settings.thumbnailPath) {\n      newImageSrc = this.settings.thumbnailPath(imageSrc, imgWidth, imgHeight);\n    } else {\n      var matchRes = imageSrc.match(this.settings.extension);\n      var ext = (matchRes !== null) ? matchRes[0] : '';\n      newImageSrc = imageSrc.replace(this.settings.extension, '');\n      newImageSrc = this.removeSuffix(newImageSrc, this.getUsedSuffix(newImageSrc));\n      newImageSrc += this.getSuffix(imgWidth, imgHeight) + ext;\n    }\n\n    return newImageSrc;\n  };\n\n  /**\n   * Shows the images that is in the given entry\n   *\n   * @param $entry the entry\n   * @param callback the callback that is called when the show animation is finished\n   */\n  JustifiedGallery.prototype.showImg = function ($entry, callback) {\n    if (this.settings.cssAnimation) {\n      $entry.addClass('entry-visible');\n      if (callback) callback();\n    } else {\n      $entry.stop().fadeTo(this.settings.imagesAnimationDuration, 1.0, callback);\n    }\n  };\n\n  /**\n   * Extract the image src form the image, looking from the 'safe-src', and if it can't be found, from the\n   * 'src' attribute. It saves in the image data the 'jg.originalSrc' field, with the extracted src.\n   *\n   * @param $image the image to analyze\n   * @returns {String} the extracted src\n   */\n  JustifiedGallery.prototype.extractImgSrcFromImage = function ($image) {\n    var imageSrc = (typeof $image.data('safe-src') !== 'undefined') ? $image.data('safe-src') : $image.attr('src');\n    $image.data('jg.originalSrc', imageSrc);\n    return imageSrc;\n  };\n\n  /** @returns {jQuery} the image in the given entry */\n  JustifiedGallery.prototype.imgFromEntry = function ($entry) {\n    var $img = $entry.find('> img');\n    if ($img.length === 0) $img = $entry.find('> a > img');\n    return $img.length === 0 ? null : $img;\n  };\n\n  /** @returns {jQuery} the caption in the given entry */\n  JustifiedGallery.prototype.captionFromEntry = function ($entry) {\n    var $caption = $entry.find('.caption');\n    return $caption.length === 0 ? null : $caption;\n  };\n\n  /**\n   * Display the entry\n   *\n   * @param {jQuery} $entry the entry to display\n   * @param {int} x the x position where the entry must be positioned\n   * @param y the y position where the entry must be positioned\n   * @param imgWidth the image width\n   * @param imgHeight the image height\n   * @param rowHeight the row height of the row that owns the entry\n   */\n  JustifiedGallery.prototype.displayEntry = function ($entry, x, y, imgWidth, imgHeight, rowHeight) {\n    $entry.width(imgWidth);\n    $entry.height(rowHeight);\n    $entry.css('top', y);\n    $entry.css('left', x);\n\n    var $image = this.imgFromEntry($entry);\n    if ($image !== null) {\n      $image.css('width', imgWidth);\n      $image.css('height', imgHeight);\n      $image.css('margin-left', - imgWidth / 2);\n      $image.css('margin-top', - imgHeight / 2);\n\n      // Image reloading for an high quality of thumbnails\n      var imageSrc = $image.attr('src');\n      var newImageSrc = this.newSrc(imageSrc, imgWidth, imgHeight);\n\n      $image.one('error', function () {\n        $image.attr('src', $image.data('jg.originalSrc')); //revert to the original thumbnail, we got it.\n      });\n\n      var loadNewImage = function () {\n        if (imageSrc !== newImageSrc) { //load the new image after the fadeIn\n          $image.attr('src', newImageSrc);\n        }\n      };\n\n      if ($entry.data('jg.loaded') === 'skipped') {\n        this.onImageEvent(imageSrc, $.proxy(function() {\n          this.showImg($entry, loadNewImage);\n          $entry.data('jg.loaded', true);\n        }, this));\n      } else {\n        this.showImg($entry, loadNewImage);\n      }\n\n    } else {\n      this.showImg($entry);\n    }\n\n    this.displayEntryCaption($entry);\n  };\n\n  /**\n   * Display the entry caption. If the caption element doesn't exists, it creates the caption using the 'alt'\n   * or the 'title' attributes.\n   *\n   * @param {jQuery} $entry the entry to process\n   */\n  JustifiedGallery.prototype.displayEntryCaption = function ($entry) {\n    var $image = this.imgFromEntry($entry);\n    if ($image !== null && this.settings.captions) {\n      var $imgCaption = this.captionFromEntry($entry);\n\n      // Create it if it doesn't exists\n      if ($imgCaption === null) {\n        var caption = $image.attr('alt');\n        if (!this.isValidCaption(caption)) caption = $entry.attr('title');\n        if (this.isValidCaption(caption)) { // Create only we found something\n          $imgCaption = $('<div class=\"caption\">' + caption + '</div>');\n          $entry.append($imgCaption);\n          $entry.data('jg.createdCaption', true);\n        }\n      }\n\n      // Create events (we check again the $imgCaption because it can be still inexistent)\n      if ($imgCaption !== null) {\n        if (!this.settings.cssAnimation) $imgCaption.stop().fadeTo(0, this.settings.captionSettings.nonVisibleOpacity);\n        this.addCaptionEventsHandlers($entry);\n      }\n    } else {\n      this.removeCaptionEventsHandlers($entry);\n    }\n  };\n\n  /**\n   * Validates the caption\n   *\n   * @param caption The caption that should be validated\n   * @return {boolean} Validation result\n   */\n  JustifiedGallery.prototype.isValidCaption = function (caption) {\n    return (typeof caption !== 'undefined' && caption.length > 0);\n  };\n\n  /**\n   * The callback for the event 'mouseenter'. It assumes that the event currentTarget is an entry.\n   * It shows the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseEnterForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.addClass('caption-visible').removeClass('caption-hidden');\n      }\n    } else {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n            this.settings.captionSettings.visibleOpacity);\n      }\n    }\n  };\n\n  /**\n   * The callback for the event 'mouseleave'. It assumes that the event currentTarget is an entry.\n   * It hides the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseLeaveForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.removeClass('caption-visible').removeClass('caption-hidden');\n      }\n    } else {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n            this.settings.captionSettings.nonVisibleOpacity);\n      }\n    }\n  };\n\n  /**\n   * Add the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.addCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents === 'undefined') {\n      captionMouseEvents = {\n        mouseenter: $.proxy(this.onEntryMouseEnterForCaption, this),\n        mouseleave: $.proxy(this.onEntryMouseLeaveForCaption, this)\n      };\n      $entry.on('mouseenter', undefined, undefined, captionMouseEvents.mouseenter);\n      $entry.on('mouseleave', undefined, undefined, captionMouseEvents.mouseleave);\n      $entry.data('jg.captionMouseEvents', captionMouseEvents);\n    }\n  };\n\n  /**\n   * Remove the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.removeCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents !== 'undefined') {\n      $entry.off('mouseenter', undefined, captionMouseEvents.mouseenter);\n      $entry.off('mouseleave', undefined, captionMouseEvents.mouseleave);\n      $entry.removeData('jg.captionMouseEvents');\n    }\n  };\n\n  /**\n   * Justify the building row, preparing it to\n   *\n   * @param isLastRow\n   * @returns a boolean to know if the row has been justified or not\n   */\n  JustifiedGallery.prototype.prepareBuildingRow = function (isLastRow) {\n    var i, $entry, imgAspectRatio, newImgW, newImgH, justify = true;\n    var minHeight = 0;\n    var availableWidth = this.galleryWidth - 2 * this.border - (\n        (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n    var rowHeight = availableWidth / this.buildingRow.aspectRatio;\n    var defaultRowHeight = this.settings.rowHeight;\n    var justifiable = this.buildingRow.width / availableWidth > this.settings.justifyThreshold;\n\n    //Skip the last row if we can't justify it and the lastRow == 'hide'\n    if (isLastRow && this.settings.lastRow === 'hide' && !justifiable) {\n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        if (this.settings.cssAnimation)\n          $entry.removeClass('entry-visible');\n        else\n          $entry.stop().fadeTo(0, 0);\n      }\n      return -1;\n    }\n\n    // With lastRow = nojustify, justify if is justificable (the images will not become too big)\n    if (isLastRow && !justifiable && this.settings.lastRow !== 'justify' && this.settings.lastRow !== 'hide') {\n      justify = false;\n\n      if (this.rows > 0) {\n        defaultRowHeight = (this.offY - this.border - this.settings.margins * this.rows) / this.rows;\n        if (defaultRowHeight * this.buildingRow.aspectRatio / availableWidth > this.settings.justifyThreshold) {\n          justify = true;\n        } else {\n          justify = false;\n        }\n      }\n    }\n\n    for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n      $entry = this.buildingRow.entriesBuff[i];\n      imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n\n      if (justify) {\n        newImgW = (i === this.buildingRow.entriesBuff.length - 1) ? availableWidth : rowHeight * imgAspectRatio;\n        newImgH = rowHeight;\n\n        /* With fixedHeight the newImgH must be greater than rowHeight.\n         In some cases here this is not satisfied (due to the justification).\n         But we comment it, because is better to have a shorter but justified row instead\n         to have a cropped image at the end. */\n        /*if (this.settings.fixedHeight && newImgH < this.settings.rowHeight) {\n         newImgW = this.settings.rowHeight * imgAspectRatio;\n         newImgH = this.settings.rowHeight;\n         }*/\n\n      } else {\n        newImgW = defaultRowHeight * imgAspectRatio;\n        newImgH = defaultRowHeight;\n      }\n\n      availableWidth -= Math.round(newImgW);\n      $entry.data('jg.jwidth', Math.round(newImgW));\n      $entry.data('jg.jheight', Math.ceil(newImgH));\n      if (i === 0 || minHeight > newImgH) minHeight = newImgH;\n    }\n\n    if (this.settings.fixedHeight && minHeight > this.settings.rowHeight)\n      minHeight = this.settings.rowHeight;\n\n    this.buildingRow.height = minHeight;\n    return justify;\n  };\n\n  /**\n   * Clear the building row data to be used for a new row\n   */\n  JustifiedGallery.prototype.clearBuildingRow = function () {\n    this.buildingRow.entriesBuff = [];\n    this.buildingRow.aspectRatio = 0;\n    this.buildingRow.width = 0;\n  };\n\n  /**\n   * Flush a row: justify it, modify the gallery height accordingly to the row height\n   *\n   * @param isLastRow\n   */\n  JustifiedGallery.prototype.flushRow = function (isLastRow) {\n    var settings = this.settings;\n    var $entry, buildingRowRes, offX = this.border, i;\n\n    buildingRowRes = this.prepareBuildingRow(isLastRow);\n    if (isLastRow && settings.lastRow === 'hide' && buildingRowRes === -1) {\n      this.clearBuildingRow();\n      return;\n    }\n\n    if (this.maxRowHeight.isPercentage) {\n      if (this.maxRowHeight.value * settings.rowHeight < this.buildingRow.height) {\n        this.buildingRow.height = this.maxRowHeight.value * settings.rowHeight;\n      }\n    } else {\n      if (this.maxRowHeight.value > 0 && this.maxRowHeight.value < this.buildingRow.height) {\n        this.buildingRow.height = this.maxRowHeight.value;\n      }\n    }\n\n    //Align last (unjustified) row\n    if (settings.lastRow === 'center' || settings.lastRow === 'right') {\n      var availableWidth = this.galleryWidth - 2 * this.border - (this.buildingRow.entriesBuff.length - 1) * settings.margins;\n\n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        availableWidth -= $entry.data('jg.jwidth');\n      }\n\n      if (settings.lastRow === 'center')\n        offX += availableWidth / 2;\n      else if (settings.lastRow === 'right')\n        offX += availableWidth;\n    }\n\n    for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n      $entry = this.buildingRow.entriesBuff[i];\n      this.displayEntry($entry, offX, this.offY, $entry.data('jg.jwidth'), $entry.data('jg.jheight'), this.buildingRow.height);\n      offX += $entry.data('jg.jwidth') + settings.margins;\n    }\n\n    //Gallery Height\n    this.galleryHeightToSet = this.offY + this.buildingRow.height + this.border;\n    this.$gallery.height(this.galleryHeightToSet + this.getSpinnerHeight());\n\n    if (!isLastRow || (this.buildingRow.height <= settings.rowHeight && buildingRowRes)) {\n      //Ready for a new row\n      this.offY += this.buildingRow.height + settings.margins;\n      this.rows += 1;\n      this.clearBuildingRow();\n      this.$gallery.trigger('jg.rowflush');\n    }\n  };\n\n  /**\n   * Checks the width of the gallery container, to know if a new justification is needed\n   */\n  var scrollBarOn = false;\n  JustifiedGallery.prototype.checkWidth = function () {\n    this.checkWidthIntervalId = setInterval($.proxy(function () {\n      var galleryWidth = parseFloat(this.$gallery.width());\n      if (hasScrollBar() === scrollBarOn){\n\n        if (Math.abs(galleryWidth - this.galleryWidth) > this.settings.refreshSensitivity) {\n          this.galleryWidth = galleryWidth;\n          this.rewind();\n\n          // Restart to analyze\n          this.startImgAnalyzer(true);\n        }\n      } else {\n        scrollBarOn = hasScrollBar();\n        this.galleryWidth = galleryWidth;\n      }\n    }, this), this.settings.refreshTime);\n  };\n\n  /**\n   * @returns {boolean} a boolean saying if the spinner is active or not\n   */\n  JustifiedGallery.prototype.isSpinnerActive = function () {\n    return this.spinner.intervalId !== null;\n  };\n\n  /**\n   * @returns {int} the spinner height\n   */\n  JustifiedGallery.prototype.getSpinnerHeight = function () {\n    return this.spinner.$el.innerHeight();\n  };\n\n  /**\n   * Stops the spinner animation and modify the gallery height to exclude the spinner\n   */\n  JustifiedGallery.prototype.stopLoadingSpinnerAnimation = function () {\n    clearInterval(this.spinner.intervalId);\n    this.spinner.intervalId = null;\n    this.$gallery.height(this.$gallery.height() - this.getSpinnerHeight());\n    this.spinner.$el.detach();\n  };\n\n  /**\n   * Starts the spinner animation\n   */\n  JustifiedGallery.prototype.startLoadingSpinnerAnimation = function () {\n    var spinnerContext = this.spinner;\n    var $spinnerPoints = spinnerContext.$el.find('span');\n    clearInterval(spinnerContext.intervalId);\n    this.$gallery.append(spinnerContext.$el);\n    this.$gallery.height(this.offY + this.buildingRow.height + this.getSpinnerHeight());\n    spinnerContext.intervalId = setInterval(function () {\n      if (spinnerContext.phase < $spinnerPoints.length) {\n        $spinnerPoints.eq(spinnerContext.phase).fadeTo(spinnerContext.timeSlot, 1);\n      } else {\n        $spinnerPoints.eq(spinnerContext.phase - $spinnerPoints.length).fadeTo(spinnerContext.timeSlot, 0);\n      }\n      spinnerContext.phase = (spinnerContext.phase + 1) % ($spinnerPoints.length * 2);\n    }, spinnerContext.timeSlot);\n  };\n\n  /**\n   * Rewind the image analysis to start from the first entry.\n   */\n  JustifiedGallery.prototype.rewind = function () {\n    this.lastAnalyzedIndex = -1;\n    this.offY = this.border;\n    this.rows = 0;\n    this.clearBuildingRow();\n  };\n\n  /**\n   * Update the entries searching it from the justified gallery HTML element\n   *\n   * @param norewind if norewind only the new entries will be changed (i.e. randomized, sorted or filtered)\n   * @returns {boolean} true if some entries has been founded\n   */\n  JustifiedGallery.prototype.updateEntries = function (norewind) {\n    this.entries = this.$gallery.find(this.settings.selector).toArray();\n    if (this.entries.length === 0) return false;\n\n    // Filter\n    if (this.settings.filter) {\n      this.modifyEntries(this.filterArray, norewind);\n    } else {\n      this.modifyEntries(this.resetFilters, norewind);\n    }\n\n    // Sort or randomize\n    if ($.isFunction(this.settings.sort)) {\n      this.modifyEntries(this.sortArray, norewind);\n    } else if (this.settings.randomize) {\n      this.modifyEntries(this.shuffleArray, norewind);\n    }\n\n    return true;\n  };\n\n  /**\n   * Apply the entries order to the DOM, iterating the entries and appending the images\n   *\n   * @param entries the entries that has been modified and that must be re-ordered in the DOM\n   */\n  JustifiedGallery.prototype.insertToGallery = function (entries) {\n    var that = this;\n    $.each(entries, function () {\n      $(this).appendTo(that.$gallery);\n    });\n  };\n\n  /**\n   * Shuffle the array using the Fisher-Yates shuffle algorithm\n   *\n   * @param a the array to shuffle\n   * @return the shuffled array\n   */\n  JustifiedGallery.prototype.shuffleArray = function (a) {\n    var i, j, temp;\n    for (i = a.length - 1; i > 0; i--) {\n      j = Math.floor(Math.random() * (i + 1));\n      temp = a[i];\n      a[i] = a[j];\n      a[j] = temp;\n    }\n    this.insertToGallery(a);\n    return a;\n  };\n\n  /**\n   * Sort the array using settings.comparator as comparator\n   *\n   * @param a the array to sort (it is sorted)\n   * @return the sorted array\n   */\n  JustifiedGallery.prototype.sortArray = function (a) {\n    a.sort(this.settings.sort);\n    this.insertToGallery(a);\n    return a;\n  };\n\n  /**\n   * Reset the filters removing the 'jg-filtered' class from all the entries\n   *\n   * @param a the array to reset\n   */\n  JustifiedGallery.prototype.resetFilters = function (a) {\n    for (var i = 0; i < a.length; i++) $(a[i]).removeClass('jg-filtered');\n    return a;\n  };\n\n  /**\n   * Filter the entries considering theirs classes (if a string has been passed) or using a function for filtering.\n   *\n   * @param a the array to filter\n   * @return the filtered array\n   */\n  JustifiedGallery.prototype.filterArray = function (a) {\n    var settings = this.settings;\n    if ($.type(settings.filter) === 'string') {\n      // Filter only keeping the entries passed in the string\n      return a.filter(function (el) {\n        var $el = $(el);\n        if ($el.is(settings.filter)) {\n          $el.removeClass('jg-filtered');\n          return true;\n        } else {\n          $el.addClass('jg-filtered');\n          return false;\n        }\n      });\n    } else if ($.isFunction(settings.filter)) {\n      // Filter using the passed function\n      return a.filter(settings.filter);\n    }\n  };\n\n  /**\n   * Modify the entries. With norewind only the new inserted images will be modified (the ones after lastAnalyzedIndex)\n   *\n   * @param functionToApply the function to call to modify the entries (e.g. sorting, randomization, filtering)\n   * @param norewind specify if the norewind has been called or not\n   */\n  JustifiedGallery.prototype.modifyEntries = function (functionToApply, norewind) {\n    var lastEntries = norewind ?\n        this.entries.splice(this.lastAnalyzedIndex + 1, this.entries.length - this.lastAnalyzedIndex - 1)\n        : this.entries;\n    lastEntries = functionToApply.call(this, lastEntries);\n    this.entries = norewind ? this.entries.concat(lastEntries) : lastEntries;\n  };\n\n  /**\n   * Destroy the Justified Gallery instance.\n   *\n   * It clears all the css properties added in the style attributes. We doesn't backup the original\n   * values for those css attributes, because it costs (performance) and because in general one\n   * shouldn't use the style attribute for an uniform set of images (where we suppose the use of\n   * classes). Creating a backup is also difficult because JG could be called multiple times and\n   * with different style attributes.\n   */\n  JustifiedGallery.prototype.destroy = function () {\n    clearInterval(this.checkWidthIntervalId);\n\n    $.each(this.entries, $.proxy(function(_, entry) {\n      var $entry = $(entry);\n\n      // Reset entry style\n      $entry.css('width', '');\n      $entry.css('height', '');\n      $entry.css('top', '');\n      $entry.css('left', '');\n      $entry.data('jg.loaded', undefined);\n      $entry.removeClass('jg-entry');\n\n      // Reset image style\n      var $img = this.imgFromEntry($entry);\n      $img.css('width', '');\n      $img.css('height', '');\n      $img.css('margin-left', '');\n      $img.css('margin-top', '');\n      $img.attr('src', $img.data('jg.originalSrc'));\n      $img.data('jg.originalSrc', undefined);\n\n      // Remove caption\n      this.removeCaptionEventsHandlers($entry);\n      var $caption = this.captionFromEntry($entry);\n      if ($entry.data('jg.createdCaption')) {\n        // remove also the caption element (if created by jg)\n        $entry.data('jg.createdCaption', undefined);\n        if ($caption !== null) $caption.remove();\n      } else {\n        if ($caption !== null) $caption.fadeTo(0, 1);\n      }\n\n    }, this));\n\n    this.$gallery.css('height', '');\n    this.$gallery.removeClass('envira-justified-gallery');\n    this.$gallery.data('jg.controller', undefined);\n  };\n\n  /**\n   * Analyze the images and builds the rows. It returns if it found an image that is not loaded.\n   *\n   * @param isForResize if the image analyzer is called for resizing or not, to call a different callback at the end\n   */\n  JustifiedGallery.prototype.analyzeImages = function (isForResize) {\n    for (var i = this.lastAnalyzedIndex + 1; i < this.entries.length; i++) {\n      var $entry = $(this.entries[i]);\n      if ($entry.data('jg.loaded') === true || $entry.data('jg.loaded') === 'skipped') {\n        var availableWidth = this.galleryWidth - 2 * this.border - (\n            (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n        var imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n        if (availableWidth / (this.buildingRow.aspectRatio + imgAspectRatio) < this.settings.rowHeight) {\n          this.flushRow(false);\n          if(++this.yield.flushed >= this.yield.every) {\n            this.startImgAnalyzer(isForResize);\n            return;\n          }\n        }\n\n        this.buildingRow.entriesBuff.push($entry);\n        this.buildingRow.aspectRatio += imgAspectRatio;\n        this.buildingRow.width += imgAspectRatio * this.settings.rowHeight;\n        this.lastAnalyzedIndex = i;\n\n      } else if ($entry.data('jg.loaded') !== 'error') {\n        return;\n      }\n    }\n\n    // Last row flush (the row is not full)\n    if (this.buildingRow.entriesBuff.length > 0) this.flushRow(true);\n\n    if (this.isSpinnerActive()) {\n      this.stopLoadingSpinnerAnimation();\n    }\n\n    /* Stop, if there is, the timeout to start the analyzeImages.\n     This is because an image can be set loaded, and the timeout can be set,\n     but this image can be analyzed yet.\n     */\n    this.stopImgAnalyzerStarter();\n\n    //On complete callback\n    this.$gallery.trigger(isForResize ? 'jg.resize' : 'jg.complete');\n    this.$gallery.height(this.galleryHeightToSet);\n  };\n\n  /**\n   * Stops any ImgAnalyzer starter (that has an assigned timeout)\n   */\n  JustifiedGallery.prototype.stopImgAnalyzerStarter = function () {\n    this.yield.flushed = 0;\n    if (this.imgAnalyzerTimeout !== null) clearTimeout(this.imgAnalyzerTimeout);\n  };\n\n  /**\n   * Starts the image analyzer. It is not immediately called to let the browser to update the view\n   *\n   * @param isForResize specifies if the image analyzer must be called for resizing or not\n   */\n  JustifiedGallery.prototype.startImgAnalyzer = function (isForResize) {\n    var that = this;\n    this.stopImgAnalyzerStarter();\n    this.imgAnalyzerTimeout = setTimeout(function () {\n      that.analyzeImages(isForResize);\n    }, 0.001); // we can't start it immediately due to a IE different behaviour\n  };\n\n  /**\n   * Checks if the image is loaded or not using another image object. We cannot use the 'complete' image property,\n   * because some browsers, with a 404 set complete = true.\n   *\n   * @param imageSrc the image src to load\n   * @param onLoad callback that is called when the image has been loaded\n   * @param onError callback that is called in case of an error\n   */\n  JustifiedGallery.prototype.onImageEvent = function (imageSrc, onLoad, onError) {\n    if (!onLoad && !onError) return;\n\n    var memImage = new Image();\n    var $memImage = $(memImage);\n    if (onLoad) {\n      $memImage.one('load', function () {\n        $memImage.off('load error');\n        onLoad(memImage);\n      });\n    }\n    if (onError) {\n      $memImage.one('error', function() {\n        $memImage.off('load error');\n        onError(memImage);\n      });\n    }\n    memImage.src = imageSrc;\n  };\n\n  /**\n   * Init of Justified Gallery controlled\n   * It analyzes all the entries starting theirs loading and calling the image analyzer (that works with loaded images)\n   */\n  JustifiedGallery.prototype.init = function () {\n    var imagesToLoad = false, skippedImages = false, that = this;\n    $.each(this.entries, function (index, entry) {\n      var $entry = $(entry);\n      var $image = that.imgFromEntry($entry);\n\n      $entry.addClass('jg-entry');\n\n      if ($entry.data('jg.loaded') !== true && $entry.data('jg.loaded') !== 'skipped') {\n\n        // Link Rel global overwrite\n        if (that.settings.rel !== null) $entry.attr('rel', that.settings.rel);\n\n        // Link Target global overwrite\n        if (that.settings.target !== null) $entry.attr('target', that.settings.target);\n\n        if ($image !== null) {\n\n          // Image src\n          var imageSrc = that.extractImgSrcFromImage($image);\n          $image.attr('src', imageSrc);\n\n          /* If we have the height and the width, we don't wait that the image is loaded, but we start directly\n           * with the justification */\n          if (that.settings.waitThumbnailsLoad === false) {\n            var width = parseFloat($image.attr('width'));\n            var height = parseFloat($image.attr('height'));\n            if (!isNaN(width) && !isNaN(height)) {\n              $entry.data('jg.width', width);\n              $entry.data('jg.height', height);\n              $entry.data('jg.loaded', 'skipped');\n              skippedImages = true;\n              that.startImgAnalyzer(false);\n              return true; // continue\n            }\n          }\n\n          $entry.data('jg.loaded', false);\n          imagesToLoad = true;\n\n          // Spinner start\n          if (!that.isSpinnerActive()) that.startLoadingSpinnerAnimation();\n\n          that.onImageEvent(imageSrc, function (loadImg) { // image loaded\n            $entry.data('jg.width', $entry.find('.envira-gallery-image').data('envira-width') );\n            $entry.data('jg.height', $entry.find('.envira-gallery-image').data('envira-height') );\n\n            $entry.data('jg.loaded', true);\n\n            \n            that.startImgAnalyzer(false);\n          }, function () { // image load error\n            $entry.data('jg.loaded', 'error');\n            that.startImgAnalyzer(false);\n          });\n\n        } else {\n          $entry.data('jg.loaded', true);\n          $entry.data('jg.width', $entry.width() | parseFloat($entry.css('width')) | 1);\n          $entry.data('jg.height', $entry.height() | parseFloat($entry.css('height')) | 1);\n        }\n\n      }\n\n    });\n\n    if (!imagesToLoad && !skippedImages) this.startImgAnalyzer(false);\n    this.checkWidth();\n  };\n\n  /**\n   * Checks that it is a valid number. If a string is passed it is converted to a number\n   *\n   * @param settingContainer the object that contains the setting (to allow the conversion)\n   * @param settingName the setting name\n   */\n  JustifiedGallery.prototype.checkOrConvertNumber = function (settingContainer, settingName) {\n    if ($.type(settingContainer[settingName]) === 'string') {\n      settingContainer[settingName] = parseFloat(settingContainer[settingName]);\n    }\n\n    if ($.type(settingContainer[settingName]) === 'number') {\n      if (isNaN(settingContainer[settingName])) throw 'invalid number for ' + settingName;\n    } else {\n      throw settingName + ' must be a number';\n    }\n  };\n\n  /**\n   * Checks the sizeRangeSuffixes and, if necessary, converts\n   * its keys from string (e.g. old settings with 'lt100') to int.\n   */\n  JustifiedGallery.prototype.checkSizeRangesSuffixes = function () {\n    if ($.type(this.settings.sizeRangeSuffixes) !== 'object') {\n      throw 'sizeRangeSuffixes must be defined and must be an object';\n    }\n\n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(rangeIdx);\n    }\n\n    var newSizeRngSuffixes = {0: ''};\n    for (var i = 0; i < suffixRanges.length; i++) {\n      if ($.type(suffixRanges[i]) === 'string') {\n        try {\n          var numIdx = parseInt(suffixRanges[i].replace(/^[a-z]+/, ''), 10);\n          newSizeRngSuffixes[numIdx] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n        } catch (e) {\n          throw 'sizeRangeSuffixes keys must contains correct numbers (' + e + ')';\n        }\n      } else {\n        newSizeRngSuffixes[suffixRanges[i]] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n      }\n    }\n\n    this.settings.sizeRangeSuffixes = newSizeRngSuffixes;\n  };\n\n  /**\n   * check and convert the maxRowHeight setting\n   */\n  JustifiedGallery.prototype.retrieveMaxRowHeight = function () {\n    var newMaxRowHeight = { };\n\n    if ($.type(this.settings.maxRowHeight) === 'string') {\n      if (this.settings.maxRowHeight.match(/^[0-9]+%$/)) {\n        newMaxRowHeight.value = parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1]) / 100;\n        newMaxRowHeight.isPercentage = false;\n      } else {\n        newMaxRowHeight.value = parseFloat(this.settings.maxRowHeight);\n        newMaxRowHeight.isPercentage = true;\n      }\n    } else if ($.type(this.settings.maxRowHeight) === 'number') {\n      newMaxRowHeight.value = this.settings.maxRowHeight;\n      newMaxRowHeight.isPercentage = false;\n    } else {\n      throw 'maxRowHeight must be a number or a percentage';\n    }\n\n    // check if the converted value is not a number\n    if (isNaN(newMaxRowHeight.value)) throw 'invalid number for maxRowHeight';\n\n    // check values\n    if (newMaxRowHeight.isPercentage) {\n      if (newMaxRowHeight.value < 100) newMaxRowHeight.value = 100;\n    } else {\n      if (newMaxRowHeight.value > 0 && newMaxRowHeight.value < this.settings.rowHeight) {\n        newMaxRowHeight.value = this.settings.rowHeight;\n      }\n    }\n\n    return newMaxRowHeight;\n\n  };\n\n  /**\n   * Checks the settings\n   */\n  JustifiedGallery.prototype.checkSettings = function () {\n    this.checkSizeRangesSuffixes();\n\n    this.checkOrConvertNumber(this.settings, 'rowHeight');\n    this.checkOrConvertNumber(this.settings, 'margins');\n    this.checkOrConvertNumber(this.settings, 'border');\n\n    var lastRowModes = [\n      'justify',\n      'nojustify',\n      'left',\n      'center',\n      'right',\n      'hide'\n    ];\n    if (lastRowModes.indexOf(this.settings.lastRow) === -1) {\n      throw 'lastRow must be one of: ' + lastRowModes.join(', ');\n    }\n\n    this.checkOrConvertNumber(this.settings, 'justifyThreshold');\n    if (this.settings.justifyThreshold < 0 || this.settings.justifyThreshold > 1) {\n      throw 'justifyThreshold must be in the interval [0,1]';\n    }\n    if ($.type(this.settings.cssAnimation) !== 'boolean') {\n      throw 'cssAnimation must be a boolean';\n    }\n\n    if ($.type(this.settings.captions) !== 'boolean') throw 'captions must be a boolean';\n    this.checkOrConvertNumber(this.settings.captionSettings, 'animationDuration');\n\n    this.checkOrConvertNumber(this.settings.captionSettings, 'visibleOpacity');\n    if (this.settings.captionSettings.visibleOpacity < 0 ||\n        this.settings.captionSettings.visibleOpacity > 1) {\n      throw 'captionSettings.visibleOpacity must be in the interval [0, 1]';\n    }\n\n    this.checkOrConvertNumber(this.settings.captionSettings, 'nonVisibleOpacity');\n    if (this.settings.captionSettings.nonVisibleOpacity < 0 ||\n        this.settings.captionSettings.nonVisibleOpacity > 1) {\n      throw 'captionSettings.nonVisibleOpacity must be in the interval [0, 1]';\n    }\n\n    if ($.type(this.settings.fixedHeight) !== 'boolean') throw 'fixedHeight must be a boolean';\n    this.checkOrConvertNumber(this.settings, 'imagesAnimationDuration');\n    this.checkOrConvertNumber(this.settings, 'refreshTime');\n    this.checkOrConvertNumber(this.settings, 'refreshSensitivity');\n    if ($.type(this.settings.randomize) !== 'boolean') throw 'randomize must be a boolean';\n    if ($.type(this.settings.selector) !== 'string') throw 'selector must be a string';\n\n    if (this.settings.sort !== false && !$.isFunction(this.settings.sort)) {\n      throw 'sort must be false or a comparison function';\n    }\n\n    if (this.settings.filter !== false && !$.isFunction(this.settings.filter) &&\n        $.type(this.settings.filter) !== 'string') {\n      throw 'filter must be false, a string or a filter function';\n    }\n  };\n\n  /**\n   * It brings all the indexes from the sizeRangeSuffixes and it orders them. They are then sorted and returned.\n   * @returns {Array} sorted suffix ranges\n   */\n  JustifiedGallery.prototype.retrieveSuffixRanges = function () {\n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(parseInt(rangeIdx, 10));\n    }\n    suffixRanges.sort(function (a, b) { return a > b ? 1 : a < b ? -1 : 0; });\n    return suffixRanges;\n  };\n\n  /**\n   * Update the existing settings only changing some of them\n   *\n   * @param newSettings the new settings (or a subgroup of them)\n   */\n  JustifiedGallery.prototype.updateSettings = function (newSettings) {\n    // In this case Justified Gallery has been called again changing only some options\n    this.settings = $.extend({}, this.settings, newSettings);\n    this.checkSettings();\n\n    // As reported in the settings: negative value = same as margins, 0 = disabled\n    this.border = this.settings.border >= 0 ? this.settings.border : this.settings.margins;\n\n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n  };\n\n  /**\n   * Justified Gallery plugin for jQuery\n   *\n   * Events\n   *  - jg.complete : called when all the gallery has been created\n   *  - jg.resize : called when the gallery has been resized\n   *  - jg.rowflush : when a new row appears\n   *\n   * @param arg the action (or the settings) passed when the plugin is called\n   * @returns {*} the object itself\n   */\n  $.fn.justifiedGallery = function (arg) {\n    return this.each(function (index, gallery) {\n\n      var $gallery = $(gallery);\n      \n      $gallery.addClass('envira-justified-gallery');\n\n      var controller = $gallery.data('jg.controller');\n      if (typeof controller === 'undefined') {\n        // Create controller and assign it to the object data\n        if (typeof arg !== 'undefined' && arg !== null && $.type(arg) !== 'object') {\n          if (arg === 'destroy') return; // Just a call to an unexisting object\n          throw 'The argument must be an object';\n        }\n        controller = new JustifiedGallery($gallery, $.extend({}, $.fn.justifiedGallery.defaults, arg));\n        $gallery.data('jg.controller', controller);\n      } else if (arg === 'norewind') {\n        // In this case we don't rewind: we analyze only the latest images (e.g. to complete the last unfinished row\n        // ... left to be more readable\n      } else if (arg === 'destroy') {\n        controller.destroy();\n        return;\n      } else {\n        // In this case Justified Gallery has been called again changing only some options\n        controller.updateSettings(arg);\n        controller.rewind();\n      }\n\n      // Update the entries list\n      if (!controller.updateEntries(arg === 'norewind')) return;\n\n      // Init justified gallery\n      controller.init();\n\n    });\n  };\n\n  // Default options\n  $.fn.justifiedGallery.defaults = {\n    sizeRangeSuffixes: { }, /* e.g. Flickr configuration\n        {\n          100: '_t',  // used when longest is less than 100px\n          240: '_m',  // used when longest is between 101px and 240px\n          320: '_n',  // ...\n          500: '',\n          640: '_z',\n          1024: '_b'  // used as else case because it is the last\n        }\n    */\n    thumbnailPath: undefined, /* If defined, sizeRangeSuffixes is not used, and this function is used to determine the\n    path relative to a specific thumbnail size. The function should accept respectively three arguments:\n    current path, width and height */\n    rowHeight: 120,\n    maxRowHeight: -1, // negative value = no limits, number to express the value in pixels,\n                          // '[0-9]+%' to express in percentage (e.g. 300% means that the row height\n                          // can't exceed 3 * rowHeight)\n    margins: 1,\n    border: -1, // negative value = same as margins, 0 = disabled, any other value to set the border\n\n    lastRow: 'nojustify', // … which is the same as 'left', or can be 'justify', 'center', 'right' or 'hide'\n\n    justifyThreshold: 0.90, /* if row width / available space > 0.90 it will be always justified\n                             * (i.e. lastRow setting is not considered) */\n    fixedHeight: false,\n    waitThumbnailsLoad: true,\n    captions: true,\n    cssAnimation: false,\n    imagesAnimationDuration: 500, // ignored with css animations\n    captionSettings: { // ignored with css animations\n      animationDuration: 500,\n      visibleOpacity: 0.7,\n      nonVisibleOpacity: 0.0\n    },\n    rel: null, // rewrite the rel of each analyzed links\n    target: null, // rewrite the target of all links\n    extension: /\\.[^.\\\\/]+$/, // regexp to capture the extension of an image\n    refreshTime: 100, // time interval (in ms) to check if the page changes its width\n    refreshSensitivity: 0, // change in width allowed (in px) without re-building the gallery\n    randomize: false,\n    sort: false, /*\n      - false: to do not sort\n      - function: to sort them using the function as comparator (see Array.prototype.sort())\n    */\n    filter: false, /*\n      - false: for a disabled filter\n      - a string: an entry is kept if entry.is(filter string) returns true\n                  see jQuery's .is() function for further information\n      - a function: invoked with arguments (entry, index, array). Return true to keep the entry, false otherwise.\n                    see Array.prototype.filter for further information.\n    */\n    selector: '> a, > div:not(.spinner)' // The selector that is used to know what are the entries of the gallery\n  };\n\n}(jQuery));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/jquery.justifiedGallery.js","/*!\n * Justified Gallery / Envira Extensions and Overrides - v3.6.2\n * Copyright (c) 2016 David Bisset, Benjamin Rojas\n * Licensed under the MIT license.\n */\n\n(function ($) {\n\t\n\tvar justifiedGallery =  $.fn.justifiedGallery,\n\t\tEnviraJustifiedGallery = {};\n\n\t$.fn.enviraJustifiedGallery = function () {\n\t\t\n\t\tvar obj = justifiedGallery.apply(this, arguments);\n\t\t\tEnviraJustifiedGallery = obj.data('jg.controller');\n\n\t\t\tif (EnviraJustifiedGallery !== undefined) {\n\n\t\t\t\tEnviraJustifiedGallery.displayEntryCaption = function ($entry) {\n\n\t\t\t\tvar $image = this.imgFromEntry($entry);\n\t\t\t\t\n\t\t\t\tif ($image !== null && this.settings.captions) {\n\t\t\t\t\t\n\t\t\t\t\tvar $imgCaption = this.captionFromEntry($entry);\n\n\t\t\t\t\t// Create it if it doesn't exists\n\t\t\t\t\tif ($imgCaption === null) {\n\n\t\t\t\t\t\tvar caption = $image.data('envira-caption'),\n\t\t\t\t\t\t\trevised_caption = '';\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( caption !== undefined && typeof caption === 'string' ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcaption = caption.replace('<', '&lt;');\n\t\t\t\t\t\t\trevised_caption = $('<textarea />').html(caption).text();\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( revised_caption !== undefined ) {\n\t\t\t\t\t\t\tif (this.isValidCaption(revised_caption)) { // Create only we found something\n\t\t\t\t\t\t\t\t$imgCaption = $('<div class=\"caption\">' + revised_caption + '</div>');\n\t\t\t\t\t\t\t\t$image.after($imgCaption);\n\t\t\t\t\t\t\t\t$entry.data('jg.createdCaption', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t  \t\t\t}\n\n\t\t  // Create events (we check again the $imgCaption because it can be still inexistent)\n\t\t  if ($imgCaption !== null) {\n\t\t\tif (!this.settings.cssAnimation) $imgCaption.stop().fadeTo(0, this.settings.captionSettings.nonVisibleOpacity);\n\t\t\t// Adjust the positioning of overlay buttons so that it doesn't overlap the caption\n\t\t\tvar imgCaptionHeight = $imgCaption.css('height');\n\t\t\t$entry.find('.envira-gallery-position-overlay.envira-gallery-bottom-left').css('bottom', imgCaptionHeight );\n\t\t\t$entry.find('.envira-gallery-position-overlay.envira-gallery-bottom-right').css('bottom', imgCaptionHeight );\n\t\t\tthis.addCaptionEventsHandlers($entry);\n\t\t  }\n\t\t} else {\n\t\t  this.removeCaptionEventsHandlers($entry);\n\t\t}\n\t};\n\n\treturn EnviraJustifiedGallery;\n\n\t}\n\n  };\n})(jQuery);\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviraJustifiedGallery-extensions.js","/*!\n * Enviratope PACKAGED v3.0.0\n *\n * Licensed GPLv3 for open source use\n * or Enviratope Commercial License for commercial use\n *\n * http://enviratope.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.0\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  'use strict';\n  /* globals define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\n      factory( window, jQuery );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('jquery')\n    );\n  } else {\n    // browser global\n    window.jQueryBridget = factory(\n      window,\n      window.jQuery\n    );\n  }\n\n}( window, function factory( window, jQuery ) {\n'use strict';\n\n// ----- utils ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar console = window.console;\nvar logError = typeof console == 'undefined' ? function() {} :\n  function( message ) {\n    console.error( message );\n  };\n\n// ----- jQueryBridget ----- //\n\nfunction jQueryBridget( namespace, PluginClass, $ ) {\n  $ = $ || jQuery || window.jQuery;\n  if ( !$ ) {\n    return;\n  }\n\n  // add option method -> $().plugin('option', {...})\n  if ( !PluginClass.prototype.option ) {\n    // option setter\n    PluginClass.prototype.option = function( opts ) {\n      // bail out if not an object\n      if ( !$.isPlainObject( opts ) ){\n        return;\n      }\n      this.options = $.extend( true, this.options, opts );\n    };\n  }\n\n  // make jQuery plugin\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\n    if ( typeof arg0 == 'string' ) {\n      // method call $().plugin( 'methodName', { options } )\n      // shift arguments by 1\n      var args = arraySlice.call( arguments, 1 );\n      return methodCall( this, arg0, args );\n    }\n    // just $().plugin({ options })\n    plainCall( this, arg0 );\n    return this;\n  };\n\n  // $().plugin('methodName')\n  function methodCall( $elems, methodName, args ) {\n    var returnValue;\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n\n    $elems.each( function( i, elem ) {\n      // get instance\n      var instance = $.data( elem, namespace );\n      if ( !instance ) {\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\n          pluginMethodStr );\n        return;\n      }\n\n      var method = instance[ methodName ];\n      if ( !method || methodName.charAt(0) == '_' ) {\n        logError( pluginMethodStr + ' is not a valid method' );\n        return;\n      }\n\n      // apply method, get return value\n      var value = method.apply( instance, args );\n      // set return value if value is returned, use only first value\n      returnValue = returnValue === undefined ? value : returnValue;\n    });\n\n    return returnValue !== undefined ? returnValue : $elems;\n  }\n\n  function plainCall( $elems, options ) {\n    $elems.each( function( i, elem ) {\n      var instance = $.data( elem, namespace );\n      if ( instance ) {\n        // set options & init\n        instance.option( options );\n        instance._init();\n      } else {\n        // initialize new instance\n        instance = new PluginClass( elem, options );\n        $.data( elem, namespace, instance );\n      }\n    });\n  }\n\n  updateJQuery( $ );\n\n}\n\n// ----- updateJQuery ----- //\n\n// set $.bridget for v1 backwards compatibility\nfunction updateJQuery( $ ) {\n  if ( !$ || ( $ && $.bridget ) ) {\n    return;\n  }\n  $.bridget = jQueryBridget;\n}\n\nupdateJQuery( jQuery || window.jQuery );\n\n// -----  ----- //\n\nreturn jQueryBridget;\n\n}));\n\n/**\n * EvEmitter v1.0.2\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * getSize v2.0.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false, console: false */\n\n( function( window, factory ) {\n  'use strict';\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'get-size/get-size',[],function() {\n      return factory();\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See http://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\n  body.removeChild( div );\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n\n/**\n * matchesSelector v2.0.1\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'desandro-matches-selector/matches-selector',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n/**\n * Fizzy UI utils v2.0.1\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'fizzy-ui-utils/utils',[\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  if ( document.readyState == 'complete' ) {\n    callback();\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('layoutname')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/enviratope-item',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Enviratope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  var x = xValue.indexOf('%') != -1 ?\n    ( parseFloat( xValue ) / 100 ) * layoutSize.width : parseInt( xValue, 10 );\n  var y = yValue.indexOf('%') != -1 ?\n    ( parseFloat( yValue ) / 100 ) * layoutSize.height : parseInt( yValue, 10 );\n\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var compareX = parseInt( x, 10 );\n  var compareY = parseInt( y, 10 );\n  var didNotMove = compareX === this.position.x && compareY === this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseInt( x, 10 );\n  this.position.y = parseInt( y, 10 );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/*!\n * Outlayer v2.1.0\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/outlayer',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './enviratope-item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./enviratope-item.js')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n/**\n * Enviratope Item\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/item',[\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Enviratope = window.Enviratope || {};\n    window.Enviratope.Item = factory(\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( Outlayer ) {\n'use strict';\n\n// -------------------------- Item -------------------------- //\n\n// sub-class Outlayer Item\nfunction Item() {\n  Outlayer.Item.apply( this, arguments );\n}\n\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar _create = proto._create;\nproto._create = function() {\n  // assign id, used for original-order sorting\n  this.id = this.layout.itemGUID++;\n  _create.call( this );\n  this.sortData = {};\n};\n\nproto.updateSortData = function() {\n  if ( this.isIgnored ) {\n    return;\n  }\n  // default sorters\n  this.sortData.id = this.id;\n  // for backward compatibility\n  this.sortData['original-order'] = this.id;\n  this.sortData.random = Math.random();\n  // go thru getSortData obj and apply the sorters\n  var getSortData = this.layout.options.getSortData;\n  var sorters = this.layout._sorters;\n  for ( var key in getSortData ) {\n    var sorter = sorters[ key ];\n    this.sortData[ key ] = sorter( this.element, this );\n  }\n};\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  // call super\n  _destroy.apply( this, arguments );\n  // reset display, #741\n  this.css({\n    display: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/**\n * Enviratope LayoutMode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-mode',[\n        'get-size/get-size',\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Enviratope = window.Enviratope || {};\n    window.Enviratope.LayoutMode = factory(\n      window.getSize,\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( getSize, Outlayer ) {\n  'use strict';\n\n  // layout mode class\n  function LayoutMode( enviratope ) {\n    this.enviratope = enviratope;\n    // link properties\n    if ( enviratope ) {\n      this.options = enviratope.options[ this.namespace ];\n      this.element = enviratope.element;\n      this.items = enviratope.filteredItems;\n      this.size = enviratope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Enviratope instance as `this`\n  **/\n  var facadeMethods = [\n    '_resetLayout',\n    '_getItemLayoutPosition',\n    '_manageStamp',\n    '_getContainerSize',\n    '_getElementOffset',\n    'needsResizeLayout',\n    '_getOption'\n  ];\n\n  facadeMethods.forEach( function( methodName ) {\n    proto[ methodName ] = function() {\n      return Outlayer.prototype[ methodName ].apply( this.enviratope, arguments );\n    };\n  });\n\n  // -----  ----- //\n\n  // for horizontal layout modes, check vertical size\n  proto.needsVerticalResizeLayout = function() {\n    // don't trigger if size did not change\n    var size = getSize( this.enviratope.element );\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.enviratope.size && size;\n    return hasSizes && size.innerHeight != this.enviratope.size.innerHeight;\n  };\n\n  // ----- measurements ----- //\n\n  proto._getMeasurement = function() {\n    this.enviratope._getMeasurement.apply( this, arguments );\n  };\n\n  proto.getColumnWidth = function() {\n    this.getSegmentSize( 'column', 'Width' );\n  };\n\n  proto.getRowHeight = function() {\n    this.getSegmentSize( 'row', 'Height' );\n  };\n\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n  proto.getSegmentSize = function( segment, size ) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size;\n    // columnWidth / outerWidth // rowHeight / outerHeight\n    this._getMeasurement( segmentName, outerSize );\n    // got rowHeight or columnWidth, we can chill\n    if ( this[ segmentName ] ) {\n      return;\n    }\n    // fall back to item of first element\n    var firstItemSize = this.getFirstItemSize();\n    this[ segmentName ] = firstItemSize && firstItemSize[ outerSize ] ||\n      // or size of container\n      this.enviratope.size[ 'inner' + size ];\n  };\n\n  proto.getFirstItemSize = function() {\n    var firstItem = this.enviratope.filteredItems[0];\n    return firstItem && firstItem.element && getSize( firstItem.element );\n  };\n\n  // ----- methods that should reference enviratope ----- //\n\n  proto.layout = function() {\n    this.enviratope.layout.apply( this.enviratope, arguments );\n  };\n\n  proto.getSize = function() {\n    this.enviratope.getSize();\n    this.size = this.enviratope.size;\n  };\n\n  // -------------------------- create -------------------------- //\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function( namespace, options ) {\n\n    function Mode() {\n      LayoutMode.apply( this, arguments );\n    }\n\n    Mode.prototype = Object.create( proto );\n    Mode.prototype.constructor = Mode;\n\n    // default options\n    if ( options ) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace;\n    // register in Enviratope\n    LayoutMode.modes[ namespace ] = Mode;\n\n    return Mode;\n  };\n\n  return LayoutMode;\n\n}));\n\n/*!\n * Masonry v4.1.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'masonry/masonry',[\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  Masonry.prototype._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n  };\n\n  Masonry.prototype.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  Masonry.prototype.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  Masonry.prototype._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n\n    var colGroup = this._getColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n    var shortColIndex = colGroup.indexOf( minimumY );\n\n    // position the brick\n    var position = {\n      x: this.columnWidth * shortColIndex,\n      y: minimumY\n    };\n\n    // apply setHeight to necessary columns\n    var setHeight = minimumY + item.size.outerHeight;\n    var setSpan = this.cols + 1 - colGroup.length;\n    for ( var i = 0; i < setSpan; i++ ) {\n      this.colYs[ shortColIndex + i ] = setHeight;\n    }\n\n    return position;\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  Masonry.prototype._getColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      // make an array of colY values for that one group\n      var groupColYs = this.colYs.slice( i, i + colSpan );\n      // and get the max value of the array\n      colGroup[i] = Math.max.apply( Math, groupColYs );\n    }\n    return colGroup;\n  };\n\n  Masonry.prototype._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  Masonry.prototype._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  Masonry.prototype._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  Masonry.prototype.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n/*!\n * Masonry layout mode\n * sub-classes Masonry\n * http://masonry.desandro.com\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/masonry',[\n        '../layout-mode',\n        'masonry/masonry'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode'),\n      require('masonry-layout')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode,\n      window.Masonry\n    );\n  }\n\n}( window, function factory( LayoutMode, Masonry ) {\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var MasonryMode = LayoutMode.create('masonry');\n\n  var proto = MasonryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  };\n\n  // inherit Masonry prototype\n  for ( var method in Masonry.prototype ) {\n    // do not inherit mode methods\n    if ( !keepModeMethods[ method ] ) {\n      proto[ method ] = Masonry.prototype[ method ];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n  proto.measureColumns = function() {\n    // set items, used if measuring first item\n    this.items = this.enviratope.filteredItems;\n    measureColumns.call( this );\n  };\n\n  // point to mode options for fitWidth\n  var _getOption = proto._getOption;\n  proto._getOption = function( option ) {\n    if ( option == 'fitWidth' ) {\n      return this.options.isFitWidth !== undefined ?\n        this.options.isFitWidth : this.options.fitWidth;\n    }\n    return _getOption.apply( this.enviratope, arguments );\n  };\n\n  return MasonryMode;\n\n}));\n\n/**\n * fitRows layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/fit-rows',[\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar FitRows = LayoutMode.create('fitRows');\n\nvar proto = FitRows.prototype;\n\nproto._resetLayout = function() {\n  this.x = 0;\n  this.y = 0;\n  this.maxY = 0;\n  this._getMeasurement( 'gutter', 'outerWidth' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n\n  var itemWidth = item.size.outerWidth + this.gutter;\n  // if this element cannot fit in the current row\n  var containerWidth = this.enviratope.size.innerWidth + this.gutter;\n  if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {\n    this.x = 0;\n    this.y = this.maxY;\n  }\n\n  var position = {\n    x: this.x,\n    y: this.y\n  };\n\n  this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );\n  this.x += itemWidth;\n\n  return position;\n};\n\nproto._getContainerSize = function() {\n  return { height: this.maxY };\n};\n\nreturn FitRows;\n\n}));\n\n/**\n * vertical layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/vertical',[\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar Vertical = LayoutMode.create( 'vertical', {\n  horizontalAlignment: 0\n});\n\nvar proto = Vertical.prototype;\n\nproto._resetLayout = function() {\n  this.y = 0;\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n  var x = ( this.enviratope.size.innerWidth - item.size.outerWidth ) *\n    this.options.horizontalAlignment;\n  var y = this.y;\n  this.y += item.size.outerHeight;\n  return { x: x, y: y };\n};\n\nproto._getContainerSize = function() {\n  return { height: this.y };\n};\n\nreturn Vertical;\n\n}));\n\n/*!\n * Enviratope v3.0.0\n *\n * Licensed GPLv3 for open source use\n * or Enviratope Commercial License for commercial use\n *\n * http://enviratope.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size',\n        'desandro-matches-selector/matches-selector',\n        'fizzy-ui-utils/utils',\n        './enviratope-item',\n        './layout-mode',\n        // include default layout modes\n        './layout-modes/masonry',\n        './layout-modes/fit-rows',\n        './layout-modes/vertical'\n      ],\n      function( Outlayer, getSize, matchesSelector, utils, Item, LayoutMode ) {\n        return factory( window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode );\n      });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('outlayer'),\n      require('get-size'),\n      require('desandro-matches-selector'),\n      require('fizzy-ui-utils'),\n      require('./enviratope-item'),\n      require('./layout-mode'),\n      // include default layout modes\n      require('./layout-modes/masonry'),\n      require('./layout-modes/fit-rows'),\n      require('./layout-modes/vertical')\n    );\n  } else {\n    // browser global\n    window.Enviratope = factory(\n      window,\n      window.Outlayer,\n      window.getSize,\n      window.matchesSelector,\n      window.fizzyUIUtils,\n      window.Enviratope.Item,\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( window, Outlayer, getSize, matchesSelector, utils,\n  Item, LayoutMode ) {\n\n\n\n// -------------------------- vars -------------------------- //\n\nvar jQuery = window.jQuery;\n\n// -------------------------- helpers -------------------------- //\n\nvar trim = String.prototype.trim ?\n  function( str ) {\n    return str.trim();\n  } :\n  function( str ) {\n    return str.replace( /^\\s+|\\s+$/g, '' );\n  };\n\n// -------------------------- enviratopeDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Enviratope = Outlayer.create( 'enviratope', {\n    layoutMode: 'masonry',\n    isJQueryFiltering: true,\n    sortAscending: true\n  });\n\n  Enviratope.Item = Item;\n  Enviratope.LayoutMode = LayoutMode;\n\n  var proto = Enviratope.prototype;\n\n  proto._create = function() {\n    this.itemGUID = 0;\n    // functions that sort items\n    this._sorters = {};\n    this._getSorters();\n    // call super\n    Outlayer.prototype._create.call( this );\n\n    // create layout modes\n    this.modes = {};\n    // start filteredItems with all items\n    this.filteredItems = this.items;\n    // keep of track of sortBys\n    this.sortHistory = [ 'original-order' ];\n    // create from registered layout modes\n    for ( var name in LayoutMode.modes ) {\n      this._initLayoutMode( name );\n    }\n  };\n\n  proto.reloadItems = function() {\n    // reset item ID counter\n    this.itemGUID = 0;\n    // call super\n    Outlayer.prototype.reloadItems.call( this );\n  };\n\n  proto._itemize = function() {\n    var items = Outlayer.prototype._itemize.apply( this, arguments );\n    // assign ID for original-order\n    for ( var i=0; i < items.length; i++ ) {\n      var item = items[i];\n      item.id = this.itemGUID++;\n    }\n    this._updateItemsSortData( items );\n    return items;\n  };\n\n\n  // -------------------------- layout -------------------------- //\n\n  proto._initLayoutMode = function( name ) {\n    var Mode = LayoutMode.modes[ name ];\n    // set mode options\n    // HACK extend initial options, back-fill in default options\n    var initialOpts = this.options[ name ] || {};\n    this.options[ name ] = Mode.options ?\n      utils.extend( Mode.options, initialOpts ) : initialOpts;\n    // init layout mode instance\n    this.modes[ name ] = new Mode( this );\n  };\n\n\n  proto.layout = function() {\n    // if first time doing layout, do all magic\n    if ( !this._isLayoutInited && this._getOption('initLayout') ) {\n      this.arrange();\n      return;\n    }\n    this._layout();\n  };\n\n  // private method to be used in layout() & magic()\n  proto._layout = function() {\n    // don't animate first layout\n    var isInstant = this._getIsInstant();\n    // layout flow\n    this._resetLayout();\n    this._manageStamps();\n    this.layoutItems( this.filteredItems, isInstant );\n\n    // flag for initalized\n    this._isLayoutInited = true;\n  };\n\n  // filter + sort + layout\n  proto.arrange = function( opts ) {\n    // set any options pass\n    this.option( opts );\n    this._getIsInstant();\n    // filter, sort, and layout\n\n    // filter\n    var filtered = this._filter( this.items );\n    this.filteredItems = filtered.matches;\n\n    this._bindArrangeComplete();\n\n    if ( this._isInstant ) {\n      this._noTransition( this._hideReveal, [ filtered ] );\n    } else {\n      this._hideReveal( filtered );\n    }\n\n    this._sort();\n    this._layout();\n  };\n  // alias to _init for main plugin method\n  proto._init = proto.arrange;\n\n  proto._hideReveal = function( filtered ) {\n    this.reveal( filtered.needReveal );\n    this.hide( filtered.needHide );\n  };\n\n  // HACK\n  // Don't animate/transition first layout\n  // Or don't animate/transition other layouts\n  proto._getIsInstant = function() {\n    var isLayoutInstant = this._getOption('layoutInstant');\n    var isInstant = isLayoutInstant !== undefined ? isLayoutInstant :\n      !this._isLayoutInited;\n    this._isInstant = isInstant;\n    return isInstant;\n  };\n\n  // listen for layoutComplete, hideComplete and revealComplete\n  // to trigger arrangeComplete\n  proto._bindArrangeComplete = function() {\n    // listen for 3 events to trigger arrangeComplete\n    var isLayoutComplete, isHideComplete, isRevealComplete;\n    var _this = this;\n    function arrangeParallelCallback() {\n      if ( isLayoutComplete && isHideComplete && isRevealComplete ) {\n        _this.dispatchEvent( 'arrangeComplete', null, [ _this.filteredItems ] );\n      }\n    }\n    this.once( 'layoutComplete', function() {\n      isLayoutComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once( 'hideComplete', function() {\n      isHideComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once( 'revealComplete', function() {\n      isRevealComplete = true;\n      arrangeParallelCallback();\n    });\n  };\n\n  // -------------------------- filter -------------------------- //\n\n  proto._filter = function( items ) {\n    var filter = this.options.filter;\n    filter = filter || '*';\n    var matches = [];\n    var hiddenMatched = [];\n    var visibleUnmatched = [];\n\n    var test = this._getFilterTest( filter );\n\n    // test each item\n    for ( var i=0; i < items.length; i++ ) {\n      var item = items[i];\n      if ( item.isIgnored ) {\n        continue;\n      }\n      // add item to either matched or unmatched group\n      var isMatched = test( item );\n      // item.isFilterMatched = isMatched;\n      // add to matches if its a match\n      if ( isMatched ) {\n        matches.push( item );\n      }\n      // add to additional group if item needs to be hidden or revealed\n      if ( isMatched && item.isHidden ) {\n        hiddenMatched.push( item );\n      } else if ( !isMatched && !item.isHidden ) {\n        visibleUnmatched.push( item );\n      }\n    }\n\n    // return collections of items to be manipulated\n    return {\n      matches: matches,\n      needReveal: hiddenMatched,\n      needHide: visibleUnmatched\n    };\n  };\n\n  // get a jQuery, function, or a matchesSelector test given the filter\n  proto._getFilterTest = function( filter ) {\n    if ( jQuery && this.options.isJQueryFiltering ) {\n      // use jQuery\n      return function( item ) {\n        return jQuery( item.element ).is( filter );\n      };\n    }\n    if ( typeof filter == 'function' ) {\n      // use filter as function\n      return function( item ) {\n        return filter( item.element );\n      };\n    }\n    // default, use filter as selector string\n    return function( item ) {\n      return matchesSelector( item.element, filter );\n    };\n  };\n\n  // -------------------------- sorting -------------------------- //\n\n  /**\n   * @params {Array} elems\n   * @public\n   */\n  proto.updateSortData = function( elems ) {\n    // get items\n    var items;\n    if ( elems ) {\n      elems = utils.makeArray( elems );\n      items = this.getItems( elems );\n    } else {\n      // update all items if no elems provided\n      items = this.items;\n    }\n\n    this._getSorters();\n    this._updateItemsSortData( items );\n  };\n\n  proto._getSorters = function() {\n    var getSortData = this.options.getSortData;\n    for ( var key in getSortData ) {\n      var sorter = getSortData[ key ];\n      this._sorters[ key ] = mungeSorter( sorter );\n    }\n  };\n\n  /**\n   * @params {Array} items - of Enviratope.Items\n   * @private\n   */\n  proto._updateItemsSortData = function( items ) {\n    // do not update if no items\n    var len = items && items.length;\n\n    for ( var i=0; len && i < len; i++ ) {\n      var item = items[i];\n      item.updateSortData();\n    }\n  };\n\n  // ----- munge sorter ----- //\n\n  // encapsulate this, as we just need mungeSorter\n  // other functions in here are just for munging\n  var mungeSorter = ( function() {\n    // add a magic layer to sorters for convienent shorthands\n    // `.foo-bar` will use the text of .foo-bar querySelector\n    // `[foo-bar]` will use attribute\n    // you can also add parser\n    // `.foo-bar parseInt` will parse that as a number\n    function mungeSorter( sorter ) {\n      // if not a string, return function or whatever it is\n      if ( typeof sorter != 'string' ) {\n        return sorter;\n      }\n      // parse the sorter string\n      var args = trim( sorter ).split(' ');\n      var query = args[0];\n      // check if query looks like [an-attribute]\n      var attrMatch = query.match( /^\\[(.+)\\]$/ );\n      var attr = attrMatch && attrMatch[1];\n      var getValue = getValueGetter( attr, query );\n      // use second argument as a parser\n      var parser = Enviratope.sortDataParsers[ args[1] ];\n      // parse the value, if there was a parser\n      sorter = parser ? function( elem ) {\n        return elem && parser( getValue( elem ) );\n      } :\n      // otherwise just return value\n      function( elem ) {\n        return elem && getValue( elem );\n      };\n\n      return sorter;\n    }\n\n    // get an attribute getter, or get text of the querySelector\n    function getValueGetter( attr, query ) {\n      // if query looks like [foo-bar], get attribute\n      if ( attr ) {\n        return function getAttribute( elem ) {\n          return elem.getAttribute( attr );\n        };\n      }\n\n      // otherwise, assume its a querySelector, and get its text\n      return function getChildText( elem ) {\n        var child = elem.querySelector( query );\n        return child && child.textContent;\n      };\n    }\n\n    return mungeSorter;\n  })();\n\n  // parsers used in getSortData shortcut strings\n  Enviratope.sortDataParsers = {\n    'parseInt': function( val ) {\n      return parseInt( val, 10 );\n    },\n    'parseFloat': function( val ) {\n      return parseFloat( val );\n    }\n  };\n\n  // ----- sort method ----- //\n\n  // sort filteredItem order\n  proto._sort = function() {\n    var sortByOpt = this.options.sortBy;\n    if ( !sortByOpt ) {\n      return;\n    }\n    // concat all sortBy and sortHistory\n    var sortBys = [].concat.apply( sortByOpt, this.sortHistory );\n    // sort magic\n    var itemSorter = getItemSorter( sortBys, this.options.sortAscending );\n    this.filteredItems.sort( itemSorter );\n    // keep track of sortBy History\n    if ( sortByOpt != this.sortHistory[0] ) {\n      // add to front, oldest goes in last\n      this.sortHistory.unshift( sortByOpt );\n    }\n  };\n\n  // returns a function used for sorting\n  function getItemSorter( sortBys, sortAsc ) {\n    return function sorter( itemA, itemB ) {\n      // cycle through all sortKeys\n      for ( var i = 0; i < sortBys.length; i++ ) {\n        var sortBy = sortBys[i];\n        var a = itemA.sortData[ sortBy ];\n        var b = itemB.sortData[ sortBy ];\n        if ( a > b || a < b ) {\n          // if sortAsc is an object, use the value given the sortBy key\n          var isAscending = sortAsc[ sortBy ] !== undefined ? sortAsc[ sortBy ] : sortAsc;\n          var direction = isAscending ? 1 : -1;\n          return ( a > b ? 1 : -1 ) * direction;\n        }\n      }\n      return 0;\n    };\n  }\n\n  // -------------------------- methods -------------------------- //\n\n  // get layout mode\n  proto._mode = function() {\n    var layoutMode = this.options.layoutMode;\n    var mode = this.modes[ layoutMode ];\n    if ( !mode ) {\n      // TODO console.error\n      throw new Error( 'No layout mode: ' + layoutMode );\n    }\n    // HACK sync mode's options\n    // any options set after init for layout mode need to be synced\n    mode.options = this.options[ layoutMode ];\n    return mode;\n  };\n\n  proto._resetLayout = function() {\n    // trigger original reset layout\n    Outlayer.prototype._resetLayout.call( this );\n    this._mode()._resetLayout();\n  };\n\n  proto._getItemLayoutPosition = function( item  ) {\n    return this._mode()._getItemLayoutPosition( item );\n  };\n\n  proto._manageStamp = function( stamp ) {\n    this._mode()._manageStamp( stamp );\n  };\n\n  proto._getContainerSize = function() {\n    return this._mode()._getContainerSize();\n  };\n\n  proto.needsResizeLayout = function() {\n    return this._mode().needsResizeLayout();\n  };\n\n  // -------------------------- adding & removing -------------------------- //\n\n  // HEADS UP overwrites default Outlayer appended\n  proto.appended = function( elems ) {\n    var items = this.addItems( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded( items );\n    // add to filteredItems\n    this.filteredItems = this.filteredItems.concat( filteredItems );\n  };\n\n  // HEADS UP overwrites default Outlayer prepended\n  proto.prepended = function( elems ) {\n    var items = this._itemize( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // start new layout\n    this._resetLayout();\n    this._manageStamps();\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded( items );\n    // layout previous items\n    this.layoutItems( this.filteredItems );\n    // add to items and filteredItems\n    this.filteredItems = filteredItems.concat( this.filteredItems );\n    this.items = items.concat( this.items );\n  };\n\n  proto._filterRevealAdded = function( items ) {\n    var filtered = this._filter( items );\n    this.hide( filtered.needHide );\n    // reveal all new items\n    this.reveal( filtered.matches );\n    // layout new items, no transition\n    this.layoutItems( filtered.matches, true );\n    return filtered.matches;\n  };\n\n  /**\n   * Filter, sort, and layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.insert = function( elems ) {\n    var items = this.addItems( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // append item elements\n    var i, item;\n    var len = items.length;\n    for ( i=0; i < len; i++ ) {\n      item = items[i];\n      this.element.appendChild( item.element );\n    }\n    // filter new stuff\n    var filteredInsertItems = this._filter( items ).matches;\n    // set flag\n    for ( i=0; i < len; i++ ) {\n      items[i].isLayoutInstant = true;\n    }\n    this.arrange();\n    // reset flag\n    for ( i=0; i < len; i++ ) {\n      delete items[i].isLayoutInstant;\n    }\n    this.reveal( filteredInsertItems );\n  };\n\n  var _remove = proto.remove;\n  proto.remove = function( elems ) {\n    elems = utils.makeArray( elems );\n    var removeItems = this.getItems( elems );\n    // do regular thing\n    _remove.call( this, elems );\n    // bail if no items to remove\n    var len = removeItems && removeItems.length;\n    // remove elems from filteredItems\n    for ( var i=0; len && i < len; i++ ) {\n      var item = removeItems[i];\n      // remove item from collection\n      utils.removeFrom( this.filteredItems, item );\n    }\n  };\n\n  proto.shuffle = function() {\n    // update random sortData\n    for ( var i=0; i < this.items.length; i++ ) {\n      var item = this.items[i];\n      item.sortData.random = Math.random();\n    }\n    this.options.sortBy = 'random';\n    this._sort();\n    this._layout();\n  };\n\n  /**\n   * trigger fn without transition\n   * kind of hacky to have this in the first place\n   * @param {Function} fn\n   * @param {Array} args\n   * @returns ret\n   * @private\n   */\n  proto._noTransition = function( fn, args ) {\n    // save transitionDuration before disabling\n    var transitionDuration = this.options.transitionDuration;\n    // disable transition\n    this.options.transitionDuration = 0;\n    // do it\n    var returnValue = fn.apply( this, args );\n    // re-enable transition for reveal\n    this.options.transitionDuration = transitionDuration;\n    return returnValue;\n  };\n\n  // ----- helper methods ----- //\n\n  /**\n   * getter method for getting filtered item elements\n   * @returns {Array} elems - collection of item elements\n   */\n  proto.getFilteredItemElements = function() {\n    return this.filteredItems.map( function( item ) {\n      return item.element;\n    });\n  };\n\n  // -----  ----- //\n\n  return Enviratope;\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/isotope.js","/**\n * Fizzy UI utils v2.0.5\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n'use strict';\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj == 'object' &&\n    typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem.parentNode && elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  var readyState = document.readyState;\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\n    // do async to allow for other scripts to run. metafizzy/flickity#441\n    setTimeout( callback );\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('namespace')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fizzy-ui-utils/utils.js\n// module id = 11\n// module chunks = 0","/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/desandro-matches-selector/matches-selector.js\n// module id = 12\n// module chunks = 0","/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  var x = parseFloat( xValue );\n  var y = parseFloat( yValue );\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  if ( xValue.indexOf('%') != -1 ) {\n    x = ( x / 100 ) * layoutSize.width;\n  }\n  if ( yValue.indexOf('%') != -1 ) {\n    y = ( y / 100 ) * layoutSize.height;\n  }\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var didNotMove = x == this.position.x && y == this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseFloat( x );\n  this.position.y = parseFloat( y );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/outlayer/item.js\n// module id = 13\n// module chunks = 0","/*!\n * Masonry layout mode\n * sub-classes Masonry\n * https://masonry.desandro.com\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode',\n        'masonry-layout/masonry'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode'),\n      require('masonry-layout')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode,\n      window.Masonry\n    );\n  }\n\n}( window, function factory( LayoutMode, Masonry ) {\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var MasonryMode = LayoutMode.create('masonry');\n\n  var proto = MasonryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  };\n\n  // inherit Masonry prototype\n  for ( var method in Masonry.prototype ) {\n    // do not inherit mode methods\n    if ( !keepModeMethods[ method ] ) {\n      proto[ method ] = Masonry.prototype[ method ];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n  proto.measureColumns = function() {\n    // set items, used if measuring first item\n    this.items = this.isotope.filteredItems;\n    measureColumns.call( this );\n  };\n\n  // point to mode options for fitWidth\n  var _getOption = proto._getOption;\n  proto._getOption = function( option ) {\n    if ( option == 'fitWidth' ) {\n      return this.options.isFitWidth !== undefined ?\n        this.options.isFitWidth : this.options.fitWidth;\n    }\n    return _getOption.apply( this.isotope, arguments );\n  };\n\n  return MasonryMode;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/masonry.js","/*!\n * Masonry v4.2.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  proto.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n    // use horizontal or top column position\n    var colPosMethod = this.options.horizontalOrder ?\n      '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[ colPosMethod ]( colSpan, item );\n    // position the brick\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    };\n    // apply setHeight to necessary columns\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n    for ( var i = colPosition.col; i < setMax; i++ ) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function( colSpan ) {\n    var colGroup = this._getTopColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n\n    return {\n      col: colGroup.indexOf( minimumY ),\n      y: minimumY,\n    };\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  proto._getTopColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      colGroup[i] = this._getColGroupY( i, colSpan );\n    }\n    return colGroup;\n  };\n\n  proto._getColGroupY = function( col, colSpan ) {\n    if ( colSpan < 2 ) {\n      return this.colYs[ col ];\n    }\n    // make an array of colY values for that one group\n    var groupColYs = this.colYs.slice( col, col + colSpan );\n    // and get the max value of the array\n    return Math.max.apply( Math, groupColYs );\n  };\n\n  // get column position based on horizontal index. #873\n  proto._getHorizontalColPosition = function( colSpan, item ) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\n    // shift to next row if item can't fit on current row\n    col = isOver ? 0 : col;\n    // don't let zero-size items take up space\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n\n    return {\n      col: col,\n      y: this._getColGroupY( col, colSpan ),\n    };\n  };\n\n  proto._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  proto._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/masonry-layout/masonry.js\n// module id = 15\n// module chunks = 0","/**\n * fitRows layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar FitRows = LayoutMode.create('fitRows');\n\nvar proto = FitRows.prototype;\n\nproto._resetLayout = function() {\n  this.x = 0;\n  this.y = 0;\n  this.maxY = 0;\n  this._getMeasurement( 'gutter', 'outerWidth' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n\n  var itemWidth = item.size.outerWidth + this.gutter;\n  // if this element cannot fit in the current row\n  var containerWidth = this.isotope.size.innerWidth + this.gutter;\n  if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {\n    this.x = 0;\n    this.y = this.maxY;\n  }\n\n  var position = {\n    x: this.x,\n    y: this.y\n  };\n\n  this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );\n  this.x += itemWidth;\n\n  return position;\n};\n\nproto._getContainerSize = function() {\n  return { height: this.maxY };\n};\n\nreturn FitRows;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/fit-rows.js","/**\n * vertical layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar Vertical = LayoutMode.create( 'vertical', {\n  horizontalAlignment: 0\n});\n\nvar proto = Vertical.prototype;\n\nproto._resetLayout = function() {\n  this.y = 0;\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n  var x = ( this.isotope.size.innerWidth - item.size.outerWidth ) *\n    this.options.horizontalAlignment;\n  var y = this.y;\n  this.y += item.size.outerHeight;\n  return { x: x, y: y };\n};\n\nproto._getContainerSize = function() {\n  return { height: this.y };\n};\n\nreturn Vertical;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/vertical.js","/**\n * Isotope Item\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.Item = factory(\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( Outlayer ) {\n'use strict';\n\n// -------------------------- Item -------------------------- //\n\n// sub-class Outlayer Item\nfunction Item() {\n  Outlayer.Item.apply( this, arguments );\n}\n\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar _create = proto._create;\nproto._create = function() {\n  // assign id, used for original-order sorting\n  this.id = this.layout.itemGUID++;\n  _create.call( this );\n  this.sortData = {};\n};\n\nproto.updateSortData = function() {\n  if ( this.isIgnored ) {\n    return;\n  }\n  // default sorters\n  this.sortData.id = this.id;\n  // for backward compatibility\n  this.sortData['original-order'] = this.id;\n  this.sortData.random = Math.random();\n  // go thru getSortData obj and apply the sorters\n  var getSortData = this.layout.options.getSortData;\n  var sorters = this.layout._sorters;\n  for ( var key in getSortData ) {\n    var sorter = sorters[ key ];\n    this.sortData[ key ] = sorter( this.element, this );\n  }\n};\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  // call super\n  _destroy.apply( this, arguments );\n  // reset display, #741\n  this.css({\n    display: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviratope-item.js","/**\n * enviraImagesLoaded PACKAGED v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n/**\n * EvEmitter v1.0.1\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners array\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || [];\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * enviraImagesLoaded v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.enviraImagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( window,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n}\n\n// -------------------------- enviraImagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction EnviraImagesLoaded( elem, options, onAlways ) {\n  // coerce EnviraImagesLoaded() without new, to be new EnviraImagesLoaded()\n  if ( !( this instanceof EnviraImagesLoaded ) ) {\n    return new EnviraImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelectorAll( elem );\n  }\n\n  this.elements = makeArray( elem );\n  this.options = extend( {}, this.options );\n\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( function() {\n    this.check();\n  }.bind( this ));\n}\n\nEnviraImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nEnviraImagesLoaded.prototype.options = {};\n\nEnviraImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nEnviraImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nEnviraImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nEnviraImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nEnviraImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nEnviraImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nEnviraImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nEnviraImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.pendingSrc || this.img.currentSrc || this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  return this.img.complete && this.img.naturalWidth !== undefined;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nEnviraImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().enviraImagesLoaded()\n  $.fn.enviraImagesLoaded = function( options, callback ) {\n    var instance = new EnviraImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nEnviraImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn EnviraImagesLoaded;\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/imagesloaded.js",";(function (window, document, $, undefined) {\n    'use strict';\n\n    // If there's no jQuery, envirabox can't work\n    // =========================================\n\n    if ( !$ ) {\n        return;\n    }\n\n    // Check if envirabox is already initialized\n    // ========================================\n\n    if ( $.fn.envirabox ) {\n\n        $.error('envirabox already initialized');\n\n        return;\n    }\n\n    // Private default settings\n    // ========================\n\n    var defaults = {\n\n        // Enable infinite gallery navigation\n        loop : false,\n\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n        margin : [44, 0],\n\n        // Horizontal space between slides\n        gutter : 50,\n\n        // Enable keyboard navigation\n        keyboard : true,\n\n        // Should display navigation arrows at the screen edges\n        arrows : true,\n\n        // Should display infobar (counter and arrows at the top)\n        infobar : false,\n\n        // Should display toolbar (buttons at the top)\n        toolbar : true,\n\n        // What buttons should appear in the top right corner.\n        // Buttons will be created using templates from `btnTpl` option\n        // and they will be placed into toolbar (class=\"envirabox-toolbar\"` element)\n        buttons : [\n            'slideShow',\n            'fullScreen',\n            'thumbs',\n            'close'\n        ],\n\n        // Detect \"idle\" time in seconds\n        idleTime : 4,\n\n        // Should display buttons at top right corner of the content\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\n        // Use template from `btnTpl.smallBtn` for customization\n        smallBtn : true,\n\n        // Disable right-click and use simple image protection for images\n        protect : false,\n\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\n        modal : false,\n\n        image : {\n\n            // Wait for images to load before displaying\n            // Requires predefined image dimensions\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\n            preload : \"auto\",\n\n        },\n\n        ajax : {\n\n            // Object containing settings for ajax request\n            settings : {\n\n                // This helps to indicate that request comes from the modal\n                // Feel free to change naming\n                data : {\n                    envirabox : true\n                }\n            }\n\n        },\n\n        iframe : {\n\n            // Iframe template\n            tpl : '<iframe id=\"envirabox-frame{rnd}\" name=\"envirabox-frame{rnd}\" class=\"envirabox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\n\n            // Preload iframe before displaying it\n            // This allows to calculate iframe content width and height\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\n            preload : true,\n\n            // Custom CSS styling for iframe wrapping element\n            // You can use this to set custom iframe dimensions\n            css : {},\n\n            // Iframe tag attributes\n            attr : {\n                scrolling : 'auto'\n            }\n\n        },\n\n        // Open/close animation type\n        // Possible values:\n        //   false            - disable\n        //   \"zoom\"           - zoom images from/to thumbnail\n        //   \"fade\"\n        //   \"zoom-in-out\"\n        //\n        animationEffect : \"zoom\",\n\n        // Duration in ms for open/close animation\n        animationDuration : 366,\n\n        // Should image change opacity while zooming\n        // If opacity is 'auto', then opacity will be changed if image and thumbnail have different aspect ratios\n        zoomOpacity : 'auto',\n\n        // Transition effect between slides\n        //\n        // Possible values:\n        //   false            - disable\n        //   \"fade'\n        //   \"slide'\n        //   \"circular'\n        //   \"tube'\n        //   \"zoom-in-out'\n        //   \"rotate'\n        //\n        transitionEffect : \"fade\",\n\n        // Duration in ms for transition animation\n        transitionDuration : 366,\n\n        // Custom CSS class for slide element\n        slideClass : '',\n\n        // Custom CSS class for layout\n        baseClass : '',\n\n        // Base template for layout\n        baseTpl\t:\n            '<div class=\"envirabox-container\" role=\"dialog\" tabindex=\"-1\">' +\n                '<div class=\"envirabox-bg\"></div>' +\n                '<div class=\"envirabox-inner\">' +\n                    '<div class=\"envirabox-infobar\">' +\n                        '<button data-envirabox-prev title=\"{{PREV}}\" class=\"envirabox-button envirabox-button--left\"></button>' +\n                        '<div class=\"envirabox-infobar__body\">' +\n                            '<span data-envirabox-index></span>&nbsp;/&nbsp;<span data-envirabox-count></span>' +\n                        '</div>' +\n                        '<button data-envirabox-next title=\"{{NEXT}}\" class=\"envirabox-button envirabox-button--right\"></button>' +\n                    '</div>' +\n                    '<div class=\"envirabox-toolbar\">' +\n                        '{{BUTTONS}}' +\n                    '</div>' +\n                    '<div class=\"envirabox-navigation\">' +\n                        '<button data-envirabox-prev title=\"{{PREV}}\" class=\"envirabox-arrow envirabox-arrow--left\" />' +\n                        '<button data-envirabox-next title=\"{{NEXT}}\" class=\"envirabox-arrow envirabox-arrow--right\" />' +\n                    '</div>' +\n                    '<div class=\"envirabox-stage\"></div>' +\n                    '<div class=\"envirabox-caption-wrap\">' +\n                        '<div class=\"envirabox-caption\"></div>' +\n                    '</div>' +\n                '</div>' +\n            '</div>',\n\n        // Loading indicator template\n        spinnerTpl : '<div class=\"envirabox-loading\"></div>',\n\n        // Error message template\n        errorTpl : '<div class=\"envirabox-error\"><p>{{ERROR}}<p></div>',\n\n        btnTpl : {\n            slideShow  : '<button data-envirabox-play class=\"envirabox-button envirabox-button--play\" title=\"{{PLAY_START}}\"></button>',\n            fullScreen : '<button data-envirabox-fullscreen class=\"envirabox-button envirabox-button--fullscreen\" title=\"{{FULL_SCREEN}}\"></button>',\n            thumbs     : '<button data-envirabox-thumbs class=\"envirabox-button envirabox-button--thumbs\" title=\"{{THUMBS}}\"></button>',\n            close      : '<button data-envirabox-close class=\"envirabox-button envirabox-button--close\" title=\"{{CLOSE}}\"></button>',\n\n            // This small close button will be appended to your html/inline/ajax content by default,\n            // if \"smallBtn\" option is not set to false\n            smallBtn   : '<button data-envirabox-close class=\"envirabox-close-small\" title=\"{{CLOSE}}\"></button>'\n        },\n\n        // Container is injected into this element\n        parentEl : 'body',\n\n\n        // Focus handling\n        // ==============\n\n        // Try to focus on the first focusable element after opening\n        autoFocus : true,\n\n        // Put focus back to active element after closing\n        backFocus : true,\n\n        // Do not let user to focus on element outside modal content\n        trapFocus : true,\n\n\n        // Module specific options\n        // =======================\n\n        fullScreen : {\n            autoStart : false,\n        },\n\n        // Set `touch: false` to disable dragging/swiping\n        touch : {\n            vertical : true,  // Allow to drag content vertically\n            momentum : true   // Continue movement after releasing mouse/touch when panning\n        },\n\n        // Hash value when initializing manually,\n        // set `false` to disable hash change\n        hash : null,\n\n        // Customize or add new media types\n        // Example:\n        /*\n        media : {\n            youtube : {\n                params : {\n                    autoplay : 0\n                }\n            }\n        }\n        */\n        media : {},\n\n        slideShow : {\n            autoStart : false,\n            speed     : 4000\n        },\n\n        thumbs : {\n            autoStart   : false,   // Display thumbnails on opening\n            hideOnClose : true     // Hide thumbnail grid when closing animation starts\n        },\n\n        // Callbacks\n        //==========\n\n        // See Documentation/API/Events for more information\n        // Example:\n        /*\n            afterShow: function( instance, current ) {\n                 console.info( 'Clicked element:' );\n                 console.info( current.opts.$orig );\n            }\n        */\n\n        onInit       : $.noop,  // When instance has been initialized\n\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\n        afterLoad    : $.noop,  // When the content of a slide is done loading\n\n        beforeShow   : $.noop,  // Before open animation starts\n        afterShow    : $.noop,  // When content is done loading and animating\n\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\n        afterClose   : $.noop,  // After instance has been closed\n\n        onActivate   : $.noop,  // When instance is brought to front\n        onDeactivate : $.noop,  // When other instance has been activated\n\n\n        // Interaction\n        // ===========\n\n        // Use options below to customize taken action when user clicks or double clicks on the envirabox area,\n        // each option can be string or method that returns value.\n        //\n        // Possible values:\n        //   \"close\"           - close instance\n        //   \"next\"            - move to next gallery item\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\n        //   \"toggleControls\"  - show/hide controls\n        //   \"zoom\"            - zoom image (if loaded)\n        //   false             - do nothing\n\n        // Clicked on the content\n        clickContent : function( current, event ) {\n            return current.type === 'image' ? 'zoom' : false;\n        },\n\n        // Clicked on the slide\n        clickSlide : 'close',\n\n        // Clicked on the background (backdrop) element\n        clickOutside : 'close',\n\n        // Same as previous two, but for double click\n        dblclickContent : false,\n        dblclickSlide   : false,\n        dblclickOutside : false,\n\n\n        // Custom options when mobile device is detected\n        // =============================================\n\n        mobile : {\n            clickContent : function( current, event ) {\n                return current.type === 'image' ? 'toggleControls' : false;\n            },\n            clickSlide : function( current, event ) {\n                return current.type === 'image' ? 'toggleControls' : 'close';\n            },\n            dblclickContent : function( current, event ) {\n                return current.type === 'image' ? 'zoom' : false;\n            },\n            dblclickSlide : function( current, event ) {\n                return current.type === 'image' ? 'zoom' : false;\n            }\n        },\n\n\n        // Internationalization\n        // ============\n\n        lang : 'en',\n        i18n : {\n            'en' : {\n                CLOSE       : 'Close',\n                NEXT        : 'Next',\n                PREV        : 'Previous',\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\n                PLAY_START  : 'Start slideshow',\n                PLAY_STOP   : 'Pause slideshow',\n                FULL_SCREEN : 'Full screen',\n                THUMBS      : 'Thumbnails'\n            },\n            'de' : {\n                CLOSE       : 'Schliessen',\n                NEXT        : 'Weiter',\n                PREV        : 'Zurück',\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.',\n                PLAY_START  : 'Diaschau starten',\n                PLAY_STOP   : 'Diaschau beenden',\n                FULL_SCREEN : 'Vollbild',\n                THUMBS      : 'Vorschaubilder'\n            }\n        }\n\n    };\n\n    // Few useful variables and methods\n    // ================================\n\n    var $W = $(window);\n    var $D = $(document);\n\n    var called = 0;\n\n\n    // Check if an object is a jQuery object and not a native JavaScript object\n    // ========================================================================\n\n    var isQuery = function ( obj ) {\n        return obj && obj.hasOwnProperty && obj instanceof $;\n    };\n\n\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\n    // ===============================================================================\n\n    var requestAFrame = (function () {\n        return window.requestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                window.oRequestAnimationFrame ||\n                // if all else fails, use setTimeout\n                function (callback) {\n                    return window.setTimeout(callback, 1000 / 60);\n                };\n    })();\n\n\n    // Detect the supported transition-end event property name\n    // =======================================================\n\n    var transitionEnd = (function () {\n        var t, el = document.createElement(\"fakeelement\");\n\n        var transitions = {\n            \"transition\"      : \"transitionend\",\n            \"OTransition\"     : \"oTransitionEnd\",\n            \"MozTransition\"   : \"transitionend\",\n            \"WebkitTransition\": \"webkitTransitionEnd\"\n        };\n\n        for (t in transitions) {\n            if (el.style[t] !== undefined){\n                return transitions[t];\n            }\n        }\n    })();\n\n\n    // Force redraw on an element.\n    // This helps in cases where the browser doesn't redraw an updated element properly.\n    // =================================================================================\n\n    var forceRedraw = function( $el ) {\n        return ( $el && $el.length && $el[0].offsetHeight );\n    };\n\n\n    // Class definition\n    // ================\n\n    var EnviraBox = function( content, opts, index ) {\n        var self = this;\n\n        self.opts  = $.extend( true, { index : index }, defaults, opts || {} );\n\n        // Exclude buttons option from deep merging\n        if ( opts && $.isArray( opts.buttons ) ) {\n            self.opts.buttons = opts.buttons;\n        }\n\n        self.id    = self.opts.id || ++called;\n        self.group = [];\n\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\n        self.prevIndex = null;\n\n        self.prevPos = null;\n        self.currPos = 0;\n\n        self.firstRun = null;\n\n        // Create group elements from original item collection\n        self.createGroup( content );\n\n        if ( !self.group.length ) {\n            return;\n        }\n\n        // Save last active element and current scroll position\n        self.$lastFocus = $(document.activeElement).blur();\n\n        // Collection of gallery objects\n        self.slides = {};\n\n        self.init( content );\n\n    };\n\n    $.extend(EnviraBox.prototype, {\n\n        // Create DOM structure\n        // ====================\n\n        init : function() {\n            var self = this;\n\n            var testWidth, $container, buttonStr;\n\n            var firstItemOpts = self.group[ self.currIndex ].opts;\n\n            self.scrollTop  = $D.scrollTop();\n            self.scrollLeft = $D.scrollLeft();\n\n\n            // Hide scrollbars\n            // ===============\n\n            if ( !$.envirabox.getInstance() && !$.envirabox.isMobile && $( 'body' ).css('overflow') !== 'hidden' ) {\n                testWidth = $( 'body' ).width();\n\n                $( 'html' ).addClass( 'envirabox-enabled' );\n\n                // Compare body width after applying \"overflow: hidden\"\n                testWidth = $( 'body' ).width() - testWidth;\n\n                // If width has changed - compensate missing scrollbars by adding right margin\n                if ( testWidth > 1 ) {\n                    $( 'head' ).append( '<style id=\"envirabox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar, .envirabox-enabled body { margin-right: ' + testWidth + 'px; }</style>' );\n                }\n            }\n\n\n            // Build html markup and set references\n            // ====================================\n\n            // Build html code for buttons and insert into main template\n            buttonStr = '';\n\n            $.each( firstItemOpts.buttons, function( index, value ) {\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\n            });\n\n            // Create markup from base template, it will be initially hidden to\n            // avoid unnecessary work like painting while initializing is not complete\n            $container = $( self.translate( self, firstItemOpts.baseTpl.replace( '\\{\\{BUTTONS\\}\\}', buttonStr ) ) )\n                .addClass( 'envirabox-is-hidden' )\n                .attr('id', 'envirabox-container-' + self.id)\n                .addClass( firstItemOpts.baseClass )\n                .data( 'EnviraBox', self )\n                .prependTo( firstItemOpts.parentEl );\n\n            // Create object holding references to jQuery wrapped nodes\n            self.$refs = {\n                container : $container\n            };\n\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption' ].forEach(function(item) {\n                self.$refs[ item ] = $container.find( '.envirabox-' + item );\n            });\n\n            // Check for redundant elements\n            if ( !firstItemOpts.arrows || self.group.length < 2 ) {\n                $container.find('.envirabox-navigation').remove();\n            }\n\n            if ( !firstItemOpts.infobar ) {\n                self.$refs.infobar.remove();\n            }\n\n            if ( !firstItemOpts.toolbar ) {\n                self.$refs.toolbar.remove();\n            }\n\n            self.trigger( 'onInit' );\n\n            // Bring to front and enable events\n            self.activate();\n\n            // Build slides, load and reveal content\n            self.jumpTo( self.currIndex );\n        },\n\n\n        // Simple i18n support - replaces object keys found in template\n        // with corresponding values\n        // ============================================================\n\n        translate : function( obj, str ) {\n            var arr = obj.opts.i18n[ obj.opts.lang ];\n\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\n                var value = arr[n];\n\n                if ( value === undefined ) {\n                    return match;\n                }\n\n                return value;\n            });\n        },\n\n        // Create array of gally item objects\n        // Check if each object has valid type and content\n        // ===============================================\n        createGroup : function ( content ) {\n            var self  = this;\n            var items = $.makeArray( content );\n\n            $.each(items, function( i, item ) {\n                var obj  = {},\n                    opts = {},\n                    data = [],\n                    $item,\n                    type,\n                    src,\n                    found,\n                    srcParts;\n\n                // Step 1 - Make sure we have an object\n                // ====================================\n\n                if ( $.isPlainObject( item ) ) {\n\n                    // We probably have manual usage here, something like\n                    // $.envirabox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\n\n                    obj  = item;\n                    opts = item.opts || item;\n\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\n\n                    // Here we propbably have jQuery collection returned by some selector\n\n                    $item = $( item );\n                    data  = $item.data();\n\n                    opts = 'options' in data ? data.options : {};\n                    opts = $.type( opts ) === 'object' ? opts : {};\n\n                    obj.src  = 'src' in data ? data.src : ( opts.src || $item.attr( 'href' ) );\n\t\t\t\t\t\n\t\t\t\t\t//Make sure our Obj has all of our keys\n\t\t\t\t\tfor (var key in data){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (data.hasOwnProperty(key)) {\t\n\t\t\t\t\t\t\tobj[key] = data[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\t\t\t\t\t\n                    [ 'width', 'height', 'thumb', 'type', 'filter' ].forEach(function(item) {\n                        if ( item in data ) {\n                            opts[ item ] = data[ item ];\n                        }\n                    });\n\n                    if ( 'srcset' in data ) {\n                        opts.image = { srcset : data.srcset };\n                    }\n\n                    opts.$orig = $item;\n\n                    if ( !obj.type && !obj.src ) {\n                        obj.type = 'inline';\n                        obj.src  = item;\n                    }\n\n                } else {\n\n                    // Assume we have a simple html code, for example:\n                    // $.envirabox.open( '<div><h1>Hi!</h1></div>' );\n\n                    obj = {\n                        type : 'html',\n                        src  : item + ''\n                    };\n\n                }\n\n                // Each gallery object has full collection of options\n                obj.opts = $.extend( true, {}, self.opts, opts );\n\n                if ( $.envirabox.isMobile ) {\n                    obj.opts = $.extend( true, {}, obj.opts, obj.opts.mobile );\n                }\n\n\n                // Step 2 - Make sure we have content type, if not - try to guess\n                // ==============================================================\n\n                type = obj.type || obj.opts.type;\n                src  = obj.src || '';\n\n                if ( !type && src ) {\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\n                        type = 'image';\n\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\n                        type = 'pdf';\n\t\t\t\t\t} else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\n                        type = 'video';\n \n                        if ( !obj.opts.videoFormat ) {\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\n                        }\n \n                    } else if ( src.charAt(0) === '#' ) {\n                        type = 'inline';\n                    }\n                }\n\n                obj.type = type;\n\n\n                // Step 3 - Some adjustments\n                // =========================\n\n                obj.index = self.group.length;\n\n                // Check if $orig and $thumb objects exist\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\n                    delete obj.opts.$orig;\n                }\n\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\n                }\n\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\n                    delete obj.opts.$thumb;\n                }\n\n                // Caption is a \"special\" option, it can be passed as a method\n                if ( $.type( obj.opts.caption ) === 'function' ) {\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\n\n                } else if ( 'caption' in data ) {\n                    obj.opts.caption = data.caption;\n                }\n\n                // Make sure we have caption as a string\n                obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\n\n                // Check if url contains \"filter\" used to filter the content\n                // Example: \"ajax.html #something\"\n                if ( type === 'ajax' ) {\n                    srcParts = src.split(/\\s+/, 2);\n\n                    if ( srcParts.length > 1 ) {\n                        obj.src = srcParts.shift();\n\n                        obj.opts.filter = srcParts.shift();\n                    }\n                }\n\n                if ( obj.opts.smallBtn == true ) {\n\n                    obj.opts.toolbar  = false;\n                    obj.opts.smallBtn = true;\n\t\t\t\t\t\n                }\n\n                // If the type is \"pdf\", then simply load file into iframe\n                if ( type === 'pdf' ) {\n                    obj.type = 'iframe';\n\n                    obj.opts.iframe.preload = false;\n                }\n\n                // Hide all buttons and disable interactivity for modal items\n                if ( obj.opts.modal ) {\n\n                    obj.opts = $.extend(true, obj.opts, {\n                        // Remove buttons\n                        infobar : 0,\n                        toolbar : 0,\n\n                        smallBtn : 0,\n\n                        // Disable keyboard navigation\n                        keyboard : 0,\n\n                        // Disable some modules\n                        slideShow  : 0,\n                        fullScreen : 0,\n                        thumbs     : 0,\n                        touch      : 0,\n\n                        // Disable click event handlers\n                        clickContent    : false,\n                        clickSlide      : false,\n                        clickOutside    : false,\n                        dblclickContent : false,\n                        dblclickSlide   : false,\n                        dblclickOutside : false\n                    });\n\n                }\n\n                // Step 4 - Add processed object to group\n                // ======================================\n\n                self.group.push( obj );\n\n            });\n\n        },\n\n\n        // Attach an event handler functions for:\n        //   - navigation buttons\n        //   - browser scrolling, resizing;\n        //   - focusing\n        //   - keyboard\n        //   - detect idle\n        // ======================================\n\n        addEvents : function() {\n            var self = this;\n\n            self.removeEvents();\n\n            // Make navigation elements clickable\n            self.$refs.container.on('click.fb-close', '[data-envirabox-close]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.close( e );\n\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-envirabox-prev]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.previous();\n\n            }).on( 'click.fb-next touchend.fb-next', '[data-envirabox-next]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.next();\n\n            });\n\n\n            // Handle page scrolling and browser resizing\n            $W.on('orientationchange.fb resize.fb', function(e) {\n\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\n\n                    requestAFrame(function() {\n                        self.update();\n                    });\n\n                } else {\n\n                    self.$refs.stage.hide();\n\n                    setTimeout(function() {\n                        self.$refs.stage.show();\n\n                        self.update();\n                    }, 500);\n\n                }\n\n            });\n\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\n            // (a.k.a. \"escaping the modal\")\n            $D.on('focusin.fb', function(e) {\n                var instance = $.envirabox ? $.envirabox.getInstance() : null;\n\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'envirabox-container' ) || $( e.target ).is( document ) ) {\n                    return;\n                }\n\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\n                    e.stopPropagation();\n\n                    instance.focus();\n\n                    // Sometimes page gets scrolled, set it back\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\n                }\n            });\n\n\n            // Enable keyboard navigation\n            $D.on('keydown.fb', function (e) {\n                var current = self.current,\n                    keycode = e.keyCode || e.which;\n\n                if ( !current || !current.opts.keyboard ) {\n                    return;\n                }\n\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\n                    return;\n                }\n\n                // Backspace and Esc keys\n                if ( keycode === 8 || keycode === 27 ) {\n                    e.preventDefault();\n\n                    self.close( e );\n\n                    return;\n                }\n\n                // Left arrow and Up arrow\n                if ( keycode === 37 || keycode === 38 ) {\n                    e.preventDefault();\n\n                    self.previous();\n\n                    return;\n                }\n\n                // Righ arrow and Down arrow\n                if ( keycode === 39 || keycode === 40 ) {\n                    e.preventDefault();\n\n                    self.next();\n\n                    return;\n                }\n\n                self.trigger('afterKeydown', e, keycode);\n            });\n\n\n            // Hide controls after some inactivity period\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\n                self.idleSecondsCounter = 0;\n\n                $D.on('mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function() {\n                    self.idleSecondsCounter = 0;\n\n                    if ( self.isIdle ) {\n                        self.showControls();\n                    }\n\n                    self.isIdle = false;\n                });\n\n                self.idleInterval = window.setInterval(function() {\n\n                    self.idleSecondsCounter++;\n\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime ) {\n                        self.isIdle = true;\n                        self.idleSecondsCounter = 0;\n\n                        self.hideControls();\n                    }\n\n                }, 1000);\n            }\n\n        },\n\n\n        // Remove events added by the core\n        // ===============================\n\n        removeEvents : function () {\n            var self = this;\n\n            $W.off( 'orientationchange.fb resize.fb' );\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\n\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\n\n            if ( self.idleInterval ) {\n                window.clearInterval( self.idleInterval );\n\n                self.idleInterval = null;\n            }\n        },\n\n\n        // Change to previous gallery item\n        // ===============================\n\n        previous : function( duration ) {\n            return this.jumpTo( this.currPos - 1, duration );\n        },\n\n\n        // Change to next gallery item\n        // ===========================\n\n        next : function( duration ) {\n            return this.jumpTo( this.currPos + 1, duration );\n        },\n\n\n        // Switch to selected gallery item\n        // ===============================\n\n        jumpTo : function ( pos, duration, slide ) {\n            var self = this,\n                firstRun,\n                loop,\n                current,\n                previous,\n                canvasWidth,\n                currentPos,\n                transitionProps;\n\n            var groupLen = self.group.length;\n\n            if ( self.isSliding || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\n                return;\n            }\n\n            pos  = parseInt( pos, 10 );\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\n\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\n                return false;\n            }\n\n            firstRun = self.firstRun = ( self.firstRun === null );\n\n            if ( groupLen < 2 && !firstRun && !!self.isSliding ) {\n                return;\n            }\n\n            previous = self.current;\n\n            self.prevIndex = self.currIndex;\n            self.prevPos   = self.currPos;\n\n            // Create slides\n            current = self.createSlide( pos );\n\n            if ( groupLen > 1 ) {\n                if ( loop || current.index > 0 ) {\n                    self.createSlide( pos - 1 );\n                }\n\n                if ( loop || current.index < groupLen - 1 ) {\n                    self.createSlide( pos + 1 );\n                }\n            }\n\n            self.current   = current;\n            self.currIndex = current.index;\n            self.currPos   = current.pos;\n\n            self.trigger( 'beforeShow', firstRun );\n\n            self.updateControls();\n\n            currentPos = $.envirabox.getTranslate( current.$slide );\n\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'envirabox-animated' );\n            current.forcedDuration = undefined;\n\n            if ( $.isNumeric( duration ) ) {\n                current.forcedDuration = duration;\n            } else {\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\n            }\n\n            duration = parseInt( duration, 10 );\n\n            // Fresh start - reveal container, current slide and start loading content\n            if ( firstRun ) {\n\n                if ( current.opts.animationEffect && duration ) {\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\n                }\n\n                self.$refs.container.removeClass( 'envirabox-is-hidden' );\n\n                forceRedraw( self.$refs.container );\n\n                self.$refs.container.addClass( 'envirabox-is-open' );\n\n                // Make first slide visible (to display loading icon, if needed)\n                current.$slide.addClass( 'envirabox-slide--current' );\n\n                self.loadSlide( current );\n\n                self.preload();\n\n                return;\n            }\n\n            // Clean up\n            $.each(self.slides, function( index, slide ) {\n                $.envirabox.stop( slide.$slide );\n            });\n\n            // Make current that slide is visible even if content is still loading\n            current.$slide.removeClass( 'envirabox-slide--next envirabox-slide--previous' ).addClass( 'envirabox-slide--current' );\n\n            // If slides have been dragged, animate them to correct position\n            if ( current.isMoved ) {\n                canvasWidth = Math.round( current.$slide.width() );\n\n                $.each(self.slides, function( index, slide ) {\n                    var pos = slide.pos - current.pos;\n\n                    $.envirabox.animate( slide.$slide, {\n                        top  : 0,\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\n                    }, duration, function() {\n\n                        slide.$slide.removeAttr('style').removeClass( 'envirabox-slide--next envirabox-slide--previous' );\n\n                        if ( slide.pos === self.currPos ) {\n                            current.isMoved = false;\n\n                            self.complete();\n                        }\n                    });\n                });\n\n            } else {\n                self.$refs.stage.children().removeAttr( 'style' );\n            }\n\n            // Start transition that reveals current content\n            // or wait when it will be loaded\n\n            if ( current.isLoaded ) {\n                self.revealContent( current );\n\n            } else {\n                self.loadSlide( current );\n            }\n\n            self.preload();\n\n            if ( previous.pos === current.pos ) {\n                return;\n            }\n\n            // Handle previous slide\n            // =====================\n\n            transitionProps = 'envirabox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\n\n            previous.$slide.removeClass( 'envirabox-slide--complete envirabox-slide--current envirabox-slide--next envirabox-slide--previous' );\n\n            previous.isComplete = false;\n\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\n                return;\n            }\n\n            if ( current.isMoved ) {\n                previous.$slide.addClass( transitionProps );\n\n            } else {\n\n                transitionProps = 'envirabox-animated ' + transitionProps + ' envirabox-fx-' + current.opts.transitionEffect;\n\n                $.envirabox.animate( previous.$slide, transitionProps, duration, function() {\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\n                });\n\n            }\n\n        },\n\n\n        // Create new \"slide\" element\n        // These are gallery items  that are actually added to DOM\n        // =======================================================\n\n        createSlide : function( pos ) {\n\n            var self = this;\n            var $slide;\n            var index;\n\n            index = pos % self.group.length;\n            index = index < 0 ? self.group.length + index : index;\n\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\n                $slide = $('<div class=\"envirabox-slide\"></div>').appendTo( self.$refs.stage );\n\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\n                    pos      : pos,\n                    $slide   : $slide,\n                    isLoaded : false,\n                });\n\n                self.updateSlide( self.slides[ pos ] );\n            }\n\n            return self.slides[ pos ];\n        },\n\n\n        // Scale image to the actual size of the image\n        // ===========================================\n\n        scaleToActual : function( x, y, duration ) {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var imgPos, posX, posY, scaleX, scaleY;\n\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\n\n            var newImgWidth  = current.width;\n            var newImgHeight = current.height;\n\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating) {\n                return;\n            }\n\n            $.envirabox.stop( $what );\n\n            self.isAnimating = true;\n\n            x = x === undefined ? canvasWidth  * 0.5  : x;\n            y = y === undefined ? canvasHeight * 0.5  : y;\n\n            imgPos = $.envirabox.getTranslate( $what );\n\n            scaleX  = newImgWidth  / imgPos.width;\n            scaleY  = newImgHeight / imgPos.height;\n\n            // Get center position for original image\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\n\n            // Make sure image does not move away from edges\n            if ( newImgWidth > canvasWidth ) {\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\n\n                if ( posX > 0 ) {\n                    posX = 0;\n                }\n\n                if ( posX <  canvasWidth - newImgWidth ) {\n                    posX = canvasWidth - newImgWidth;\n                }\n            }\n\n            if ( newImgHeight > canvasHeight) {\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\n\n                if ( posY > 0 ) {\n                    posY = 0;\n                }\n\n                if ( posY <  canvasHeight - newImgHeight ) {\n                    posY = canvasHeight - newImgHeight;\n                }\n            }\n\n            self.updateCursor( newImgWidth, newImgHeight );\n\n            $.envirabox.animate( $what, {\n                top    : posY,\n                left   : posX,\n                scaleX : scaleX,\n                scaleY : scaleY\n            }, duration || 330, function() {\n                self.isAnimating = false;\n            });\n\n            // Stop slideshow\n            if ( self.SlideShow && self.SlideShow.isActive ) {\n                self.SlideShow.stop();\n            }\n        },\n\n\n        // Scale image to fit inside parent element\n        // ========================================\n\n        scaleToFit : function( duration ) {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n            var end;\n\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\n                return;\n            }\n\n            $.envirabox.stop( $what );\n\n            self.isAnimating = true;\n\n            end = self.getFitPos( current );\n\n            self.updateCursor( end.width, end.height );\n\n            $.envirabox.animate( $what, {\n                top    : end.top,\n                left   : end.left,\n                scaleX : end.width  / $what.width(),\n                scaleY : end.height / $what.height()\n            }, duration || 330, function() {\n                self.isAnimating = false;\n            });\n\n        },\n\n        // Calculate image size to fit inside viewport\n        // ===========================================\n\n        getFitPos : function( slide ) {\n            var self  = this;\n            var $what = slide.$content;\n\n            var imgWidth  = slide.width;\n            var imgHeight = slide.height;\n\n            var margin = slide.opts.margin;\n\n            var canvasWidth, canvasHeight, minRatio, width, height;\n\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\n                return false;\n            }\n\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\n            if ( $.type( margin ) === \"number\" ) {\n                margin = [ margin, margin ];\n            }\n\n            if ( margin.length == 2 ) {\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\n            }\n\n            if ( $W.width() < 800 ) {\n                margin = [ 0, 0, 0, 0 ];\n            }\n\n            // We can not use $slide width here, because it can have different diemensions while in transiton\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\n\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\n\n            width  = Math.floor( minRatio * imgWidth );\n            height = Math.floor( minRatio * imgHeight );\n\n            // Use floor rounding to make sure it really fits\n            return {\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\n                width  : width,\n                height : height\n            };\n\n        },\n\n\n        // Update position and content of all slides\n        // =========================================\n\n        update : function() {\n\n            var self = this;\n\n            $.each( self.slides, function( key, slide ) {\n                self.updateSlide( slide );\n            });\n\n        },\n\n\n        // Update slide position and scale content to fit\n        // ==============================================\n\n        updateSlide : function( slide ) {\n\n            var self  = this;\n            var $what = slide.$content;\n\n            if ( $what && ( slide.width || slide.height ) ) {\n                $.envirabox.stop( $what );\n\n                $.envirabox.setTranslate( $what, self.getFitPos( slide ) );\n\n                if ( slide.pos === self.currPos ) {\n                    self.updateCursor();\n                }\n            }\n\n            slide.$slide.trigger( 'refresh' );\n\n            self.trigger( 'onUpdate', slide );\n\n        },\n\n        // Update cursor style depending if content can be zoomed\n        // ======================================================\n\n        updateCursor : function( nextWidth, nextHeight ) {\n\n            var self = this;\n            var isScaledDown;\n\n            var $container = self.$refs.container.removeClass('envirabox-is-zoomable envirabox-can-zoomIn envirabox-can-drag envirabox-can-zoomOut');\n\n            if ( !self.current || self.isClosing ) {\n                return;\n            }\n\n            if ( self.isZoomable() ) {\n\n                $container.addClass( 'envirabox-is-zoomable' );\n\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\n\n                } else {\n                    isScaledDown = self.isScaledDown();\n                }\n\n                if ( isScaledDown ) {\n\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\n                    $container.addClass('envirabox-can-zoomIn');\n\n                } else {\n\n                    if ( self.current.opts.touch ) {\n\n                        // If image size ir largen than available available and touch module is not disable,\n                        // then user can do panning\n                        $container.addClass('envirabox-can-drag');\n\n                    } else {\n                        $container.addClass('envirabox-can-zoomOut');\n                    }\n\n                }\n\n            } else if ( self.current.opts.touch ) {\n                $container.addClass('envirabox-can-drag');\n            }\n\n        },\n\n\n        // Check if current slide is zoomable\n        // ==================================\n\n        isZoomable : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var fitPos;\n\n            if ( !current || self.isClosing ) {\n                return;\n            }\n\n            // Assume that slide is zoomable if\n            //   - image is loaded successfuly\n            //   - click action is \"zoom\"\n            //   - actual size of the image is smaller than available area\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\n            ) {\n\n                fitPos = self.getFitPos( current );\n\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\n                    return true;\n                }\n\n            }\n\n            return false;\n\n        },\n\n\n        // Check if current image dimensions are smaller than actual\n        // =========================================================\n\n        isScaledDown : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var rez = false;\n\n            if ( $what ) {\n                rez = $.envirabox.getTranslate( $what );\n                rez = rez.width < current.width || rez.height < current.height;\n            }\n\n            return rez;\n\n        },\n\n\n        // Check if image dimensions exceed parent element\n        // ===============================================\n\n        canPan : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var rez = false;\n\n            if ( $what ) {\n                rez = self.getFitPos( current );\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\n\n            }\n\n            return rez;\n\n        },\n\n\n        // Load content into the slide\n        // ===========================\n\n        loadSlide : function( slide ) {\n\n            var self = this, type, $slide;\n            var ajaxLoad;\n\n            if ( slide.isLoading ) {\n                return;\n            }\n\n            if ( slide.isLoaded ) {\n                return;\n            }\n\n            slide.isLoading = true;\n\n            self.trigger( 'beforeLoad', slide );\n\n            type   = slide.type;\n            $slide = slide.$slide;\n\n            $slide\n                .off( 'refresh' )\n                .trigger( 'onReset' )\n                .addClass( 'envirabox-slide--' + ( type || 'unknown' ) )\n                .addClass( slide.opts.slideClass );\n\n            // Create content depending on the type\n\n            switch ( type ) {\n\n                case 'image':\n\n                    self.setImage( slide );\n\n                break;\n                case 'video' :\n\n                     self.setContent( slide,\n                         '<div class=\"envirabox-content\"><video controls>' +\n                           '<source src=\"' + slide.src + '\" type=\"' + slide.opts.videoFormat + '\">' +\n                             'Your browser doesn\\'t support HTML5 video' +\n                         '</video></div>'\n                    );\n \n                break;\n                case 'iframe':\n\n                    self.setIframe( slide );\n\n                break;\n\n                case 'html':\n\n                    self.setContent( slide, slide.src || slide.content );\n\n                break;\n\n                case 'inline':\n\n                    if ( $( slide.src ).length ) {\n                        self.setContent( slide, $( slide.src ) );\n\n                    } else {\n                        self.setError( slide );\n                    }\n\n                break;\n\n                case 'ajax':\n\n                    self.showLoading( slide );\n\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\n                        url : slide.src,\n                        success : function ( data, textStatus ) {\n\n                            if ( textStatus === 'success' ) {\n                                self.setContent( slide, data );\n                            }\n\n                        },\n                        error : function ( jqXHR, textStatus ) {\n\n                            if ( jqXHR && textStatus !== 'abort' ) {\n                                self.setError( slide );\n                            }\n\n                        }\n                    }));\n\n                    $slide.one( 'onReset', function () {\n                        ajaxLoad.abort();\n                    });\n\n                break;\n\n                default:\n\n                    self.setError( slide );\n\n                break;\n\n            }\n\n            return true;\n\n        },\n\n\n        // Use thumbnail image, if possible\n        // ================================\n\n        setImage : function( slide ) {\n\t\t\t\n            var self   = this;\n            var srcset = slide.opts.image.srcset;\n\n            var found, temp, pxRatio, windowWidth;\n\n            // If we have \"srcset\", then we need to find matching \"src\" value.\n            // This is necessary, because when you set an src attribute, the browser will preload the image\n            // before any javascript or even CSS is applied.\n            if ( srcset ) {\n                pxRatio     = window.devicePixelRatio || 1;\n                windowWidth = window.innerWidth  * pxRatio;\n\n                temp = srcset.split(',').map(function ( el ) {\n            \t\tvar ret = {};\n\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\n\n            \t\t\tif ( i === 0 ) {\n            \t\t\t\treturn ( ret.url = el );\n            \t\t\t}\n\n                        if ( value ) {\n                            ret.value   = value;\n                            ret.postfix = el[ el.length - 1 ];\n                        }\n\n            \t\t});\n\n            \t\treturn ret;\n            \t});\n\n                // Sort by value\n                temp.sort(function (a, b) {\n                  return a.value - b.value;\n                });\n\n                // Ok, now we have an array of all srcset values\n                for ( var j = 0; j < temp.length; j++ ) {\n                    var el = temp[ j ];\n\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\n                        found = el;\n                        break;\n                    }\n                }\n\n                // If not found, take the last one\n                if ( !found && temp.length ) {\n                    found = temp[ temp.length - 1 ];\n                }\n\n                if ( found ) {\n                    slide.src = found.url;\n\n                    // If we have default width/height values, we can calculate height for matching source\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\n                        slide.height = ( slide.width / slide.height ) * found.value;\n                        slide.width  = found.value;\n                    }\n                }\n            }\n            \n\t\t\tif ( slide.opts.arrow_position == 'inside' ){\n\t            // This will be wrapper containing both ghost and actual image\n\t            slide.$content = $('<div class=\"envirabox-image-wrap\"><div class=\"envirabox-navigation-inside\"><a data-envirabox-prev title=\"prev\" class=\"envirabox-arrow envirabox-arrow--left envirabox-nav envirabox-prev\" href=\"#\"><span></span></a><a data-envirabox-next title=\"next\" class=\"envirabox-arrow envirabox-arrow--right envirabox-nav envirabox-next\" href=\"#\"><span></span></a></div>')\n\t                .addClass( 'envirabox-is-hidden' )\n\t                .appendTo( slide.$slide );\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n            // This will be wrapper containing both ghost and actual image\n            slide.$content = $('<div class=\"envirabox-image-wrap\"></div>')\n                .addClass( 'envirabox-is-hidden' )\n                .appendTo( slide.$slide );\n\t\t\t}\n\t\t\t\n            if ( slide.opts.smallBtn === true ) {\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n            if ( slide.opts.insideCap === true ){\n\t            var cap = slide.caption !== undefined ? slide.caption : '';\n\t            slide.$content.prepend('<div class=\"envirabox-caption-wrap\"><div class=\"envirabox-caption\">'+ cap +'</div></div>');\n            }\n            // If we have a thumbnail, we can display it while actual image is loading\n            // Users will not stare at black screen and actual image will appear gradually\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\n\n                slide.width  = slide.opts.width;\n                slide.height = slide.opts.height;\n\n                slide.$ghost = $('<img />')\n                    .one('error', function() {\n\n                        $(this).remove();\n\n                        slide.$ghost = null;\n\n                        self.setBigImage( slide );\n\n                    })\n                    .one('load', function() {\n\n                        self.afterLoad( slide );\n\n                        self.setBigImage( slide );\n\n                    })\n                    .addClass( 'envirabox-image' )\n                    .appendTo( slide.$content )\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\n\n            } else {\n\n                self.setBigImage( slide );\n\n            }\n\n        },\n\n\n        // Create full-size image\n        // ======================\n\n        setBigImage : function ( slide ) {\n            var self = this;\n            var $img = $('<img />');\n\n            slide.$image = $img\n                .one('error', function() {\n\n                    self.setError( slide );\n\n                })\n                .one('load', function() {\n\n                    // Clear timeout that checks if loading icon needs to be displayed\n                    clearTimeout( slide.timouts );\n\n                    slide.timouts = null;\n\n                    if ( self.isClosing ) {\n                        return;\n                    }\n\n                    slide.width  = this.naturalWidth;\n                    slide.height = this.naturalHeight;\n\n                    if ( slide.opts.image.srcset ) {\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\n                    }\n\n                    self.hideLoading( slide );\n\n                    if ( slide.$ghost ) {\n\n                        slide.timouts = setTimeout(function() {\n                            slide.timouts = null;\n\n                            slide.$ghost.hide();\n\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\n\n                    } else {\n                        self.afterLoad( slide );\n                    }\n\n                })\n                .addClass( 'envirabox-image' )\n                .attr('src', slide.src)\n                .appendTo( slide.$content );\n\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\n                  $img.trigger( 'load' );\n\n            } else if( $img[0].error ) {\n                 $img.trigger( 'error' );\n\n            } else {\n\n                slide.timouts = setTimeout(function() {\n                    if ( !$img[0].complete && !slide.hasError ) {\n                        self.showLoading( slide );\n                    }\n\n                }, 100);\n\n            }\n\n        },\n\n\n        // Create iframe wrapper, iframe and bindings\n        // ==========================================\n\n        setIframe : function( slide ) {\n            var self\t= this,\n                opts    = slide.opts.iframe,\n                $slide\t= slide.$slide,\n                $iframe;\n\n            slide.$content = $('<div class=\"envirabox-content' + ( opts.preload ? ' envirabox-is-hidden' : '' ) + '\"></div>')\n                .css( opts.css )\n                .appendTo( $slide );\n\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\n                .attr( opts.attr )\n                .appendTo( slide.$content );\n\n            if ( opts.preload ) {\n\n                self.showLoading( slide );\n\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\n                // (due to browser security policy)\n\n                $iframe.on('load.fb error.fb', function(e) {\n                    this.isReady = 1;\n\n                    slide.$slide.trigger( 'refresh' );\n\n                    self.afterLoad( slide );\n                });\n\n                // Recalculate iframe content size\n                // ===============================\n\n                $slide.on('refresh.fb', function() {\n                    var $wrap = slide.$content,\n                        frameWidth  = opts.css.width,\n                        frameHeight = opts.css.height,\n                        scrollWidth,\n                        $contents,\n                        $body;\n\n                    if ( $iframe[0].isReady !== 1 ) {\n                        return;\n                    }\n\n                    // Check if content is accessible,\n                    // it will fail if frame is not with the same origin\n\n                    try {\n                        $contents = $iframe.contents();\n                        $body     = $contents.find('body');\n\n                    } catch (ignore) {}\n\n                    // Calculate dimensions for the wrapper\n                    if ( $body && $body.length ) {\n\n                        if ( frameWidth === undefined ) {\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\n\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\n                        }\n\n                        if ( frameHeight === undefined ) {\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\n                        }\n\n                        // Resize wrapper to fit iframe content\n                        if ( frameWidth ) {\n                            $wrap.width( frameWidth );\n                        }\n\n                        if ( frameHeight ) {\n                            $wrap.height( frameHeight );\n                        }\n                    }\n\n                    $wrap.removeClass( 'envirabox-is-hidden' );\n\n                });\n\n            } else {\n\n                this.afterLoad( slide );\n\n            }\n\n            $iframe.attr( 'src', slide.src );\n\n            if ( slide.opts.smallBtn === true ) {\n\t            console.log(slide.opts.btnTpl.smallBtn )\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n\n            // Remove iframe if closing or changing gallery item\n            $slide.one( 'onReset', function () {\n\n                // This helps IE not to throw errors when closing\n                try {\n\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\n\n                } catch ( ignore ) {}\n\n                $( this ).empty();\n\n                slide.isLoaded = false;\n\n            });\n\n        },\n\n\n        // Wrap and append content to the slide\n        // ======================================\n\n        setContent : function ( slide, content ) {\n\n            var self = this;\n\n            if ( self.isClosing ) {\n                return;\n            }\n\n            self.hideLoading( slide );\n\n            slide.$slide.empty();\n\n            if ( isQuery( content ) && content.parent().length ) {\n\n                // If content is a jQuery object, then it will be moved to the slide.\n                // The placeholder is created so we will know where to put it back.\n                // If user is navigating gallery fast, then the content might be already inside envirabox\n                // =====================================================================================\n\n                // Make sure content is not already moved to envirabox\n                content.parent( '.envirabox-slide--inline' ).trigger( 'onReset' );\n\n                // Create temporary element marking original place of the content\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\n\n                // Make sure content is visible\n                content.css('display', 'inline-block');\n\n            } else if ( !slide.hasError ) {\n\n                // If content is just a plain text, try to convert it to html\n                if ( $.type( content ) === 'string' ) {\n                    content = $('<div>').append( $.trim( content ) ).contents();\n\n                    // If we have text node, then add wrapping element to make vertical alignment work\n                    if ( content[0].nodeType === 3 ) {\n                        content = $('<div>').html( content );\n                    }\n                }\n\n                // If \"filter\" option is provided, then filter content\n                if ( slide.opts.filter ) {\n                    content = $('<div>').html( content ).find( slide.opts.filter );\n                }\n\n            }\n\n            slide.$slide.one('onReset', function () {\n\n                // Put content back\n                if ( slide.$placeholder ) {\n                    slide.$placeholder.after( content.hide() ).remove();\n\n                    slide.$placeholder = null;\n                }\n\n                // Remove custom close button\n                if ( slide.$smallBtn ) {\n                    slide.$smallBtn.remove();\n\n                    slide.$smallBtn = null;\n                }\n\n                // Remove content and mark slide as not loaded\n                if ( !slide.hasError ) {\n                    $(this).empty();\n\n                    slide.isLoaded = false;\n                }\n\n            });\n\n            slide.$content = $( content ).appendTo( slide.$slide );\n\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div').first() );\n            }\n\n            this.afterLoad( slide );\n        },\n\n        // Display error message\n        // =====================\n\n        setError : function ( slide ) {\n\n            slide.hasError = true;\n\n            slide.$slide.removeClass( 'envirabox-slide--' + slide.type );\n\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\n\n        },\n\n\n        // Show loading icon inside the slide\n        // ==================================\n\n        showLoading : function( slide ) {\n\n            var self = this;\n\n            slide = slide || self.current;\n\n            if ( slide && !slide.$spinner ) {\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\n            }\n\n        },\n\n        // Remove loading icon from the slide\n        // ==================================\n\n        hideLoading : function( slide ) {\n\n            var self = this;\n\n            slide = slide || self.current;\n\n            if ( slide && slide.$spinner ) {\n                slide.$spinner.remove();\n\n                delete slide.$spinner;\n            }\n\n        },\n\n\n        // Adjustments after slide content has been loaded\n        // ===============================================\n\n        afterLoad : function( slide ) {\n\n            var self = this;\n\n            if ( self.isClosing ) {\n                return;\n            }\n\n            slide.isLoading = false;\n            slide.isLoaded  = true;\n\n            self.trigger( 'afterLoad', slide );\n\n            self.hideLoading( slide );\n\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\n\n                // Disable right click\n                slide.$content.on( 'contextmenu.fb', function( e ) {\n                     if ( e.button == 2 ) {\n                         e.preventDefault();\n                     }\n\n                    return true;\n                });\n\n                // Add fake element on top of the image\n                // This makes a bit harder for user to select image\n                if ( slide.type === 'image' ) {\n                    $( '<div class=\"envirabox-spaceball\"></div>' ).appendTo( slide.$content );\n                }\n\n            }\n\n            self.revealContent( slide );\n\n        },\n\n\n        // Make content visible\n        // This method is called right after content has been loaded or\n        // user navigates gallery and transition should start\n        // ============================================================\n\n        revealContent : function( slide ) {\n\n            var self   = this;\n            var $slide = slide.$slide;\n\n            var effect, effectClassName, duration, opacity, end, start = false;\n\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\n\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\n\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\n                effect = false;\n            }\n\n            // Check if can zoom\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\n                effect = 'fade';\n            }\n\n            // Zoom animation\n            // ==============\n\n            if ( effect === 'zoom' ) {\n                end = self.getFitPos( slide );\n\n                end.scaleX = end.width  / start.width;\n                end.scaleY = end.height / start.height;\n\n                delete end.width;\n                delete end.height;\n\n                // Check if we need to animate opacity\n                opacity = slide.opts.zoomOpacity;\n\n                if ( opacity == 'auto' ) {\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\n                }\n\n                if ( opacity ) {\n                    start.opacity = 0.1;\n                    end.opacity   = 1;\n                }\n\n                // Draw image at start position\n                $.envirabox.setTranslate( slide.$content.removeClass( 'envirabox-is-hidden' ), start );\n\n                forceRedraw( slide.$content );\n\n                // Start animation\n                $.envirabox.animate( slide.$content, end, duration, function() {\n                    self.complete();\n                });\n\n                return;\n            }\n\n\n            self.updateSlide( slide );\n\n\n            // Simply show content\n            // ===================\n\n            if ( !effect ) {\n                forceRedraw( $slide );\n\n                slide.$content.removeClass( 'envirabox-is-hidden' );\n\n                if ( slide.pos === self.currPos ) {\n                    self.complete();\n                }\n\n                return;\n            }\n\n            $.envirabox.stop( $slide );\n\n            effectClassName = 'envirabox-animated envirabox-slide--' + ( slide.pos > self.prevPos ? 'next' : 'previous' ) + ' envirabox-fx-' + effect;\n\n            $slide.removeAttr( 'style' ).removeClass( 'envirabox-slide--current envirabox-slide--next envirabox-slide--previous' ).addClass( effectClassName );\n\n            slide.$content.removeClass( 'envirabox-is-hidden' );\n\n            //Force reflow for CSS3 transitions\n            forceRedraw( $slide );\n\n            $.envirabox.animate( $slide, 'envirabox-slide--current', duration, function(e) {\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\n\n                if ( slide.pos === self.currPos ) {\n                    self.complete();\n                }\n\n            }, true);\n\n        },\n\n\n        // Check if we can and have to zoom from thumbnail\n        //================================================\n\n        getThumbPos : function( slide ) {\n\n            var self = this;\n            var rez  = false;\n\n            // Check if element is inside the viewport by at least 1 pixel\n            var isElementVisible = function( $el ) {\n                var element = $el[0];\n\n                var elementRect = element.getBoundingClientRect();\n                var parentRects = [];\n\n                var visibleInAllParents;\n\n                while ( element.parentElement !== null ) {\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\n                        parentRects.push(element.parentElement.getBoundingClientRect());\n                    }\n\n                    element = element.parentElement;\n                }\n\n                visibleInAllParents = parentRects.every(function(parentRect){\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\n\n                    return visiblePixelX > 0 && visiblePixelY > 0;\n                });\n\n                return visibleInAllParents &&\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\n            };\n\n            var $thumb   = slide.opts.$thumb;\n            var thumbPos = $thumb ? $thumb.offset() : 0;\n            var slidePos;\n\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\n                slidePos = self.$refs.stage.offset();\n\n                rez = {\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\n                    width  : $thumb.width(),\n                    height : $thumb.height(),\n                    scaleX : 1,\n                    scaleY : 1\n                };\n            }\n\n            return rez;\n        },\n\n\n        // Final adjustments after current gallery item is moved to position\n        // and it`s content is loaded\n        // ==================================================================\n\n        complete : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var slides  = {};\n\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\n                return;\n            }\n\n            current.isComplete = true;\n\n            current.$slide.siblings().trigger( 'onReset' );\n\n            // Trigger any CSS3 transiton inside the slide\n            forceRedraw( current.$slide );\n\n            current.$slide.addClass( 'envirabox-slide--complete' );\n\n            // Remove unnecessary slides\n            $.each( self.slides, function( key, slide ) {\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\n                    slides[ slide.pos ] = slide;\n\n                } else if ( slide ) {\n\n                    $.envirabox.stop( slide.$slide );\n\n                    slide.$slide.off().remove();\n                }\n            });\n\n            self.slides = slides;\n\n            self.updateCursor();\n\n            self.trigger( 'afterShow' );\n\n            // Try to focus on the first focusable element\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\n                self.focus();\n            }\n\n        },\n\n\n        // Preload next and previous slides\n        // ================================\n\n        preload : function() {\n            var self = this;\n            var next, prev;\n\n            if ( self.group.length < 2 ) {\n                return;\n            }\n\n            next  = self.slides[ self.currPos + 1 ];\n            prev  = self.slides[ self.currPos - 1 ];\n\n            if ( next && next.type === 'image' ) {\n                self.loadSlide( next );\n            }\n\n            if ( prev && prev.type === 'image' ) {\n                self.loadSlide( prev );\n            }\n\n        },\n\n\n        // Try to find and focus on the first focusable element\n        // ====================================================\n\n        focus : function() {\n            var current = this.current;\n            var $el;\n\n            if ( this.isClosing ) {\n                return;\n            }\n\n            if ( current && current.isComplete ) {\n\n                // Look for first input with autofocus attribute\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\n\n                if ( !$el.length ) {\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\n                }\n            }\n\n            $el = $el && $el.length ? $el : this.$refs.container;\n\n            $el.focus();\n        },\n\n\n        // Activates current instance - brings container to the front and enables keyboard,\n        // notifies other instances about deactivating\n        // =================================================================================\n\n        activate : function () {\n            var self = this;\n\n            // Deactivate all instances\n            $( '.envirabox-container' ).each(function () {\n                var instance = $(this).data( 'envirabox' );\n\n                // Skip self and closing instances\n                if (instance && instance.uid !== self.uid && !instance.isClosing) {\n                    instance.trigger( 'onDeactivate' );\n                }\n\n            });\n\n            if ( self.current ) {\n                if ( self.$refs.container.index() > 0 ) {\n                    self.$refs.container.prependTo( document.body );\n                }\n\n                self.updateControls();\n            }\n\n            self.trigger( 'onActivate' );\n\n            self.addEvents();\n\n        },\n\n\n        // Start closing procedure\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\n        // =================================================================================\n\n        close : function( e, d ) {\n\n            var self    = this;\n            var current = self.current;\n\n            var effect, duration;\n            var $what, opacity, start, end;\n\n            var done = function() {\n                self.cleanUp( e );\n            };\n\n            if ( self.isClosing ) {\n                return false;\n            }\n\n            self.isClosing = true;\n\n            // If beforeClose callback prevents closing, make sure content is centered\n            if ( self.trigger( 'beforeClose', e ) === false ) {\n                self.isClosing = false;\n\n                requestAFrame(function() {\n                    self.update();\n                });\n\n                return false;\n            }\n\n            // Remove all events\n            // If there are multiple instances, they will be set again by \"activate\" method\n            self.removeEvents();\n\n            if ( current.timouts ) {\n                clearTimeout( current.timouts );\n            }\n\n            $what    = current.$content;\n            effect   = current.opts.animationEffect;\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\n\n            // Remove other slides\n            current.$slide.off( transitionEnd ).removeClass( 'envirabox-slide--complete envirabox-slide--next envirabox-slide--previous envirabox-animated' );\n\n            current.$slide.siblings().trigger( 'onReset' ).remove();\n\n            // Trigger animations\n            if ( duration ) {\n                self.$refs.container.removeClass( 'envirabox-is-open' ).addClass( 'envirabox-is-closing' );\n            }\n\n            // Clean up\n            self.hideLoading( current );\n\n            self.hideControls();\n\n            self.updateCursor();\n\n            // Check if possible to zoom-out\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\n                effect = 'fade';\n            }\n\n            if ( effect === 'zoom' ) {\n                $.envirabox.stop( $what );\n\n                start = $.envirabox.getTranslate( $what );\n\n                start.width  = start.width  * start.scaleX;\n                start.height = start.height * start.scaleY;\n\n                // Check if we need to animate opacity\n                opacity = current.opts.zoomOpacity;\n\n                if ( opacity == 'auto' ) {\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\n                }\n\n                if ( opacity ) {\n                    end.opacity = 0;\n                }\n\n                start.scaleX = start.width  / end.width;\n                start.scaleY = start.height / end.height;\n\n                start.width  = end.width;\n                start.height = end.height;\n\n                $.envirabox.setTranslate( current.$content, start );\n\n                $.envirabox.animate( current.$content, end, duration, done );\n\n                return true;\n            }\n\n            if ( effect && duration ) {\n\n                // If skip animation\n                if ( e === true ) {\n                    setTimeout( done, duration );\n\n                } else {\n                    $.envirabox.animate( current.$slide.removeClass( 'envirabox-slide--current' ), 'envirabox-animated envirabox-slide--previous envirabox-fx-' + effect, duration, done );\n                }\n\n            } else {\n                done();\n            }\n\n            return true;\n        },\n\n\n        // Final adjustments after removing the instance\n        // =============================================\n\n        cleanUp : function( e ) {\n            var self = this,\n                instance;\n\n            self.current.$slide.trigger( 'onReset' );\n\n            self.$refs.container.empty().remove();\n\n            self.trigger( 'afterClose', e );\n\n            // Place back focus\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\n                self.$lastFocus.focus();\n            }\n\n            self.current = null;\n\n            // Check if there are other instances\n            instance = $.envirabox.getInstance();\n\n            if ( instance ) {\n                instance.activate();\n\n            } else {\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\n\n                $( 'html' ).removeClass( 'envirabox-enabled' );\n\n                $( '#envirabox-style-noscroll' ).remove();\n            }\n\n        },\n\n\n        // Call callback and trigger an event\n        // ==================================\n\n        trigger : function( name, slide ) {\n            var args  = Array.prototype.slice.call(arguments, 1),\n                self  = this,\n                obj   = slide && slide.opts ? slide : self.current,\n                rez;\n\n            if ( obj ) {\n                args.unshift( obj );\n\n            } else {\n                obj = self;\n            }\n\n            args.unshift( self );\n\n            if ( $.isFunction( obj.opts[ name ] ) ) {\n                rez = obj.opts[ name ].apply( obj, args );\n            }\n\n            if ( rez === false ) {\n                return rez;\n            }\n\n            if ( name === 'afterClose' ) {\n                $D.trigger( name + '.fb', args );\n\n            } else {\n                self.$refs.container.trigger( name + '.fb', args );\n            }\n\n        },\n\n\n        // Update infobar values, navigation button states and reveal caption\n        // ==================================================================\n\n        updateControls : function ( force ) {\n\n            var self = this;\n\n            var current  = self.current;\n            var index    = current.index;\n            var opts     = current.opts;\n            var caption  = opts.caption;\n            var $caption = self.$refs.caption;\n\n            // Recalculate content dimensions\n            current.$slide.trigger( 'refresh' );\n\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\n\n            if ( !self.isHiddenControls ) {\n                self.showControls();\n            }\n\n            // Update info and navigation elements\n            $('[data-envirabox-count]').html( self.group.length );\n            $('[data-envirabox-index]').html( index + 1 );\n\n            $('[data-envirabox-prev]').prop('disabled', ( !opts.loop && index <= 0 ) );\n            $('[data-envirabox-next]').prop('disabled', ( !opts.loop && index >= self.group.length - 1 ) );\n\n        },\n\n        // Hide toolbar and caption\n        // ========================\n\n        hideControls : function () {\n\n            this.isHiddenControls = true;\n\n            this.$refs.container.removeClass('envirabox-show-infobar envirabox-show-toolbar envirabox-show-caption envirabox-show-nav');\n\n        },\n\n        showControls : function() {\n\n            var self = this;\n            var opts = self.current ? self.current.opts : self.opts;\n            var $container = self.$refs.container;\n\n            self.isHiddenControls   = false;\n            self.idleSecondsCounter = 0;\n\n            $container\n                .toggleClass('envirabox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\n                .toggleClass('envirabox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\n                .toggleClass('envirabox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\n                .toggleClass('envirabox-is-modal',     !!opts.modal );\n\n            if ( self.$caption ) {\n                $container.addClass( 'envirabox-show-caption ');\n\n            } else {\n               $container.removeClass( 'envirabox-show-caption' );\n           }\n\n       },\n\n\n       // Toggle toolbar and caption\n       // ==========================\n\n       toggleControls : function() {\n\n           if ( this.isHiddenControls ) {\n               this.showControls();\n\n           } else {\n               this.hideControls();\n           }\n\n       },\n\n\n    });\n\n\n    $.envirabox = {\n\n        version  : \"{envirabox-version}\",\n        defaults : defaults,\n\n\n        // Get current instance and execute a command.\n        //\n        // Examples of usage:\n        //\n        //   $instance = $.envirabox.getInstance();\n        //   $.envirabox.getInstance().jumpTo( 1 );\n        //   $.envirabox.getInstance( 'jumpTo', 1 );\n        //   $.envirabox.getInstance( function() {\n        //       console.info( this.currIndex );\n        //   });\n        // ======================================================\n        getInstance : function ( command ) {\n            var instance = $('.envirabox-container:not(\".envirabox-is-closing\"):first').data( 'envirabox' );\n            var args     = Array.prototype.slice.call(arguments, 1);\n\n            if ( instance instanceof EnviraBox ) {\n\n                if ( $.type( command ) === 'string' ) {\n                    instance[ command ].apply( instance, args );\n\n                } else if ( $.type( command ) === 'function' ) {\n                    command.apply( instance, args );\n\n                }\n\n                return instance;\n            }\n\n            return false;\n\n        },\n\n\n        // Create new instance\n        // ===================\n        open : function ( items, opts, index ) {\n            return new EnviraBox( items, opts, index );\n        },\n\n\n        // Close current or all instances\n        // ==============================\n        close : function ( all ) {\n            var instance = this.getInstance();\n\n            if ( instance ) {\n                instance.close();\n\n                // Try to find and close next instance\n\n                if ( all === true ) {\n                    this.close();\n                }\n            }\n\n        },\n\n        // Close instances and unbind all events\n        // ==============================\n        destroy : function() {\n\n            this.close( true );\n\n            $D.off( 'click.fb-start' );\n\n        },\n\n\n        // Try to detect mobile devices\n        // ============================\n\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),\n\n\n        // Detect if 'translate3d' support is available\n        // ============================================\n        use3d : (function() {\n            var div = document.createElement('div');\n\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\n        }()),\n\n\n        // Helper function to get current visual state of an element\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\n        // =====================================================================\n\n        getTranslate : function( $el ) {\n            var matrix;\n\n            if ( !$el || !$el.length ) {\n                return false;\n            }\n\n            matrix  = $el.eq( 0 ).css('transform');\n\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\n                matrix = matrix.split('(')[1];\n                matrix = matrix.split(')')[0];\n                matrix = matrix.split(',');\n            } else {\n                matrix = [];\n            }\n\n            if ( matrix.length ) {\n\n                // If IE\n                if ( matrix.length > 10 ) {\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\n\n                } else {\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\n                }\n\n                matrix = matrix.map(parseFloat);\n\n            } else {\n                matrix = [ 0, 0, 1, 1 ];\n\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\n\n                if ( transRez ) {\n                    matrix[ 0 ] = parseFloat( transRez[2] );\n                    matrix[ 1 ] = parseFloat( transRez[1] );\n                }\n            }\n\n            return {\n                top     : matrix[ 0 ],\n                left    : matrix[ 1 ],\n                scaleX  : matrix[ 2 ],\n                scaleY  : matrix[ 3 ],\n                opacity : parseFloat( $el.css('opacity') ),\n                width   : $el.width(),\n                height  : $el.height()\n            };\n\n        },\n\n\n        // Shortcut for setting \"translate3d\" properties for element\n        // Can set be used to set opacity, too\n        // ========================================================\n        setTranslate : function( $el, props ) {\n            var str  = '';\n            var css  = {};\n\n            if ( !$el || !props ) {\n                return;\n            }\n\n            if ( props.left !== undefined || props.top !== undefined ) {\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\n\n                if ( this.use3d ) {\n                    str = 'translate3d(' + str + ', 0px)';\n\n                } else {\n                    str = 'translate(' + str + ')';\n                }\n            }\n\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\n            }\n\n            if ( str.length ) {\n                css.transform = str;\n            }\n\n            if ( props.opacity !== undefined ) {\n                css.opacity = props.opacity;\n            }\n\n            if ( props.width !== undefined ) {\n                css.width = props.width;\n            }\n\n            if ( props.height !== undefined ) {\n                css.height = props.height;\n            }\n\n            return $el.css( css );\n        },\n\n\n        // Simple CSS transition handler\n        // =============================\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\n            var event = transitionEnd || 'transitionend';\n\n            if ( $.isFunction( duration ) ) {\n                callback = duration;\n                duration = null;\n            }\n\n            if ( !$.isPlainObject( to ) ) {\n                $el.removeAttr('style');\n            }\n\n            $el.on( event, function(e) {\n\n                // Skip events from child elements and z-index change\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\n                    return;\n                }\n\n                $el.off( event );\n\n                if ( $.isPlainObject( to ) ) {\n\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\n                        $el.css( 'transition-duration', '0ms' );\n\n                        to.width  = Math.round( $el.width()  * to.scaleX );\n                        to.height = Math.round( $el.height() * to.scaleY );\n\n                        to.scaleX = 1;\n                        to.scaleY = 1;\n\n                        $.envirabox.setTranslate( $el, to );\n                    }\n\n                } else if ( leaveAnimationName !== true ) {\n                    $el.removeClass( to );\n                }\n\n                if ( $.isFunction( callback ) ) {\n                    callback( e );\n                }\n\n            });\n\n            if ( $.isNumeric( duration ) ) {\n                $el.css( 'transition-duration', duration + 'ms' );\n            }\n\n            if ( $.isPlainObject( to ) ) {\n                $.envirabox.setTranslate( $el, to );\n\n            } else {\n                $el.addClass( to );\n            }\n\n            $el.data(\"timer\", setTimeout(function() {\n                $el.trigger( 'transitionend' );\n            }, duration + 16));\n\n        },\n\n        stop : function( $el ) {\n            clearTimeout( $el.data(\"timer\") );\n\n            $el.off( transitionEnd );\n        }\n\n    };\n\n\n    // Default click handler for \"enviraboxed\" links\n    // ============================================\n    function _run( e ) {\n        var target\t= e.currentTarget,\n            opts\t= e.data ? e.data.options : {},\n            items\t= opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] ),\n            value\t= $( target ).attr( 'data-envirabox' ) || '',\n            index\t= 0,\n            active  = $.envirabox.getInstance();\n\n        e.preventDefault();\n\n        // Avoid opening multiple times\n        if ( active && active.current.opts.$orig.is( target ) ) {\n            return;\n        }\n\n        // Get all related items and find index for clicked one\n        if ( value ) {\n            items = items.length ? items.filter( '[data-envirabox=\"' + value + '\"]' ) : $( '[data-envirabox=\"' + value + '\"]' );\n            index = items.index( target );\n\n            // Sometimes current item can not be found\n            // (for example, when slider clones items)\n            if ( index < 0 ) {\n                index = 0;\n            }\n\n        } else {\n            items = [ target ];\n        }\n\n        $.envirabox.open( items, opts, index );\n    }\n\n\n    // Create a jQuery plugin\n    // ======================\n    $.fn.envirabox = function (options) {\n        var selector;\n\n        options  = options || {};\n        selector = options.selector || false;\n\n        if ( selector ) {\n\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\n                options : options\n            }, _run );\n\n        } else {\n\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\n                items   : this,\n                options : options\n            }, _run);\n\n        }\n\n        return this;\n    };\n\n\n    // Self initializing plugin\n    // ========================\n  //  $D.on( 'click.fb-start', '[data-envirabox]', _run );\n\n}( window, document, window.jQuery || jQuery ));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox.js","// ==========================================================================\n//\n// FullScreen\n// Adds fullscreen functionality\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\t// Collection of methods supported by user browser\n\tvar fn = (function () {\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// new WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar val;\n\t\tvar ret = {};\n\t\tvar i, j;\n\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\n\t\t\tval = fnMap[ i ];\n\n\t\t\tif ( val && val[ 1 ] in document ) {\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\n\tif ( !fn ) {\n\n\t\tif ( $ && $.envirabox ) {\n\t\t\t$.envirabox.defaults.btnTpl.fullScreen = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tvar FullScreen = {\n\n\t\trequest : function ( elem ) {\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\n\n\t\t},\n\t\texit : function () {\n\n\t\t\tdocument[ fn.exitFullscreen ]();\n\n\t\t},\n\t\ttoggle : function ( elem ) {\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\tif ( this.isFullscreen() ) {\n\t\t\t\tthis.exit();\n\n\t\t\t} else {\n\t\t\t\tthis.request( elem );\n\t\t\t}\n\n\t\t},\n\t\tisFullscreen : function()  {\n\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\n\n\t\t},\n\t\tenabled : function()  {\n\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\n\n\t\t}\n\t};\n\n\t$(document).on({\n\t\t'onInit.fb' : function(e, instance) {\n\t\t\tvar $container;\n\n\t\t\tvar $button = instance.$refs.toolbar.find('[data-envirabox-fullscreen]');\n\n\t\t\tif ( instance && !instance.FullScreen && instance.group[ instance.currIndex ].opts.fullScreen ) {\n\t\t\t\t$container = instance.$refs.container;\n\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-envirabox-fullscreen]', function(e) {\n\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\n\n\t\t\t\t});\n\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// Expose API\n\t\t\t\tinstance.FullScreen = FullScreen;\n\n\t\t\t} else {\n\t\t\t\t$button.hide();\n\t\t\t}\n\n\t\t},\n\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\n\n\t\t\t// \"P\" or Spacebar\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\n\t\t\t}\n\n\t\t},\n\n\t\t'beforeClose.fb' : function( instance ) {\n\t\t\tif ( instance && instance.FullScreen ) {\n\t\t\t\tFullScreen.exit();\n\t\t\t}\n\t\t}\n\t});\n\n\t$(document).on(fn.fullscreenchange, function() {\n\t\tvar instance = $.envirabox.getInstance();\n\n\t\t// If image is zooming, then force to stop and reposition properly\n\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\n\t\t\tinstance.current.$content.css( 'transition', 'none' );\n\n\t\t\tinstance.isAnimating = false;\n\n\t\t\tinstance.update( true, true, 0 );\n\t\t}\n\n\t\tinstance.trigger('onFullscreenChange', FullScreen.isFullscreen() );\n\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-fullscreen.js","// ==========================================================================\n//\n// Media\n// Adds additional media type support\n//\n// ==========================================================================\n;(function ($) {\n\n\t'use strict';\n\n\t// Formats matching url to final form\n\n\tvar format = function (url, rez, params) {\n\t\tif ( !url ) {\n\t\t\treturn;\n\t\t}\n\n\t\tparams = params || '';\n\n\t\tif ( $.type(params) === \"object\" ) {\n\t\t\tparams = $.param(params, true);\n\t\t}\n\n\t\t$.each(rez, function (key, value) {\n\t\t\turl = url.replace('$' + key, value || '');\n\t\t});\n\n\t\tif (params.length) {\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\n\t\t}\n\n\t\treturn url;\n\t};\n\n\t// Object containing properties for each media type\n\n\tvar defaults = {\n\t\tyoutube : {\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\n\t\t\tparams  : {\n\t\t\t\tautoplay : 1,\n\t\t\t\tautohide : 1,\n\t\t\t\tfs  : 1,\n\t\t\t\trel : 0,\n\t\t\t\thd  : 1,\n\t\t\t\twmode : 'transparent',\n\t\t\t\tenablejsapi : 1,\n\t\t\t\thtml5 : 1\n\t\t\t},\n\t\t\tparamPlace : 8,\n\t\t\ttype  : 'iframe',\n\t\t\turl   : '//www.youtube.com/embed/$4',\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\n\t\t},\n\n\t\tvimeo : {\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\n\t\t\tparams  : {\n\t\t\t\tautoplay : 1,\n\t\t\t\thd : 1,\n\t\t\t\tshow_title    : 1,\n\t\t\t\tshow_byline   : 1,\n\t\t\t\tshow_portrait : 0,\n\t\t\t\tfullscreen    : 1,\n\t\t\t\tapi : 1\n\t\t\t},\n\t\t\tparamPlace : 3,\n\t\t\ttype : 'iframe',\n\t\t\turl : '//player.vimeo.com/video/$2'\n\t\t},\n\n\t\tmetacafe : {\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\n\t\t},\n\n\t\tdailymotion : {\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\n\t\t\tparams : {\n\t\t\t\tadditionalInfos : 0,\n\t\t\t\tautoStart : 1\n\t\t\t},\n\t\t\ttype : 'iframe',\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\n\t\t},\n\n\t\tvine : {\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\n\t\t},\n\n\t\tinstagram : {\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\n\t\t\ttype    : 'image',\n\t\t\turl     : '//$1/p/$2/media/?size=l'\n\t\t},\n\n\t\t// Examples:\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\n\t\tgmap_place : {\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : function (rez) {\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\n\t\t\t}\n\t\t},\n\n\t\t// Examples:\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\n\t\tgmap_search : {\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : function (rez) {\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\n\t\t\t}\n\t\t}\n\t};\n\n\t$(document).on('onInit.fb', function (e, instance) {\n\n\t\t$.each(instance.group, function( i, item ) {\n\n\t\t\tvar url\t = item.src || '',\n\t\t\t\ttype = false,\n\t\t\t\tmedia,\n\t\t\t\tthumb,\n\t\t\t\trez,\n\t\t\t\tparams,\n\t\t\t\turlParams,\n\t\t\t\to,\n\t\t\t\tprovider;\n\n\t\t\t// Skip items that already have content type\n\t\t\tif ( item.type ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\n\n\t\t\t// Look for any matching media type\n\t\t\t$.each(media, function ( n, el ) {\n\t\t\t\trez = url.match(el.matcher);\n\t\t\t\to   = {};\n\t\t\t\tprovider = n;\n\n\t\t\t\tif (!rez) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttype = el.type;\n\n\t\t\t\tif ( el.paramPlace && rez[ el.paramPlace ] ) {\n\t\t\t\t\turlParams = rez[ el.paramPlace ];\n\n\t\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\n\t\t\t\t\t\turlParams = urlParams.substring(1);\n\t\t\t\t\t}\n\n\t\t\t\t\turlParams = urlParams.split('&');\n\n\t\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\n\t\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\n\n\t\t\t\t\t\tif ( p.length == 2 ) {\n\t\t\t\t\t\t\to[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparams = $.extend( true, {}, el.params, item.opts[ n ], o );\n\n\t\t\t\turl   = $.type(el.url) === \"function\" ? el.url.call(this, rez, params, item) : format(el.url, rez, params);\n\t\t\t\tthumb = $.type(el.thumb) === \"function\" ? el.thumb.call(this, rez, params, item) : format(el.thumb, rez);\n\n\t\t\t\tif ( provider === 'vimeo' ) {\n\t\t\t\t\turl = url.replace('&%23', '#');\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t// If it is found, then change content type and update the url\n\n\t\t\tif ( type ) {\n\t\t\t\titem.src  = url;\n\t\t\t\titem.type = type;\n\n\t\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\n\t\t\t\t\titem.opts.thumb = thumb;\n\t\t\t\t}\n\n\t\t\t\tif ( type === 'iframe' ) {\n\t\t\t\t\t$.extend(true, item.opts, {\n\t\t\t\t\t\tiframe : {\n\t\t\t\t\t\t\tpreload : false,\n\t\t\t\t\t\t\tattr : {\n\t\t\t\t\t\t\t\tscrolling : \"no\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\titem.contentProvider = provider;\n\n\t\t\t\t\titem.opts.slideClass += ' envirabox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// If no content type is found, then set it to `image` as fallback\n\t\t\t\titem.type = 'image';\n\t\t\t}\n\n\t\t});\n\n\t});\n\n}(window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-media.js",";(function (document, $) {\n\t'use strict';\n\n\tvar prevTime = new Date().getTime();\n\n    $(document).on({\n        'onInit.fb' : function( e, instance, current ) {\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\n\t\t\t\tvar current  = instance.current,\n\t\t\t\t\tcurrTime = new Date().getTime();\n\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tif ( current.$slide.hasClass( 'envirabox-animated' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te = e.originalEvent || e;\n\n\t\t\t\tif ( currTime - prevTime < 250 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tprevTime = currTime;\n\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\n\n\t\t\t});\n\t\t}\n    });\n\n}( document, window.jQuery || jQuery ));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-wheel.js","// ==========================================================================\n//\n// Guestures\n// Adds touch guestures, handles click and tap events\n//\n// ==========================================================================\n;(function (window, document, $) {\n\t'use strict';\n\n\tvar requestAFrame = (function () {\n        return window.requestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                window.oRequestAnimationFrame ||\n                // if all else fails, use setTimeout\n                function (callback) {\n                    return window.setTimeout(callback, 1000 / 60);\n                };\n    })();\n\n\n    var cancelAFrame = (function () {\n        return window.cancelAnimationFrame ||\n                window.webkitCancelAnimationFrame ||\n                window.mozCancelAnimationFrame ||\n                window.oCancelAnimationFrame ||\n                function (id) {\n                    window.clearTimeout(id);\n                };\n    })();\n\n\n\tvar pointers = function( e ) {\n\t\tvar result = [];\n\n\t\te = e.originalEvent || e || window.e;\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\n\n\t\tfor ( var key in e ) {\n\n\t\t\tif ( e[ key ].pageX ) {\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\n\n\t\t\t} else if ( e[ key ].clientX ) {\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tvar distance = function( point2, point1, what ) {\n\t\tif ( !point1 || !point2 ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif ( what === 'x' ) {\n\t\t\treturn point2.x - point1.x;\n\n\t\t} else if ( what === 'y' ) {\n\t\t\treturn point2.y - point1.y;\n\t\t}\n\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\n\t};\n\n\tvar isClickable = function( $el ) {\n\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check for attributes like data-envirabox-next or data-envirabox-close\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\n            if ( atts[i].nodeName.substr(0, 14) === 'data-envirabox-' ) {\n                return true;\n            }\n        }\n\n\t \treturn false;\n\t};\n\n\tvar hasScrollbars = function( el ) {\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\n\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\n\n\t\treturn vertical || horizontal;\n\t};\n\n\tvar isScrollable = function ( $el ) {\n\t\tvar rez = false;\n\n\t\twhile ( true ) {\n\t\t\trez\t= hasScrollbars( $el.get(0) );\n\n\t\t\tif ( rez ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t$el = $el.parent();\n\n\t\t\tif ( !$el.length || $el.hasClass( 'envirabox-stage' ) || $el.is( 'body' ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn rez;\n\t};\n\n\n\tvar Guestures = function ( instance ) {\n\t\tvar self = this;\n\n\t\tself.instance = instance;\n\n\t\tself.$bg        = instance.$refs.bg;\n\t\tself.$stage     = instance.$refs.stage;\n\t\tself.$container = instance.$refs.container;\n\n\t\tself.destroy();\n\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\n\t};\n\n\tGuestures.prototype.destroy = function() {\n\t\tthis.$container.off( '.fb.touch' );\n\t};\n\n\tGuestures.prototype.ontouchstart = function( e ) {\n\t\tvar self = this;\n\n\t\tvar $target  = $( e.target );\n\t\tvar instance = self.instance;\n\t\tvar current  = instance.current;\n\t\tvar $content = current.$content;\n\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\n\n\t\t// Do not respond to both events\n\t\tif ( isTouchDevice ) {\n\t        self.$container.off( 'mousedown.fb.touch' );\n\t    }\n\n\t\t// Ignore clicks while zooming or closing\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore right click\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore taping on links, buttons, input elements\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore clicks on the scrollbar\n\t\tif ( e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.startPoints = pointers( e );\n\n\t\t// Prevent zooming if already swiping\n\t\tif ( !self.startPoints || ( self.startPoints.length > 1 && instance.isSliding ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.$target  = $target;\n\t\tself.$content = $content;\n\t\tself.canTap   = true;\n\t\tself.opts     = current.opts.touch;\n\n\t\t$(document).off( '.fb.touch' );\n\n\t\t$(document).on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch',  $.proxy(self, \"ontouchend\"));\n\t\t$(document).on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch',  $.proxy(self, \"ontouchmove\"));\n\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\n\n\t\t\t// Prevent ghosting\n\t\t\tif ( $target.is('img') ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\te.stopPropagation();\n\n\t\tif ( !( $.envirabox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) ) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\n\n\t\tself.startTime = new Date().getTime();\n\t\tself.distanceX = self.distanceY = self.distance = 0;\n\n\t\tself.isPanning = false;\n\t\tself.isSwiping = false;\n\t\tself.isZooming = false;\n\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\n\t\tself.contentStartPos = $.envirabox.getTranslate( self.$content );\n\t\tself.contentLastPos  = null;\n\n\t\tif ( self.startPoints.length === 1 && !self.isZooming ) {\n\t\t\tself.canTap = !instance.isSliding;\n\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\n\n\t\t\t\t$.envirabox.stop( self.$content );\n\n\t\t\t\tself.$content.css( 'transition-duration', '0ms' );\n\n\t\t\t\tself.isPanning = true;\n\n\t\t\t} else {\n\n\t\t\t\tself.isSwiping = true;\n\t\t\t}\n\n\t\t\tself.$container.addClass('envirabox-controls--isGrabbing');\n\t\t}\n\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\n\t\t\tself.isZooming = true;\n\n\t\t\tself.isSwiping = false;\n\t\t\tself.isPanning = false;\n\n\t\t\t$.envirabox.stop( self.$content );\n\n\t\t\tself.$content.css( 'transition-duration', '0ms' );\n\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\n\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\n\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\n\t\t}\n\n\t};\n\n\tGuestures.prototype.ontouchmove = function( e ) {\n\n\t\tvar self = this;\n\n\t\tself.newPoints = pointers( e );\n\n\t\tif ( $.envirabox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\n\t\t\te.stopPropagation();\n\n\t\t\tself.canTap = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\n\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] );\n\n\t\t// Skip false ontouchmove events (Chrome)\n\t\tif ( self.distance > 0 ) {\n\n\t\t\tif ( !( self.$target.is( self.$stage ) || self.$stage.find( self.$target ).length ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tif ( self.isSwiping ) {\n\t\t\t\tself.onSwipe();\n\n\t\t\t} else if ( self.isPanning ) {\n\t\t\t\tself.onPan();\n\n\t\t\t} else if ( self.isZooming ) {\n\t\t\t\tself.onZoom();\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onSwipe = function() {\n\n\t\tvar self = this;\n\n\t\tvar swiping = self.isSwiping;\n\t\tvar left    = self.sliderStartPos.left || 0;\n\t\tvar angle;\n\n\t\tif ( swiping === true ) {\n\n\t\t\tif ( Math.abs( self.distance ) > 10 )  {\n\n\t\t\t\tself.canTap = false;\n\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\n\t\t\t\t\tself.isSwiping  = 'y';\n\n\t\t\t\t} else if ( self.instance.isSliding || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\n\t\t\t\t\tself.isSwiping  = 'x';\n\n\t\t\t\t} else {\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\n\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\n\t\t\t\t}\n\n\t\t\t\tself.instance.isSliding = self.isSwiping;\n\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\n\t\t\t\tself.startPoints = self.newPoints;\n\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\n\t\t\t\t\t$.envirabox.stop( slide.$slide );\n\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '0ms' );\n\n\t\t\t\t\tslide.inTransition = false;\n\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\n\t\t\t\t\t\tself.sliderStartPos.left = $.envirabox.getTranslate( slide.$slide ).left;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//self.instance.current.isMoved = true;\n\n\t\t\t\t// Stop slideshow\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\n\t\t\t\t\tself.instance.SlideShow.stop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( swiping == 'x' ) {\n\n\t\t\t\t// Sticky edges\n\t\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\n\t\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\n\n\t\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\n\t\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\n\n\t\t\t\t} else {\n\t\t\t\t\tleft = left + self.distanceX;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tself.sliderLastPos = {\n\t\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\n\t\t\t\tleft : left\n\t\t\t};\n\n\t\t\tif ( self.requestId ) {\n\t\t\t\tcancelAFrame( self.requestId );\n\n\t\t\t\tself.requestId = null;\n\t\t\t}\n\n\t\t\tself.requestId = requestAFrame(function() {\n\n\t\t\t\tif ( self.sliderLastPos ) {\n\t\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\n\t\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\n\n\t\t\t\t\t\t$.envirabox.setTranslate( slide.$slide, {\n\t\t\t\t\t\t\ttop  : self.sliderLastPos.top,\n\t\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tself.$container.addClass( 'envirabox-is-sliding' );\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onPan = function() {\n\n\t\tvar self = this;\n\n\t\tvar newOffsetX, newOffsetY, newPos;\n\n\t\tself.canTap = false;\n\n\t\tif ( self.contentStartPos.width > self.canvasWidth ) {\n\t\t\tnewOffsetX = self.contentStartPos.left + self.distanceX;\n\n\t\t} else {\n\t\t\tnewOffsetX = self.contentStartPos.left;\n\t\t}\n\n\t\tnewOffsetY = self.contentStartPos.top + self.distanceY;\n\n\t\tnewPos = self.limitMovement( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\n\n\t\tnewPos.scaleX = self.contentStartPos.scaleX;\n\t\tnewPos.scaleY = self.contentStartPos.scaleY;\n\n\t\tself.contentLastPos = newPos;\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.requestId = requestAFrame(function() {\n\t\t\t$.envirabox.setTranslate( self.$content, self.contentLastPos );\n\t\t});\n\t};\n\n\t// Make panning sticky to the edges\n\tGuestures.prototype.limitMovement = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\n\n\t\tvar self = this;\n\n\t\tvar minTranslateX, minTranslateY, maxTranslateX, maxTranslateY;\n\n\t\tvar canvasWidth  = self.canvasWidth;\n\t\tvar canvasHeight = self.canvasHeight;\n\n\t\tvar currentOffsetX = self.contentStartPos.left;\n\t\tvar currentOffsetY = self.contentStartPos.top;\n\n\t\tvar distanceX = self.distanceX;\n\t\tvar distanceY = self.distanceY;\n\n\t\t// Slow down proportionally to traveled distance\n\n\t\tminTranslateX = Math.max(0, canvasWidth  * 0.5 - newWidth  * 0.5 );\n\t\tminTranslateY = Math.max(0, canvasHeight * 0.5 - newHeight * 0.5 );\n\n\t\tmaxTranslateX = Math.min( canvasWidth  - newWidth,  canvasWidth  * 0.5 - newWidth  * 0.5 );\n\t\tmaxTranslateY = Math.min( canvasHeight - newHeight, canvasHeight * 0.5 - newHeight * 0.5 );\n\n\t\tif ( newWidth > canvasWidth ) {\n\n\t\t\t//   ->\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\n\t\t\t}\n\n\t\t\t//    <-\n\t\t\tif ( distanceX  < 0 && newOffsetX < maxTranslateX ) {\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( newHeight > canvasHeight ) {\n\n\t\t\t//   \\/\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\n\t\t\t}\n\n\t\t\t//   /\\\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop  : newOffsetY,\n\t\t\tleft : newOffsetX\n\t\t};\n\n\t};\n\n\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\n\n\t\tvar self = this;\n\n\t\tvar canvasWidth  = self.canvasWidth;\n\t\tvar canvasHeight = self.canvasHeight;\n\n\t\tif ( newWidth > canvasWidth ) {\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\n\n\t\t} else {\n\n\t\t\t// Center horizontally\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\n\n\t\t}\n\n\t\tif ( newHeight > canvasHeight ) {\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\n\n\t\t} else {\n\n\t\t\t// Center vertically\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop  : newOffsetY,\n\t\t\tleft : newOffsetX\n\t\t};\n\n\t};\n\n\tGuestures.prototype.onZoom = function() {\n\n\t\tvar self = this;\n\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\n\n\t\tvar currentWidth  = self.contentStartPos.width;\n\t\tvar currentHeight = self.contentStartPos.height;\n\n\t\tvar currentOffsetX = self.contentStartPos.left;\n\t\tvar currentOffsetY = self.contentStartPos.top;\n\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\n\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\n\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\n\n\t\t// This is the translation due to pinch-zooming\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\n\n\t\t//Point between the two touches\n\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\n\n\t\t// And this is the translation due to translation of the centerpoint\n\t\t// between the two fingers\n\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\n\n\t\t// The new offset is the old/current one plus the total translation\n\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\n\n\t\tvar newPos = {\n\t\t\ttop    : newOffsetY,\n\t\t\tleft   : newOffsetX,\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\n\t\t};\n\n\t\tself.canTap = false;\n\n\t\tself.newWidth  = newWidth;\n\t\tself.newHeight = newHeight;\n\n\t\tself.contentLastPos = newPos;\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.requestId = requestAFrame(function() {\n\t\t\t$.envirabox.setTranslate( self.$content, self.contentLastPos );\n\t\t});\n\n\t};\n\n\tGuestures.prototype.ontouchend = function( e ) {\n\n\t\tvar self = this;\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\n\n\t\tvar swiping = self.isSwiping;\n\t\tvar panning = self.isPanning;\n\t\tvar zooming = self.isZooming;\n\n\t\tself.endPoints = pointers( e );\n\n\t\tself.$container.removeClass( 'envirabox-controls--isGrabbing' );\n\n\t\t$(document).off( '.fb.touch' );\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.isSwiping = false;\n\t\tself.isPanning = false;\n\t\tself.isZooming = false;\n\n\t\tif ( self.canTap )  {\n\t\t\treturn self.onTap( e );\n\t\t}\n\n\t\tself.speed = 366;\n\n\t\t// Speed in px/ms\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\n\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\n\n\t\tif ( panning ) {\n\t\t\tself.endPanning();\n\n\t\t} else if ( zooming ) {\n\t\t\tself.endZooming();\n\n\t\t} else {\n\t\t\tself.endSwiping( swiping );\n\t\t}\n\n\t\treturn;\n\t};\n\n\tGuestures.prototype.endSwiping = function( swiping ) {\n\n\t\tvar self = this;\n\t\tvar ret = false;\n\n\t\tself.instance.isSliding = false;\n\t\tself.sliderLastPos      = null;\n\n\t\t// Close if swiped vertically / navigate if horizontally\n\t\tif ( swiping == 'y' && Math.abs( self.distanceY ) > 50 ) {\n\n\t\t\t// Continue vertical movement\n\t\t\t$.envirabox.animate( self.instance.current.$slide, {\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\n\t\t\t\topacity : 0\n\t\t\t}, 150 );\n\n\t\t\tret = self.instance.close( true, 300 );\n\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && self.instance.group.length > 1 ) {\n\t\t\tret = self.instance.previous( self.speedX );\n\n\t\t} else if ( swiping == 'x' && self.distanceX < -50  && self.instance.group.length > 1 ) {\n\t\t\tret = self.instance.next( self.speedX );\n\t\t}\n\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\n\t\t\tself.instance.jumpTo( self.instance.current.index, 150 );\n\t\t}\n\n\t\tself.$container.removeClass( 'envirabox-is-sliding' );\n\n\t};\n\n\t// Limit panning from edges\n\t// ========================\n\n\tGuestures.prototype.endPanning = function() {\n\n\t\tvar self = this;\n\t\tvar newOffsetX, newOffsetY, newPos;\n\n\t\tif ( !self.contentLastPos ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( self.opts.momentum === false ) {\n\t\t\tnewOffsetX = self.contentLastPos.left;\n\t\t\tnewOffsetY = self.contentLastPos.top;\n\n\t\t} else {\n\n\t\t\t// Continue movement\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\n\t\t}\n\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\n\n\t\t newPos.width  = self.contentStartPos.width;\n\t\t newPos.height = self.contentStartPos.height;\n\n\t\t$.envirabox.animate( self.$content, newPos, 330 );\n\t};\n\n\n\tGuestures.prototype.endZooming = function() {\n\n\t\tvar self = this;\n\n\t\tvar current = self.instance.current;\n\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\n\n\t\tvar newWidth  = self.newWidth;\n\t\tvar newHeight = self.newHeight;\n\n\t\tif ( !self.contentLastPos ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewOffsetX = self.contentLastPos.left;\n\t\tnewOffsetY = self.contentLastPos.top;\n\n\t\treset = {\n\t\t   \ttop    : newOffsetY,\n\t\t   \tleft   : newOffsetX,\n\t\t   \twidth  : newWidth,\n\t\t   \theight : newHeight,\n\t\t\tscaleX : 1,\n\t\t\tscaleY : 1\n\t   };\n\n\t   // Reset scalex/scaleY values; this helps for perfomance and does not break animation\n\t   $.envirabox.setTranslate( self.$content, reset );\n\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\n\t\t\tself.instance.scaleToFit( 150 );\n\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\n\n\t\t} else {\n\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\n\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\n\t\t\t$.envirabox.setTranslate( self.content, $.envirabox.getTranslate( self.$content ) );\n\n\t\t\t$.envirabox.animate( self.$content, newPos, 150 );\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onTap = function(e) {\n\t\tvar self    = this;\n\t\tvar $target = $( e.target );\n\n\t\tvar instance = self.instance;\n\t\tvar current  = instance.current;\n\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\n\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\n\n\t\tvar where;\n\n\t\tvar process = function ( prefix ) {\n\n\t\t\tvar action = current.opts[ prefix ];\n\n\t\t\tif ( $.isFunction( action ) ) {\n\t\t\t\taction = action.apply( instance, [ current, e ] );\n\t\t\t}\n\n\t\t\tif ( !action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase \"close\" :\n\n\t\t\t\t\tinstance.close( self.startEvent );\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"toggleControls\" :\n\n\t\t\t\t\tinstance.toggleControls( true );\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"next\" :\n\n\t\t\t\t\tinstance.next();\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"nextOrClose\" :\n\n\t\t\t\t\tif ( instance.group.length > 1 ) {\n\t\t\t\t\t\tinstance.next();\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinstance.close( self.startEvent );\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"zoom\" :\n\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\n\n\t\t\t\t\t\tif ( instance.canPan() ) {\n\t\t\t\t\t\t\tinstance.scaleToFit();\n\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\n\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t};\n\n\t\t// Ignore right click\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if current slide is not in the center\n\t\tif ( instance.isSliding ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if clicked on the scrollbar\n\t\tif ( tapX > $target[0].clientWidth + $target.offset().left ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check where is clicked\n\t\tif ( $target.is( '.envirabox-bg,.envirabox-inner,.envirabox-outer,.envirabox-container' ) ) {\n\t\t\twhere = 'Outside';\n\n\t\t} else if ( $target.is( '.envirabox-slide' ) ) {\n\t\t\twhere = 'Slide';\n\n\t\t} else if  ( instance.current.$content && instance.current.$content.has( e.target ).length ) {\n\t\t \twhere = 'Content';\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if this is a double tap\n\t\tif ( self.tapped ) {\n\n\t\t\t// Stop previously created single tap\n\t\t\tclearTimeout( self.tapped );\n\t\t\tself.tapped = null;\n\n\t\t\t// Skip if distance between taps is too big\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 || instance.isSliding ) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// OK, now we assume that this is a double-tap\n\t\t\tprocess( 'dblclick' + where );\n\n\t\t} else {\n\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\n\t\t\t// or there is no need to wait for double-tap\n\t\t\tself.tapX = tapX;\n\t\t\tself.tapY = tapY;\n\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\n\t\t\t\tself.tapped = setTimeout(function() {\n\t\t\t\t\tself.tapped = null;\n\n\t\t\t\t\tprocess( 'click' + where );\n\n\t\t\t\t}, 300);\n\n\t\t\t} else {\n\t\t\t\tprocess( 'click' + where );\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t$(document).on('onActivate.fb', function (e, instance) {\n\t\tif ( instance && !instance.Guestures ) {\n\t\t\tinstance.Guestures = new Guestures( instance );\n\t\t}\n\t});\n\n\t$(document).on('beforeClose.fb', function (e, instance) {\n\t\tif ( instance && instance.Guestures ) {\n\t\t\tinstance.Guestures.destroy();\n\t\t}\n\t});\n\n\n}( window, document, window.jQuery || jQuery ));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-guestures.js","// ==========================================================================\n//\n// Thumbs\n// Displays thumbnails in a grid\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\tvar FancyThumbs = function( instance ) {\n\t\tthis.instance = instance;\n\t\tthis.init();\n\t};\n\n\t$.extend( FancyThumbs.prototype, {\n\n\t\t$button\t\t: null,\n\t\t$grid\t\t: null,\n\t\t$list\t\t: null,\n\t\tisVisible\t: false,\n\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tvar first  = self.instance.group[0],\n\t\t\t\tsecond = self.instance.group[1];\n\n\t\t\tself.$button = self.instance.$refs.toolbar.find( '[data-envirabox-thumbs]' );\n\n\t\t\tif ( self.instance.group.length > 1 && self.instance.group[ self.instance.currIndex ].opts.thumbs && (\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\n\t\t\t)) {\n\n\t\t\t\tself.$button.on('click', function() {\n\t\t\t\t\tself.toggle();\n\t\t\t\t});\n\n\t\t\t\tself.isActive = true;\n\n\t\t\t} else {\n\t\t\t\tself.$button.hide();\n\n\t\t\t\tself.isActive = false;\n\t\t\t}\n\n\t\t},\n\n\t\tcreate : function() {\n\t\t\tvar instance = this.instance,\n\t\t\t\tlist,\n\t\t\t\tsrc;\n\t\t\t\t\n\t\t\tthis.$grid = $('<div class=\"envirabox-thumbs envirabox-thumbs-'+instance.opts.thumbs.position+'\"></div>').appendTo( instance.$refs.container );\n\n\t\t\tlist = '<ul>';\n\n\t\t\t$.each(instance.group, function( i, item ) {\n\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr('src') : null );\n\n\t\t\t\tif ( !src && item.type === 'image' ) {\n\t\t\t\t\tsrc = item.src;\n\t\t\t\t}\n\n\t\t\t\tif ( src && src.length ) {\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"envirabox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tlist += '</ul>';\n\n\t\t\tthis.$list = $( list ).appendTo( this.$grid ).on('click', 'li', function() {\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\n\t\t\t});\n\n\t\t\tthis.$list.find('img').hide().one('load', function() {\n\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'envirabox-thumbs-loading' ),\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\twidthRatio,\n\t\t\t\t\theightRatio;\n\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\n\t\t\t\theight = this.naturalHeight\t|| this.height;\n\n\t\t\t\t// Calculate thumbnail width/height and center it\n\n\t\t\t\twidthRatio  = width  / thumbWidth;\n\t\t\t\theightRatio = height / thumbHeight;\n\n\t\t\t\tif ( widthRatio >= 1 && heightRatio >= 1 ) {\n\t\t\t\t\tif (widthRatio > heightRatio) {\n\t\t\t\t\t\twidth  = width / heightRatio;\n\t\t\t\t\t\theight = thumbHeight;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidth  = thumbWidth;\n\t\t\t\t\t\theight = height / widthRatio;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).css({\n\t\t\t\t\twidth         : Math.floor(width),\n\t\t\t\t\theight        : Math.floor(height),\n\t\t\t\t\t'margin-top'  : Math.min( 0, Math.floor(thumbHeight * 0.3 - height * 0.3 ) ),\n\t\t\t\t\t'margin-left' : Math.min( 0, Math.floor(thumbWidth  * 0.5 - width  * 0.5 ) )\n\t\t\t\t}).show();\n\n\t\t\t})\n\t\t\t.each(function() {\n\t\t\t\tthis.src = $( this ).data( 'src' );\n\t\t\t});\n\n\t\t},\n\n\t\tfocus : function() {\n\n\t\t\tif ( this.instance.current ) {\n\t\t\t\tthis.$list\n\t\t\t\t\t.children()\n\t\t\t\t\t.removeClass( 'envirabox-thumbs-active' )\n\t\t\t\t\t.filter( '[data-index=\"' + this.instance.current.index  + '\"]' )\n\t\t\t\t\t.addClass( 'envirabox-thumbs-active' )\n\t\t\t\t\t.focus();\n\t\t\t}\n\n\t\t},\n\n\t\tclose : function() {\n\t\t\tthis.$grid.hide();\n\t\t},\n\n\t\tupdate : function() {\n\n\t\t\tthis.instance.$refs.container.toggleClass( 'envirabox-show-thumbs', this.isVisible );\n\n\t\t\tif ( this.isVisible ) {\n\n\t\t\t\tif ( !this.$grid ) {\n\t\t\t\t\tthis.create();\n\t\t\t\t}\n\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\n\n\t\t\t\tthis.focus();\n\n\t\t\t} else if ( this.$grid ) {\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\n\t\t\t}\n\n\t\t\t// Update content position\n\t\t\tthis.instance.update();\n\n\t\t},\n\n\t\thide : function() {\n\t\t\tthis.isVisible = false;\n\t\t\tthis.update();\n\t\t},\n\n\t\tshow : function() {\n\t\t\tthis.isVisible = true;\n\t\t\tthis.update();\n\t\t},\n\n\t\ttoggle : function() {\n\t\t\tthis.isVisible = !this.isVisible;\n\t\t\tthis.update();\n\t\t}\n\n\t});\n\n\t$(document).on({\n\n\t\t'onInit.fb' : function(e, instance) {\n\t\t\tif ( instance && !instance.Thumbs ) {\n\t\t\t\tinstance.Thumbs = new FancyThumbs( instance );\n\t\t\t}\n\t\t},\n\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\tif ( !Thumbs || !Thumbs.isActive ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( item.modal ) {\n\t\t\t\tThumbs.$button.hide();\n\n\t\t\t\tThumbs.hide();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( firstRun && item.opts.thumbs.autoStart === true ) {\n\t\t\t\tThumbs.show();\n\t\t\t}\n\n\t\t\tif ( Thumbs.isVisible ) {\n\t\t\t\tThumbs.focus();\n\t\t\t}\n\t\t},\n\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\t// \"G\"\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tThumbs.toggle();\n\t\t\t}\n\t\t},\n\n\t\t'beforeClose.fb' : function( e, instance ) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\tif ( Thumbs && Thumbs.isVisible && instance.opts.thumbs.hideOnClose !== false ) {\n\t\t\t\tThumbs.close();\n\t\t\t}\n\t\t}\n\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-thumbs.js","// ==========================================================================\n//\n// SlideShow\n// Enables slideshow functionality\n//\n// Example of usage:\n// $.envirabox.getInstance().SlideShow.start()\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\tvar SlideShow = function( instance ) {\n\t\tthis.instance = instance;\n\t\tthis.init();\n\t};\n\n\t$.extend( SlideShow.prototype, {\n\t\ttimer    : null,\n\t\tisActive : false,\n\t\t$button  : null,\n\t\tspeed    : 3000,\n\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-envirabox-play]').on('click', function() {\n\t\t\t\tself.toggle();\n\t\t\t});\n\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\n\t\t\t\tself.$button.hide();\n\t\t\t}\n\t\t},\n\n\t\tset : function() {\n\t\t\tvar self = this;\n\n\t\t\t// Check if reached last element\n\t\t\tif ( self.instance && self.instance.current && (self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\n\t\t\t\tself.timer = setTimeout(function() {\n\t\t\t\t\tself.instance.next();\n\n\t\t\t\t}, self.instance.current.opts.slideShow.speed || self.speed);\n\n\t\t\t} else {\n\t\t\t\tself.stop();\n\t\t\t\tself.instance.idleSecondsCounter = 0;\n\t\t\t\tself.instance.showControls();\n\t\t\t}\n\n\t\t},\n\n\t\tclear : function() {\n\t\t\tvar self = this;\n\n\t\t\tclearTimeout( self.timer );\n\n\t\t\tself.timer = null;\n\t\t},\n\n\t\tstart : function() {\n\t\t\tvar self = this;\n\t\t\tvar current = self.instance.current;\n\n\t\t\tif ( self.instance && current && ( current.opts.loop || current.index < self.instance.group.length - 1 )) {\n\n\t\t\t\tself.isActive = true;\n\n\t\t\t\tself.$button\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\n\t\t\t\t\t.addClass( 'envirabox-button--pause' );\n\t\t\t\tself.$button.parent().addClass( 'envirabox-button--pause' );\n\t\t\t\tif ( current.isComplete ) {\n\t\t\t\t\tself.set();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tstop : function() {\n\t\t\tvar self = this;\n\t\t\tvar current = self.instance.current;\n\n\t\t\tself.clear();\n\n\t\t\tself.$button\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\n\t\t\t\t.removeClass( 'envirabox-button--pause' );\n\t\t\t\tself.$button.parent().removeClass( 'envirabox-button--pause' );\n\n\t\t\tself.isActive = false;\n\t\t},\n\n\t\ttoggle : function() {\n\t\t\tvar self = this;\n\n\t\t\tif ( self.isActive ) {\n\t\t\t\tself.stop();\n\n\t\t\t} else {\n\t\t\t\tself.start();\n\t\t\t}\n\t\t}\n\n\t});\n\n\t$(document).on({\n\t\t'onInit.fb' : function(e, instance) {\n\t\t\tif ( instance && !instance.SlideShow ) {\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\n\t\t\t}\n\t\t},\n\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( firstRun ) {\n\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\n\t\t\t\t\tSlideShow.start();\n\t\t\t\t}\n\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\n\t\t\t\tSlideShow.clear();\n\t\t\t}\n\t\t},\n\n\t\t'afterShow.fb' : function(e, instance, current) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\n\t\t\t\tSlideShow.set();\n\t\t\t}\n\t\t},\n\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\t// \"P\" or Spacebar\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tSlideShow.toggle();\n\t\t\t}\n\t\t},\n\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( SlideShow ) {\n\t\t\t\tSlideShow.stop();\n\t\t\t}\n\t\t}\n\t});\n\n\t// Page Visibility API to pause slideshow when window is not active\n\t$(document).on(\"visibilitychange\", function() {\n\t\tvar instance  = $.envirabox.getInstance();\n\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\tif ( SlideShow && SlideShow.isActive ) {\n\t\t\tif ( document.hidden ) {\n\t\t\t\tSlideShow.clear();\n\n\t\t\t} else {\n\t\t\t\tSlideShow.set();\n\t\t\t}\n\t\t}\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-slideshow.js","import enviraLazy from './lib/enviraLazy.js';\n\nclass Envira {\n\n\t/**\n\t * Constructor function for Envira.\n\t *\n\t * @since 1.7.1\n\t */\n\tconstructor( id, data, images, lightbox) {\n\n\t\tvar self = this;\n\n\t\t//Setup our Vars\n\t\tself.data = data;\n\t\tself.images = images;\n\t\tself.id = id;\n\t\tself.envirabox_config = lightbox;\n\n\t\t//Log if ENVIRA_DEBUG enabled\n\t\tself.log(self.data);\n\t\tself.log(self.images);\n\t\tself.log(self.envirabox_config);\n\t\tself.log(self.id);\n\n\t\t//self init\n\t\tself.init();\n\n\t}\n\n\t/**\n\t * Initizlize the proper scripts based on settings.\n\t *\n\t * @since 1.7.1\n\t */\n\tinit() {\n\n\t\tvar self = this;\n\n\t\t//Justified Gallery Setup\n\t\tif (self.get_config('columns') == 0) {\n\n\t\t\tself.justified();\n\t\n\t\t\tif (self.get_config('lazy_loading')) {\n\n\t\t\t\t$(document).on('envira_pagination_ajax_load_completed', function() {\n\n\t\t\t\t\t$('#envira-gallery-' + self.id).on('jg.complete', function(e) {\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tself.load_images();\n\t\t\t\t\t\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t\n\t\t\t\tself.load_images();\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif (self.get_config('justified_gallery_theme')) {\n\n\t\t\t\t//self.overlay_themes();\n\n\t\t\t}\n\n\t\t\t$(document).trigger('envira_gallery_api_justified', self.data);\n\n\t\t}\n\n\t\t//Lazy loading setup\n\t\tif ( self.get_config('lazy_loading') ) {\t\t\n\n\t\t\tself.load_images();\n\n\t\t\t$(window).scroll(function(e) {\n\n\t\t\t\tself.load_images();\n\n\t\t\t});\n\n\t\t}\n\n\t\t//Enviratope Setup\n\t\tif ( parseInt( self.get_config('columns') ) > 0 && self.get_config('isotope') ) {\n\t\t\t\n\t\t\tself.enviratopes();\n\t\t\t//Lazy loading setup\n\t\t\tif (self.get_config('lazy_loading')) {\n\t\n\t\t\t\t$( '#envira-gallery-' + self.id ).one('layoutComplete', function(e, laidOutItems) {\n\t\n\t\t\t\t\tself.load_images();\n\t\n\t\t\t\t});\n\t\t\t\t\t\n\t\t\t}\n\t\t} else if (  parseInt( self.get_config('columns') ) > 0) {\n\n\t\t\tself.load_images();\n\n\t\t}\n\n\t\t//Lightbox setup\n\t\tif (self.get_config('lightbox_enabled') || self.get_config('lightbox') ) {\n\n\t\t\tself.lightbox();\n\n\t\t}\n\n\t\t$(document).trigger('envira_gallery_api_init', self);\n\n\t}\n\n\t/**\n\t * LazyLoading\n\t *\n\t * @since 1.7.1\n\t */\n\tload_images() {\n\n\t\tconsole.log('fired');\n\n\t\tvar self = this;\n\n\t\tself.log('running: ' + '#envira-gallery-' + self.id );\n\n\t\tenviraLazy.run('#envira-gallery-' + self.id );\n\n\t\tif ( $('#envira-gallery-' + self.id).hasClass('enviratope') ) {\n\n\t\t\t$('#envira-gallery-' + self.id).enviraImagesLoaded()\n\t\t\t\t.done(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t})\n\t\t\t\t.progress(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t});\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tjustified() {\n\n\t\tvar self = this;\n\n\t\t$('#envira-gallery-' + self.id).enviraJustifiedGallery({\n\t\t\trowHeight: this.get_config('justified_row_height'),\n\t\t\tmaxRowHeight: -1,\n\t\t\twaitThumbnailsLoad: true,\n\t\t\tselector: '> div > div',\n\t\t\tlastRow: this.get_config('justified_last_row'),\n\t\t\tborder: 0,\n\t\t\tmargins: this.get_config('justified_margins'),\n\n\n\t\t});\n\n\t\t$(document).trigger('envira_gallery_api_start_justified', self );\n\n\t\t$('#envira-gallery-' + this.id).css('opacity', '1');\n\t\t$('.envira-gallery-item img').fadeTo('slow', this.get_config('css_opacity'));\n\n\t}\n\tjustified_norewind() {\n\n\t\t$('#envira-gallery-' + self.id).enviraJustifiedGallery('norewind');\n\n\t}\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tenviratopes() {\n\n\t\t\tvar self = this;\n\n\n\t\t\tvar envira_isotopes_config = {\n\n\t\t\t\titemSelector: '.envira-gallery-item',\n\t\t\t\tmasonry: {\n\t\t\t\t\tcolumnWidth: '.envira-gallery-item'\n\t\t\t\t}\n\n\t\t\t};\n\t\t\t$(document).trigger('envira_gallery_api_enviratope_config', self );\n\n\t\t\t// Initialize Isotope\n\t\t\t$('#envira-gallery-' + self.id).enviratope( envira_isotopes_config );\n\t\t\t// Re-layout Isotope when each image loads\n\t\t\t$('#envira-gallery-' + self.id).enviraImagesLoaded()\n\t\t\t\t.done(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t})\n\t\t\t\t.progress(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t});\n\n\t\t\t$(document).trigger('envira_gallery_api_enviratope', self);\n\n\t\t}\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tlightbox() {\n\n\t\tvar self            = this,\n\t\t\ttouch           = self.get_config('mobile_touchwipe') ? { vertical: true, momentum: true } : false,\n\t\t\tthumbs          = self.get_config('thumbnails') ? { autoStart: true, hideOnClose: true, position: self.get_lightbox_config('thumbs_position') } : false,\n\t\t\tslideshow       = self.get_config('slideshow') ? { autoStart: self.get_config('autoplay'),speed: self.get_config('ss_speed') } : false,\n\t\t\tfullscreen      = self.get_config('fullscreen') ? { autoStart: false } : false,\n\t\t\tlightbox_images = [];\t\t\n\t\t\tself.lightbox_options = {\n\t\t\t\tselector: \t\t\t'[data-envirabox=\"' + self.id + '\"]',\n\t\t\t\tloop: \t  \t\t\tself.get_config('loop'), // Enable infinite gallery navigation\n\t\t\t\tmargin:   \t\t\tself.get_lightbox_config('margins'), // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n\t\t\t\tgutter:   \t\t\tself.get_lightbox_config('gutter'), // Horizontal space between slides\n\t\t\t\tkeyboard: \t\t\tself.get_config('keyboard'), // Enable keyboard navigation\n\t\t\t\tarrows:   \t\t\tself.get_lightbox_config('arrows'), // Should display navigation arrows at the screen edges\n\t\t\t\tarrow_position:\t\tself.get_lightbox_config('arrow_position'),\n\t\t\t\tinfobar:  \t\t\tself.get_lightbox_config('infobar'), // Should display infobar (counter and arrows at the top)\n\t\t\t\ttoolbar:  \t\t\tself.get_lightbox_config('toolbar'), // Should display toolbar (buttons at the top)\n\t\t\t\tidleTime:  \t\t\t60, // Detect \"idle\" time in seconds\n\t\t\t\tsmallBtn: \t\t\tself.get_lightbox_config('show_smallbtn'), \n\t\t\t\tprotect:  \t\t\tfalse, // Disable right-click and use simple image protection for images\n\t\t\t\timage:              { preload: false },\n\t\t\t\tanimationEffect: \tself.get_config('lightbox_open_close_effect'),\n\t\t\t\tanimationDuration: \t366, // Duration in ms for open/close animation\n\t\t\t    btnTpl : {\n\t\t\t    \tsmallBtn   :\t\tself.get_lightbox_config('small_btn_template'),\n\t\t\t\t},\n\t\t\t\tzoomOpacity: \t\t'auto',\n\t\t\t\ttransitionEffect: \tself.get_config('effect'), // Transition effect between slides\n\t\t\t\ttransitionDuration: 200, // Duration in ms for transition animation\n\t\t\t\tbaseTpl: \t\t\tself.get_lightbox_config('base_template'), // Base template for layout\n\t\t\t\tspinnerTpl: \t\t'<div class=\"envirabox-loading\"></div>', // Loading indicator template\n\t\t\t\terrorTpl: \t\t\tself.get_lightbox_config('error_template'), // Error message template\n\t\t\t\tfullScreen: \t\tfullscreen,\n\t\t\t\ttouch: \t\t\t\ttouch, // Set `touch: false` to disable dragging/swiping\n\t\t\t\thash: \t\t\t\tfalse,\n\t\t\t\tinsideCap:\t\t\tself.get_lightbox_config('inner_caption'),\n\t\t\t    media : {\n\t\t\t        youtube : {\n\t\t\t            params : {\n\t\t\t                autoplay : 0\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\t\t\t\t\n\t\t\t    wheel: \t\t\t\tself.get_config('mousewheel') ? 'auto' : false,\n\t\t\t\tslideShow:          slideshow,\n\t\t\t\tthumbs: \t\t\tthumbs,\n\t\t\t\t// Callbacks\n\t\t\t\t//==========\n\t\t\t\tonInit: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$( document ).trigger( 'envirabox_api_on_init', [ self, instance, current ]  );\n\t\t\t\t},\n\n\t\t\t\tbeforeLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterLoad: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_after_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeShow: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_before_show', [ self, instance,  ]  );\n\n\t\t\t\t},\n\t\t\t\tafterShow: function(instance, current) {\n\t\t\t\t\tconsole.log(current);\n\t\t\t\t\tif ( prepend == undefined || prepend_cap == undefined){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar prepend     = false,\n\t\t\t\t\t\t\tprepend_cap = false;\t\n\t\t\t\t\t\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( prepend != true ){\n\t\t\t\t\t\t\n\t\t\t\t\t\t$('.envirabox-position-overlay').each(function(){\n\t\t\t\t\t\t\t$(this).prependTo( current.$content );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprepend = true;\n\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\n\t\t\t\t\tif( ! self.get_config('keyboard') ){\n\t\t\t\t\t\t$(window).on('keydown', function(e) {\n\t\t\t\t\t\t\tif([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {\n\t\t\t\t\t\t        e.preventDefault();\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t}, false);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_after_show', [ self, instance, current ] );\n\t\t\t\t\t\n\t\t\t\t},\n\n\t\t\t\tbeforeClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tonActivate: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_on_activate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\tonDeactivate: function( instance, current ) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_on_deactivate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\t// Clicked on the content\n\t\t\t\tclickContent: function( current, event ) {\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tclickSlide: 'toggleControls', // Clicked on the slide\n\t\t\t\tclickOutside: 'close', // Clicked on the background (backdrop) element\t\t\t\n\t\t\t};\n\t\t\n\t\t//Load from json object if load all images is ture\n\t\tif ( self.get_lightbox_config( 'load_all') ){\n\n\t\t\t$.each( self.images, function(i){\n\t\t\t\t\t\n\t\t\t\tlightbox_images.push( this );\n\t\t\t\t\n\t\t\t});\n\t\t\t\t\t\t\n\t\t\t$('.envira-gallery-' + self.id ).on( 'click', function(e){\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\t\n\t\t\t\tvar index = $(this).find('img').data('envira-index');\n\n\t\t\t\t$.envirabox.open( lightbox_images, self.lightbox_options, index );\n\t\t\t\t\n\t\t\t});\n\n\t\t} else {\n\n\t\t\t$('.envira-gallery-' + self.id ).envirabox( self.lightbox_options );\n\t\t\n\t\t}\n\t\t\n\t\t$(document).trigger('envirabox_lightbox_api', self );\n\n\t}\n\n\t/**\n\t * Get a config option based off of a key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_config(key) {\n\n\t\treturn this.data[key];\n\n\t}\n\n\t/**\n\t * Helper method to get config by key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_lightbox_config(key) {\n\n\t\treturn this.envirabox_config[key];\n\n\t}\n\n\t/**\n\t * Helper method to get image from id\n\t *\n\t * @since 1.7.1\n\t */\n\tget_image(id) {\n\n\t\treturn this.images[id];\n\n\t}\n\n\t/**\n\t * Helper method for logging if ENVIRA_DEBUG is true.\n\t *\n\t * @since 1.7.1\n\t */\n\tlog(log) {\n\n\t\t//Bail if debug or log is not set.\n\t\tif (envira_gallery.debug == undefined || !envira_gallery.debug || log == undefined) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tconsole.log(log);\n\n\t}\n\n}\n\nmodule.exports = Envira;\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-init.js","/*\n * Responsively Lazy\n * http://ivopetkov.com/b/lazy-load-responsive-images/\n * Copyright 2015-2016, Ivo Petkov\n * Free to use under the MIT license.\n */\nvar\tenviraLazy = (function () {\n    \n    var hasWebPSupport = false;\n    var windowWidth = null;\n    var windowHeight = null;\n    var justifiedReady = false;\n    var galleryClass = false;\n    var hasIntersectionObserverSupport = typeof IntersectionObserver !== 'undefined';\n\n    var isVisible = function (element) {\n\n        if (windowWidth === null) {\n\n            windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n            windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n            if (windowWidth === null) {\n                return false;\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n\n        var elementTop = rect.top;\n        var elementLeft = rect.left;\n        var elementWidth = rect.width;\n        var elementHeight = rect.height;\n        var test = elementTop < windowHeight && elementTop + elementHeight > 0 && elementLeft < windowWidth && elementLeft + elementWidth > 0;\n        \n        if ( test === false ) { \n        }\n        return test;\n    \n\n    };\n\n    jQuery.fn.exists = function(){return this.length>0;}\n\n    var updateElement = function (container, element) {\n        var options = element.getAttribute('data-envira-srcset');\n        if (options !== null) {\n            options = options.trim();\n            if (options.length > 0) {\n                options = options.split(',');\n                var temp = [];\n                var optionsCount = options.length;\n                for (var j = 0; j < optionsCount; j++) {\n                    var option = options[j].trim();\n                    if (option.length === 0) {\n                        continue;\n                    }\n                    var spaceIndex = option.lastIndexOf(' ');\n                    if (spaceIndex === -1) {\n                        var optionImage = option;\n                        var optionWidth = 999998;\n                    } else {\n                        var optionImage = option.substr(0, spaceIndex);\n                        var optionWidth = parseInt(option.substr(spaceIndex + 1, option.length - spaceIndex - 2), 10);\n                    }\n                    var add = false;\n                    if (optionImage.indexOf('.webp', optionImage.length - 5) !== -1) {\n                        if (hasWebPSupport) {\n                            add = true;\n                        }\n                    } else {\n                        add = true;\n                    }\n                    if (add) {\n                        temp.push([optionImage, optionWidth]);\n                    }\n                }\n                temp.sort(function (a, b) {\n                    if (a[1] < b[1]) {\n                        return -1;\n                    }\n                    if (a[1] > b[1]) {\n                        return 1;\n                    }\n                    if (a[1] === b[1]) {\n                        if (b[0].indexOf('.webp', b[0].length - 5) !== -1) {\n                            return 1;\n                        }\n                        if (a[0].indexOf('.webp', a[0].length - 5) !== -1) {\n                            return -1;\n                        }\n                    }\n                    return 0;\n                });\n                options = temp;\n            } else {\n                options = [];\n            }\n        } else {\n            options = [];\n        }\n\n        var containerWidth = container.offsetWidth * window.devicePixelRatio;\n\n        var bestSelectedOption = null;\n        var optionsCount = options.length;\n        for (var j = 0; j < optionsCount; j++) {\n            var optionData = options[j];\n            if (optionData[1] >= containerWidth) {\n                bestSelectedOption = optionData;\n                break;\n            } else {\n\n            }\n        }\n\n        if (bestSelectedOption === null) {\n            bestSelectedOption = [element.getAttribute('data-envira-src'), 999999];\n        }\n\n        if (typeof container.lastSetOption === 'undefined') {\n            container.lastSetOption = ['', 0];\n        }\n        if (container.lastSetOption[1] < bestSelectedOption[1]) {\n            var fireEvent = container.lastSetOption[1] === 0;\n            var url = bestSelectedOption[0];\n            var image = new Image();\n            image.addEventListener('load', function () {\n                element.setAttribute('srcset', url);\n                element.setAttribute('src', url);\n                if (fireEvent) {\n                    var handler = container.getAttribute('data-onlazyload');\n                    if (handler !== null) {\n                        (new Function(handler).bind(container))();\n                    }\n                }\n            }, false);\n            image.addEventListener('error', function () {\n                container.lastSetOption = ['', 0];\n            }, false);\n\n            image.onload = function () {\n\n                if ( container.getAttribute('class') == 'envira-lazy' ) {\n                    // this is a legacy layout\n                    var the_image = container.firstElementChild;\n                    var the_container = container;\n                    var image_id = the_image.id;\n                    var image_src = the_image.src;\n                    var gallery_id = jQuery(the_image).data('envira-gallery-id');\n                    var naturalWidth = this.naturalWidth;\n                    var naturalHeight = this.naturalHeight;\n                } else {\n                    // we are going with the automatic\n                    var the_image = image;\n                    var the_container = container;\n                    var image_id = container.id;\n                    var image_src = container.src;\n                    var gallery_id = jQuery(the_image).data('envira-gallery-id');\n                    var naturalWidth = this.naturalWidth;\n                    var naturalHeight = this.naturalHeight;\n                }\n\n                /* type check */\n\n                if ( gallery_id === undefined || gallery_id === null ) {\n                    gallery_id = 0;\n                }\n\n                jQuery( document ).trigger( {\n                    type:           'envira_image_lazy_load_complete',\n                    container:      the_container,\n                    image_src:      image_src,\n                    image_id:       image_id,\n                    gallery_id:     gallery_id,\n                    naturalWidth:   naturalWidth,\n                    naturalHeight:  naturalHeight,\n                } );\n\n            }\n            image.onerror = function () {\n               console.error(\"Cannot load image\");\n               //do something else...\n            }\n\n            image.src = null;\n            image.src = url;\n\n            container.lastSetOption = bestSelectedOption;\n\n        }\n    };\n\n    var updateWindowSize = function () {\n\n        windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n        windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n    };\n\n    var setGalleryClass = function ( theClass ) {\n        galleryClass = theClass;\n        alert ('setting - ' + galleryClass);\n    }\n\n    var run = function ( galleryClass ) {\n\n        if ( typeof galleryClass === 'undefined' ) {\n            return;\n        }\n\n        var update = function (elements, unknownHeight) {\n            var elementsCount = elements.length;\n            for (var i = 0; i < elementsCount; i++) {\n                var element = elements[i];\n                var container = unknownHeight ? element : element.parentNode;\n                if ( isVisible(container) === true ) {\n                    updateElement(container, element);\n                }\n            }\n        };\n        if ( galleryClass ) {\n\t        \n            if ( typeof galleryClass !== 'string' ) {\n            \n                return;\n            \n            }\n\n            if ( envira_gallery.ll_delay === 'undefined' || envira_gallery.ll_initial === false || envira_gallery.ll_initial === 'undefined' ) {\n            \n                /* if we can't locate these vars, at least define the delay - there is no delay, super fast */\n                envira_gallery.ll_delay = 0;\n            \n            }\n\n\n            var myVar = setTimeout(function () {\n                \n                if ( jQuery( galleryClass + ' div.envira-lazy > img').exists() ) {\n                    // alert('1');\n                    update(document.querySelectorAll(galleryClass + ' div.envira-lazy > img'), false);\n                } else if ( jQuery(  galleryClass + ' img.envira-lazy').exists() ) {\n                    // alert('2');\n                    update(document.querySelectorAll(galleryClass + ' img.envira-lazy'), true);\n                }\n\n                envira_gallery.ll_initial == true; // ok, we did the initial load so now delay can happen\n\n            }, envira_gallery.ll_delay );\n            \n\n            \n\n        }\n        //update(document.querySelectorAll('img.envira-lazy'), true);\n    };\n\n    if ('srcset' in document.createElement('img') && typeof window.devicePixelRatio !== 'undefined' && typeof window.addEventListener !== 'undefined' && typeof document.querySelectorAll !== 'undefined') {\n\n        updateWindowSize();\n\n        var image = new Image();\n        image.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=';\n        image.onload = image.onerror = function () {\n            hasWebPSupport = image.width === 2;\n            if (hasIntersectionObserverSupport) {\n\n                var updateIntersectionObservers = function () {\n                    var elements = document.querySelectorAll('.envira-lazy');\n                    var elementsCount = elements.length;\n                    for (var i = 0; i < elementsCount; i++) {\n                        var element = elements[i];\n                        if (typeof element.responsivelyLazyObserverAttached === 'undefined') {\n                            element.responsivelyLazyObserverAttached = true;\n                            intersectionObserver.observe(element);\n                        }\n                    }\n                };\n\n                var intersectionObserver = new IntersectionObserver(function (entries) {\n                    for (var i in entries) {\n                        var entry = entries[i];\n                        if (entry.intersectionRatio > 0) {\n                            var target = entry.target;\n                            if (target.tagName.toLowerCase() !== 'img') {\n                                var img = target.querySelector('img');\n                                if (img !== null) {\n                                    updateElement(target, img);\n                                }\n                            } else {\n                                updateElement(target, target);\n                            }\n                        }\n                    }\n                });\n\n                run();\n\n            } else {\n\n                var requestAnimationFrameFunction = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n\n                var hasChange = true;\n                var runIfHasChange = function () {\n                    if ( hasChange ) {\n                        hasChange = false;\n                        // run();\n                    }\n                    requestAnimationFrameFunction.call(null, runIfHasChange);\n                };\n\n\n\n                var setChanged = function () {\n                    hasChange = true;\n                    runIfHasChange();\n                };\n\n                var updateParentNodesScrollListeners = function () {\n                    var elements = document.querySelectorAll('.envira-lazy');\n                    var elementsCount = elements.length;\n                    for (var i = 0; i < elementsCount; i++) {\n                        var parentNode = elements[i].parentNode;\n                        while (parentNode && parentNode.tagName.toLowerCase() !== 'html') {\n                            if (typeof parentNode.responsivelyLazyScrollAttached === 'undefined') {\n                                parentNode.responsivelyLazyScrollAttached = true;\n                                parentNode.addEventListener('scroll', setChanged);\n                            }\n                            parentNode = parentNode.parentNode;\n                        }\n                    }\n                };\n\n                //runIfHasChange();\n\n            }\n\n            var attachEvents = function () {\n                if (hasIntersectionObserverSupport) {\n                    var resizeTimeout = null;\n                }\n                window.addEventListener('resize', function () {\n                    updateWindowSize();\n                    if (hasIntersectionObserverSupport) {\n                        window.clearTimeout(resizeTimeout);\n                        resizeTimeout = window.setTimeout(function () {\n                            run();\n                        }, 300);\n                    } else {\n                        setChanged();\n                    }\n                });\n                if (hasIntersectionObserverSupport) {\n                    window.addEventListener('load', run);\n                    updateIntersectionObservers();\n                } else {\n                    window.addEventListener('scroll', setChanged);\n                    window.addEventListener('load', setChanged);\n                    updateParentNodesScrollListeners();\n                }\n                if (typeof MutationObserver !== 'undefined') {\n                    var observer = new MutationObserver(function () {\n                        if (hasIntersectionObserverSupport) {\n                            updateIntersectionObservers();\n                            run();\n                        } else {\n                            updateParentNodesScrollListeners();\n                            setChanged();\n                        }\n                    });\n                    observer.observe(document.querySelector('body'), {childList: true, subtree: true});\n                }\n            };\n\n            if (document.readyState === 'loading') {\n                document.addEventListener('DOMContentLoaded', attachEvents);\n            } else {\n                attachEvents();\n            }\n        };\n    }\n\n    return {\n        'run': run,\n        'isVisible': isVisible,\n        'setGalleryClass': setGalleryClass\n    };\n\n}());\nwindow.enviraLazy = enviraLazy;\n\nmodule.exports = enviraLazy;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviraLazy.js","class Envira_Link {\n\n    constructor( data, images, lightbox) {\n\n        var self = this;\n\t\t\n\t\t//Setup our Vars\n\t\tself.data = data;\n\t\tself.images = images;\n\t\tself.id = this.get_config('gallery_id');\n\t\tself.envirabox_config = lightbox;\n\t\t\n\t\t//Log if ENVIRA_DEBUG enabled\n\t\tself.log(self.data);\n\t\tself.log(self.images);\n\t\tself.log(self.envirabox_config);\n\t\tself.log(self.id);\n\t\t\n        self.init();\n\n    }\n\n    init() {\n\t\t\n\t\tvar self = this;\n\t\t\n\t\tself.lightbox();\n\t\t\n    }\n\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tlightbox() {\n\n\t\tvar self            = this,\n\t\t\ttouch           = self.get_config('mobile_touchwipe') ? { vertical: true, momentum: true } : false,\n\t\t\tthumbs          = self.get_config('thumbnails') ? { autoStart: true, hideOnClose: true, position: self.get_lightbox_config('thumbs_position') } : false,\n\t\t\tslideshow       = self.get_config('slideshow') ? { autoStart: self.get_config('autoplay'),speed: self.get_config('ss_speed') } : false,\n\t\t\tfullscreen      = self.get_config('fullscreen') ? { autoStart: false } : false,\n\t\t\tlightbox_images = [];\n\t\t\t\n\t\t\tself.lightbox_options = {\n\t\t\t\tselector: \t\t\t'[data-envirabox=\"' + self.id + '\"]',\n\t\t\t\tloop: \t  \t\t\tself.get_config('loop'), // Enable infinite gallery navigation\n\t\t\t\tmargin:   \t\t\tself.get_lightbox_config('margins'), // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n\t\t\t\tgutter:   \t\t\tself.get_lightbox_config('gutter'), // Horizontal space between slides\n\t\t\t\tkeyboard: \t\t\tself.get_config('keyboard'), // Enable keyboard navigation\n\t\t\t\tarrows:   \t\t\tself.get_lightbox_config('arrows'), // Should display navigation arrows at the screen edges\n\t\t\t\tarrow_position:\t\tself.get_lightbox_config('arrow_position'),\n\t\t\t\tinfobar:  \t\t\tself.get_lightbox_config('infobar'), // Should display infobar (counter and arrows at the top)\n\t\t\t\ttoolbar:  \t\t\tself.get_lightbox_config('toolbar'), // Should display toolbar (buttons at the top)\n\t\t\t\tidleTime:  \t\t\t60, // Detect \"idle\" time in seconds\n\t\t\t\tsmallBtn: \t\t\tself.get_lightbox_config('show_smallbtn'), \n\t\t\t\tprotect:  \t\t\tfalse, // Disable right-click and use simple image protection for images\n\t\t\t\timage:              { preload: false },\n\t\t\t\tanimationEffect: \tself.get_config('lightbox_open_close_effect'),\n\t\t\t\tanimationDuration: \t366, // Duration in ms for open/close animation\n\t\t\t    btnTpl : {\n\t\t\t    \tsmallBtn   :\t\tself.get_lightbox_config('small_btn_template'),\n\t\t\t\t},\n\t\t\t\tzoomOpacity: \t\t'auto',\n\t\t\t\ttransitionEffect: \tself.get_config('effect'), // Transition effect between slides\n\t\t\t\ttransitionDuration: 200, // Duration in ms for transition animation\n\t\t\t\tbaseTpl: \t\t\tself.get_lightbox_config('base_template'), // Base template for layout\n\t\t\t\tspinnerTpl: \t\t'<div class=\"envirabox-loading\"></div>', // Loading indicator template\n\t\t\t\terrorTpl: \t\t\tself.get_lightbox_config('error_template'), // Error message template\n\t\t\t\tfullScreen: \t\tfullscreen,\n\t\t\t\ttouch: \t\t\t\ttouch, // Set `touch: false` to disable dragging/swiping\n\t\t\t\thash: \t\t\t\tfalse,\n\t\t\t\tinsideCap:\t\t\tself.get_lightbox_config('inner_caption'),\n\t\t\t    media : {\n\t\t\t        youtube : {\n\t\t\t            params : {\n\t\t\t                autoplay : 0\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\t\t\t\t\n\t\t\t    wheel: \t\t\t\tself.get_config('mousewheel') ? 'auto' : false,\n\t\t\t\tslideShow:          slideshow,\n\t\t\t\tthumbs: \t\t\tthumbs,\n\t\t\t\t// Callbacks\n\t\t\t\t//==========\n\t\t\t\tonInit: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$( document ).trigger( 'envirabox_api_on_init', [ self, instance, current ]  );\n\t\t\t\t},\n\n\t\t\t\tbeforeLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterLoad: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_after_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeShow: function(instance, current) {\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_before_show', [ self, instance,  ]  );\n\n\t\t\t\t},\n\t\t\t\tafterShow: function(instance, current) {\n\t\t\t\t\tconsole.log(current);\n\t\t\t\t\tif ( prepend == undefined || prepend_cap == undefined){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar prepend     = false,\n\t\t\t\t\t\t\tprepend_cap = false;\t\n\t\t\t\t\t\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( prepend != true ){\n\t\t\t\t\t\t\n\t\t\t\t\t\t$('.envirabox-position-overlay').each(function(){\n\t\t\t\t\t\t\t$(this).prependTo( current.$content );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprepend = true;\n\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\n\t\t\t\t\tif( ! self.get_config('keyboard') ){\n\t\t\t\t\t\t$(window).on('keydown', function(e) {\n\t\t\t\t\t\t\tif([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {\n\t\t\t\t\t\t        e.preventDefault();\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t}, false);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$(document).trigger('envirabox_api_after_show', [ self, instance, current ] );\n\t\t\t\t\t\n\t\t\t\t},\n\n\t\t\t\tbeforeClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tonActivate: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_on_activate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\tonDeactivate: function( instance, current ) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_on_deactivate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\t// Clicked on the content\n\t\t\t\tclickContent: function( current, event ) {\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tclickSlide: 'toggleControls', // Clicked on the slide\n\t\t\t\tclickOutside: 'close', // Clicked on the background (backdrop) element\t\t\t\n\t\t\t};\n\n\t\t$(document).trigger( 'envirabox_options', self );\n\t\t\t\t\n\t\t$.each( self.images, function(i){\n\t\t\t\t\n\t\t\tlightbox_images.push( this );\n\t\t\t\n\t\t});\n\n\t\t$('#envira-links-' + self.id ).on( 'click', function(e){\n\t\t\t\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\t$.envirabox.open( lightbox_images, self.lightbox_options );\n\t\t\t\n\t\t});\n\n\t}\n\n\t/**\n\t * Get a config option based off of a key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_config(key) {\n\n\t\tvar self = this;\n\n\t\treturn self.data[key];\n\n\t}\n\n\t/**\n\t * Helper method to get config by key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_lightbox_config(key) {\n\n\t\tvar self = this;\n\n\t\treturn self.envirabox_config[key];\n\n\t}\n\n\t/**\n\t * Helper method to get image from id\n\t *\n\t * @since 1.7.1\n\t */\n\tget_image(id) {\n\n\t\tvar self = this;\n\n\t\treturn self.images[id];\n\n\t}\n\n\t/**\n\t * Helper method for logging if ENVIRA_DEBUG is true.\n\t *\n\t * @since 1.7.1\n\t */\n\tlog(log) {\n\n\t\t//Bail if debug or log is not set.\n\t\tif (envira_gallery.debug == undefined || !envira_gallery.debug || log == undefined) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tconsole.log(log);\n\n\t}\n\n}\n\nmodule.exports = Envira_Link;\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-link.js"],"sourceRoot":""}